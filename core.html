
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

    <title>core package &#8212; Library Simplified Circulation Manager  documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/alabaster.css" />
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="core.classifier package" href="core.classifier.html" />
    <link rel="prev" title="app module" href="app.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="core-package">
<h1>core package<a class="headerlink" href="#core-package" title="Permalink to this heading">¶</a></h1>
<section id="subpackages">
<h2>Subpackages<a class="headerlink" href="#subpackages" title="Permalink to this heading">¶</a></h2>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="core.classifier.html">core.classifier package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="core.classifier.html#submodules">Submodules</a></li>
<li class="toctree-l2"><a class="reference internal" href="core.classifier.html#module-core.classifier.age">core.classifier.age module</a></li>
<li class="toctree-l2"><a class="reference internal" href="core.classifier.html#module-core.classifier.bic">core.classifier.bic module</a></li>
<li class="toctree-l2"><a class="reference internal" href="core.classifier.html#module-core.classifier.bisac">core.classifier.bisac module</a></li>
<li class="toctree-l2"><a class="reference internal" href="core.classifier.html#module-core.classifier.ddc">core.classifier.ddc module</a></li>
<li class="toctree-l2"><a class="reference internal" href="core.classifier.html#module-core.classifier.gutenberg">core.classifier.gutenberg module</a></li>
<li class="toctree-l2"><a class="reference internal" href="core.classifier.html#module-core.classifier.keyword">core.classifier.keyword module</a></li>
<li class="toctree-l2"><a class="reference internal" href="core.classifier.html#module-core.classifier.lcc">core.classifier.lcc module</a></li>
<li class="toctree-l2"><a class="reference internal" href="core.classifier.html#module-core.classifier.overdrive">core.classifier.overdrive module</a></li>
<li class="toctree-l2"><a class="reference internal" href="core.classifier.html#module-core.classifier.rbdigital">core.classifier.rbdigital module</a></li>
<li class="toctree-l2"><a class="reference internal" href="core.classifier.html#module-core.classifier.simplified">core.classifier.simplified module</a></li>
<li class="toctree-l2"><a class="reference internal" href="core.classifier.html#module-core.classifier">Module contents</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="core.lcp.html">core.lcp package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="core.lcp.html#submodules">Submodules</a></li>
<li class="toctree-l2"><a class="reference internal" href="core.lcp.html#module-core.lcp.credential">core.lcp.credential module</a></li>
<li class="toctree-l2"><a class="reference internal" href="core.lcp.html#module-core.lcp.exceptions">core.lcp.exceptions module</a></li>
<li class="toctree-l2"><a class="reference internal" href="core.lcp.html#module-core.lcp">Module contents</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="core.model.html">core.model package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="core.model.html#submodules">Submodules</a></li>
<li class="toctree-l2"><a class="reference internal" href="core.model.html#module-core.model.admin">core.model.admin module</a></li>
<li class="toctree-l2"><a class="reference internal" href="core.model.html#module-core.model.cachedfeed">core.model.cachedfeed module</a></li>
<li class="toctree-l2"><a class="reference internal" href="core.model.html#module-core.model.circulationevent">core.model.circulationevent module</a></li>
<li class="toctree-l2"><a class="reference internal" href="core.model.html#module-core.model.classification">core.model.classification module</a></li>
<li class="toctree-l2"><a class="reference internal" href="core.model.html#module-core.model.collection">core.model.collection module</a></li>
<li class="toctree-l2"><a class="reference internal" href="core.model.html#module-core.model.complaint">core.model.complaint module</a></li>
<li class="toctree-l2"><a class="reference internal" href="core.model.html#module-core.model.configuration">core.model.configuration module</a></li>
<li class="toctree-l2"><a class="reference internal" href="core.model.html#module-core.model.constants">core.model.constants module</a></li>
<li class="toctree-l2"><a class="reference internal" href="core.model.html#module-core.model.contributor">core.model.contributor module</a></li>
<li class="toctree-l2"><a class="reference internal" href="core.model.html#module-core.model.coverage">core.model.coverage module</a></li>
<li class="toctree-l2"><a class="reference internal" href="core.model.html#module-core.model.credential">core.model.credential module</a></li>
<li class="toctree-l2"><a class="reference internal" href="core.model.html#module-core.model.customlist">core.model.customlist module</a></li>
<li class="toctree-l2"><a class="reference internal" href="core.model.html#module-core.model.datasource">core.model.datasource module</a></li>
<li class="toctree-l2"><a class="reference internal" href="core.model.html#module-core.model.edition">core.model.edition module</a></li>
<li class="toctree-l2"><a class="reference internal" href="core.model.html#module-core.model.hasfulltablecache">core.model.hasfulltablecache module</a></li>
<li class="toctree-l2"><a class="reference internal" href="core.model.html#module-core.model.identifier">core.model.identifier module</a></li>
<li class="toctree-l2"><a class="reference internal" href="core.model.html#module-core.model.integrationclient">core.model.integrationclient module</a></li>
<li class="toctree-l2"><a class="reference internal" href="core.model.html#module-core.model.library">core.model.library module</a></li>
<li class="toctree-l2"><a class="reference internal" href="core.model.html#module-core.model.licensing">core.model.licensing module</a></li>
<li class="toctree-l2"><a class="reference internal" href="core.model.html#module-core.model.listeners">core.model.listeners module</a></li>
<li class="toctree-l2"><a class="reference internal" href="core.model.html#module-core.model.measurement">core.model.measurement module</a></li>
<li class="toctree-l2"><a class="reference internal" href="core.model.html#module-core.model.patron">core.model.patron module</a></li>
<li class="toctree-l2"><a class="reference internal" href="core.model.html#module-core.model.resource">core.model.resource module</a></li>
<li class="toctree-l2"><a class="reference internal" href="core.model.html#module-core.model.work">core.model.work module</a></li>
<li class="toctree-l2"><a class="reference internal" href="core.model.html#module-core.model">Module contents</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="core.python_expression_dsl.html">core.python_expression_dsl package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="core.python_expression_dsl.html#submodules">Submodules</a></li>
<li class="toctree-l2"><a class="reference internal" href="core.python_expression_dsl.html#module-core.python_expression_dsl.ast">core.python_expression_dsl.ast module</a></li>
<li class="toctree-l2"><a class="reference internal" href="core.python_expression_dsl.html#module-core.python_expression_dsl.evaluator">core.python_expression_dsl.evaluator module</a></li>
<li class="toctree-l2"><a class="reference internal" href="core.python_expression_dsl.html#module-core.python_expression_dsl.parser">core.python_expression_dsl.parser module</a></li>
<li class="toctree-l2"><a class="reference internal" href="core.python_expression_dsl.html#module-core.python_expression_dsl">Module contents</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="core.resources.html">core.resources package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="core.resources.html#module-core.resources">Module contents</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="core.util.html">core.util package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="core.util.html#subpackages">Subpackages</a><ul>
<li class="toctree-l3"><a class="reference internal" href="core.util.webpub_manifest_parser.html">core.util.webpub_manifest_parser package</a><ul>
<li class="toctree-l4"><a class="reference internal" href="core.util.webpub_manifest_parser.html#subpackages">Subpackages</a></li>
<li class="toctree-l4"><a class="reference internal" href="core.util.webpub_manifest_parser.html#submodules">Submodules</a></li>
<li class="toctree-l4"><a class="reference internal" href="core.util.webpub_manifest_parser.html#module-core.util.webpub_manifest_parser.errors">core.util.webpub_manifest_parser.errors module</a></li>
<li class="toctree-l4"><a class="reference internal" href="core.util.webpub_manifest_parser.html#module-core.util.webpub_manifest_parser.utils">core.util.webpub_manifest_parser.utils module</a></li>
<li class="toctree-l4"><a class="reference internal" href="core.util.webpub_manifest_parser.html#module-core.util.webpub_manifest_parser">Module contents</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="core.util.html#submodules">Submodules</a></li>
<li class="toctree-l2"><a class="reference internal" href="core.util.html#module-core.util.accept_language">core.util.accept_language module</a></li>
<li class="toctree-l2"><a class="reference internal" href="core.util.html#module-core.util.authentication_for_opds">core.util.authentication_for_opds module</a></li>
<li class="toctree-l2"><a class="reference internal" href="core.util.html#module-core.util.datetime_helpers">core.util.datetime_helpers module</a></li>
<li class="toctree-l2"><a class="reference internal" href="core.util.html#module-core.util.epub">core.util.epub module</a></li>
<li class="toctree-l2"><a class="reference internal" href="core.util.html#module-core.util.flask_util">core.util.flask_util module</a></li>
<li class="toctree-l2"><a class="reference internal" href="core.util.html#module-core.util.http">core.util.http module</a></li>
<li class="toctree-l2"><a class="reference internal" href="core.util.html#module-core.util.languages">core.util.languages module</a></li>
<li class="toctree-l2"><a class="reference internal" href="core.util.html#module-core.util.median">core.util.median module</a></li>
<li class="toctree-l2"><a class="reference internal" href="core.util.html#module-core.util.opds_writer">core.util.opds_writer module</a></li>
<li class="toctree-l2"><a class="reference internal" href="core.util.html#module-core.util.permanent_work_id">core.util.permanent_work_id module</a></li>
<li class="toctree-l2"><a class="reference internal" href="core.util.html#module-core.util.personal_names">core.util.personal_names module</a></li>
<li class="toctree-l2"><a class="reference internal" href="core.util.html#module-core.util.problem_detail">core.util.problem_detail module</a></li>
<li class="toctree-l2"><a class="reference internal" href="core.util.html#module-core.util.stopwords">core.util.stopwords module</a></li>
<li class="toctree-l2"><a class="reference internal" href="core.util.html#module-core.util.string_helpers">core.util.string_helpers module</a></li>
<li class="toctree-l2"><a class="reference internal" href="core.util.html#module-core.util.summary">core.util.summary module</a></li>
<li class="toctree-l2"><a class="reference internal" href="core.util.html#module-core.util.titles">core.util.titles module</a></li>
<li class="toctree-l2"><a class="reference internal" href="core.util.html#module-core.util.web_publication_manifest">core.util.web_publication_manifest module</a></li>
<li class="toctree-l2"><a class="reference internal" href="core.util.html#module-core.util.worker_pools">core.util.worker_pools module</a></li>
<li class="toctree-l2"><a class="reference internal" href="core.util.html#module-core.util.xmlparser">core.util.xmlparser module</a></li>
<li class="toctree-l2"><a class="reference internal" href="core.util.html#module-core.util">Module contents</a></li>
</ul>
</li>
</ul>
</div>
</section>
<section id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this heading">¶</a></h2>
</section>
<section id="module-core.analytics">
<span id="core-analytics-module"></span><h2>core.analytics module<a class="headerlink" href="#module-core.analytics" title="Permalink to this heading">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="core.analytics.Analytics">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.analytics.</span></span><span class="sig-name descname"><span class="pre">Analytics</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/analytics.html#Analytics"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.analytics.Analytics" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<dl class="py attribute">
<dt class="sig sig-object py" id="core.analytics.Analytics.GLOBAL_ENABLED">
<span class="sig-name descname"><span class="pre">GLOBAL_ENABLED</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#core.analytics.Analytics.GLOBAL_ENABLED" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.analytics.Analytics.LIBRARY_ENABLED">
<span class="sig-name descname"><span class="pre">LIBRARY_ENABLED</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">{}</span></em><a class="headerlink" href="#core.analytics.Analytics.LIBRARY_ENABLED" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.analytics.Analytics.collect_event">
<span class="sig-name descname"><span class="pre">collect_event</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">library</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">license_pool</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">event_type</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">time</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/analytics.html#Analytics.collect_event"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.analytics.Analytics.collect_event" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.analytics.Analytics.is_configured">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">is_configured</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">library</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/analytics.html#Analytics.is_configured"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.analytics.Analytics.is_configured" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</section>
<section id="module-core.app_server">
<span id="core-app-server-module"></span><h2>core.app_server module<a class="headerlink" href="#module-core.app_server" title="Permalink to this heading">¶</a></h2>
<p>Implement logic common to more than one of the Simplified applications.</p>
<dl class="py class">
<dt class="sig sig-object py" id="core.app_server.ComplaintController">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.app_server.</span></span><span class="sig-name descname"><span class="pre">ComplaintController</span></span><a class="reference internal" href="_modules/core/app_server.html#ComplaintController"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.app_server.ComplaintController" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>A controller to register complaints against objects.</p>
<dl class="py method">
<dt class="sig sig-object py" id="core.app_server.ComplaintController.register">
<span class="sig-name descname"><span class="pre">register</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">license_pool</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">raw_data</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/app_server.html#ComplaintController.register"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.app_server.ComplaintController.register" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.app_server.ErrorHandler">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.app_server.</span></span><span class="sig-name descname"><span class="pre">ErrorHandler</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">app</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">debug</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/app_server.html#ErrorHandler"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.app_server.ErrorHandler" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<dl class="py method">
<dt class="sig sig-object py" id="core.app_server.ErrorHandler.handle">
<span class="sig-name descname"><span class="pre">handle</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">exception</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/app_server.html#ErrorHandler.handle"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.app_server.ErrorHandler.handle" title="Permalink to this definition">¶</a></dt>
<dd><p>Something very bad has happened. Notify the client.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.app_server.HeartbeatController">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.app_server.</span></span><span class="sig-name descname"><span class="pre">HeartbeatController</span></span><a class="reference internal" href="_modules/core/app_server.html#HeartbeatController"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.app_server.HeartbeatController" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<dl class="py attribute">
<dt class="sig sig-object py" id="core.app_server.HeartbeatController.HEALTH_CHECK_TYPE">
<span class="sig-name descname"><span class="pre">HEALTH_CHECK_TYPE</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'application/vnd.health+json'</span></em><a class="headerlink" href="#core.app_server.HeartbeatController.HEALTH_CHECK_TYPE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.app_server.HeartbeatController.VERSION_FILENAME">
<span class="sig-name descname"><span class="pre">VERSION_FILENAME</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'.version'</span></em><a class="headerlink" href="#core.app_server.HeartbeatController.VERSION_FILENAME" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.app_server.HeartbeatController.heartbeat">
<span class="sig-name descname"><span class="pre">heartbeat</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">conf_class</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/app_server.html#HeartbeatController.heartbeat"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.app_server.HeartbeatController.heartbeat" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.app_server.URNLookupController">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.app_server.</span></span><span class="sig-name descname"><span class="pre">URNLookupController</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/app_server.html#URNLookupController"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.app_server.URNLookupController" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>A controller for looking up OPDS entries for specific books,
identified in terms of their Identifier URNs.</p>
<dl class="py method">
<dt class="sig sig-object py" id="core.app_server.URNLookupController.permalink">
<span class="sig-name descname"><span class="pre">permalink</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">urn</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">annotator</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">route_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'work'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/app_server.html#URNLookupController.permalink"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.app_server.URNLookupController.permalink" title="Permalink to this definition">¶</a></dt>
<dd><p>Look up a single identifier and generate an OPDS feed.</p>
<p>TODO: This method is tested, but it seems unused and it
should be possible to remove it.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.app_server.URNLookupController.process_urns">
<span class="sig-name descname"><span class="pre">process_urns</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">urns</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">process_urn_kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/app_server.html#URNLookupController.process_urns"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.app_server.URNLookupController.process_urns" title="Permalink to this definition">¶</a></dt>
<dd><p>Process a number of URNs by instantiating a URNLookupHandler
and having it do the work.</p>
<p>The information gathered by the URNLookupHandler can be used
by the caller to generate an OPDS feed.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>A URNLookupHandler, or a ProblemDetail if
there’s a problem with the request.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.app_server.URNLookupController.work_lookup">
<span class="sig-name descname"><span class="pre">work_lookup</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">annotator</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">route_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'lookup'</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">process_urn_kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/app_server.html#URNLookupController.work_lookup"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.app_server.URNLookupController.work_lookup" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate an OPDS feed describing works identified by identifier.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.app_server.URNLookupHandler">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.app_server.</span></span><span class="sig-name descname"><span class="pre">URNLookupHandler</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/app_server.html#URNLookupHandler"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.app_server.URNLookupHandler" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>A helper for URNLookupController that takes URNs as input and looks
up their OPDS entries.</p>
<p>This is a separate class from URNLookupController because
URNLookupController is designed to not keep state.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="core.app_server.URNLookupHandler.UNRECOGNIZED_IDENTIFIER">
<span class="sig-name descname"><span class="pre">UNRECOGNIZED_IDENTIFIER</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'This</span> <span class="pre">work</span> <span class="pre">is</span> <span class="pre">not</span> <span class="pre">in</span> <span class="pre">the</span> <span class="pre">collection.'</span></em><a class="headerlink" href="#core.app_server.URNLookupHandler.UNRECOGNIZED_IDENTIFIER" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.app_server.URNLookupHandler.WORK_NOT_CREATED">
<span class="sig-name descname"><span class="pre">WORK_NOT_CREATED</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'Identifier</span> <span class="pre">resolved</span> <span class="pre">but</span> <span class="pre">work</span> <span class="pre">not</span> <span class="pre">yet</span> <span class="pre">created.'</span></em><a class="headerlink" href="#core.app_server.URNLookupHandler.WORK_NOT_CREATED" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.app_server.URNLookupHandler.WORK_NOT_PRESENTATION_READY">
<span class="sig-name descname"><span class="pre">WORK_NOT_PRESENTATION_READY</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'Work</span> <span class="pre">created</span> <span class="pre">but</span> <span class="pre">not</span> <span class="pre">yet</span> <span class="pre">presentation-ready.'</span></em><a class="headerlink" href="#core.app_server.URNLookupHandler.WORK_NOT_PRESENTATION_READY" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.app_server.URNLookupHandler.add_entry">
<span class="sig-name descname"><span class="pre">add_entry</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">entry</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/app_server.html#URNLookupHandler.add_entry"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.app_server.URNLookupHandler.add_entry" title="Permalink to this definition">¶</a></dt>
<dd><p>An identifier lookup succeeded in creating an OPDS entry.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.app_server.URNLookupHandler.add_message">
<span class="sig-name descname"><span class="pre">add_message</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">urn</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">status_code</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">message</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/app_server.html#URNLookupHandler.add_message"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.app_server.URNLookupHandler.add_message" title="Permalink to this definition">¶</a></dt>
<dd><p>An identifier lookup resulted in the creation of a message.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.app_server.URNLookupHandler.add_urn_failure_messages">
<span class="sig-name descname"><span class="pre">add_urn_failure_messages</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">failures</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/app_server.html#URNLookupHandler.add_urn_failure_messages"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.app_server.URNLookupHandler.add_urn_failure_messages" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.app_server.URNLookupHandler.add_work">
<span class="sig-name descname"><span class="pre">add_work</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">identifier</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">work</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/app_server.html#URNLookupHandler.add_work"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.app_server.URNLookupHandler.add_work" title="Permalink to this definition">¶</a></dt>
<dd><p>An identifier lookup succeeded in finding a Work.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.app_server.URNLookupHandler.post_lookup_hook">
<span class="sig-name descname"><span class="pre">post_lookup_hook</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/app_server.html#URNLookupHandler.post_lookup_hook"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.app_server.URNLookupHandler.post_lookup_hook" title="Permalink to this definition">¶</a></dt>
<dd><p>Run after looking up a number of Identifiers.</p>
<p>By default, does nothing.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.app_server.URNLookupHandler.process_identifier">
<span class="sig-name descname"><span class="pre">process_identifier</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">identifier</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">urn</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/app_server.html#URNLookupHandler.process_identifier"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.app_server.URNLookupHandler.process_identifier" title="Permalink to this definition">¶</a></dt>
<dd><p>Turn a URN into a Work suitable for use in an OPDS feed.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.app_server.URNLookupHandler.process_urns">
<span class="sig-name descname"><span class="pre">process_urns</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">urns</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">process_urn_kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/app_server.html#URNLookupHandler.process_urns"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.app_server.URNLookupHandler.process_urns" title="Permalink to this definition">¶</a></dt>
<dd><p>Processes a list of URNs for a lookup request.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>None or, to override default feed behavior, a ProblemDetail
or Response.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="core.app_server.cdn_url_for">
<span class="sig-prename descclassname"><span class="pre">core.app_server.</span></span><span class="sig-name descname"><span class="pre">cdn_url_for</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/app_server.html#cdn_url_for"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.app_server.cdn_url_for" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="core.app_server.compressible">
<span class="sig-prename descclassname"><span class="pre">core.app_server.</span></span><span class="sig-name descname"><span class="pre">compressible</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">f</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/app_server.html#compressible"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.app_server.compressible" title="Permalink to this definition">¶</a></dt>
<dd><p>Decorate a function to make it transparently handle whatever
compression the client has announced it supports.</p>
<p>Currently the only form of compression supported is
representation-level gzip compression requested through the
Accept-Encoding header.</p>
<p>This code was modified from
<a class="reference external" href="http://kb.sites.apiit.edu.my/knowledge-base/how-to-gzip-response-in-flask/">http://kb.sites.apiit.edu.my/knowledge-base/how-to-gzip-response-in-flask/</a>,
though I don’t know if that’s the original source; it shows up in
a lot of places.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="core.app_server.load_facets_from_request">
<span class="sig-prename descclassname"><span class="pre">core.app_server.</span></span><span class="sig-name descname"><span class="pre">load_facets_from_request</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">facet_config=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">worklist=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">base_class=&lt;class</span> <span class="pre">'core.lane.Facets'&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">base_class_constructor_kwargs=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">default_entrypoint=None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/app_server.html#load_facets_from_request"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.app_server.load_facets_from_request" title="Permalink to this definition">¶</a></dt>
<dd><p>Figure out which faceting object this request is asking for.</p>
<p>The active request must have the <cite>library</cite> member set to a Library
object.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>worklist</strong> – The WorkList, if any, associated with the request.</p></li>
<li><p><strong>facet_config</strong> – An object containing the currently configured
facet groups, if different from the request library.</p></li>
<li><p><strong>base_class</strong> – The faceting class to instantiate.</p></li>
<li><p><strong>base_class_constructor_kwargs</strong> – Keyword arguments to pass into
the faceting class constructor, other than those obtained from
the request.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A faceting object if possible; otherwise a ProblemDetail.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="core.app_server.load_pagination_from_request">
<span class="sig-prename descclassname"><span class="pre">core.app_server.</span></span><span class="sig-name descname"><span class="pre">load_pagination_from_request</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">base_class=&lt;class</span> <span class="pre">'core.lane.Pagination'&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">base_class_constructor_kwargs=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">default_size=None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/app_server.html#load_pagination_from_request"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.app_server.load_pagination_from_request" title="Permalink to this definition">¶</a></dt>
<dd><p>Figure out which Pagination object this request is asking for.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>base_class</strong> – A subclass of Pagination to instantiate.</p></li>
<li><p><strong>base_class_constructor_kwargs</strong> – Extra keyword arguments to use
when instantiating the Pagination subclass.</p></li>
<li><p><strong>default_size</strong> – The default page size.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>An instance of <cite>base_class</cite>.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="core.app_server.returns_problem_detail">
<span class="sig-prename descclassname"><span class="pre">core.app_server.</span></span><span class="sig-name descname"><span class="pre">returns_problem_detail</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">f</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/app_server.html#returns_problem_detail"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.app_server.returns_problem_detail" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</section>
<section id="module-core.cdn">
<span id="core-cdn-module"></span><h2>core.cdn module<a class="headerlink" href="#module-core.cdn" title="Permalink to this heading">¶</a></h2>
<p>Turn local URLs into CDN URLs.</p>
<dl class="py function">
<dt class="sig sig-object py" id="core.cdn.cdnify">
<span class="sig-prename descclassname"><span class="pre">core.cdn.</span></span><span class="sig-name descname"><span class="pre">cdnify</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">url</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cdns</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/cdn.html#cdnify"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.cdn.cdnify" title="Permalink to this definition">¶</a></dt>
<dd><p>Turn local URLs into CDN URLs</p>
</dd></dl>

</section>
<section id="module-core.config">
<span id="core-config-module"></span><h2>core.config module<a class="headerlink" href="#module-core.config" title="Permalink to this heading">¶</a></h2>
<dl class="py exception">
<dt class="sig sig-object py" id="core.config.CannotLoadConfiguration">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.config.</span></span><span class="sig-name descname"><span class="pre">CannotLoadConfiguration</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">message</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">debug_message</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/config.html#CannotLoadConfiguration"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.config.CannotLoadConfiguration" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="core.util.html#core.util.http.IntegrationException" title="core.util.http.IntegrationException"><code class="xref py py-class docutils literal notranslate"><span class="pre">IntegrationException</span></code></a></p>
<p>The current configuration of an external integration, or of the
site as a whole, is in an incomplete or inconsistent state.</p>
<p>This is more specific than a base IntegrationException because it
assumes the problem is evident just by looking at the current
configuration, with no need to actually talk to the foreign
server.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.config.Configuration">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.config.</span></span><span class="sig-name descname"><span class="pre">Configuration</span></span><a class="reference internal" href="_modules/core/config.html#Configuration"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.config.Configuration" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.config.ConfigurationConstants" title="core.config.ConfigurationConstants"><code class="xref py py-class docutils literal notranslate"><span class="pre">ConfigurationConstants</span></code></a></p>
<dl class="py attribute">
<dt class="sig sig-object py" id="core.config.Configuration.ALLOW_HOLDS">
<span class="sig-name descname"><span class="pre">ALLOW_HOLDS</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'allow_holds'</span></em><a class="headerlink" href="#core.config.Configuration.ALLOW_HOLDS" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.config.Configuration.ANALYTICS_POLICY">
<span class="sig-name descname"><span class="pre">ANALYTICS_POLICY</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'analytics'</span></em><a class="headerlink" href="#core.config.Configuration.ANALYTICS_POLICY" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.config.Configuration.APP_VERSION">
<span class="sig-name descname"><span class="pre">APP_VERSION</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'app_version'</span></em><a class="headerlink" href="#core.config.Configuration.APP_VERSION" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.config.Configuration.AXIS_INTEGRATION">
<span class="sig-name descname"><span class="pre">AXIS_INTEGRATION</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'Axis</span> <span class="pre">360'</span></em><a class="headerlink" href="#core.config.Configuration.AXIS_INTEGRATION" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.config.Configuration.BASE_URL_KEY">
<span class="sig-name descname"><span class="pre">BASE_URL_KEY</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'base_url'</span></em><a class="headerlink" href="#core.config.Configuration.BASE_URL_KEY" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.config.Configuration.CDNS_LOADED_FROM_DATABASE">
<span class="sig-name descname"><span class="pre">CDNS_LOADED_FROM_DATABASE</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'loaded_from_database'</span></em><a class="headerlink" href="#core.config.Configuration.CDNS_LOADED_FROM_DATABASE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.config.Configuration.CDN_MIRRORED_DOMAIN_KEY">
<span class="sig-name descname"><span class="pre">CDN_MIRRORED_DOMAIN_KEY</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'mirrored_domain'</span></em><a class="headerlink" href="#core.config.Configuration.CDN_MIRRORED_DOMAIN_KEY" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.config.Configuration.CONTENT_SERVER_INTEGRATION">
<span class="sig-name descname"><span class="pre">CONTENT_SERVER_INTEGRATION</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'Content</span> <span class="pre">Server'</span></em><a class="headerlink" href="#core.config.Configuration.CONTENT_SERVER_INTEGRATION" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.config.Configuration.DATABASE_INTEGRATION">
<span class="sig-name descname"><span class="pre">DATABASE_INTEGRATION</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'Postgres'</span></em><a class="headerlink" href="#core.config.Configuration.DATABASE_INTEGRATION" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.config.Configuration.DATABASE_LOG_LEVEL">
<span class="sig-name descname"><span class="pre">DATABASE_LOG_LEVEL</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'database_log_level'</span></em><a class="headerlink" href="#core.config.Configuration.DATABASE_LOG_LEVEL" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.config.Configuration.DATABASE_PRODUCTION_ENVIRONMENT_VARIABLE">
<span class="sig-name descname"><span class="pre">DATABASE_PRODUCTION_ENVIRONMENT_VARIABLE</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'SIMPLIFIED_PRODUCTION_DATABASE'</span></em><a class="headerlink" href="#core.config.Configuration.DATABASE_PRODUCTION_ENVIRONMENT_VARIABLE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.config.Configuration.DATABASE_PRODUCTION_URL">
<span class="sig-name descname"><span class="pre">DATABASE_PRODUCTION_URL</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'production_url'</span></em><a class="headerlink" href="#core.config.Configuration.DATABASE_PRODUCTION_URL" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.config.Configuration.DATABASE_TEST_ENVIRONMENT_VARIABLE">
<span class="sig-name descname"><span class="pre">DATABASE_TEST_ENVIRONMENT_VARIABLE</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'SIMPLIFIED_TEST_DATABASE'</span></em><a class="headerlink" href="#core.config.Configuration.DATABASE_TEST_ENVIRONMENT_VARIABLE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.config.Configuration.DATABASE_TEST_URL">
<span class="sig-name descname"><span class="pre">DATABASE_TEST_URL</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'test_url'</span></em><a class="headerlink" href="#core.config.Configuration.DATABASE_TEST_URL" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.config.Configuration.DATA_DIRECTORY">
<span class="sig-name descname"><span class="pre">DATA_DIRECTORY</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'data_directory'</span></em><a class="headerlink" href="#core.config.Configuration.DATA_DIRECTORY" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.config.Configuration.DEBUG">
<span class="sig-name descname"><span class="pre">DEBUG</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'DEBUG'</span></em><a class="headerlink" href="#core.config.Configuration.DEBUG" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.config.Configuration.DEFAULT_APP_NAME">
<span class="sig-name descname"><span class="pre">DEFAULT_APP_NAME</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'simplified'</span></em><a class="headerlink" href="#core.config.Configuration.DEFAULT_APP_NAME" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.config.Configuration.DEFAULT_MINIMUM_FEATURED_QUALITY">
<span class="sig-name descname"><span class="pre">DEFAULT_MINIMUM_FEATURED_QUALITY</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">0.65</span></em><a class="headerlink" href="#core.config.Configuration.DEFAULT_MINIMUM_FEATURED_QUALITY" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.config.Configuration.DEFAULT_OPDS_FORMAT">
<span class="sig-name descname"><span class="pre">DEFAULT_OPDS_FORMAT</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'simple_opds_entry'</span></em><a class="headerlink" href="#core.config.Configuration.DEFAULT_OPDS_FORMAT" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.config.Configuration.ERROR">
<span class="sig-name descname"><span class="pre">ERROR</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'ERROR'</span></em><a class="headerlink" href="#core.config.Configuration.ERROR" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.config.Configuration.EXCLUDED_AUDIO_DATA_SOURCES">
<span class="sig-name descname"><span class="pre">EXCLUDED_AUDIO_DATA_SOURCES</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'excluded_audio_data_sources'</span></em><a class="headerlink" href="#core.config.Configuration.EXCLUDED_AUDIO_DATA_SOURCES" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.config.Configuration.EXTERNAL_TYPE_REGULAR_EXPRESSION">
<span class="sig-name descname"><span class="pre">EXTERNAL_TYPE_REGULAR_EXPRESSION</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'external_type_regular_expression'</span></em><a class="headerlink" href="#core.config.Configuration.EXTERNAL_TYPE_REGULAR_EXPRESSION" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.config.Configuration.FEATURED_LANE_SIZE">
<span class="sig-name descname"><span class="pre">FEATURED_LANE_SIZE</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'featured_lane_size'</span></em><a class="headerlink" href="#core.config.Configuration.FEATURED_LANE_SIZE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.config.Configuration.INFO">
<span class="sig-name descname"><span class="pre">INFO</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'INFO'</span></em><a class="headerlink" href="#core.config.Configuration.INFO" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.config.Configuration.INTEGRATIONS">
<span class="sig-name descname"><span class="pre">INTEGRATIONS</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'integrations'</span></em><a class="headerlink" href="#core.config.Configuration.INTEGRATIONS" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.config.Configuration.LANES_POLICY">
<span class="sig-name descname"><span class="pre">LANES_POLICY</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'lanes'</span></em><a class="headerlink" href="#core.config.Configuration.LANES_POLICY" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.config.Configuration.LAST_CHECKED_FOR_SITE_CONFIGURATION_UPDATE">
<span class="sig-name descname"><span class="pre">LAST_CHECKED_FOR_SITE_CONFIGURATION_UPDATE</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'last_checked_for_site_configuration_update'</span></em><a class="headerlink" href="#core.config.Configuration.LAST_CHECKED_FOR_SITE_CONFIGURATION_UPDATE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.config.Configuration.LIBRARY_SETTINGS">
<span class="sig-name descname"><span class="pre">LIBRARY_SETTINGS</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">[{'key':</span> <span class="pre">'name',</span> <span class="pre">'label':</span> <span class="pre">l'Name',</span> <span class="pre">'description':</span> <span class="pre">l'The</span> <span class="pre">human-readable</span> <span class="pre">name</span> <span class="pre">of</span> <span class="pre">this</span> <span class="pre">library.',</span> <span class="pre">'category':</span> <span class="pre">'Basic</span> <span class="pre">Information',</span> <span class="pre">'level':</span> <span class="pre">3,</span> <span class="pre">'required':</span> <span class="pre">True},</span> <span class="pre">{'key':</span> <span class="pre">'short_name',</span> <span class="pre">'label':</span> <span class="pre">l'Short</span> <span class="pre">name',</span> <span class="pre">'description':</span> <span class="pre">l'A</span> <span class="pre">short</span> <span class="pre">name</span> <span class="pre">of</span> <span class="pre">this</span> <span class="pre">library,</span> <span class="pre">to</span> <span class="pre">use</span> <span class="pre">when</span> <span class="pre">identifying</span> <span class="pre">it</span> <span class="pre">in</span> <span class="pre">scripts</span> <span class="pre">or</span> <span class="pre">URLs,</span> <span class="pre">e.g.</span> <span class="pre">'NYPL'.',</span> <span class="pre">'category':</span> <span class="pre">'Basic</span> <span class="pre">Information',</span> <span class="pre">'level':</span> <span class="pre">3,</span> <span class="pre">'required':</span> <span class="pre">True},</span> <span class="pre">{'key':</span> <span class="pre">'website',</span> <span class="pre">'label':</span> <span class="pre">l'URL</span> <span class="pre">of</span> <span class="pre">the</span> <span class="pre">library's</span> <span class="pre">website',</span> <span class="pre">'description':</span> <span class="pre">l'The</span> <span class="pre">library's</span> <span class="pre">main</span> <span class="pre">website,</span> <span class="pre">e.g.</span> <span class="pre">&quot;https://www.nypl.org/&quot;</span> <span class="pre">(not</span> <span class="pre">this</span> <span class="pre">Circulation</span> <span class="pre">Manager's</span> <span class="pre">URL).',</span> <span class="pre">'required':</span> <span class="pre">True,</span> <span class="pre">'format':</span> <span class="pre">'url',</span> <span class="pre">'level':</span> <span class="pre">3,</span> <span class="pre">'category':</span> <span class="pre">'Basic</span> <span class="pre">Information'},</span> <span class="pre">{'key':</span> <span class="pre">'allow_holds',</span> <span class="pre">'label':</span> <span class="pre">l'Allow</span> <span class="pre">books</span> <span class="pre">to</span> <span class="pre">be</span> <span class="pre">put</span> <span class="pre">on</span> <span class="pre">hold',</span> <span class="pre">'type':</span> <span class="pre">'select',</span> <span class="pre">'options':</span> <span class="pre">[{'key':</span> <span class="pre">'true',</span> <span class="pre">'label':</span> <span class="pre">l'Allow</span> <span class="pre">holds'},</span> <span class="pre">{'key':</span> <span class="pre">'false',</span> <span class="pre">'label':</span> <span class="pre">l'Disable</span> <span class="pre">holds'}],</span> <span class="pre">'default':</span> <span class="pre">'true',</span> <span class="pre">'category':</span> <span class="pre">'Loans,</span> <span class="pre">Holds,</span> <span class="pre">&amp;</span> <span class="pre">Fines',</span> <span class="pre">'level':</span> <span class="pre">3},</span> <span class="pre">{'key':</span> <span class="pre">'enabled_entry_points',</span> <span class="pre">'label':</span> <span class="pre">l'Enabled</span> <span class="pre">entry</span> <span class="pre">points',</span> <span class="pre">'description':</span> <span class="pre">l'Patrons</span> <span class="pre">will</span> <span class="pre">see</span> <span class="pre">the</span> <span class="pre">selected</span> <span class="pre">entry</span> <span class="pre">points</span> <span class="pre">at</span> <span class="pre">the</span> <span class="pre">top</span> <span class="pre">level</span> <span class="pre">and</span> <span class="pre">in</span> <span class="pre">search</span> <span class="pre">results.</span> <span class="pre">&lt;p&gt;Currently</span> <span class="pre">supported</span> <span class="pre">audiobook</span> <span class="pre">vendors:</span> <span class="pre">Bibliotheca,</span> <span class="pre">Axis</span> <span class="pre">360',</span> <span class="pre">'type':</span> <span class="pre">'list',</span> <span class="pre">'options':</span> <span class="pre">[{'key':</span> <span class="pre">'All',</span> <span class="pre">'label':</span> <span class="pre">'All'},</span> <span class="pre">{'key':</span> <span class="pre">'Book',</span> <span class="pre">'label':</span> <span class="pre">'eBooks'},</span> <span class="pre">{'key':</span> <span class="pre">'Audio',</span> <span class="pre">'label':</span> <span class="pre">'Audiobooks'}],</span> <span class="pre">'default':</span> <span class="pre">['Book'],</span> <span class="pre">'category':</span> <span class="pre">'Lanes</span> <span class="pre">&amp;</span> <span class="pre">Filters',</span> <span class="pre">'format':</span> <span class="pre">'narrow',</span> <span class="pre">'readOnly':</span> <span class="pre">True,</span> <span class="pre">'level':</span> <span class="pre">3},</span> <span class="pre">{'key':</span> <span class="pre">'featured_lane_size',</span> <span class="pre">'label':</span> <span class="pre">l'Maximum</span> <span class="pre">number</span> <span class="pre">of</span> <span class="pre">books</span> <span class="pre">in</span> <span class="pre">the</span> <span class="pre">'featured'</span> <span class="pre">lanes',</span> <span class="pre">'type':</span> <span class="pre">'number',</span> <span class="pre">'default':</span> <span class="pre">15,</span> <span class="pre">'category':</span> <span class="pre">'Lanes</span> <span class="pre">&amp;</span> <span class="pre">Filters',</span> <span class="pre">'level':</span> <span class="pre">1},</span> <span class="pre">{'key':</span> <span class="pre">'minimum_featured_quality',</span> <span class="pre">'label':</span> <span class="pre">l'Minimum</span> <span class="pre">quality</span> <span class="pre">for</span> <span class="pre">books</span> <span class="pre">that</span> <span class="pre">show</span> <span class="pre">up</span> <span class="pre">in</span> <span class="pre">'featured'</span> <span class="pre">lanes',</span> <span class="pre">'description':</span> <span class="pre">l'Between</span> <span class="pre">0</span> <span class="pre">and</span> <span class="pre">1.',</span> <span class="pre">'type':</span> <span class="pre">'number',</span> <span class="pre">'max':</span> <span class="pre">1,</span> <span class="pre">'default':</span> <span class="pre">0.65,</span> <span class="pre">'category':</span> <span class="pre">'Lanes</span> <span class="pre">&amp;</span> <span class="pre">Filters',</span> <span class="pre">'level':</span> <span class="pre">1},</span> <span class="pre">{'key':</span> <span class="pre">'facets_enabled_order',</span> <span class="pre">'label':</span> <span class="pre">l'Allow</span> <span class="pre">patrons</span> <span class="pre">to</span> <span class="pre">sort</span> <span class="pre">by',</span> <span class="pre">'type':</span> <span class="pre">'list',</span> <span class="pre">'options':</span> <span class="pre">[{'key':</span> <span class="pre">'title',</span> <span class="pre">'label':</span> <span class="pre">l'Title'},</span> <span class="pre">{'key':</span> <span class="pre">'author',</span> <span class="pre">'label':</span> <span class="pre">l'Author'},</span> <span class="pre">{'key':</span> <span class="pre">'added',</span> <span class="pre">'label':</span> <span class="pre">l'Recently</span> <span class="pre">Added'},</span> <span class="pre">{'key':</span> <span class="pre">'random',</span> <span class="pre">'label':</span> <span class="pre">l'Random'}],</span> <span class="pre">'default':</span> <span class="pre">['title',</span> <span class="pre">'author',</span> <span class="pre">'added',</span> <span class="pre">'random'],</span> <span class="pre">'category':</span> <span class="pre">'Lanes</span> <span class="pre">&amp;</span> <span class="pre">Filters',</span> <span class="pre">'paired':</span> <span class="pre">'facets_default_order',</span> <span class="pre">'level':</span> <span class="pre">2},</span> <span class="pre">{'key':</span> <span class="pre">'facets_enabled_available',</span> <span class="pre">'label':</span> <span class="pre">l'Allow</span> <span class="pre">patrons</span> <span class="pre">to</span> <span class="pre">filter</span> <span class="pre">availability</span> <span class="pre">to',</span> <span class="pre">'type':</span> <span class="pre">'list',</span> <span class="pre">'options':</span> <span class="pre">[{'key':</span> <span class="pre">'now',</span> <span class="pre">'label':</span> <span class="pre">l'Available</span> <span class="pre">now'},</span> <span class="pre">{'key':</span> <span class="pre">'all',</span> <span class="pre">'label':</span> <span class="pre">l'All'},</span> <span class="pre">{'key':</span> <span class="pre">'always',</span> <span class="pre">'label':</span> <span class="pre">l'Yours</span> <span class="pre">to</span> <span class="pre">keep'}],</span> <span class="pre">'default':</span> <span class="pre">['now',</span> <span class="pre">'all',</span> <span class="pre">'always'],</span> <span class="pre">'category':</span> <span class="pre">'Lanes</span> <span class="pre">&amp;</span> <span class="pre">Filters',</span> <span class="pre">'paired':</span> <span class="pre">'facets_default_available',</span> <span class="pre">'level':</span> <span class="pre">2},</span> <span class="pre">{'key':</span> <span class="pre">'facets_enabled_collection',</span> <span class="pre">'label':</span> <span class="pre">l'Allow</span> <span class="pre">patrons</span> <span class="pre">to</span> <span class="pre">filter</span> <span class="pre">collection</span> <span class="pre">to',</span> <span class="pre">'type':</span> <span class="pre">'list',</span> <span class="pre">'options':</span> <span class="pre">[{'key':</span> <span class="pre">'full',</span> <span class="pre">'label':</span> <span class="pre">l'Everything'},</span> <span class="pre">{'key':</span> <span class="pre">'featured',</span> <span class="pre">'label':</span> <span class="pre">l'Popular</span> <span class="pre">Books'}],</span> <span class="pre">'default':</span> <span class="pre">['full',</span> <span class="pre">'featured'],</span> <span class="pre">'category':</span> <span class="pre">'Lanes</span> <span class="pre">&amp;</span> <span class="pre">Filters',</span> <span class="pre">'paired':</span> <span class="pre">'facets_default_collection',</span> <span class="pre">'level':</span> <span class="pre">2},</span> <span class="pre">{'key':</span> <span class="pre">'facets_default_order',</span> <span class="pre">'label':</span> <span class="pre">l'Default</span> <span class="pre">Sort</span> <span class="pre">by',</span> <span class="pre">'type':</span> <span class="pre">'select',</span> <span class="pre">'options':</span> <span class="pre">[{'key':</span> <span class="pre">'title',</span> <span class="pre">'label':</span> <span class="pre">l'Title'},</span> <span class="pre">{'key':</span> <span class="pre">'author',</span> <span class="pre">'label':</span> <span class="pre">l'Author'},</span> <span class="pre">{'key':</span> <span class="pre">'added',</span> <span class="pre">'label':</span> <span class="pre">l'Recently</span> <span class="pre">Added'},</span> <span class="pre">{'key':</span> <span class="pre">'random',</span> <span class="pre">'label':</span> <span class="pre">l'Random'}],</span> <span class="pre">'default':</span> <span class="pre">'author',</span> <span class="pre">'category':</span> <span class="pre">'Lanes</span> <span class="pre">&amp;</span> <span class="pre">Filters',</span> <span class="pre">'skip':</span> <span class="pre">True},</span> <span class="pre">{'key':</span> <span class="pre">'facets_default_available',</span> <span class="pre">'label':</span> <span class="pre">l'Default</span> <span class="pre">Availability',</span> <span class="pre">'type':</span> <span class="pre">'select',</span> <span class="pre">'options':</span> <span class="pre">[{'key':</span> <span class="pre">'now',</span> <span class="pre">'label':</span> <span class="pre">l'Available</span> <span class="pre">now'},</span> <span class="pre">{'key':</span> <span class="pre">'all',</span> <span class="pre">'label':</span> <span class="pre">l'All'},</span> <span class="pre">{'key':</span> <span class="pre">'always',</span> <span class="pre">'label':</span> <span class="pre">l'Yours</span> <span class="pre">to</span> <span class="pre">keep'}],</span> <span class="pre">'default':</span> <span class="pre">'all',</span> <span class="pre">'category':</span> <span class="pre">'Lanes</span> <span class="pre">&amp;</span> <span class="pre">Filters',</span> <span class="pre">'skip':</span> <span class="pre">True},</span> <span class="pre">{'key':</span> <span class="pre">'facets_default_collection',</span> <span class="pre">'label':</span> <span class="pre">l'Default</span> <span class="pre">Collection',</span> <span class="pre">'type':</span> <span class="pre">'select',</span> <span class="pre">'options':</span> <span class="pre">[{'key':</span> <span class="pre">'full',</span> <span class="pre">'label':</span> <span class="pre">l'Everything'},</span> <span class="pre">{'key':</span> <span class="pre">'featured',</span> <span class="pre">'label':</span> <span class="pre">l'Popular</span> <span class="pre">Books'}],</span> <span class="pre">'default':</span> <span class="pre">'full',</span> <span class="pre">'category':</span> <span class="pre">'Lanes</span> <span class="pre">&amp;</span> <span class="pre">Filters',</span> <span class="pre">'skip':</span> <span class="pre">True}]</span></em><a class="headerlink" href="#core.config.Configuration.LIBRARY_SETTINGS" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.config.Configuration.LOCALIZATION_LANGUAGES">
<span class="sig-name descname"><span class="pre">LOCALIZATION_LANGUAGES</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'localization_languages'</span></em><a class="headerlink" href="#core.config.Configuration.LOCALIZATION_LANGUAGES" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.config.Configuration.LOGGING">
<span class="sig-name descname"><span class="pre">LOGGING</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'logging'</span></em><a class="headerlink" href="#core.config.Configuration.LOGGING" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.config.Configuration.LOGGING_FORMAT">
<span class="sig-name descname"><span class="pre">LOGGING_FORMAT</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'format'</span></em><a class="headerlink" href="#core.config.Configuration.LOGGING_FORMAT" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.config.Configuration.LOGGING_LEVEL">
<span class="sig-name descname"><span class="pre">LOGGING_LEVEL</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'level'</span></em><a class="headerlink" href="#core.config.Configuration.LOGGING_LEVEL" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.config.Configuration.LOG_APP_NAME">
<span class="sig-name descname"><span class="pre">LOG_APP_NAME</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'log_app'</span></em><a class="headerlink" href="#core.config.Configuration.LOG_APP_NAME" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.config.Configuration.LOG_DATA_FORMAT">
<span class="sig-name descname"><span class="pre">LOG_DATA_FORMAT</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'format'</span></em><a class="headerlink" href="#core.config.Configuration.LOG_DATA_FORMAT" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.config.Configuration.LOG_FORMAT_JSON">
<span class="sig-name descname"><span class="pre">LOG_FORMAT_JSON</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'json'</span></em><a class="headerlink" href="#core.config.Configuration.LOG_FORMAT_JSON" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.config.Configuration.LOG_FORMAT_TEXT">
<span class="sig-name descname"><span class="pre">LOG_FORMAT_TEXT</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'text'</span></em><a class="headerlink" href="#core.config.Configuration.LOG_FORMAT_TEXT" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.config.Configuration.LOG_LEVEL">
<span class="sig-name descname"><span class="pre">LOG_LEVEL</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'log_level'</span></em><a class="headerlink" href="#core.config.Configuration.LOG_LEVEL" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.config.Configuration.LOG_LEVEL_UI">
<span class="sig-name descname"><span class="pre">LOG_LEVEL_UI</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">[{'key':</span> <span class="pre">'DEBUG',</span> <span class="pre">'label':</span> <span class="pre">l'Debug'},</span> <span class="pre">{'key':</span> <span class="pre">'INFO',</span> <span class="pre">'label':</span> <span class="pre">l'Info'},</span> <span class="pre">{'key':</span> <span class="pre">'WARN',</span> <span class="pre">'label':</span> <span class="pre">l'Warn'},</span> <span class="pre">{'key':</span> <span class="pre">'ERROR',</span> <span class="pre">'label':</span> <span class="pre">l'Error'}]</span></em><a class="headerlink" href="#core.config.Configuration.LOG_LEVEL_UI" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.config.Configuration.LOG_OUTPUT_TYPE">
<span class="sig-name descname"><span class="pre">LOG_OUTPUT_TYPE</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'output'</span></em><a class="headerlink" href="#core.config.Configuration.LOG_OUTPUT_TYPE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.config.Configuration.MEASUREMENT_REAPER">
<span class="sig-name descname"><span class="pre">MEASUREMENT_REAPER</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'measurement_reaper_enabled'</span></em><a class="headerlink" href="#core.config.Configuration.MEASUREMENT_REAPER" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.config.Configuration.MINIMUM_FEATURED_QUALITY">
<span class="sig-name descname"><span class="pre">MINIMUM_FEATURED_QUALITY</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'minimum_featured_quality'</span></em><a class="headerlink" href="#core.config.Configuration.MINIMUM_FEATURED_QUALITY" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.config.Configuration.NAME">
<span class="sig-name descname"><span class="pre">NAME</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'name'</span></em><a class="headerlink" href="#core.config.Configuration.NAME" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.config.Configuration.NO_APP_VERSION_FOUND">
<span class="sig-name descname"><span class="pre">NO_APP_VERSION_FOUND</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">&lt;object</span> <span class="pre">object&gt;</span></em><a class="headerlink" href="#core.config.Configuration.NO_APP_VERSION_FOUND" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.config.Configuration.OVERDRIVE_INTEGRATION">
<span class="sig-name descname"><span class="pre">OVERDRIVE_INTEGRATION</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'Overdrive'</span></em><a class="headerlink" href="#core.config.Configuration.OVERDRIVE_INTEGRATION" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.config.Configuration.POLICIES">
<span class="sig-name descname"><span class="pre">POLICIES</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'policies'</span></em><a class="headerlink" href="#core.config.Configuration.POLICIES" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.config.Configuration.RBDIGITAL_INTEGRATION">
<span class="sig-name descname"><span class="pre">RBDIGITAL_INTEGRATION</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'RBDigital'</span></em><a class="headerlink" href="#core.config.Configuration.RBDIGITAL_INTEGRATION" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.config.Configuration.SHORT_NAME">
<span class="sig-name descname"><span class="pre">SHORT_NAME</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'short_name'</span></em><a class="headerlink" href="#core.config.Configuration.SHORT_NAME" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.config.Configuration.SITEWIDE_SETTINGS">
<span class="sig-name descname"><span class="pre">SITEWIDE_SETTINGS</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">[{'key':</span> <span class="pre">'base_url',</span> <span class="pre">'label':</span> <span class="pre">l'Base</span> <span class="pre">url</span> <span class="pre">of</span> <span class="pre">the</span> <span class="pre">application',</span> <span class="pre">'required':</span> <span class="pre">True,</span> <span class="pre">'format':</span> <span class="pre">'url'},</span> <span class="pre">{'key':</span> <span class="pre">'log_level',</span> <span class="pre">'label':</span> <span class="pre">l'Log</span> <span class="pre">Level',</span> <span class="pre">'type':</span> <span class="pre">'select',</span> <span class="pre">'options':</span> <span class="pre">[{'key':</span> <span class="pre">'DEBUG',</span> <span class="pre">'label':</span> <span class="pre">l'Debug'},</span> <span class="pre">{'key':</span> <span class="pre">'INFO',</span> <span class="pre">'label':</span> <span class="pre">l'Info'},</span> <span class="pre">{'key':</span> <span class="pre">'WARN',</span> <span class="pre">'label':</span> <span class="pre">l'Warn'},</span> <span class="pre">{'key':</span> <span class="pre">'ERROR',</span> <span class="pre">'label':</span> <span class="pre">l'Error'}],</span> <span class="pre">'default':</span> <span class="pre">'INFO'},</span> <span class="pre">{'key':</span> <span class="pre">'log_app',</span> <span class="pre">'label':</span> <span class="pre">l'Application</span> <span class="pre">name',</span> <span class="pre">'description':</span> <span class="pre">l'Log</span> <span class="pre">messages</span> <span class="pre">originating</span> <span class="pre">from</span> <span class="pre">this</span> <span class="pre">application</span> <span class="pre">will</span> <span class="pre">be</span> <span class="pre">tagged</span> <span class="pre">with</span> <span class="pre">this</span> <span class="pre">name.</span> <span class="pre">If</span> <span class="pre">you</span> <span class="pre">run</span> <span class="pre">multiple</span> <span class="pre">instances,</span> <span class="pre">giving</span> <span class="pre">each</span> <span class="pre">one</span> <span class="pre">a</span> <span class="pre">different</span> <span class="pre">application</span> <span class="pre">name</span> <span class="pre">will</span> <span class="pre">help</span> <span class="pre">you</span> <span class="pre">determine</span> <span class="pre">which</span> <span class="pre">instance</span> <span class="pre">is</span> <span class="pre">having</span> <span class="pre">problems.',</span> <span class="pre">'default':</span> <span class="pre">'simplified',</span> <span class="pre">'required':</span> <span class="pre">True},</span> <span class="pre">{'key':</span> <span class="pre">'database_log_level',</span> <span class="pre">'label':</span> <span class="pre">l'Database</span> <span class="pre">Log</span> <span class="pre">Level',</span> <span class="pre">'type':</span> <span class="pre">'select',</span> <span class="pre">'options':</span> <span class="pre">[{'key':</span> <span class="pre">'DEBUG',</span> <span class="pre">'label':</span> <span class="pre">l'Debug'},</span> <span class="pre">{'key':</span> <span class="pre">'INFO',</span> <span class="pre">'label':</span> <span class="pre">l'Info'},</span> <span class="pre">{'key':</span> <span class="pre">'WARN',</span> <span class="pre">'label':</span> <span class="pre">l'Warn'},</span> <span class="pre">{'key':</span> <span class="pre">'ERROR',</span> <span class="pre">'label':</span> <span class="pre">l'Error'}],</span> <span class="pre">'description':</span> <span class="pre">l'Database</span> <span class="pre">logs</span> <span class="pre">are</span> <span class="pre">extremely</span> <span class="pre">verbose,</span> <span class="pre">so</span> <span class="pre">unless</span> <span class="pre">you're</span> <span class="pre">diagnosing</span> <span class="pre">a</span> <span class="pre">database-related</span> <span class="pre">problem,</span> <span class="pre">it's</span> <span class="pre">a</span> <span class="pre">good</span> <span class="pre">idea</span> <span class="pre">to</span> <span class="pre">set</span> <span class="pre">a</span> <span class="pre">higher</span> <span class="pre">log</span> <span class="pre">level</span> <span class="pre">for</span> <span class="pre">database</span> <span class="pre">messages.',</span> <span class="pre">'default':</span> <span class="pre">'WARN'},</span> <span class="pre">{'key':</span> <span class="pre">'excluded_audio_data_sources',</span> <span class="pre">'label':</span> <span class="pre">l'Excluded</span> <span class="pre">audiobook</span> <span class="pre">sources',</span> <span class="pre">'description':</span> <span class="pre">l'Audiobooks</span> <span class="pre">from</span> <span class="pre">these</span> <span class="pre">data</span> <span class="pre">sources</span> <span class="pre">will</span> <span class="pre">be</span> <span class="pre">hidden</span> <span class="pre">from</span> <span class="pre">the</span> <span class="pre">collection,</span> <span class="pre">even</span> <span class="pre">if</span> <span class="pre">they</span> <span class="pre">would</span> <span class="pre">otherwise</span> <span class="pre">show</span> <span class="pre">up</span> <span class="pre">as</span> <span class="pre">available.',</span> <span class="pre">'default':</span> <span class="pre">None,</span> <span class="pre">'required':</span> <span class="pre">True},</span> <span class="pre">{'key':</span> <span class="pre">'measurement_reaper_enabled',</span> <span class="pre">'label':</span> <span class="pre">l'Cleanup</span> <span class="pre">old</span> <span class="pre">measurement</span> <span class="pre">data',</span> <span class="pre">'type':</span> <span class="pre">'select',</span> <span class="pre">'description':</span> <span class="pre">l'If</span> <span class="pre">this</span> <span class="pre">settings</span> <span class="pre">is</span> <span class="pre">'true'</span> <span class="pre">old</span> <span class="pre">book</span> <span class="pre">measurement</span> <span class="pre">data</span> <span class="pre">will</span> <span class="pre">be</span> <span class="pre">cleaned</span> <span class="pre">out</span> <span class="pre">of</span> <span class="pre">the</span> <span class="pre">database.</span> <span class="pre">Some</span> <span class="pre">sites</span> <span class="pre">may</span> <span class="pre">want</span> <span class="pre">to</span> <span class="pre">keep</span> <span class="pre">this</span> <span class="pre">data</span> <span class="pre">for</span> <span class="pre">later</span> <span class="pre">analysis.',</span> <span class="pre">'options':</span> <span class="pre">{'true':</span> <span class="pre">'true',</span> <span class="pre">'false':</span> <span class="pre">'false'},</span> <span class="pre">'default':</span> <span class="pre">'true'}]</span></em><a class="headerlink" href="#core.config.Configuration.SITEWIDE_SETTINGS" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.config.Configuration.SITE_CONFIGURATION_CHANGED">
<span class="sig-name descname"><span class="pre">SITE_CONFIGURATION_CHANGED</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'Site</span> <span class="pre">Configuration</span> <span class="pre">Changed'</span></em><a class="headerlink" href="#core.config.Configuration.SITE_CONFIGURATION_CHANGED" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.config.Configuration.SITE_CONFIGURATION_LAST_UPDATE">
<span class="sig-name descname"><span class="pre">SITE_CONFIGURATION_LAST_UPDATE</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'site_configuration_last_update'</span></em><a class="headerlink" href="#core.config.Configuration.SITE_CONFIGURATION_LAST_UPDATE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.config.Configuration.SITE_CONFIGURATION_TIMEOUT">
<span class="sig-name descname"><span class="pre">SITE_CONFIGURATION_TIMEOUT</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'site_configuration_timeout'</span></em><a class="headerlink" href="#core.config.Configuration.SITE_CONFIGURATION_TIMEOUT" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.config.Configuration.THREEM_INTEGRATION">
<span class="sig-name descname"><span class="pre">THREEM_INTEGRATION</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'3M'</span></em><a class="headerlink" href="#core.config.Configuration.THREEM_INTEGRATION" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.config.Configuration.TYPE">
<span class="sig-name descname"><span class="pre">TYPE</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'type'</span></em><a class="headerlink" href="#core.config.Configuration.TYPE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.config.Configuration.URL">
<span class="sig-name descname"><span class="pre">URL</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'url'</span></em><a class="headerlink" href="#core.config.Configuration.URL" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.config.Configuration.VERSION_FILENAME">
<span class="sig-name descname"><span class="pre">VERSION_FILENAME</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'.version'</span></em><a class="headerlink" href="#core.config.Configuration.VERSION_FILENAME" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.config.Configuration.WARN">
<span class="sig-name descname"><span class="pre">WARN</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'WARN'</span></em><a class="headerlink" href="#core.config.Configuration.WARN" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.config.Configuration.WEBSITE_URL">
<span class="sig-name descname"><span class="pre">WEBSITE_URL</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'website'</span></em><a class="headerlink" href="#core.config.Configuration.WEBSITE_URL" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.config.Configuration.app_version">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">app_version</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/config.html#Configuration.app_version"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.config.Configuration.app_version" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the git version of the app, if a .version file exists.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.config.Configuration.cdns">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">cdns</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/config.html#Configuration.cdns"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.config.Configuration.cdns" title="Permalink to this definition">¶</a></dt>
<dd><p>Get CDN configuration, loading it from the database
if necessary.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.config.Configuration.cdns_loaded_from_database">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">cdns_loaded_from_database</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/config.html#Configuration.cdns_loaded_from_database"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.config.Configuration.cdns_loaded_from_database" title="Permalink to this definition">¶</a></dt>
<dd><p>Has the site configuration been loaded from the database yet?</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.config.Configuration.data_directory">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">data_directory</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/config.html#Configuration.data_directory"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.config.Configuration.data_directory" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.config.Configuration.database_url">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">database_url</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/config.html#Configuration.database_url"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.config.Configuration.database_url" title="Permalink to this definition">¶</a></dt>
<dd><p>Find the database URL configured for this site.</p>
<p>For compatibility with old configurations, we will look in the
site configuration first.</p>
<p>If it’s not there, we will look in the appropriate environment
variable.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.config.Configuration.get">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">get</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">default</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/config.html#Configuration.get"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.config.Configuration.get" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.config.Configuration.instance">
<span class="sig-name descname"><span class="pre">instance</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">{}</span></em><a class="headerlink" href="#core.config.Configuration.instance" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.config.Configuration.integration">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">integration</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">required</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/config.html#Configuration.integration"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.config.Configuration.integration" title="Permalink to this definition">¶</a></dt>
<dd><p>Find an integration configuration by name.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.config.Configuration.integration_url">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">integration_url</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">required</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/config.html#Configuration.integration_url"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.config.Configuration.integration_url" title="Permalink to this definition">¶</a></dt>
<dd><p>Find the URL to an integration.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.config.Configuration.last_checked_for_site_configuration_update">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">last_checked_for_site_configuration_update</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/config.html#Configuration.last_checked_for_site_configuration_update"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.config.Configuration.last_checked_for_site_configuration_update" title="Permalink to this definition">¶</a></dt>
<dd><p>When was the last time we actually checked when the database
was updated?</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.config.Configuration.load">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">load</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/config.html#Configuration.load"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.config.Configuration.load" title="Permalink to this definition">¶</a></dt>
<dd><p>Load configuration information from the filesystem, and
(optionally) from the database.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.config.Configuration.load_cdns">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">load_cdns</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">config_instance</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/config.html#Configuration.load_cdns"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.config.Configuration.load_cdns" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.config.Configuration.load_from_file">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">load_from_file</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/config.html#Configuration.load_from_file"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.config.Configuration.load_from_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Load additional site configuration from a config file.</p>
<p>This is being phased out in favor of taking all configuration from a
database.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.config.Configuration.localization_languages">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">localization_languages</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/config.html#Configuration.localization_languages"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.config.Configuration.localization_languages" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.config.Configuration.log">
<span class="sig-name descname"><span class="pre">log</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">&lt;Logger</span> <span class="pre">Configuration</span> <span class="pre">file</span> <span class="pre">loader</span> <span class="pre">(WARNING)&gt;</span></em><a class="headerlink" href="#core.config.Configuration.log" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.config.Configuration.policy">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">policy</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">default</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">required</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/config.html#Configuration.policy"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.config.Configuration.policy" title="Permalink to this definition">¶</a></dt>
<dd><p>Find a policy configuration by name.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.config.Configuration.required">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">required</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/config.html#Configuration.required"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.config.Configuration.required" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.config.Configuration.site_configuration_last_update">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">site_configuration_last_update</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">known_value</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/config.html#Configuration.site_configuration_last_update"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.config.Configuration.site_configuration_last_update" title="Permalink to this definition">¶</a></dt>
<dd><p>Check when the site configuration was last updated.</p>
<p>Updates Configuration.instance[Configuration.SITE_CONFIGURATION_LAST_UPDATE].
It’s the application’s responsibility to periodically check
this value and reload the configuration if appropriate.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>known_value</strong> – We know when the site configuration was
last updated–it’s this timestamp. Use it instead of checking
with the database.</p></li>
<li><p><strong>timeout</strong> – We will only call out to the database once in
this number of seconds. If we are asked again before this
number of seconds elapses, we will assume site
configuration has not changed. By default, we call out to
the database every time.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>a datetime object.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.config.Configuration.static_resources_dir">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">static_resources_dir</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/config.html#Configuration.static_resources_dir"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.config.Configuration.static_resources_dir" title="Permalink to this definition">¶</a></dt>
<dd><p>Locate the static resources for this installation.</p>
<p>Default location is /simplified_static. To use a different location, set the value
of the SIMPLIFIED_STATIC_DIR environment variable.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.config.ConfigurationConstants">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.config.</span></span><span class="sig-name descname"><span class="pre">ConfigurationConstants</span></span><a class="reference internal" href="_modules/core/config.html#ConfigurationConstants"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.config.ConfigurationConstants" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<dl class="py attribute">
<dt class="sig sig-object py" id="core.config.ConfigurationConstants.ALL_ACCESS">
<span class="sig-name descname"><span class="pre">ALL_ACCESS</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">1</span></em><a class="headerlink" href="#core.config.ConfigurationConstants.ALL_ACCESS" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.config.ConfigurationConstants.DEFAULT_FACET_KEY_PREFIX">
<span class="sig-name descname"><span class="pre">DEFAULT_FACET_KEY_PREFIX</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'facets_default_'</span></em><a class="headerlink" href="#core.config.ConfigurationConstants.DEFAULT_FACET_KEY_PREFIX" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.config.ConfigurationConstants.ENABLED_FACETS_KEY_PREFIX">
<span class="sig-name descname"><span class="pre">ENABLED_FACETS_KEY_PREFIX</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'facets_enabled_'</span></em><a class="headerlink" href="#core.config.ConfigurationConstants.ENABLED_FACETS_KEY_PREFIX" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.config.ConfigurationConstants.SYS_ADMIN_ONLY">
<span class="sig-name descname"><span class="pre">SYS_ADMIN_ONLY</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">3</span></em><a class="headerlink" href="#core.config.ConfigurationConstants.SYS_ADMIN_ONLY" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.config.ConfigurationConstants.SYS_ADMIN_OR_MANAGER">
<span class="sig-name descname"><span class="pre">SYS_ADMIN_OR_MANAGER</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">2</span></em><a class="headerlink" href="#core.config.ConfigurationConstants.SYS_ADMIN_OR_MANAGER" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="core.config.empty_config">
<span class="sig-prename descclassname"><span class="pre">core.config.</span></span><span class="sig-name descname"><span class="pre">empty_config</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">replacement_classes</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/config.html#empty_config"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.config.empty_config" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="core.config.temp_config">
<span class="sig-prename descclassname"><span class="pre">core.config.</span></span><span class="sig-name descname"><span class="pre">temp_config</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">new_config</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">replacement_classes</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/config.html#temp_config"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.config.temp_config" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</section>
<section id="module-core.coverage">
<span id="core-coverage-module"></span><h2>core.coverage module<a class="headerlink" href="#module-core.coverage" title="Permalink to this heading">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="core.coverage.BaseCoverageProvider">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.coverage.</span></span><span class="sig-name descname"><span class="pre">BaseCoverageProvider</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">batch_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cutoff_time</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">registered_only</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/coverage.html#BaseCoverageProvider"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.coverage.BaseCoverageProvider" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Run certain objects through an algorithm. If the algorithm returns
success, add a coverage record for that object, so the object
doesn’t need to be processed again. If the algorithm returns a
CoverageFailure, that failure may itself be memorialized as a
coverage record.</p>
<p>Instead of instantiating this class directly, subclass one of its
subclasses: either IdentifierCoverageProvider or
WorkCoverageProvider.</p>
<p>In IdentifierCoverageProvider the ‘objects’ are Identifier objects
and the coverage records are CoverageRecord objects. In
WorkCoverageProvider the ‘objects’ are Work objects and the
coverage records are WorkCoverageRecord objects.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="core.coverage.BaseCoverageProvider.DEFAULT_BATCH_SIZE">
<span class="sig-name descname"><span class="pre">DEFAULT_BATCH_SIZE</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">100</span></em><a class="headerlink" href="#core.coverage.BaseCoverageProvider.DEFAULT_BATCH_SIZE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.coverage.BaseCoverageProvider.OPERATION">
<span class="sig-name descname"><span class="pre">OPERATION</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#core.coverage.BaseCoverageProvider.OPERATION" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.coverage.BaseCoverageProvider.SERVICE_NAME">
<span class="sig-name descname"><span class="pre">SERVICE_NAME</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#core.coverage.BaseCoverageProvider.SERVICE_NAME" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.coverage.BaseCoverageProvider.add_coverage_record_for">
<span class="sig-name descname"><span class="pre">add_coverage_record_for</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">item</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/coverage.html#BaseCoverageProvider.add_coverage_record_for"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.coverage.BaseCoverageProvider.add_coverage_record_for" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a coverage record for the given item.</p>
<p>Implemented in IdentifierCoverageProvider and WorkCoverageProvider.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.coverage.BaseCoverageProvider.add_coverage_records_for">
<span class="sig-name descname"><span class="pre">add_coverage_records_for</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">items</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/coverage.html#BaseCoverageProvider.add_coverage_records_for"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.coverage.BaseCoverageProvider.add_coverage_records_for" title="Permalink to this definition">¶</a></dt>
<dd><p>Add CoverageRecords for a group of items from a batch,
each of which was successful.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="core.coverage.BaseCoverageProvider.collection">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">collection</span></span><a class="headerlink" href="#core.coverage.BaseCoverageProvider.collection" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve the Collection object associated with this
CoverageProvider.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.coverage.BaseCoverageProvider.failure_for_ignored_item">
<span class="sig-name descname"><span class="pre">failure_for_ignored_item</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">work</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/coverage.html#BaseCoverageProvider.failure_for_ignored_item"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.coverage.BaseCoverageProvider.failure_for_ignored_item" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a CoverageFailure recording the coverage provider’s
failure to even try to process an item.</p>
<p>Implemented in IdentifierCoverageProvider and
WorkCoverageProvider.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.coverage.BaseCoverageProvider.finalize_batch">
<span class="sig-name descname"><span class="pre">finalize_batch</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/coverage.html#BaseCoverageProvider.finalize_batch"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.coverage.BaseCoverageProvider.finalize_batch" title="Permalink to this definition">¶</a></dt>
<dd><p>Do whatever is necessary to complete this batch before moving on to
the next one.</p>
<p>e.g. committing the database session or uploading a bunch of
assets to S3.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.coverage.BaseCoverageProvider.finalize_timestampdata">
<span class="sig-name descname"><span class="pre">finalize_timestampdata</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">timestamp</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/coverage.html#BaseCoverageProvider.finalize_timestampdata"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.coverage.BaseCoverageProvider.finalize_timestampdata" title="Permalink to this definition">¶</a></dt>
<dd><p>Finalize the given TimestampData and write it to the
database.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.coverage.BaseCoverageProvider.handle_success">
<span class="sig-name descname"><span class="pre">handle_success</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">item</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/coverage.html#BaseCoverageProvider.handle_success"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.coverage.BaseCoverageProvider.handle_success" title="Permalink to this definition">¶</a></dt>
<dd><p>Do something special to mark the successful coverage of the
given item.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.coverage.BaseCoverageProvider.items_that_need_coverage">
<span class="sig-name descname"><span class="pre">items_that_need_coverage</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">identifiers</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/coverage.html#BaseCoverageProvider.items_that_need_coverage"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.coverage.BaseCoverageProvider.items_that_need_coverage" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a database query returning only those items that
need coverage.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>subset</strong> – A list of Identifier objects. If present, return
only items that need coverage <em>and</em> are associated with one
of these identifiers.</p>
</dd>
</dl>
<p>Implemented in CoverageProvider and WorkCoverageProvider.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="core.coverage.BaseCoverageProvider.log">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">log</span></span><a class="headerlink" href="#core.coverage.BaseCoverageProvider.log" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="core.coverage.BaseCoverageProvider.operation">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">operation</span></span><a class="headerlink" href="#core.coverage.BaseCoverageProvider.operation" title="Permalink to this definition">¶</a></dt>
<dd><p>Which operation should this CoverageProvider use to
distinguish between multiple CoverageRecords from the same data
source?</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.coverage.BaseCoverageProvider.process_batch">
<span class="sig-name descname"><span class="pre">process_batch</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">batch</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/coverage.html#BaseCoverageProvider.process_batch"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.coverage.BaseCoverageProvider.process_batch" title="Permalink to this definition">¶</a></dt>
<dd><p>Do what it takes to give coverage records to a batch of
items.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>A mixed list of coverage records and CoverageFailures.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.coverage.BaseCoverageProvider.process_batch_and_handle_results">
<span class="sig-name descname"><span class="pre">process_batch_and_handle_results</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">batch</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/coverage.html#BaseCoverageProvider.process_batch_and_handle_results"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.coverage.BaseCoverageProvider.process_batch_and_handle_results" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>A 2-tuple (counts, records).</p>
</dd>
</dl>
<p><cite>counts</cite> is a 3-tuple (successes, transient failures,
persistent_failures).</p>
<p><cite>records</cite> is a mixed list of coverage record objects (for
successes and persistent failures) and CoverageFailure objects
(for transient failures).</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.coverage.BaseCoverageProvider.process_item">
<span class="sig-name descname"><span class="pre">process_item</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">item</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/coverage.html#BaseCoverageProvider.process_item"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.coverage.BaseCoverageProvider.process_item" title="Permalink to this definition">¶</a></dt>
<dd><p>Do the work necessary to give coverage to one specific item.</p>
<p>Since this is where the actual work happens, this is not
implemented in IdentifierCoverageProvider or
WorkCoverageProvider, and must be handled in a subclass.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.coverage.BaseCoverageProvider.record_failure_as_coverage_record">
<span class="sig-name descname"><span class="pre">record_failure_as_coverage_record</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">failure</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/coverage.html#BaseCoverageProvider.record_failure_as_coverage_record"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.coverage.BaseCoverageProvider.record_failure_as_coverage_record" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert the given CoverageFailure to a coverage record.</p>
<p>Implemented in IdentifierCoverageProvider and WorkCoverageProvider.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.coverage.BaseCoverageProvider.run">
<span class="sig-name descname"><span class="pre">run</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/coverage.html#BaseCoverageProvider.run"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.coverage.BaseCoverageProvider.run" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.coverage.BaseCoverageProvider.run_once">
<span class="sig-name descname"><span class="pre">run_once</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">progress</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">count_as_covered</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/coverage.html#BaseCoverageProvider.run_once"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.coverage.BaseCoverageProvider.run_once" title="Permalink to this definition">¶</a></dt>
<dd><p>Try to grant coverage to a number of uncovered items.</p>
<p>NOTE: If you override this method, it’s very important that
your implementation eventually do one of the following:
* Set progress.finish
* Set progress.exception
* Raise an exception</p>
<p>If you don’t do any of these things, run() will assume you still
have work to do, and will keep calling run_once() forever.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>progress</strong> – A CoverageProviderProgress representing the
progress made so far, and the number of records that
need to be ignored for the rest of the run.</p></li>
<li><p><strong>count_as_covered</strong> – Which values for CoverageRecord.status
should count as meaning ‘already covered’.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A CoverageProviderProgress representing whatever
additional progress has been made.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.coverage.BaseCoverageProvider.run_once_and_update_timestamp">
<span class="sig-name descname"><span class="pre">run_once_and_update_timestamp</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/coverage.html#BaseCoverageProvider.run_once_and_update_timestamp"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.coverage.BaseCoverageProvider.run_once_and_update_timestamp" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.coverage.BaseCoverageProvider.should_update">
<span class="sig-name descname"><span class="pre">should_update</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">coverage_record</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/coverage.html#BaseCoverageProvider.should_update"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.coverage.BaseCoverageProvider.should_update" title="Permalink to this definition">¶</a></dt>
<dd><p>Should we do the work to update the given coverage record?</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="core.coverage.BaseCoverageProvider.timestamp">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">timestamp</span></span><a class="headerlink" href="#core.coverage.BaseCoverageProvider.timestamp" title="Permalink to this definition">¶</a></dt>
<dd><p>Look up the Timestamp object for this CoverageProvider.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.coverage.BibliographicCoverageProvider">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.coverage.</span></span><span class="sig-name descname"><span class="pre">BibliographicCoverageProvider</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">collection</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/coverage.html#BibliographicCoverageProvider"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.coverage.BibliographicCoverageProvider" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.coverage.CollectionCoverageProvider" title="core.coverage.CollectionCoverageProvider"><code class="xref py py-class docutils literal notranslate"><span class="pre">CollectionCoverageProvider</span></code></a></p>
<p>Fill in bibliographic metadata for all books in a Collection.</p>
<p>e.g. ensures that we get Overdrive coverage for all Overdrive IDs
in a collection.</p>
<p>Although a BibliographicCoverageProvider may gather
CirculationData for a book, it cannot guarantee equal coverage for
all Collections that contain that book. CirculationData should be
limited to things like formats that don’t vary between
Collections, and you should use a CollectionMonitor to make sure
your circulation information is up-to-date for each Collection.</p>
<dl class="py method">
<dt class="sig sig-object py" id="core.coverage.BibliographicCoverageProvider.handle_success">
<span class="sig-name descname"><span class="pre">handle_success</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">identifier</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/coverage.html#BibliographicCoverageProvider.handle_success"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.coverage.BibliographicCoverageProvider.handle_success" title="Permalink to this definition">¶</a></dt>
<dd><p>Once a book has bibliographic coverage, it can be given a
work and made presentation ready.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.coverage.CatalogCoverageProvider">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.coverage.</span></span><span class="sig-name descname"><span class="pre">CatalogCoverageProvider</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">collection</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/coverage.html#CatalogCoverageProvider"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.coverage.CatalogCoverageProvider" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.coverage.CollectionCoverageProvider" title="core.coverage.CollectionCoverageProvider"><code class="xref py py-class docutils literal notranslate"><span class="pre">CollectionCoverageProvider</span></code></a></p>
<p>Most CollectionCoverageProviders provide coverage to Identifiers
that are licensed through a given Collection.</p>
<p>A CatalogCoverageProvider provides coverage to Identifiers that
are present in a given Collection’s catalog.</p>
<dl class="py method">
<dt class="sig sig-object py" id="core.coverage.CatalogCoverageProvider.items_that_need_coverage">
<span class="sig-name descname"><span class="pre">items_that_need_coverage</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">identifiers</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/coverage.html#CatalogCoverageProvider.items_that_need_coverage"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.coverage.CatalogCoverageProvider.items_that_need_coverage" title="Permalink to this definition">¶</a></dt>
<dd><p>Find all Identifiers in this Collection’s catalog but lacking
coverage through this CoverageProvider.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.coverage.CollectionCoverageProvider">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.coverage.</span></span><span class="sig-name descname"><span class="pre">CollectionCoverageProvider</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">collection</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/coverage.html#CollectionCoverageProvider"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.coverage.CollectionCoverageProvider" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.coverage.IdentifierCoverageProvider" title="core.coverage.IdentifierCoverageProvider"><code class="xref py py-class docutils literal notranslate"><span class="pre">IdentifierCoverageProvider</span></code></a></p>
<p>A CoverageProvider that covers all the Identifiers currently
licensed to a given Collection.</p>
<p>You should subclass this CoverageProvider if you want to create
Works (as opposed to operating on existing Works) or update the
circulation information for LicensePools. You can’t use it to
create new LicensePools, since it only operates on Identifiers
that already have a LicencePool in the given Collection.</p>
<p>If a book shows up in multiple Collections, the first Collection
to process it takes care of it for the others. Any books that were
processed through their membership in another Collection will be
left alone.</p>
<p>For this reason it’s important that subclasses of this
CoverageProvider only deal with bibliographic information and
format availability information (such as links to open-access
downloads). You’ll have problems if you try to use
CollectionCoverageProvider to keep track of information like the
number of licenses available for a book.</p>
<p>In addition to defining the class variables defined by
CoverageProvider, you must define the class variable PROTOCOL when
subclassing this class. This is the entity that provides the
licenses for this Collection. It should be one of the
collection-type provider constants defined in the
<cite>ExternalIntegration</cite> class, such as
ExternalIntegration.OPDS_IMPORT or ExternalIntegration.OVERDRIVE.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="core.coverage.CollectionCoverageProvider.DEFAULT_BATCH_SIZE">
<span class="sig-name descname"><span class="pre">DEFAULT_BATCH_SIZE</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">10</span></em><a class="headerlink" href="#core.coverage.CollectionCoverageProvider.DEFAULT_BATCH_SIZE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.coverage.CollectionCoverageProvider.EXCLUDE_SEARCH_INDEX">
<span class="sig-name descname"><span class="pre">EXCLUDE_SEARCH_INDEX</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">False</span></em><a class="headerlink" href="#core.coverage.CollectionCoverageProvider.EXCLUDE_SEARCH_INDEX" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.coverage.CollectionCoverageProvider.INPUT_IDENTIFIER_TYPES">
<span class="sig-name descname"><span class="pre">INPUT_IDENTIFIER_TYPES</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#core.coverage.CollectionCoverageProvider.INPUT_IDENTIFIER_TYPES" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.coverage.CollectionCoverageProvider.PROTOCOL">
<span class="sig-name descname"><span class="pre">PROTOCOL</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#core.coverage.CollectionCoverageProvider.PROTOCOL" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.coverage.CollectionCoverageProvider.all">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">all</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/coverage.html#CollectionCoverageProvider.all"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.coverage.CollectionCoverageProvider.all" title="Permalink to this definition">¶</a></dt>
<dd><p>Yield a sequence of CollectionCoverageProvider instances, one for
every Collection that gets its licenses from cls.PROTOCOL.</p>
<p>CollectionCoverageProviders will be yielded in a random order.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>kwargs</strong> – Keyword arguments passed into the constructor for
CollectionCoverageProvider (or, more likely, one of its subclasses).</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.coverage.CollectionCoverageProvider.collections">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">collections</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/coverage.html#CollectionCoverageProvider.collections"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.coverage.CollectionCoverageProvider.collections" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a list of randomly sorted list of collections covered by the
provider.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.coverage.CollectionCoverageProvider.items_that_need_coverage">
<span class="sig-name descname"><span class="pre">items_that_need_coverage</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">identifiers</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/coverage.html#CollectionCoverageProvider.items_that_need_coverage"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.coverage.CollectionCoverageProvider.items_that_need_coverage" title="Permalink to this definition">¶</a></dt>
<dd><p>Find all Identifiers associated with this Collection but lacking
coverage through this CoverageProvider.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.coverage.CollectionCoverageProvider.license_pool">
<span class="sig-name descname"><span class="pre">license_pool</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">identifier</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data_source</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/coverage.html#CollectionCoverageProvider.license_pool"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.coverage.CollectionCoverageProvider.license_pool" title="Permalink to this definition">¶</a></dt>
<dd><p>Finds this Collection’s LicensePool for the given Identifier,
creating one if necessary.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>data_source</strong> – If it’s necessary to create a LicensePool,
the new LicensePool will have this DataSource. The default is to
use the DataSource associated with the CoverageProvider. This
should only be needed by the metadata wrangler.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.coverage.CollectionCoverageProvider.run_once">
<span class="sig-name descname"><span class="pre">run_once</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/coverage.html#CollectionCoverageProvider.run_once"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.coverage.CollectionCoverageProvider.run_once" title="Permalink to this definition">¶</a></dt>
<dd><p>Try to grant coverage to a number of uncovered items.</p>
<p>NOTE: If you override this method, it’s very important that
your implementation eventually do one of the following:
* Set progress.finish
* Set progress.exception
* Raise an exception</p>
<p>If you don’t do any of these things, run() will assume you still
have work to do, and will keep calling run_once() forever.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>progress</strong> – A CoverageProviderProgress representing the
progress made so far, and the number of records that
need to be ignored for the rest of the run.</p></li>
<li><p><strong>count_as_covered</strong> – Which values for CoverageRecord.status
should count as meaning ‘already covered’.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A CoverageProviderProgress representing whatever
additional progress has been made.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.coverage.CollectionCoverageProvider.set_metadata_and_circulation_data">
<span class="sig-name descname"><span class="pre">set_metadata_and_circulation_data</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">identifier</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">metadata</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">circulationdata</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/coverage.html#CollectionCoverageProvider.set_metadata_and_circulation_data"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.coverage.CollectionCoverageProvider.set_metadata_and_circulation_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Makes sure that the given Identifier has a Work, Edition (in the
context of this Collection), and LicensePool (ditto), and that
all the information is up to date.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>The Identifier (if successful) or an appropriate
CoverageFailure (if not).</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.coverage.CollectionCoverageProvider.set_presentation_ready">
<span class="sig-name descname"><span class="pre">set_presentation_ready</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">identifier</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/coverage.html#CollectionCoverageProvider.set_presentation_ready"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.coverage.CollectionCoverageProvider.set_presentation_ready" title="Permalink to this definition">¶</a></dt>
<dd><p>Set a Work presentation-ready.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.coverage.CollectionCoverageProvider.work">
<span class="sig-name descname"><span class="pre">work</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">identifier</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">license_pool</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">calculate_work_kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/coverage.html#CollectionCoverageProvider.work"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.coverage.CollectionCoverageProvider.work" title="Permalink to this definition">¶</a></dt>
<dd><p>Finds or creates a Work for this Identifier as licensed through
this Collection.</p>
<p>If the given Identifier already has a Work associated with it,
that Work will always be used, since an Identifier can only have one
Work associated with it.</p>
<p>However, if there is no current Work, a Work will only be
created if the given Identifier already has a LicensePool in
the Collection associated with this CoverageProvider (or if a
LicensePool to use is provided.) This method will not create
new LicensePools.</p>
<p>If the work is newly created or an existing work is not
presentation-ready, a new Work will be created by calling
LicensePool.calculate_work(). If there is an existing
presentation-ready work, calculate_work() will not be called;
instead, the work will be slated for recalculation when its
metadata changes through Metadata.apply().</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>calculate_work_kwargs</strong> – Keyword arguments to pass into
calculate_work() if and when it is called.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A Work, if possible. Otherwise, a CoverageFailure explaining
why no Work could be created.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.coverage.CollectionCoverageProviderJob">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.coverage.</span></span><span class="sig-name descname"><span class="pre">CollectionCoverageProviderJob</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">collection</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">provider_class</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">progress</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">provider_kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/coverage.html#CollectionCoverageProviderJob"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.coverage.CollectionCoverageProviderJob" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="core.util.html#core.util.worker_pools.DatabaseJob" title="core.util.worker_pools.DatabaseJob"><code class="xref py py-class docutils literal notranslate"><span class="pre">DatabaseJob</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="core.coverage.CollectionCoverageProviderJob.run">
<span class="sig-name descname"><span class="pre">run</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/coverage.html#CollectionCoverageProviderJob.run"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.coverage.CollectionCoverageProviderJob.run" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.coverage.CoverageFailure">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.coverage.</span></span><span class="sig-name descname"><span class="pre">CoverageFailure</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obj</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">exception</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data_source</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">transient</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">collection</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/coverage.html#CoverageFailure"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.coverage.CoverageFailure" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Object representing the failure to provide coverage.</p>
<dl class="py method">
<dt class="sig sig-object py" id="core.coverage.CoverageFailure.to_coverage_record">
<span class="sig-name descname"><span class="pre">to_coverage_record</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">operation</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/coverage.html#CoverageFailure.to_coverage_record"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.coverage.CoverageFailure.to_coverage_record" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert this failure into a CoverageRecord.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.coverage.CoverageFailure.to_work_coverage_record">
<span class="sig-name descname"><span class="pre">to_work_coverage_record</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">operation</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/coverage.html#CoverageFailure.to_work_coverage_record"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.coverage.CoverageFailure.to_work_coverage_record" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert this failure into a WorkCoverageRecord.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.coverage.CoverageProviderProgress">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.coverage.</span></span><span class="sig-name descname"><span class="pre">CoverageProviderProgress</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/coverage.html#CoverageProviderProgress"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.coverage.CoverageProviderProgress" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.metadata_layer.TimestampData" title="core.metadata_layer.TimestampData"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimestampData</span></code></a></p>
<p>A TimestampData optimized for the special needs of
CoverageProviders.</p>
<dl class="py property">
<dt class="sig sig-object py" id="core.coverage.CoverageProviderProgress.achievements">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">achievements</span></span><a class="headerlink" href="#core.coverage.CoverageProviderProgress.achievements" title="Permalink to this definition">¶</a></dt>
<dd><p>Represent the achievements of a CoverageProvider as a
human-readable string.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.coverage.IdentifierCoverageProvider">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.coverage.</span></span><span class="sig-name descname"><span class="pre">IdentifierCoverageProvider</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">collection</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">input_identifiers</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">replacement_policy</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/coverage.html#IdentifierCoverageProvider"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.coverage.IdentifierCoverageProvider" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.coverage.BaseCoverageProvider" title="core.coverage.BaseCoverageProvider"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCoverageProvider</span></code></a></p>
<p>Run Identifiers of certain types (ISBN, Overdrive, OCLC Number,
etc.) through an algorithm associated with a certain DataSource.</p>
<p>This class is designed to be subclassed rather than instantiated
directly. Subclasses should define SERVICE_NAME, OPERATION
(optional), DATA_SOURCE_NAME, and
INPUT_IDENTIFIER_TYPES. SERVICE_NAME and OPERATION are described
in BaseCoverageProvider; the rest are described in appropriate
comments in this class.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="core.coverage.IdentifierCoverageProvider.COVERAGE_COUNTS_FOR_EVERY_COLLECTION">
<span class="sig-name descname"><span class="pre">COVERAGE_COUNTS_FOR_EVERY_COLLECTION</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">True</span></em><a class="headerlink" href="#core.coverage.IdentifierCoverageProvider.COVERAGE_COUNTS_FOR_EVERY_COLLECTION" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.coverage.IdentifierCoverageProvider.DATA_SOURCE_NAME">
<span class="sig-name descname"><span class="pre">DATA_SOURCE_NAME</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#core.coverage.IdentifierCoverageProvider.DATA_SOURCE_NAME" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.coverage.IdentifierCoverageProvider.INPUT_IDENTIFIER_TYPES">
<span class="sig-name descname"><span class="pre">INPUT_IDENTIFIER_TYPES</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">&lt;object</span> <span class="pre">object&gt;</span></em><a class="headerlink" href="#core.coverage.IdentifierCoverageProvider.INPUT_IDENTIFIER_TYPES" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.coverage.IdentifierCoverageProvider.NO_SPECIFIED_TYPES">
<span class="sig-name descname"><span class="pre">NO_SPECIFIED_TYPES</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">&lt;object</span> <span class="pre">object&gt;</span></em><a class="headerlink" href="#core.coverage.IdentifierCoverageProvider.NO_SPECIFIED_TYPES" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.coverage.IdentifierCoverageProvider.add_coverage_record_for">
<span class="sig-name descname"><span class="pre">add_coverage_record_for</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">item</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/coverage.html#IdentifierCoverageProvider.add_coverage_record_for"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.coverage.IdentifierCoverageProvider.add_coverage_record_for" title="Permalink to this definition">¶</a></dt>
<dd><p>Record this CoverageProvider’s coverage for the given
Edition/Identifier, as a CoverageRecord.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.coverage.IdentifierCoverageProvider.bulk_register">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">bulk_register</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">identifiers</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data_source</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">collection</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">force</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">autocreate</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/coverage.html#IdentifierCoverageProvider.bulk_register"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.coverage.IdentifierCoverageProvider.bulk_register" title="Permalink to this definition">¶</a></dt>
<dd><p>Registers identifiers for future coverage.</p>
<p>This method is primarily for use with CoverageProviders that use the
<cite>registered_only</cite> flag to process items. It’s currently only in use
on the Metadata Wrangler.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data_source</strong> – DataSource object or basestring representing a
DataSource name.</p></li>
<li><p><strong>collection</strong> – Collection object to be associated with the
CoverageRecords.</p></li>
<li><p><strong>force</strong> – When True, even existing CoverageRecords will have
their status reset to CoverageRecord.REGISTERED.</p></li>
<li><p><strong>autocreate</strong> – When True, a basestring provided by data_source will
be autocreated in the database if it didn’t previously exist.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A tuple of two lists: the first has fresh new REGISTERED
CoverageRecords and the second list already has Identifiers that
were ignored because they already had coverage.</p>
</dd>
</dl>
<p>TODO: Take identifier eligibility into account when registering.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.coverage.IdentifierCoverageProvider.can_cover">
<span class="sig-name descname"><span class="pre">can_cover</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">identifier</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/coverage.html#IdentifierCoverageProvider.can_cover"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.coverage.IdentifierCoverageProvider.can_cover" title="Permalink to this definition">¶</a></dt>
<dd><p>Can this IdentifierCoverageProvider do anything with the given
Identifier?</p>
<p>This is not needed in the normal course of events, but a
caller may need to decide whether to pass an Identifier
into ensure_coverage() or register().</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="core.coverage.IdentifierCoverageProvider.collection_or_not">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">collection_or_not</span></span><a class="headerlink" href="#core.coverage.IdentifierCoverageProvider.collection_or_not" title="Permalink to this definition">¶</a></dt>
<dd><p>If this CoverageProvider needs to be run multiple times on
the same identifier in different collections, this
returns the collection. Otherwise, this returns None.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="core.coverage.IdentifierCoverageProvider.data_source">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">data_source</span></span><a class="headerlink" href="#core.coverage.IdentifierCoverageProvider.data_source" title="Permalink to this definition">¶</a></dt>
<dd><p>Look up the DataSource object corresponding to the
service we’re running this data through.</p>
<p>Out of an excess of caution, we look up the DataSource every
time, rather than storing it, in case a CoverageProvider is
ever used in an environment where the database session is
scoped (e.g. the circulation manager).</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.coverage.IdentifierCoverageProvider.edition">
<span class="sig-name descname"><span class="pre">edition</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">identifier</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/coverage.html#IdentifierCoverageProvider.edition"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.coverage.IdentifierCoverageProvider.edition" title="Permalink to this definition">¶</a></dt>
<dd><p>Finds or creates an Edition representing this coverage provider’s
view of a given Identifier.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.coverage.IdentifierCoverageProvider.ensure_coverage">
<span class="sig-name descname"><span class="pre">ensure_coverage</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">item</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">force</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/coverage.html#IdentifierCoverageProvider.ensure_coverage"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.coverage.IdentifierCoverageProvider.ensure_coverage" title="Permalink to this definition">¶</a></dt>
<dd><p>Ensure coverage for one specific item.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>item</strong> – This should always be an Identifier, but this
code will also work if it’s an Edition. (The Edition’s
.primary_identifier will be covered.)</p></li>
<li><p><strong>force</strong> – Run the coverage code even if an existing
coverage record for this item was created after <cite>self.cutoff_time</cite>.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Either a coverage record or a CoverageFailure.</p>
</dd>
</dl>
<p>TODO: This could be abstracted and moved to BaseCoverageProvider.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.coverage.IdentifierCoverageProvider.failure">
<span class="sig-name descname"><span class="pre">failure</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">identifier</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">error</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">transient</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/coverage.html#IdentifierCoverageProvider.failure"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.coverage.IdentifierCoverageProvider.failure" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a CoverageFailure object to memorialize an error.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.coverage.IdentifierCoverageProvider.failure_for_ignored_item">
<span class="sig-name descname"><span class="pre">failure_for_ignored_item</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">item</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/coverage.html#IdentifierCoverageProvider.failure_for_ignored_item"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.coverage.IdentifierCoverageProvider.failure_for_ignored_item" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a CoverageFailure recording the CoverageProvider’s
failure to even try to process an item.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.coverage.IdentifierCoverageProvider.items_that_need_coverage">
<span class="sig-name descname"><span class="pre">items_that_need_coverage</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">identifiers</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/coverage.html#IdentifierCoverageProvider.items_that_need_coverage"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.coverage.IdentifierCoverageProvider.items_that_need_coverage" title="Permalink to this definition">¶</a></dt>
<dd><p>Find all items lacking coverage from this CoverageProvider.</p>
<p>Items should be Identifiers, though Editions should also work.</p>
<p>By default, all identifiers of the <cite>INPUT_IDENTIFIER_TYPES</cite> which
don’t already have coverage are chosen.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>identifiers</strong> – The batch of identifier objects to test
for coverage. identifiers and self.input_identifiers can
intersect – if this provider was created for the purpose
of running specific Identifiers, and within those
Identifiers you want to batch, you can use both
parameters.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.coverage.IdentifierCoverageProvider.record_failure_as_coverage_record">
<span class="sig-name descname"><span class="pre">record_failure_as_coverage_record</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">failure</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/coverage.html#IdentifierCoverageProvider.record_failure_as_coverage_record"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.coverage.IdentifierCoverageProvider.record_failure_as_coverage_record" title="Permalink to this definition">¶</a></dt>
<dd><p>Turn a CoverageFailure into a CoverageRecord object.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.coverage.IdentifierCoverageProvider.register">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">register</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">identifier</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data_source</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">collection</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">force</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">autocreate</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/coverage.html#IdentifierCoverageProvider.register"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.coverage.IdentifierCoverageProvider.register" title="Permalink to this definition">¶</a></dt>
<dd><p>Registers an identifier for future coverage.</p>
<p>See <cite>CoverageProvider.bulk_register</cite> for more information about using
this method.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.coverage.IdentifierCoverageProvider.run_on_specific_identifiers">
<span class="sig-name descname"><span class="pre">run_on_specific_identifiers</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">identifiers</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/coverage.html#IdentifierCoverageProvider.run_on_specific_identifiers"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.coverage.IdentifierCoverageProvider.run_on_specific_identifiers" title="Permalink to this definition">¶</a></dt>
<dd><p>Split a specific set of Identifiers into batches and process one
batch at a time.</p>
<p>This is for use by IdentifierInputScript.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>The same (counts, records) 2-tuple as
process_batch_and_handle_results.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.coverage.IdentifierCoverageProvider.set_metadata">
<span class="sig-name descname"><span class="pre">set_metadata</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">identifier</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">metadata</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/coverage.html#IdentifierCoverageProvider.set_metadata"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.coverage.IdentifierCoverageProvider.set_metadata" title="Permalink to this definition">¶</a></dt>
<dd><p>Finds or creates the Edition for an Identifier, updates it
with the given metadata.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>The Identifier (if successful) or an appropriate
CoverageFailure (if not).</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.coverage.MARCRecordWorkCoverageProvider">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.coverage.</span></span><span class="sig-name descname"><span class="pre">MARCRecordWorkCoverageProvider</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">batch_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cutoff_time</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">registered_only</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/coverage.html#MARCRecordWorkCoverageProvider"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.coverage.MARCRecordWorkCoverageProvider" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.coverage.WorkPresentationProvider" title="core.coverage.WorkPresentationProvider"><code class="xref py py-class docutils literal notranslate"><span class="pre">WorkPresentationProvider</span></code></a></p>
<p>Make sure all presentation-ready works have an up-to-date MARC
record.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="core.coverage.MARCRecordWorkCoverageProvider.DEFAULT_BATCH_SIZE">
<span class="sig-name descname"><span class="pre">DEFAULT_BATCH_SIZE</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">1000</span></em><a class="headerlink" href="#core.coverage.MARCRecordWorkCoverageProvider.DEFAULT_BATCH_SIZE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.coverage.MARCRecordWorkCoverageProvider.OPERATION">
<span class="sig-name descname"><span class="pre">OPERATION</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'generate-marc'</span></em><a class="headerlink" href="#core.coverage.MARCRecordWorkCoverageProvider.OPERATION" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.coverage.MARCRecordWorkCoverageProvider.SERVICE_NAME">
<span class="sig-name descname"><span class="pre">SERVICE_NAME</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'MARC</span> <span class="pre">Record</span> <span class="pre">Work</span> <span class="pre">Coverage</span> <span class="pre">Provider'</span></em><a class="headerlink" href="#core.coverage.MARCRecordWorkCoverageProvider.SERVICE_NAME" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.coverage.MARCRecordWorkCoverageProvider.process_item">
<span class="sig-name descname"><span class="pre">process_item</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">work</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/coverage.html#MARCRecordWorkCoverageProvider.process_item"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.coverage.MARCRecordWorkCoverageProvider.process_item" title="Permalink to this definition">¶</a></dt>
<dd><p>Do the work necessary to give coverage to one specific item.</p>
<p>Since this is where the actual work happens, this is not
implemented in IdentifierCoverageProvider or
WorkCoverageProvider, and must be handled in a subclass.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.coverage.OPDSEntryWorkCoverageProvider">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.coverage.</span></span><span class="sig-name descname"><span class="pre">OPDSEntryWorkCoverageProvider</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">batch_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cutoff_time</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">registered_only</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/coverage.html#OPDSEntryWorkCoverageProvider"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.coverage.OPDSEntryWorkCoverageProvider" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.coverage.WorkPresentationProvider" title="core.coverage.WorkPresentationProvider"><code class="xref py py-class docutils literal notranslate"><span class="pre">WorkPresentationProvider</span></code></a></p>
<p>Make sure all presentation-ready works have an up-to-date OPDS
entry.</p>
<p>This is different from the OPDSEntryCacheMonitor, which sweeps
over all presentation-ready works, even ones which are already
covered.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="core.coverage.OPDSEntryWorkCoverageProvider.DEFAULT_BATCH_SIZE">
<span class="sig-name descname"><span class="pre">DEFAULT_BATCH_SIZE</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">1000</span></em><a class="headerlink" href="#core.coverage.OPDSEntryWorkCoverageProvider.DEFAULT_BATCH_SIZE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.coverage.OPDSEntryWorkCoverageProvider.OPERATION">
<span class="sig-name descname"><span class="pre">OPERATION</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'generate-opds'</span></em><a class="headerlink" href="#core.coverage.OPDSEntryWorkCoverageProvider.OPERATION" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.coverage.OPDSEntryWorkCoverageProvider.SERVICE_NAME">
<span class="sig-name descname"><span class="pre">SERVICE_NAME</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'OPDS</span> <span class="pre">Entry</span> <span class="pre">Work</span> <span class="pre">Coverage</span> <span class="pre">Provider'</span></em><a class="headerlink" href="#core.coverage.OPDSEntryWorkCoverageProvider.SERVICE_NAME" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.coverage.OPDSEntryWorkCoverageProvider.process_item">
<span class="sig-name descname"><span class="pre">process_item</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">work</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/coverage.html#OPDSEntryWorkCoverageProvider.process_item"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.coverage.OPDSEntryWorkCoverageProvider.process_item" title="Permalink to this definition">¶</a></dt>
<dd><p>Do the work necessary to give coverage to one specific item.</p>
<p>Since this is where the actual work happens, this is not
implemented in IdentifierCoverageProvider or
WorkCoverageProvider, and must be handled in a subclass.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.coverage.PresentationReadyWorkCoverageProvider">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.coverage.</span></span><span class="sig-name descname"><span class="pre">PresentationReadyWorkCoverageProvider</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">batch_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cutoff_time</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">registered_only</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/coverage.html#PresentationReadyWorkCoverageProvider"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.coverage.PresentationReadyWorkCoverageProvider" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.coverage.WorkCoverageProvider" title="core.coverage.WorkCoverageProvider"><code class="xref py py-class docutils literal notranslate"><span class="pre">WorkCoverageProvider</span></code></a></p>
<p>A WorkCoverageProvider that only covers presentation-ready works.</p>
<dl class="py method">
<dt class="sig sig-object py" id="core.coverage.PresentationReadyWorkCoverageProvider.items_that_need_coverage">
<span class="sig-name descname"><span class="pre">items_that_need_coverage</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">identifiers</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/coverage.html#PresentationReadyWorkCoverageProvider.items_that_need_coverage"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.coverage.PresentationReadyWorkCoverageProvider.items_that_need_coverage" title="Permalink to this definition">¶</a></dt>
<dd><p>Find all Works lacking coverage from this CoverageProvider.</p>
<p>By default, all Works which don’t already have coverage are
chosen.</p>
<dl class="field-list simple">
<dt class="field-odd">Param<span class="colon">:</span></dt>
<dd class="field-odd"><p>Only Works connected with one of the given identifiers
are chosen.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.coverage.WorkClassificationCoverageProvider">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.coverage.</span></span><span class="sig-name descname"><span class="pre">WorkClassificationCoverageProvider</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">batch_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cutoff_time</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">registered_only</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/coverage.html#WorkClassificationCoverageProvider"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.coverage.WorkClassificationCoverageProvider" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.coverage.WorkPresentationEditionCoverageProvider" title="core.coverage.WorkPresentationEditionCoverageProvider"><code class="xref py py-class docutils literal notranslate"><span class="pre">WorkPresentationEditionCoverageProvider</span></code></a></p>
<p>Calculates the ‘expensive’ parts of a work’s presentation:
classifications, summary, and quality.</p>
<p>We do all three at once because these gathering together all
equivalent identifiers for the work, which can be, by far, the
most expensive part of the work.</p>
<p>This is called ‘classification’ because that’s the most likely use
of this coverage provider. If you want to make sure a bunch of
works get their summaries recalculated, you need to remember that
the coverage record to delete is CLASSIFY_OPERATION.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="core.coverage.WorkClassificationCoverageProvider.DEFAULT_BATCH_SIZE">
<span class="sig-name descname"><span class="pre">DEFAULT_BATCH_SIZE</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">20</span></em><a class="headerlink" href="#core.coverage.WorkClassificationCoverageProvider.DEFAULT_BATCH_SIZE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.coverage.WorkClassificationCoverageProvider.OPERATION">
<span class="sig-name descname"><span class="pre">OPERATION</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'classify'</span></em><a class="headerlink" href="#core.coverage.WorkClassificationCoverageProvider.OPERATION" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.coverage.WorkClassificationCoverageProvider.POLICY">
<span class="sig-name descname"><span class="pre">POLICY</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">&lt;core.model.PresentationCalculationPolicy</span> <span class="pre">object&gt;</span></em><a class="headerlink" href="#core.coverage.WorkClassificationCoverageProvider.POLICY" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.coverage.WorkClassificationCoverageProvider.SERVICE_NAME">
<span class="sig-name descname"><span class="pre">SERVICE_NAME</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'Work</span> <span class="pre">classification</span> <span class="pre">coverage</span> <span class="pre">provider'</span></em><a class="headerlink" href="#core.coverage.WorkClassificationCoverageProvider.SERVICE_NAME" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.coverage.WorkCoverageProvider">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.coverage.</span></span><span class="sig-name descname"><span class="pre">WorkCoverageProvider</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">batch_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cutoff_time</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">registered_only</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/coverage.html#WorkCoverageProvider"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.coverage.WorkCoverageProvider" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.coverage.BaseCoverageProvider" title="core.coverage.BaseCoverageProvider"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCoverageProvider</span></code></a></p>
<p>Perform coverage operations on Works rather than Identifiers.</p>
<dl class="py method">
<dt class="sig sig-object py" id="core.coverage.WorkCoverageProvider.add_coverage_record_for">
<span class="sig-name descname"><span class="pre">add_coverage_record_for</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">work</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/coverage.html#WorkCoverageProvider.add_coverage_record_for"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.coverage.WorkCoverageProvider.add_coverage_record_for" title="Permalink to this definition">¶</a></dt>
<dd><p>Record this CoverageProvider’s coverage for the given
Edition/Identifier, as a WorkCoverageRecord.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.coverage.WorkCoverageProvider.add_coverage_records_for">
<span class="sig-name descname"><span class="pre">add_coverage_records_for</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">works</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/coverage.html#WorkCoverageProvider.add_coverage_records_for"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.coverage.WorkCoverageProvider.add_coverage_records_for" title="Permalink to this definition">¶</a></dt>
<dd><p>Add WorkCoverageRecords for a group of works from a batch,
each of which was successful.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.coverage.WorkCoverageProvider.failure">
<span class="sig-name descname"><span class="pre">failure</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">work</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">error</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">transient</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/coverage.html#WorkCoverageProvider.failure"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.coverage.WorkCoverageProvider.failure" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a CoverageFailure object.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.coverage.WorkCoverageProvider.failure_for_ignored_item">
<span class="sig-name descname"><span class="pre">failure_for_ignored_item</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">work</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/coverage.html#WorkCoverageProvider.failure_for_ignored_item"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.coverage.WorkCoverageProvider.failure_for_ignored_item" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a CoverageFailure recording the WorkCoverageProvider’s
failure to even try to process a Work.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.coverage.WorkCoverageProvider.items_that_need_coverage">
<span class="sig-name descname"><span class="pre">items_that_need_coverage</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">identifiers</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/coverage.html#WorkCoverageProvider.items_that_need_coverage"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.coverage.WorkCoverageProvider.items_that_need_coverage" title="Permalink to this definition">¶</a></dt>
<dd><p>Find all Works lacking coverage from this CoverageProvider.</p>
<p>By default, all Works which don’t already have coverage are
chosen.</p>
<dl class="field-list simple">
<dt class="field-odd">Param<span class="colon">:</span></dt>
<dd class="field-odd"><p>Only Works connected with one of the given identifiers
are chosen.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.coverage.WorkCoverageProvider.record_failure_as_coverage_record">
<span class="sig-name descname"><span class="pre">record_failure_as_coverage_record</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">failure</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/coverage.html#WorkCoverageProvider.record_failure_as_coverage_record"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.coverage.WorkCoverageProvider.record_failure_as_coverage_record" title="Permalink to this definition">¶</a></dt>
<dd><p>Turn a CoverageFailure into a WorkCoverageRecord object.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.coverage.WorkCoverageProvider.register">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">register</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">work</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">force</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/coverage.html#WorkCoverageProvider.register"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.coverage.WorkCoverageProvider.register" title="Permalink to this definition">¶</a></dt>
<dd><p>Registers a work for future coverage.</p>
<p>This method is primarily for use with CoverageProviders that use the
<cite>registered_only</cite> flag to process items. It’s currently only in use
on the Metadata Wrangler.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>force</strong> – Set to True to reset an existing CoverageRecord’s status
“registered”, regardless of its current status.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.coverage.WorkPresentationEditionCoverageProvider">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.coverage.</span></span><span class="sig-name descname"><span class="pre">WorkPresentationEditionCoverageProvider</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">batch_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cutoff_time</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">registered_only</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/coverage.html#WorkPresentationEditionCoverageProvider"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.coverage.WorkPresentationEditionCoverageProvider" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.coverage.WorkPresentationProvider" title="core.coverage.WorkPresentationProvider"><code class="xref py py-class docutils literal notranslate"><span class="pre">WorkPresentationProvider</span></code></a></p>
<p>Make sure each Work has an up-to-date presentation edition.</p>
<p>This basically means comparing all the Editions associated with the
Work and building a composite Edition.</p>
<p>Expensive operations – calculating work quality, summary, and genre
classification – are reserved for WorkClassificationCoverageProvider</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="core.coverage.WorkPresentationEditionCoverageProvider.OPERATION">
<span class="sig-name descname"><span class="pre">OPERATION</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'choose-edition'</span></em><a class="headerlink" href="#core.coverage.WorkPresentationEditionCoverageProvider.OPERATION" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.coverage.WorkPresentationEditionCoverageProvider.POLICY">
<span class="sig-name descname"><span class="pre">POLICY</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">&lt;core.model.PresentationCalculationPolicy</span> <span class="pre">object&gt;</span></em><a class="headerlink" href="#core.coverage.WorkPresentationEditionCoverageProvider.POLICY" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.coverage.WorkPresentationEditionCoverageProvider.SERVICE_NAME">
<span class="sig-name descname"><span class="pre">SERVICE_NAME</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'Calculated</span> <span class="pre">presentation</span> <span class="pre">coverage</span> <span class="pre">provider'</span></em><a class="headerlink" href="#core.coverage.WorkPresentationEditionCoverageProvider.SERVICE_NAME" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.coverage.WorkPresentationEditionCoverageProvider.process_item">
<span class="sig-name descname"><span class="pre">process_item</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">work</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/coverage.html#WorkPresentationEditionCoverageProvider.process_item"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.coverage.WorkPresentationEditionCoverageProvider.process_item" title="Permalink to this definition">¶</a></dt>
<dd><p>Recalculate the presentation for a Work.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.coverage.WorkPresentationProvider">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.coverage.</span></span><span class="sig-name descname"><span class="pre">WorkPresentationProvider</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">batch_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cutoff_time</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">registered_only</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/coverage.html#WorkPresentationProvider"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.coverage.WorkPresentationProvider" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.coverage.PresentationReadyWorkCoverageProvider" title="core.coverage.PresentationReadyWorkCoverageProvider"><code class="xref py py-class docutils literal notranslate"><span class="pre">PresentationReadyWorkCoverageProvider</span></code></a></p>
<p>Recalculate some part of presentation for works that are
presentation-ready.</p>
<p>A Work’s presentation is set when it’s made presentation-ready
(thus the name). When that happens, a number of WorkCoverageRecords
are set for that Work.</p>
<p>A migration script may remove a coverage record if it knows a work
needs to have some aspect of its presentation recalculated. These
providers give back the ‘missing’ coverage.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="core.coverage.WorkPresentationProvider.DEFAULT_BATCH_SIZE">
<span class="sig-name descname"><span class="pre">DEFAULT_BATCH_SIZE</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">100</span></em><a class="headerlink" href="#core.coverage.WorkPresentationProvider.DEFAULT_BATCH_SIZE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</section>
<section id="module-core.entrypoint">
<span id="core-entrypoint-module"></span><h2>core.entrypoint module<a class="headerlink" href="#module-core.entrypoint" title="Permalink to this heading">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="core.entrypoint.AudiobooksEntryPoint">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.entrypoint.</span></span><span class="sig-name descname"><span class="pre">AudiobooksEntryPoint</span></span><a class="reference internal" href="_modules/core/entrypoint.html#AudiobooksEntryPoint"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.entrypoint.AudiobooksEntryPoint" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.entrypoint.MediumEntryPoint" title="core.entrypoint.MediumEntryPoint"><code class="xref py py-class docutils literal notranslate"><span class="pre">MediumEntryPoint</span></code></a></p>
<dl class="py attribute">
<dt class="sig sig-object py" id="core.entrypoint.AudiobooksEntryPoint.INTERNAL_NAME">
<span class="sig-name descname"><span class="pre">INTERNAL_NAME</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'Audio'</span></em><a class="headerlink" href="#core.entrypoint.AudiobooksEntryPoint.INTERNAL_NAME" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.entrypoint.AudiobooksEntryPoint.URI">
<span class="sig-name descname"><span class="pre">URI</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'http://bib.schema.org/Audiobook'</span></em><a class="headerlink" href="#core.entrypoint.AudiobooksEntryPoint.URI" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.entrypoint.EbooksEntryPoint">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.entrypoint.</span></span><span class="sig-name descname"><span class="pre">EbooksEntryPoint</span></span><a class="reference internal" href="_modules/core/entrypoint.html#EbooksEntryPoint"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.entrypoint.EbooksEntryPoint" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.entrypoint.MediumEntryPoint" title="core.entrypoint.MediumEntryPoint"><code class="xref py py-class docutils literal notranslate"><span class="pre">MediumEntryPoint</span></code></a></p>
<dl class="py attribute">
<dt class="sig sig-object py" id="core.entrypoint.EbooksEntryPoint.INTERNAL_NAME">
<span class="sig-name descname"><span class="pre">INTERNAL_NAME</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'Book'</span></em><a class="headerlink" href="#core.entrypoint.EbooksEntryPoint.INTERNAL_NAME" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.entrypoint.EbooksEntryPoint.URI">
<span class="sig-name descname"><span class="pre">URI</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'http://schema.org/EBook'</span></em><a class="headerlink" href="#core.entrypoint.EbooksEntryPoint.URI" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.entrypoint.EntryPoint">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.entrypoint.</span></span><span class="sig-name descname"><span class="pre">EntryPoint</span></span><a class="reference internal" href="_modules/core/entrypoint.html#EntryPoint"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.entrypoint.EntryPoint" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>A EntryPoint is a top-level entry point into a library’s Lane structure
that may apply additional filters to the Lane structure.</p>
<p>The “Books” and “Audiobooks” entry points (defined in the
EbooksEntryPoint and AudiobooksEntryPoint classes) are different
views on a library’s Lane structure; each applies an additional
filter against Edition.medium.</p>
<p>Each individual EntryPoint should be represented as a subclass of
EntryPoint, and should be registered with the overall EntryPoint
class by calling EntryPoint.register.</p>
<p>The list of entry points shows up as a facet group in a library’s
top-level grouped feed, and in search results. The SimplyE client
renders entry points as a set of tabs.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="core.entrypoint.EntryPoint.BY_INTERNAL_NAME">
<span class="sig-name descname"><span class="pre">BY_INTERNAL_NAME</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">{'All':</span> <span class="pre">&lt;class</span> <span class="pre">'core.entrypoint.EverythingEntryPoint'&gt;,</span> <span class="pre">'Audio':</span> <span class="pre">&lt;class</span> <span class="pre">'core.entrypoint.AudiobooksEntryPoint'&gt;,</span> <span class="pre">'Book':</span> <span class="pre">&lt;class</span> <span class="pre">'core.entrypoint.EbooksEntryPoint'&gt;}</span></em><a class="headerlink" href="#core.entrypoint.EntryPoint.BY_INTERNAL_NAME" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.entrypoint.EntryPoint.DEFAULT_ENABLED">
<span class="sig-name descname"><span class="pre">DEFAULT_ENABLED</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">[&lt;class</span> <span class="pre">'core.entrypoint.EbooksEntryPoint'&gt;]</span></em><a class="headerlink" href="#core.entrypoint.EntryPoint.DEFAULT_ENABLED" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.entrypoint.EntryPoint.DISPLAY_TITLES">
<span class="sig-name descname"><span class="pre">DISPLAY_TITLES</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">{&lt;class</span> <span class="pre">'core.entrypoint.EverythingEntryPoint'&gt;:</span> <span class="pre">'All',</span> <span class="pre">&lt;class</span> <span class="pre">'core.entrypoint.EbooksEntryPoint'&gt;:</span> <span class="pre">'eBooks',</span> <span class="pre">&lt;class</span> <span class="pre">'core.entrypoint.AudiobooksEntryPoint'&gt;:</span> <span class="pre">'Audiobooks'}</span></em><a class="headerlink" href="#core.entrypoint.EntryPoint.DISPLAY_TITLES" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.entrypoint.EntryPoint.ENABLED_SETTING">
<span class="sig-name descname"><span class="pre">ENABLED_SETTING</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'enabled_entry_points'</span></em><a class="headerlink" href="#core.entrypoint.EntryPoint.ENABLED_SETTING" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.entrypoint.EntryPoint.ENTRY_POINTS">
<span class="sig-name descname"><span class="pre">ENTRY_POINTS</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">[&lt;class</span> <span class="pre">'core.entrypoint.EverythingEntryPoint'&gt;,</span> <span class="pre">&lt;class</span> <span class="pre">'core.entrypoint.EbooksEntryPoint'&gt;,</span> <span class="pre">&lt;class</span> <span class="pre">'core.entrypoint.AudiobooksEntryPoint'&gt;]</span></em><a class="headerlink" href="#core.entrypoint.EntryPoint.ENTRY_POINTS" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.entrypoint.EntryPoint.URI">
<span class="sig-name descname"><span class="pre">URI</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#core.entrypoint.EntryPoint.URI" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.entrypoint.EntryPoint.modify_database_query">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">modify_database_query</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">qu</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/entrypoint.html#EntryPoint.modify_database_query"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.entrypoint.EntryPoint.modify_database_query" title="Permalink to this definition">¶</a></dt>
<dd><p>If necessary, modify a database query so that it restricts results
to items shown through this entry point.</p>
<p>The default behavior is to not change a database query at all.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.entrypoint.EntryPoint.modify_search_filter">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">modify_search_filter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filter</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/entrypoint.html#EntryPoint.modify_search_filter"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.entrypoint.EntryPoint.modify_search_filter" title="Permalink to this definition">¶</a></dt>
<dd><p>If necessary, modify an ElasticSearch Filter object so that it
restricts results to items shown through this entry point.</p>
<p>The default behavior is not to change the Filter object at all.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>filter</strong> – An external_search.Filter object.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.entrypoint.EntryPoint.register">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">register</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">entrypoint_class</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">display_title</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">default_enabled</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/entrypoint.html#EntryPoint.register"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.entrypoint.EntryPoint.register" title="Permalink to this definition">¶</a></dt>
<dd><p>Register the given subclass with the master registry
kept in the EntryPoint class.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>entrypoint_class</strong> – A subclass of EntryPoint.</p></li>
<li><p><strong>display_title</strong> – The title to use when displaying this entry point
to patrons.</p></li>
<li><p><strong>default_enabled</strong> – New libraries should have this entry point
enabled by default.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.entrypoint.EntryPoint.unregister">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">unregister</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">entrypoint_class</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/entrypoint.html#EntryPoint.unregister"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.entrypoint.EntryPoint.unregister" title="Permalink to this definition">¶</a></dt>
<dd><p>Undo a subclass’s registration.</p>
<p>Only used in tests.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.entrypoint.EverythingEntryPoint">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.entrypoint.</span></span><span class="sig-name descname"><span class="pre">EverythingEntryPoint</span></span><a class="reference internal" href="_modules/core/entrypoint.html#EverythingEntryPoint"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.entrypoint.EverythingEntryPoint" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.entrypoint.EntryPoint" title="core.entrypoint.EntryPoint"><code class="xref py py-class docutils literal notranslate"><span class="pre">EntryPoint</span></code></a></p>
<p>An entry point that has everything.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="core.entrypoint.EverythingEntryPoint.INTERNAL_NAME">
<span class="sig-name descname"><span class="pre">INTERNAL_NAME</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'All'</span></em><a class="headerlink" href="#core.entrypoint.EverythingEntryPoint.INTERNAL_NAME" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.entrypoint.EverythingEntryPoint.URI">
<span class="sig-name descname"><span class="pre">URI</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'http://schema.org/CreativeWork'</span></em><a class="headerlink" href="#core.entrypoint.EverythingEntryPoint.URI" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.entrypoint.MediumEntryPoint">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.entrypoint.</span></span><span class="sig-name descname"><span class="pre">MediumEntryPoint</span></span><a class="reference internal" href="_modules/core/entrypoint.html#MediumEntryPoint"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.entrypoint.MediumEntryPoint" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.entrypoint.EntryPoint" title="core.entrypoint.EntryPoint"><code class="xref py py-class docutils literal notranslate"><span class="pre">EntryPoint</span></code></a></p>
<p>A entry point that creates a view on one specific medium.</p>
<p>The medium is expected to be the entry point’s INTERNAL_NAME.</p>
<p>The URI is expected to be the one in
Edition.schema_to_additional_type[INTERNAL_NAME]</p>
<dl class="py method">
<dt class="sig sig-object py" id="core.entrypoint.MediumEntryPoint.modify_database_query">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">modify_database_query</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">qu</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/entrypoint.html#MediumEntryPoint.modify_database_query"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.entrypoint.MediumEntryPoint.modify_database_query" title="Permalink to this definition">¶</a></dt>
<dd><p>Modify a query against Work+LicensePool+Edition
to match only items with the right medium.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.entrypoint.MediumEntryPoint.modify_search_filter">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">modify_search_filter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filter</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/entrypoint.html#MediumEntryPoint.modify_search_filter"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.entrypoint.MediumEntryPoint.modify_search_filter" title="Permalink to this definition">¶</a></dt>
<dd><p>Modify an external_search.Filter object so it only finds
titles available through this EntryPoint.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>filter</strong> – An external_search.Filter object.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="module-core.exceptions">
<span id="core-exceptions-module"></span><h2>core.exceptions module<a class="headerlink" href="#module-core.exceptions" title="Permalink to this heading">¶</a></h2>
<dl class="py exception">
<dt class="sig sig-object py" id="core.exceptions.BaseError">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.exceptions.</span></span><span class="sig-name descname"><span class="pre">BaseError</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">message</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">inner_exception</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/exceptions.html#BaseError"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.exceptions.BaseError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">Exception</span></code></p>
<p>Base class for all errors</p>
<dl class="py property">
<dt class="sig sig-object py" id="core.exceptions.BaseError.inner_exception">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">inner_exception</span></span><a class="headerlink" href="#core.exceptions.BaseError.inner_exception" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns an inner exception</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Inner exception</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>Exception</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="module-core.external_list">
<span id="core-external-list-module"></span><h2>core.external_list module<a class="headerlink" href="#module-core.external_list" title="Permalink to this heading">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="core.external_list.ClassificationBasedMembershipManager">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.external_list.</span></span><span class="sig-name descname"><span class="pre">ClassificationBasedMembershipManager</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">custom_list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">subject_fragments</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/external_list.html#ClassificationBasedMembershipManager"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.external_list.ClassificationBasedMembershipManager" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.external_list.MembershipManager" title="core.external_list.MembershipManager"><code class="xref py py-class docutils literal notranslate"><span class="pre">MembershipManager</span></code></a></p>
<p>Manage a custom list containing all Editions whose primary
Identifier is classified under one of the given subject fragments.</p>
<dl class="py property">
<dt class="sig sig-object py" id="core.external_list.ClassificationBasedMembershipManager.new_membership">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">new_membership</span></span><a class="headerlink" href="#core.external_list.ClassificationBasedMembershipManager.new_membership" title="Permalink to this definition">¶</a></dt>
<dd><p>Iterate over the new membership of the list.</p>
<dl class="field-list simple">
<dt class="field-odd">Yield<span class="colon">:</span></dt>
<dd class="field-odd"><p>a sequence of Edition objects</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.external_list.CustomListFromCSV">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.external_list.</span></span><span class="sig-name descname"><span class="pre">CustomListFromCSV</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data_source_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">list_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">metadata_client</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">overwrite_old_data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">annotation_field</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'text'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">annotation_author_name_field</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'name'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">annotation_author_affiliation_field</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'location'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">first_appearance_field</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'timestamp'</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/external_list.html#CustomListFromCSV"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.external_list.CustomListFromCSV" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.metadata_layer.CSVMetadataImporter" title="core.metadata_layer.CSVMetadataImporter"><code class="xref py py-class docutils literal notranslate"><span class="pre">CSVMetadataImporter</span></code></a></p>
<p>Create a CustomList, with entries, from a CSV file.</p>
<dl class="py method">
<dt class="sig sig-object py" id="core.external_list.CustomListFromCSV.annotation_citation">
<span class="sig-name descname"><span class="pre">annotation_citation</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">row</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/external_list.html#CustomListFromCSV.annotation_citation"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.external_list.CustomListFromCSV.annotation_citation" title="Permalink to this definition">¶</a></dt>
<dd><p>Extract a citation for an annotation from a row of a CSV file.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.external_list.CustomListFromCSV.metadata_to_list_entry">
<span class="sig-name descname"><span class="pre">metadata_to_list_entry</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">custom_list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data_source</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">now</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">metadata</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/external_list.html#CustomListFromCSV.metadata_to_list_entry"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.external_list.CustomListFromCSV.metadata_to_list_entry" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert a Metadata object to a CustomListEntry.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.external_list.CustomListFromCSV.metadata_to_title">
<span class="sig-name descname"><span class="pre">metadata_to_title</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">now</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">metadata</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/external_list.html#CustomListFromCSV.metadata_to_title"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.external_list.CustomListFromCSV.metadata_to_title" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert a Metadata object to a TitleFromExternalList object.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.external_list.CustomListFromCSV.to_customlist">
<span class="sig-name descname"><span class="pre">to_customlist</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dictreader</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/external_list.html#CustomListFromCSV.to_customlist"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.external_list.CustomListFromCSV.to_customlist" title="Permalink to this definition">¶</a></dt>
<dd><p>Turn the CSV file in <cite>dictreader</cite> into a CustomList.</p>
<p>TODO: Keep track of the list’s current members. If any item
was on the list but is no longer on the list, set its
last_appeared date to its most recent appearance.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.external_list.MembershipManager">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.external_list.</span></span><span class="sig-name descname"><span class="pre">MembershipManager</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">custom_list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">log</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/external_list.html#MembershipManager"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.external_list.MembershipManager" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Manage the membership of a custom list based on some criteria.</p>
<dl class="py property">
<dt class="sig sig-object py" id="core.external_list.MembershipManager.new_membership">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">new_membership</span></span><a class="headerlink" href="#core.external_list.MembershipManager.new_membership" title="Permalink to this definition">¶</a></dt>
<dd><p>Iterate over the new membership of the list.</p>
<dl class="field-list simple">
<dt class="field-odd">Yield<span class="colon">:</span></dt>
<dd class="field-odd"><p>a sequence of Edition objects</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.external_list.MembershipManager.update">
<span class="sig-name descname"><span class="pre">update</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">update_time</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/external_list.html#MembershipManager.update"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.external_list.MembershipManager.update" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.external_list.TitleFromExternalList">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.external_list.</span></span><span class="sig-name descname"><span class="pre">TitleFromExternalList</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">metadata</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">first_appearance</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">most_recent_appearance</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">annotation</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/external_list.html#TitleFromExternalList"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.external_list.TitleFromExternalList" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>This class helps you convert data from external lists into Simplified
Edition and CustomListEntry objects.</p>
<dl class="py method">
<dt class="sig sig-object py" id="core.external_list.TitleFromExternalList.to_custom_list_entry">
<span class="sig-name descname"><span class="pre">to_custom_list_entry</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">custom_list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">metadata_client</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">overwrite_old_data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/external_list.html#TitleFromExternalList.to_custom_list_entry"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.external_list.TitleFromExternalList.to_custom_list_entry" title="Permalink to this definition">¶</a></dt>
<dd><p>Turn this object into a CustomListEntry with associated Edition.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.external_list.TitleFromExternalList.to_edition">
<span class="sig-name descname"><span class="pre">to_edition</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">metadata_client</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">overwrite_old_data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/external_list.html#TitleFromExternalList.to_edition"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.external_list.TitleFromExternalList.to_edition" title="Permalink to this definition">¶</a></dt>
<dd><p>Create or update an Edition object for this list item.</p>
<p>We have two goals here:</p>
<p>1. Make sure there is an Edition representing the list’s view
of the data.</p>
<p>2. If at all possible, connect the Edition’s primary
identifier to other identifiers in the system, identifiers
which may have associated LicensePools. This can happen in two
ways:</p>
<p>2a. The Edition’s primary identifier, or other identifiers
associated with the Edition, may be directly associated with
LicensePools. This can happen if a book’s list entry includes
(e.g.) an Overdrive ID.</p>
<p>2b. The Edition’s permanent work ID may identify it as the
same work as other Editions in the system. In that case this
Edition’s primary identifier may be associated with the other
Editions’ primary identifiers. (p=0.85)</p>
</dd></dl>

</dd></dl>

</section>
<section id="module-core.external_search">
<span id="core-external-search-module"></span><h2>core.external_search module<a class="headerlink" href="#module-core.external_search" title="Permalink to this heading">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="core.external_search.CurrentMapping">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.external_search.</span></span><span class="sig-name descname"><span class="pre">CurrentMapping</span></span><a class="reference internal" href="_modules/core/external_search.html#CurrentMapping"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.external_search.CurrentMapping" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.external_search.Mapping" title="core.external_search.Mapping"><code class="xref py py-class docutils literal notranslate"><span class="pre">Mapping</span></code></a></p>
<p>The first mapping to support only Elasticsearch 6.</p>
<p>The body of this mapping looks for bibliographic information in
the core document, primarily used for matching search
requests. It also has nested documents, which are used for
filtering and ranking Works when generating other types of
feeds:</p>
<ul class="simple">
<li><p>licensepools – the Work has these LicensePools (includes current
availability as a boolean, but not detailed availability information)</p></li>
<li><p>customlists – the Work is on these CustomLists</p></li>
<li><p>contributors – these Contributors worked on the Work</p></li>
</ul>
<dl class="py attribute">
<dt class="sig sig-object py" id="core.external_search.CurrentMapping.AUTHOR_CHAR_FILTER_NAMES">
<span class="sig-name descname"><span class="pre">AUTHOR_CHAR_FILTER_NAMES</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">['unknown_author',</span> <span class="pre">'primary_author_only',</span> <span class="pre">'strip_parentheticals',</span> <span class="pre">'strip_periods',</span> <span class="pre">'collapse_three_initials',</span> <span class="pre">'collapse_two_initials']</span></em><a class="headerlink" href="#core.external_search.CurrentMapping.AUTHOR_CHAR_FILTER_NAMES" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.external_search.CurrentMapping.CHAR_FILTERS">
<span class="sig-name descname"><span class="pre">CHAR_FILTERS</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">{'collapse_three_initials':</span> <span class="pre">{'pattern':</span> <span class="pre">'</span> <span class="pre">([A-Z])</span> <span class="pre">([A-Z])</span> <span class="pre">([A-Z])$',</span> <span class="pre">'replacement':</span> <span class="pre">'</span> <span class="pre">$1$2$3',</span> <span class="pre">'type':</span> <span class="pre">'pattern_replace'},</span> <span class="pre">'collapse_two_initials':</span> <span class="pre">{'pattern':</span> <span class="pre">'</span> <span class="pre">([A-Z])</span> <span class="pre">([A-Z])$',</span> <span class="pre">'replacement':</span> <span class="pre">'</span> <span class="pre">$1$2',</span> <span class="pre">'type':</span> <span class="pre">'pattern_replace'},</span> <span class="pre">'primary_author_only':</span> <span class="pre">{'pattern':</span> <span class="pre">'\\s+;.*',</span> <span class="pre">'replacement':</span> <span class="pre">'',</span> <span class="pre">'type':</span> <span class="pre">'pattern_replace'},</span> <span class="pre">'remove_apostrophes':</span> <span class="pre">{'pattern':</span> <span class="pre">&quot;'&quot;,</span> <span class="pre">'replacement':</span> <span class="pre">'',</span> <span class="pre">'type':</span> <span class="pre">'pattern_replace'},</span> <span class="pre">'strip_parentheticals':</span> <span class="pre">{'pattern':</span> <span class="pre">'\\s+\\([^)]+\\)',</span> <span class="pre">'replacement':</span> <span class="pre">'',</span> <span class="pre">'type':</span> <span class="pre">'pattern_replace'},</span> <span class="pre">'strip_periods':</span> <span class="pre">{'pattern':</span> <span class="pre">'\\.',</span> <span class="pre">'replacement':</span> <span class="pre">'',</span> <span class="pre">'type':</span> <span class="pre">'pattern_replace'},</span> <span class="pre">'unknown_author':</span> <span class="pre">{'pattern':</span> <span class="pre">'\\[Unknown\\]',</span> <span class="pre">'replacement':</span> <span class="pre">'�',</span> <span class="pre">'type':</span> <span class="pre">'pattern_replace'}}</span></em><a class="headerlink" href="#core.external_search.CurrentMapping.CHAR_FILTERS" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.external_search.CurrentMapping.VERSION_NAME">
<span class="sig-name descname"><span class="pre">VERSION_NAME</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'v4'</span></em><a class="headerlink" href="#core.external_search.CurrentMapping.VERSION_NAME" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.external_search.CurrentMapping.WORK_LAST_UPDATE_SCRIPT">
<span class="sig-name descname"><span class="pre">WORK_LAST_UPDATE_SCRIPT</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">&quot;\ndouble</span> <span class="pre">champion</span> <span class="pre">=</span> <span class="pre">-1;\n//</span> <span class="pre">Start</span> <span class="pre">off</span> <span class="pre">by</span> <span class="pre">looking</span> <span class="pre">at</span> <span class="pre">the</span> <span class="pre">work's</span> <span class="pre">last</span> <span class="pre">update</span> <span class="pre">time.\nfor</span> <span class="pre">(candidate</span> <span class="pre">in</span> <span class="pre">doc['last_update_time'])</span> <span class="pre">{\n</span>&#160;&#160;&#160; <span class="pre">if</span> <span class="pre">(champion</span> <span class="pre">==</span> <span class="pre">-1</span> <span class="pre">||</span> <span class="pre">candidate</span> <span class="pre">&gt;</span> <span class="pre">champion)</span> <span class="pre">{</span> <span class="pre">champion</span> <span class="pre">=</span> <span class="pre">candidate;</span> <span class="pre">}\n}\nif</span> <span class="pre">(params.collection_ids</span> <span class="pre">!=</span> <span class="pre">null</span> <span class="pre">&amp;&amp;</span> <span class="pre">params.collection_ids.length</span> <span class="pre">&gt;</span> <span class="pre">0)</span> <span class="pre">{\n</span>&#160;&#160;&#160; <span class="pre">//</span> <span class="pre">Iterate</span> <span class="pre">over</span> <span class="pre">all</span> <span class="pre">licensepools</span> <span class="pre">looking</span> <span class="pre">for</span> <span class="pre">a</span> <span class="pre">pool</span> <span class="pre">in</span> <span class="pre">a</span> <span class="pre">collection\n</span>&#160;&#160;&#160; <span class="pre">//</span> <span class="pre">relevant</span> <span class="pre">to</span> <span class="pre">this</span> <span class="pre">filter.</span> <span class="pre">When</span> <span class="pre">one</span> <span class="pre">is</span> <span class="pre">found,</span> <span class="pre">check</span> <span class="pre">its\n</span>&#160;&#160;&#160; <span class="pre">//</span> <span class="pre">availability</span> <span class="pre">time</span> <span class="pre">to</span> <span class="pre">see</span> <span class="pre">if</span> <span class="pre">it's</span> <span class="pre">later</span> <span class="pre">than</span> <span class="pre">the</span> <span class="pre">last</span> <span class="pre">update</span> <span class="pre">time.\n</span>&#160;&#160;&#160; <span class="pre">for</span> <span class="pre">(licensepool</span> <span class="pre">in</span> <span class="pre">params._source.licensepools)</span> <span class="pre">{\n</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">if</span> <span class="pre">(!params.collection_ids.contains(licensepool['collection_id']))</span> <span class="pre">{</span> <span class="pre">continue;</span> <span class="pre">}\n</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">double</span> <span class="pre">candidate</span> <span class="pre">=</span> <span class="pre">licensepool['availability_time'];\n</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">if</span> <span class="pre">(champion</span> <span class="pre">==</span> <span class="pre">-1</span> <span class="pre">||</span> <span class="pre">candidate</span> <span class="pre">&gt;</span> <span class="pre">champion)</span> <span class="pre">{</span> <span class="pre">champion</span> <span class="pre">=</span> <span class="pre">candidate;</span> <span class="pre">}\n</span>&#160;&#160;&#160; <span class="pre">}\n}\nif</span> <span class="pre">(params.list_ids</span> <span class="pre">!=</span> <span class="pre">null</span> <span class="pre">&amp;&amp;</span> <span class="pre">params.list_ids.length</span> <span class="pre">&gt;</span> <span class="pre">0)</span> <span class="pre">{\n\n</span>&#160;&#160;&#160; <span class="pre">//</span> <span class="pre">Iterate</span> <span class="pre">over</span> <span class="pre">all</span> <span class="pre">customlists</span> <span class="pre">looking</span> <span class="pre">for</span> <span class="pre">a</span> <span class="pre">list</span> <span class="pre">relevant</span> <span class="pre">to\n</span>&#160;&#160;&#160; <span class="pre">//</span> <span class="pre">this</span> <span class="pre">filter.</span> <span class="pre">When</span> <span class="pre">one</span> <span class="pre">is</span> <span class="pre">found,</span> <span class="pre">check</span> <span class="pre">the</span> <span class="pre">previous</span> <span class="pre">work's</span> <span class="pre">first\n</span>&#160;&#160;&#160; <span class="pre">//</span> <span class="pre">appearance</span> <span class="pre">on</span> <span class="pre">that</span> <span class="pre">list</span> <span class="pre">to</span> <span class="pre">see</span> <span class="pre">if</span> <span class="pre">it's</span> <span class="pre">later</span> <span class="pre">than</span> <span class="pre">the</span> <span class="pre">last\n</span>&#160;&#160;&#160; <span class="pre">//</span> <span class="pre">update</span> <span class="pre">time.\n</span>&#160;&#160;&#160; <span class="pre">for</span> <span class="pre">(customlist</span> <span class="pre">in</span> <span class="pre">params._source.customlists)</span> <span class="pre">{\n</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">if</span> <span class="pre">(!params.list_ids.contains(customlist['list_id']))</span> <span class="pre">{</span> <span class="pre">continue;</span> <span class="pre">}\n</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">double</span> <span class="pre">candidate</span> <span class="pre">=</span> <span class="pre">customlist['first_appearance'];\n</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">if</span> <span class="pre">(champion</span> <span class="pre">==</span> <span class="pre">-1</span> <span class="pre">||</span> <span class="pre">candidate</span> <span class="pre">&gt;</span> <span class="pre">champion)</span> <span class="pre">{</span> <span class="pre">champion</span> <span class="pre">=</span> <span class="pre">candidate;</span> <span class="pre">}\n</span>&#160;&#160;&#160; <span class="pre">}\n}\n\nreturn</span> <span class="pre">champion;\n&quot;</span></em><a class="headerlink" href="#core.external_search.CurrentMapping.WORK_LAST_UPDATE_SCRIPT" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.external_search.CurrentMapping.name">
<span class="sig-name descname"><span class="pre">name</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'collapse_two_initials'</span></em><a class="headerlink" href="#core.external_search.CurrentMapping.name" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.external_search.CurrentMapping.normalizer">
<span class="sig-name descname"><span class="pre">normalizer</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">{'pattern':</span> <span class="pre">'</span> <span class="pre">([A-Z])</span> <span class="pre">([A-Z])$',</span> <span class="pre">'replacement':</span> <span class="pre">'</span> <span class="pre">$1$2',</span> <span class="pre">'type':</span> <span class="pre">'pattern_replace'}</span></em><a class="headerlink" href="#core.external_search.CurrentMapping.normalizer" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.external_search.CurrentMapping.pattern">
<span class="sig-name descname"><span class="pre">pattern</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'</span> <span class="pre">([A-Z])</span> <span class="pre">([A-Z])$'</span></em><a class="headerlink" href="#core.external_search.CurrentMapping.pattern" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.external_search.CurrentMapping.replacement">
<span class="sig-name descname"><span class="pre">replacement</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'</span> <span class="pre">$1$2'</span></em><a class="headerlink" href="#core.external_search.CurrentMapping.replacement" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.external_search.CurrentMapping.stored_scripts">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">stored_scripts</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/external_search.html#CurrentMapping.stored_scripts"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.external_search.CurrentMapping.stored_scripts" title="Permalink to this definition">¶</a></dt>
<dd><p>This version defines a single stored script, “work_last_update”,
defined below.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.external_search.ExternalSearchIndex">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.external_search.</span></span><span class="sig-name descname"><span class="pre">ExternalSearchIndex</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">url</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">works_index</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">test_search_term</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">in_testing</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mapping</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/external_search.html#ExternalSearchIndex"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.external_search.ExternalSearchIndex" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.selftest.HasSelfTests" title="core.selftest.HasSelfTests"><code class="xref py py-class docutils literal notranslate"><span class="pre">HasSelfTests</span></code></a></p>
<dl class="py attribute">
<dt class="sig sig-object py" id="core.external_search.ExternalSearchIndex.CURRENT_ALIAS_SUFFIX">
<span class="sig-name descname"><span class="pre">CURRENT_ALIAS_SUFFIX</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'current'</span></em><a class="headerlink" href="#core.external_search.ExternalSearchIndex.CURRENT_ALIAS_SUFFIX" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.external_search.ExternalSearchIndex.DEFAULT_TEST_SEARCH_TERM">
<span class="sig-name descname"><span class="pre">DEFAULT_TEST_SEARCH_TERM</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'test'</span></em><a class="headerlink" href="#core.external_search.ExternalSearchIndex.DEFAULT_TEST_SEARCH_TERM" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.external_search.ExternalSearchIndex.DEFAULT_WORKS_INDEX_PREFIX">
<span class="sig-name descname"><span class="pre">DEFAULT_WORKS_INDEX_PREFIX</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'circulation-works'</span></em><a class="headerlink" href="#core.external_search.ExternalSearchIndex.DEFAULT_WORKS_INDEX_PREFIX" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.external_search.ExternalSearchIndex.MOCK_IMPLEMENTATION">
<span class="sig-name descname"><span class="pre">MOCK_IMPLEMENTATION</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#core.external_search.ExternalSearchIndex.MOCK_IMPLEMENTATION" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.external_search.ExternalSearchIndex.NAME">
<span class="sig-name descname"><span class="pre">NAME</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'Elasticsearch'</span></em><a class="headerlink" href="#core.external_search.ExternalSearchIndex.NAME" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.external_search.ExternalSearchIndex.SETTINGS">
<span class="sig-name descname"><span class="pre">SETTINGS</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">[{'key':</span> <span class="pre">'url',</span> <span class="pre">'label':</span> <span class="pre">l'URL',</span> <span class="pre">'required':</span> <span class="pre">True,</span> <span class="pre">'format':</span> <span class="pre">'url'},</span> <span class="pre">{'key':</span> <span class="pre">'works_index_prefix',</span> <span class="pre">'label':</span> <span class="pre">l'Index</span> <span class="pre">prefix',</span> <span class="pre">'default':</span> <span class="pre">'circulation-works',</span> <span class="pre">'required':</span> <span class="pre">True,</span> <span class="pre">'description':</span> <span class="pre">l'Any</span> <span class="pre">Elasticsearch</span> <span class="pre">indexes</span> <span class="pre">needed</span> <span class="pre">for</span> <span class="pre">this</span> <span class="pre">application</span> <span class="pre">will</span> <span class="pre">be</span> <span class="pre">created</span> <span class="pre">with</span> <span class="pre">this</span> <span class="pre">unique</span> <span class="pre">prefix.</span> <span class="pre">In</span> <span class="pre">most</span> <span class="pre">cases,</span> <span class="pre">the</span> <span class="pre">default</span> <span class="pre">will</span> <span class="pre">work</span> <span class="pre">fine.</span> <span class="pre">You</span> <span class="pre">may</span> <span class="pre">need</span> <span class="pre">to</span> <span class="pre">change</span> <span class="pre">this</span> <span class="pre">if</span> <span class="pre">you</span> <span class="pre">have</span> <span class="pre">multiple</span> <span class="pre">application</span> <span class="pre">servers</span> <span class="pre">using</span> <span class="pre">a</span> <span class="pre">single</span> <span class="pre">Elasticsearch</span> <span class="pre">server.'},</span> <span class="pre">{'key':</span> <span class="pre">'test_search_term',</span> <span class="pre">'label':</span> <span class="pre">l'Test</span> <span class="pre">search</span> <span class="pre">term',</span> <span class="pre">'default':</span> <span class="pre">'test',</span> <span class="pre">'description':</span> <span class="pre">l'Self</span> <span class="pre">tests</span> <span class="pre">will</span> <span class="pre">use</span> <span class="pre">this</span> <span class="pre">value</span> <span class="pre">as</span> <span class="pre">the</span> <span class="pre">search</span> <span class="pre">term.'}]</span></em><a class="headerlink" href="#core.external_search.ExternalSearchIndex.SETTINGS" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.external_search.ExternalSearchIndex.SITEWIDE">
<span class="sig-name descname"><span class="pre">SITEWIDE</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">True</span></em><a class="headerlink" href="#core.external_search.ExternalSearchIndex.SITEWIDE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.external_search.ExternalSearchIndex.TEST_SEARCH_TERM_KEY">
<span class="sig-name descname"><span class="pre">TEST_SEARCH_TERM_KEY</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'test_search_term'</span></em><a class="headerlink" href="#core.external_search.ExternalSearchIndex.TEST_SEARCH_TERM_KEY" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.external_search.ExternalSearchIndex.VERSION_RE">
<span class="sig-name descname"><span class="pre">VERSION_RE</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">re.compile('-v([0-9]+)$')</span></em><a class="headerlink" href="#core.external_search.ExternalSearchIndex.VERSION_RE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.external_search.ExternalSearchIndex.WORKS_INDEX_PREFIX_KEY">
<span class="sig-name descname"><span class="pre">WORKS_INDEX_PREFIX_KEY</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'works_index_prefix'</span></em><a class="headerlink" href="#core.external_search.ExternalSearchIndex.WORKS_INDEX_PREFIX_KEY" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.external_search.ExternalSearchIndex.base_index_name">
<span class="sig-name descname"><span class="pre">base_index_name</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">index_or_alias</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/external_search.html#ExternalSearchIndex.base_index_name"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.external_search.ExternalSearchIndex.base_index_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Removes version or current suffix from base index name</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.external_search.ExternalSearchIndex.bulk_update">
<span class="sig-name descname"><span class="pre">bulk_update</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">works</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">retry_on_batch_failure</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/external_search.html#ExternalSearchIndex.bulk_update"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.external_search.ExternalSearchIndex.bulk_update" title="Permalink to this definition">¶</a></dt>
<dd><p>Upload a batch of works to the search index at once.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.external_search.ExternalSearchIndex.count_works">
<span class="sig-name descname"><span class="pre">count_works</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filter</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/external_search.html#ExternalSearchIndex.count_works"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.external_search.ExternalSearchIndex.count_works" title="Permalink to this definition">¶</a></dt>
<dd><p>Instead of retrieving works that match <cite>filter</cite>, count the total.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.external_search.ExternalSearchIndex.create_search_doc">
<span class="sig-name descname"><span class="pre">create_search_doc</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">query_string</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filter</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pagination</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">debug</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/external_search.html#ExternalSearchIndex.create_search_doc"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.external_search.ExternalSearchIndex.create_search_doc" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.external_search.ExternalSearchIndex.load">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">load</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/external_search.html#ExternalSearchIndex.load"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.external_search.ExternalSearchIndex.load" title="Permalink to this definition">¶</a></dt>
<dd><p>Load a generic implementation.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.external_search.ExternalSearchIndex.query_works">
<span class="sig-name descname"><span class="pre">query_works</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">query_string</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filter</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pagination</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">debug</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/external_search.html#ExternalSearchIndex.query_works"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.external_search.ExternalSearchIndex.query_works" title="Permalink to this definition">¶</a></dt>
<dd><p>Run a search query.</p>
<p>This works by calling query_works_multi().</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>query_string</strong> – The string to search for.</p></li>
<li><p><strong>filter</strong> – A Filter object, used to filter out works that
would otherwise match the query string.</p></li>
<li><p><strong>pagination</strong> – A Pagination object, used to get a subset
of the search results.</p></li>
<li><p><strong>debug</strong> – If this is True, debugging information will
be gathered and logged. The search query will ask
ElasticSearch for all available fields, not just the
fields known to be used by the feed generation code.  This
all comes at a slight performance cost.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A list of Hit objects containing information about
the search results. This will include the values of any
script fields calculated by ElasticSearch during the
search process.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.external_search.ExternalSearchIndex.query_works_multi">
<span class="sig-name descname"><span class="pre">query_works_multi</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">queries</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">debug</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/external_search.html#ExternalSearchIndex.query_works_multi"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.external_search.ExternalSearchIndex.query_works_multi" title="Permalink to this definition">¶</a></dt>
<dd><p>Run several queries simultaneously and return the results
as a big list.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>queries</strong> – A list of (query string, Filter, Pagination) 3-tuples,
each representing an Elasticsearch query to be run.</p>
</dd>
<dt class="field-even">Yield<span class="colon">:</span></dt>
<dd class="field-even"><p>A sequence of lists, one per item in <cite>queries</cite>,
each containing the search results from that
(query string, Filter, Pagination) 3-tuple.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.external_search.ExternalSearchIndex.remove_work">
<span class="sig-name descname"><span class="pre">remove_work</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">work</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/external_search.html#ExternalSearchIndex.remove_work"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.external_search.ExternalSearchIndex.remove_work" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove the search document for <cite>work</cite> from the search index.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.external_search.ExternalSearchIndex.reset">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">reset</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/external_search.html#ExternalSearchIndex.reset"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.external_search.ExternalSearchIndex.reset" title="Permalink to this definition">¶</a></dt>
<dd><p>Resets the __client object to None so a new configuration
can be applied during object initialization.</p>
<p>This method is only intended for use in testing.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.external_search.ExternalSearchIndex.search_integration">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">search_integration</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/external_search.html#ExternalSearchIndex.search_integration"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.external_search.ExternalSearchIndex.search_integration" title="Permalink to this definition">¶</a></dt>
<dd><p>Look up the ExternalIntegration for ElasticSearch.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.external_search.ExternalSearchIndex.set_stored_scripts">
<span class="sig-name descname"><span class="pre">set_stored_scripts</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/external_search.html#ExternalSearchIndex.set_stored_scripts"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.external_search.ExternalSearchIndex.set_stored_scripts" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.external_search.ExternalSearchIndex.set_works_index_and_alias">
<span class="sig-name descname"><span class="pre">set_works_index_and_alias</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/external_search.html#ExternalSearchIndex.set_works_index_and_alias"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.external_search.ExternalSearchIndex.set_works_index_and_alias" title="Permalink to this definition">¶</a></dt>
<dd><p>Finds or creates the works_index and works_alias based on
the current configuration.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.external_search.ExternalSearchIndex.setup_current_alias">
<span class="sig-name descname"><span class="pre">setup_current_alias</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/external_search.html#ExternalSearchIndex.setup_current_alias"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.external_search.ExternalSearchIndex.setup_current_alias" title="Permalink to this definition">¶</a></dt>
<dd><p>Finds or creates the works_alias as named by the current site
settings.</p>
<p>If the resulting alias exists and is affixed to a different
index or if it can’t be generated for any reason, the alias will
not be created or moved. Instead, the search client will use the
the works_index directly for search queries.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.external_search.ExternalSearchIndex.setup_index">
<span class="sig-name descname"><span class="pre">setup_index</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">new_index</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">index_settings</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/external_search.html#ExternalSearchIndex.setup_index"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.external_search.ExternalSearchIndex.setup_index" title="Permalink to this definition">¶</a></dt>
<dd><p>Create the search index with appropriate mapping.</p>
<p>This will destroy the search index, and all works will need
to be indexed again. In production, don’t use this on an
existing index. Use it to create a new index, then change the
alias to point to the new index.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.external_search.ExternalSearchIndex.transfer_current_alias">
<span class="sig-name descname"><span class="pre">transfer_current_alias</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">new_index</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/external_search.html#ExternalSearchIndex.transfer_current_alias"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.external_search.ExternalSearchIndex.transfer_current_alias" title="Permalink to this definition">¶</a></dt>
<dd><p>Force -current alias onto a new index</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.external_search.ExternalSearchIndex.work_document_type">
<span class="sig-name descname"><span class="pre">work_document_type</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'work-type'</span></em><a class="headerlink" href="#core.external_search.ExternalSearchIndex.work_document_type" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.external_search.ExternalSearchIndex.works_alias_name">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">works_alias_name</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/external_search.html#ExternalSearchIndex.works_alias_name"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.external_search.ExternalSearchIndex.works_alias_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Look up the name of the search index alias.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.external_search.ExternalSearchIndex.works_index_name">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">works_index_name</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/external_search.html#ExternalSearchIndex.works_index_name"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.external_search.ExternalSearchIndex.works_index_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Look up the name of the search index.</p>
<p>It’s possible, but unlikely, that the search index alias will
point to some other index. But if there were no indexes, and a
new one needed to be created, this would be the name of that
index.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.external_search.ExternalSearchIndex.works_prefixed">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">works_prefixed</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/external_search.html#ExternalSearchIndex.works_prefixed"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.external_search.ExternalSearchIndex.works_prefixed" title="Permalink to this definition">¶</a></dt>
<dd><p>Prefix the given value with the prefix to use when generating index
and alias names.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>A string “{prefix}-{value}”, or None if no prefix is configured.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.external_search.Filter">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.external_search.</span></span><span class="sig-name descname"><span class="pre">Filter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">collections</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">media</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">languages</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fiction</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">audiences</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target_age</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">genre_restriction_sets</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">customlist_restriction_sets</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">facets</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">script_fields</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/external_search.html#Filter"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.external_search.Filter" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.external_search.SearchBase" title="core.external_search.SearchBase"><code class="xref py py-class docutils literal notranslate"><span class="pre">SearchBase</span></code></a></p>
<p>A filter for search results.</p>
<p>This covers every reason you might want to not exclude a search
result that would otherise match the query string – wrong media,
wrong language, not available in the patron’s library, etc.</p>
<p>This also covers every way you might want to order the search
results: either by relevance to the search query (the default), or
by a specific field (e.g. author) as described by a Facets object.</p>
<p>It also covers additional calculated values you might need when
presenting the search results.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="core.external_search.Filter.AUTHOR_MATCH_ROLES">
<span class="sig-name descname"><span class="pre">AUTHOR_MATCH_ROLES</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">['Primary</span> <span class="pre">Author',</span> <span class="pre">'Author',</span> <span class="pre">'Narrator',</span> <span class="pre">'Editor',</span> <span class="pre">'Director',</span> <span class="pre">'Actor']</span></em><a class="headerlink" href="#core.external_search.Filter.AUTHOR_MATCH_ROLES" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.external_search.Filter.DETERMINISTIC">
<span class="sig-name descname"><span class="pre">DETERMINISTIC</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">&lt;object</span> <span class="pre">object&gt;</span></em><a class="headerlink" href="#core.external_search.Filter.DETERMINISTIC" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.external_search.Filter.FEATURABLE_SCRIPT">
<span class="sig-name descname"><span class="pre">FEATURABLE_SCRIPT</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">&quot;Math.pow(Math.min(%(cutoff).5f,</span> <span class="pre">doc['quality'].value),</span> <span class="pre">%(exponent).5f)</span> <span class="pre">*</span> <span class="pre">5&quot;</span></em><a class="headerlink" href="#core.external_search.Filter.FEATURABLE_SCRIPT" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.external_search.Filter.KNOWN_SCRIPT_FIELDS">
<span class="sig-name descname"><span class="pre">KNOWN_SCRIPT_FIELDS</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">['last_update']</span></em><a class="headerlink" href="#core.external_search.Filter.KNOWN_SCRIPT_FIELDS" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="core.external_search.Filter.asc">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">asc</span></span><a class="headerlink" href="#core.external_search.Filter.asc" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert order_ascending to Elasticsearch-speak.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="core.external_search.Filter.audiences">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">audiences</span></span><a class="headerlink" href="#core.external_search.Filter.audiences" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the appropriate audiences for this query.</p>
<p>This will be whatever audiences were provided, but it will
probably also include the ‘All Ages’ audience.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="core.external_search.Filter.author_filter">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">author_filter</span></span><a class="headerlink" href="#core.external_search.Filter.author_filter" title="Permalink to this definition">¶</a></dt>
<dd><p>Build a filter that matches a ‘contributors’ subdocument only
if it represents an author-level contribution by self.author.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.external_search.Filter.build">
<span class="sig-name descname"><span class="pre">build</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_chain_filters</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/external_search.html#Filter.build"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.external_search.Filter.build" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert this object to an Elasticsearch Filter object.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>A 2-tuple (filter, nested_filters). Filters on fields
within nested documents (such as
‘licensepools.collection_id’) must be applied as subqueries
to the query that will eventually be created from this
filter. <cite>nested_filters</cite> is a dictionary that maps a path
to a list of filters to apply to that path.</p>
</dd>
<dt class="field-even">Parameters<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>_chain_filters</strong> – Mock function to use instead of
Filter._chain_filters</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.external_search.Filter.featurability_scoring_functions">
<span class="sig-name descname"><span class="pre">featurability_scoring_functions</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">random_seed</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/external_search.html#Filter.featurability_scoring_functions"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.external_search.Filter.featurability_scoring_functions" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate scoring functions that weight works randomly, but
with ‘more featurable’ works tending to be at the top.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.external_search.Filter.from_worklist">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">from_worklist</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">worklist</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">facets</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/external_search.html#Filter.from_worklist"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.external_search.Filter.from_worklist" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a Filter that finds only works that belong in the given
WorkList and EntryPoint.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>worklist</strong> – A WorkList</p></li>
<li><p><strong>facets</strong> – A SearchFacets object.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="core.external_search.Filter.last_update_time_script_field">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">last_update_time_script_field</span></span><a class="headerlink" href="#core.external_search.Filter.last_update_time_script_field" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the configuration for a script field that calculates the
‘last update’ time of a work. An ‘update’ happens when the
work’s metadata is changed, when it’s added to a collection
used by this Filter, or when it’s added to one of the lists
used by this Filter.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="core.external_search.Filter.sort_order">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">sort_order</span></span><a class="headerlink" href="#core.external_search.Filter.sort_order" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a description, for use in an Elasticsearch document,
explaining how search results should be ordered.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>A list of dictionaries, each dictionary mapping a
field name to an explanation of how to sort that
field. Usually the explanation is a simple string, either
‘asc’ or ‘desc’.</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="core.external_search.Filter.target_age_filter">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">target_age_filter</span></span><a class="headerlink" href="#core.external_search.Filter.target_age_filter" title="Permalink to this definition">¶</a></dt>
<dd><p>Helper method to generate the target age subfilter.</p>
<p>It’s complicated because it has to handle cases where the upper
or lower bound on target age is missing (indicating there is no
upper or lower bound).</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.external_search.Filter.universal_base_filter">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">universal_base_filter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_chain_filters</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/external_search.html#Filter.universal_base_filter"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.external_search.Filter.universal_base_filter" title="Permalink to this definition">¶</a></dt>
<dd><p>Build a set of restrictions on the main search document that are
always applied, even in the absence of other filters.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>_chain_filters</strong> – Mock function to use instead of
Filter._chain_filters</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A Filter object.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.external_search.Filter.universal_nested_filters">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">universal_nested_filters</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/external_search.html#Filter.universal_nested_filters"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.external_search.Filter.universal_nested_filters" title="Permalink to this definition">¶</a></dt>
<dd><p>Build a set of restrictions on subdocuments that are
always applied, even in the absence of other filters.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.external_search.Mapping">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.external_search.</span></span><span class="sig-name descname"><span class="pre">Mapping</span></span><a class="reference internal" href="_modules/core/external_search.html#Mapping"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.external_search.Mapping" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.external_search.MappingDocument" title="core.external_search.MappingDocument"><code class="xref py py-class docutils literal notranslate"><span class="pre">MappingDocument</span></code></a></p>
<p>A class that defines the mapping for a particular version of the search index.</p>
<p>Code that won’t change between versions can go here. (Or code that
can change between versions without affecting anything.)</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="core.external_search.Mapping.VERSION_NAME">
<span class="sig-name descname"><span class="pre">VERSION_NAME</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#core.external_search.Mapping.VERSION_NAME" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.external_search.Mapping.body">
<span class="sig-name descname"><span class="pre">body</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/external_search.html#Mapping.body"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.external_search.Mapping.body" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate the body of the mapping document for this version of the
mapping.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.external_search.Mapping.create">
<span class="sig-name descname"><span class="pre">create</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">search_client</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">base_index_name</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/external_search.html#Mapping.create"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.external_search.Mapping.create" title="Permalink to this definition">¶</a></dt>
<dd><p>Ensure that an index exists in <cite>search_client</cite> for this Mapping.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>True or False, indicating whether the index was created new.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.external_search.Mapping.script_name">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">script_name</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">base_name</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/external_search.html#Mapping.script_name"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.external_search.Mapping.script_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Scope a script name with “simplified” (to avoid confusion with
other applications on the Elasticsearch server), and the
version number (to avoid confusion with other versions <em>of
this application</em>, which may implement the same script
differently, on this Elasticsearch server).</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.external_search.Mapping.sort_author_keyword_property_hook">
<span class="sig-name descname"><span class="pre">sort_author_keyword_property_hook</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">description</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/external_search.html#Mapping.sort_author_keyword_property_hook"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.external_search.Mapping.sort_author_keyword_property_hook" title="Permalink to this definition">¶</a></dt>
<dd><p>Give the <cite>sort_author</cite> property its custom analyzer.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.external_search.Mapping.version_name">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">version_name</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/external_search.html#Mapping.version_name"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.external_search.Mapping.version_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the name of this Mapping subclass.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.external_search.MappingDocument">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.external_search.</span></span><span class="sig-name descname"><span class="pre">MappingDocument</span></span><a class="reference internal" href="_modules/core/external_search.html#MappingDocument"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.external_search.MappingDocument" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>This class knows a lot about how the ‘properties’ section of an
Elasticsearch mapping document (or one of its subdocuments) is
created.</p>
<dl class="py method">
<dt class="sig sig-object py" id="core.external_search.MappingDocument.add_properties">
<span class="sig-name descname"><span class="pre">add_properties</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">properties_by_type</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/external_search.html#MappingDocument.add_properties"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.external_search.MappingDocument.add_properties" title="Permalink to this definition">¶</a></dt>
<dd><p>Turn a dictionary mapping types to field names into a
bunch of add_property() calls.</p>
<p>Useful when you have a lot of fields that don’t need any
customization.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.external_search.MappingDocument.add_property">
<span class="sig-name descname"><span class="pre">add_property</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">type</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">description</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/external_search.html#MappingDocument.add_property"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.external_search.MappingDocument.add_property" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a field to the list of properties.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> – Name of the field as found in search documents.</p></li>
<li><p><strong>type</strong> – Type of the field. This may be a custom type,
so long as a hook method is defined for that type.</p></li>
<li><p><strong>description</strong> – Description of the field.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.external_search.MappingDocument.basic_text_property_hook">
<span class="sig-name descname"><span class="pre">basic_text_property_hook</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">description</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/external_search.html#MappingDocument.basic_text_property_hook"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.external_search.MappingDocument.basic_text_property_hook" title="Permalink to this definition">¶</a></dt>
<dd><p>Hook method to handle the custom ‘basic_text’
property type.</p>
<p>This type does not exist in Elasticsearch. It’s our name for a
text field that is indexed three times: once using our default
English analyzer (“title”), once using an analyzer with
minimal stemming (“title.minimal”) for close matches, and once
using an analyzer that leaves stopwords in place, for searches
that rely on stopwords.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.external_search.MappingDocument.filterable_text_property_hook">
<span class="sig-name descname"><span class="pre">filterable_text_property_hook</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">description</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/external_search.html#MappingDocument.filterable_text_property_hook"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.external_search.MappingDocument.filterable_text_property_hook" title="Permalink to this definition">¶</a></dt>
<dd><p>Hook method to handle the custom ‘filterable_text’
property type.</p>
<p>This type does not exist in Elasticsearch. It’s our name for a
text field that can be used in both queries and filters.</p>
<p>This field is indexed _four_ times – the three ways a normal
text field is indexed, plus again as an unparsed keyword that
can be used in filters.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.external_search.MappingDocument.subdocument">
<span class="sig-name descname"><span class="pre">subdocument</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/external_search.html#MappingDocument.subdocument"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.external_search.MappingDocument.subdocument" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a new HasProperties object and register it as a
sub-document of this one.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.external_search.MockExternalSearchIndex">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.external_search.</span></span><span class="sig-name descname"><span class="pre">MockExternalSearchIndex</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">url</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/external_search.html#MockExternalSearchIndex"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.external_search.MockExternalSearchIndex" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.external_search.ExternalSearchIndex" title="core.external_search.ExternalSearchIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">ExternalSearchIndex</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="core.external_search.MockExternalSearchIndex.bulk">
<span class="sig-name descname"><span class="pre">bulk</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">docs</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/external_search.html#MockExternalSearchIndex.bulk"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.external_search.MockExternalSearchIndex.bulk" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.external_search.MockExternalSearchIndex.count_works">
<span class="sig-name descname"><span class="pre">count_works</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filter</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/external_search.html#MockExternalSearchIndex.count_works"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.external_search.MockExternalSearchIndex.count_works" title="Permalink to this definition">¶</a></dt>
<dd><p>Instead of retrieving works that match <cite>filter</cite>, count the total.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.external_search.MockExternalSearchIndex.create_search_doc">
<span class="sig-name descname"><span class="pre">create_search_doc</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">query_string</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filter</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pagination</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">debug</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/external_search.html#MockExternalSearchIndex.create_search_doc"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.external_search.MockExternalSearchIndex.create_search_doc" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.external_search.MockExternalSearchIndex.delete">
<span class="sig-name descname"><span class="pre">delete</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">index</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">doc_type</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">id</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/external_search.html#MockExternalSearchIndex.delete"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.external_search.MockExternalSearchIndex.delete" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.external_search.MockExternalSearchIndex.exists">
<span class="sig-name descname"><span class="pre">exists</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">index</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">doc_type</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">id</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/external_search.html#MockExternalSearchIndex.exists"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.external_search.MockExternalSearchIndex.exists" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.external_search.MockExternalSearchIndex.index">
<span class="sig-name descname"><span class="pre">index</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">index</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">doc_type</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">id</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">body</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/external_search.html#MockExternalSearchIndex.index"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.external_search.MockExternalSearchIndex.index" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.external_search.MockExternalSearchIndex.query_works">
<span class="sig-name descname"><span class="pre">query_works</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">query_string</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filter</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pagination</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">debug</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/external_search.html#MockExternalSearchIndex.query_works"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.external_search.MockExternalSearchIndex.query_works" title="Permalink to this definition">¶</a></dt>
<dd><p>Run a search query.</p>
<p>This works by calling query_works_multi().</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>query_string</strong> – The string to search for.</p></li>
<li><p><strong>filter</strong> – A Filter object, used to filter out works that
would otherwise match the query string.</p></li>
<li><p><strong>pagination</strong> – A Pagination object, used to get a subset
of the search results.</p></li>
<li><p><strong>debug</strong> – If this is True, debugging information will
be gathered and logged. The search query will ask
ElasticSearch for all available fields, not just the
fields known to be used by the feed generation code.  This
all comes at a slight performance cost.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A list of Hit objects containing information about
the search results. This will include the values of any
script fields calculated by ElasticSearch during the
search process.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.external_search.MockExternalSearchIndex.query_works_multi">
<span class="sig-name descname"><span class="pre">query_works_multi</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">queries</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">debug</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/external_search.html#MockExternalSearchIndex.query_works_multi"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.external_search.MockExternalSearchIndex.query_works_multi" title="Permalink to this definition">¶</a></dt>
<dd><p>Run several queries simultaneously and return the results
as a big list.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>queries</strong> – A list of (query string, Filter, Pagination) 3-tuples,
each representing an Elasticsearch query to be run.</p>
</dd>
<dt class="field-even">Yield<span class="colon">:</span></dt>
<dd class="field-even"><p>A sequence of lists, one per item in <cite>queries</cite>,
each containing the search results from that
(query string, Filter, Pagination) 3-tuple.</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.external_search.MockExternalSearchIndex.work_document_type">
<span class="sig-name descname"><span class="pre">work_document_type</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'work-type'</span></em><a class="headerlink" href="#core.external_search.MockExternalSearchIndex.work_document_type" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.external_search.MockMeta">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.external_search.</span></span><span class="sig-name descname"><span class="pre">MockMeta</span></span><a class="reference internal" href="_modules/core/external_search.html#MockMeta"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.external_search.MockMeta" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code></p>
<p>Mock the .meta object associated with an Elasticsearch search
result.  This is necessary to get SortKeyPagination to work with
MockExternalSearchIndex.</p>
<dl class="py property">
<dt class="sig sig-object py" id="core.external_search.MockMeta.sort">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">sort</span></span><a class="headerlink" href="#core.external_search.MockMeta.sort" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.external_search.MockSearchResult">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.external_search.</span></span><span class="sig-name descname"><span class="pre">MockSearchResult</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sort_title</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sort_author</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">meta</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">id</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/external_search.html#MockSearchResult"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.external_search.MockSearchResult" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<dl class="py method">
<dt class="sig sig-object py" id="core.external_search.MockSearchResult.to_dict">
<span class="sig-name descname"><span class="pre">to_dict</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/external_search.html#MockSearchResult.to_dict"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.external_search.MockSearchResult.to_dict" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.external_search.Query">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.external_search.</span></span><span class="sig-name descname"><span class="pre">Query</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">query_string</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filter</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">use_query_parser</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/external_search.html#Query"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.external_search.Query" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.external_search.SearchBase" title="core.external_search.SearchBase"><code class="xref py py-class docutils literal notranslate"><span class="pre">SearchBase</span></code></a></p>
<p>An attempt to find something in the search index.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="core.external_search.Query.BASELINE_COEFFICIENT">
<span class="sig-name descname"><span class="pre">BASELINE_COEFFICIENT</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">1</span></em><a class="headerlink" href="#core.external_search.Query.BASELINE_COEFFICIENT" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.external_search.Query.DEFAULT_KEYWORD_MATCH_COEFFICIENT">
<span class="sig-name descname"><span class="pre">DEFAULT_KEYWORD_MATCH_COEFFICIENT</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">1000</span></em><a class="headerlink" href="#core.external_search.Query.DEFAULT_KEYWORD_MATCH_COEFFICIENT" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.external_search.Query.KEYWORD_MATCH_COEFFICIENT_FOR_FIELD">
<span class="sig-name descname"><span class="pre">KEYWORD_MATCH_COEFFICIENT_FOR_FIELD</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">{'imprint':</span> <span class="pre">2,</span> <span class="pre">'publisher':</span> <span class="pre">2}</span></em><a class="headerlink" href="#core.external_search.Query.KEYWORD_MATCH_COEFFICIENT_FOR_FIELD" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.external_search.Query.MULTI_MATCH_FIELDS">
<span class="sig-name descname"><span class="pre">MULTI_MATCH_FIELDS</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">['subtitle',</span> <span class="pre">'series',</span> <span class="pre">'author']</span></em><a class="headerlink" href="#core.external_search.Query.MULTI_MATCH_FIELDS" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.external_search.Query.QUERY_WAS_A_FILTER_WEIGHT">
<span class="sig-name descname"><span class="pre">QUERY_WAS_A_FILTER_WEIGHT</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">600</span></em><a class="headerlink" href="#core.external_search.Query.QUERY_WAS_A_FILTER_WEIGHT" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.external_search.Query.SEARCH_RELEVANT_ROLES">
<span class="sig-name descname"><span class="pre">SEARCH_RELEVANT_ROLES</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">['Primary</span> <span class="pre">Author',</span> <span class="pre">'Author',</span> <span class="pre">'Narrator']</span></em><a class="headerlink" href="#core.external_search.Query.SEARCH_RELEVANT_ROLES" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.external_search.Query.SIMPLE_MATCH_FIELDS">
<span class="sig-name descname"><span class="pre">SIMPLE_MATCH_FIELDS</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">['title',</span> <span class="pre">'subtitle',</span> <span class="pre">'series',</span> <span class="pre">'publisher',</span> <span class="pre">'imprint']</span></em><a class="headerlink" href="#core.external_search.Query.SIMPLE_MATCH_FIELDS" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.external_search.Query.SLIGHTLY_ABOVE_BASELINE">
<span class="sig-name descname"><span class="pre">SLIGHTLY_ABOVE_BASELINE</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">1.1</span></em><a class="headerlink" href="#core.external_search.Query.SLIGHTLY_ABOVE_BASELINE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.external_search.Query.SPELLCHECKER">
<span class="sig-name descname"><span class="pre">SPELLCHECKER</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">&lt;spellchecker.spellchecker.SpellChecker</span> <span class="pre">object&gt;</span></em><a class="headerlink" href="#core.external_search.Query.SPELLCHECKER" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.external_search.Query.STEMMABLE_FIELDS">
<span class="sig-name descname"><span class="pre">STEMMABLE_FIELDS</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">['title',</span> <span class="pre">'subtitle',</span> <span class="pre">'series']</span></em><a class="headerlink" href="#core.external_search.Query.STEMMABLE_FIELDS" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.external_search.Query.STOPWORD_FIELDS">
<span class="sig-name descname"><span class="pre">STOPWORD_FIELDS</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">['title',</span> <span class="pre">'subtitle',</span> <span class="pre">'series']</span></em><a class="headerlink" href="#core.external_search.Query.STOPWORD_FIELDS" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.external_search.Query.WEIGHT_FOR_FIELD">
<span class="sig-name descname"><span class="pre">WEIGHT_FOR_FIELD</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">{'author':</span> <span class="pre">120.0,</span> <span class="pre">'contributors.display_name':</span> <span class="pre">120.0,</span> <span class="pre">'contributors.sort_name':</span> <span class="pre">120.0,</span> <span class="pre">'imprint':</span> <span class="pre">40.0,</span> <span class="pre">'publisher':</span> <span class="pre">40.0,</span> <span class="pre">'series':</span> <span class="pre">120.0,</span> <span class="pre">'subtitle':</span> <span class="pre">130.0,</span> <span class="pre">'summary':</span> <span class="pre">80.0,</span> <span class="pre">'title':</span> <span class="pre">140.0}</span></em><a class="headerlink" href="#core.external_search.Query.WEIGHT_FOR_FIELD" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.external_search.Query.build">
<span class="sig-name descname"><span class="pre">build</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">elasticsearch</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pagination</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/external_search.html#Query.build"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.external_search.Query.build" title="Permalink to this definition">¶</a></dt>
<dd><p>Make an Elasticsearch-DSL Search object out of this query.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>elasticsearch</strong> – An Elasticsearch-DSL Search object. This
object is ready to run a search against an Elasticsearch server,
but it doesn’t represent any particular Elasticsearch query.</p></li>
<li><p><strong>pagination</strong> – A Pagination object indicating a slice of
results to pull from the search index.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>An Elasticsearch-DSL Search object that’s prepared
to run this specific query.</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="core.external_search.Query.elasticsearch_query">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">elasticsearch_query</span></span><a class="headerlink" href="#core.external_search.Query.elasticsearch_query" title="Permalink to this definition">¶</a></dt>
<dd><p>Build an Elasticsearch-DSL Query object for this query string.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.external_search.Query.field">
<span class="sig-name descname"><span class="pre">field</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'contributors.display_name'</span></em><a class="headerlink" href="#core.external_search.Query.field" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="core.external_search.Query.match_author_hypotheses">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">match_author_hypotheses</span></span><a class="headerlink" href="#core.external_search.Query.match_author_hypotheses" title="Permalink to this definition">¶</a></dt>
<dd><p>Yield a sequence of query objects representing possible ways in
which a query string might represent a book’s author.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>query_string</strong> – The query string that might be the name
of an author.</p>
</dd>
<dt class="field-even">Yield<span class="colon">:</span></dt>
<dd class="field-even"><p>A sequence of Elasticsearch-DSL query objects to be
considered as hypotheses.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.external_search.Query.match_one_field_hypotheses">
<span class="sig-name descname"><span class="pre">match_one_field_hypotheses</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">base_field</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">query_string</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/external_search.html#Query.match_one_field_hypotheses"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.external_search.Query.match_one_field_hypotheses" title="Permalink to this definition">¶</a></dt>
<dd><p>Yield a number of hypotheses representing different ways in
which the query string might be an attempt to match
a given field.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>base_field</strong> – The name of the field to search,
e.g. “title” or “contributors.sort_name”.</p></li>
<li><p><strong>query_string</strong> – The query string to use, if different from
self.query_string.</p></li>
</ul>
</dd>
<dt class="field-even">Yield<span class="colon">:</span></dt>
<dd class="field-even"><p>A sequence of (hypothesis, weight) 2-tuples.</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="core.external_search.Query.match_topic_hypotheses">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">match_topic_hypotheses</span></span><a class="headerlink" href="#core.external_search.Query.match_topic_hypotheses" title="Permalink to this definition">¶</a></dt>
<dd><p>Yield a number of hypotheses representing different
ways in which the query string might be a topic match.</p>
<p>Currently there is only one such hypothesis.</p>
<p>TODO: We probably want to introduce a fuzzy version of this
hypothesis.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="core.external_search.Query.parsed_query_matches">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">parsed_query_matches</span></span><a class="headerlink" href="#core.external_search.Query.parsed_query_matches" title="Permalink to this definition">¶</a></dt>
<dd><p>Deal with a query string that contains information that should be
exactly matched against a controlled vocabulary
(e.g. “nonfiction” or “grade 5”) along with information that
is more search-like (such as a title or author).</p>
<p>The match information is pulled out of the query string and
used to make a series of match_phrase queries. The rest of the
information is used in a simple query that matches basic
fields.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.external_search.Query.title_multi_match_for">
<span class="sig-name descname"><span class="pre">title_multi_match_for</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">other_field</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/external_search.html#Query.title_multi_match_for"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.external_search.Query.title_multi_match_for" title="Permalink to this definition">¶</a></dt>
<dd><p>Helper method to create a MultiMatch hypothesis that crosses
multiple fields.</p>
<p>This strategy only works if everything is spelled correctly,
since we can’t combine a “cross_fields” Multimatch query
with a fuzzy search.</p>
<dl class="field-list simple">
<dt class="field-odd">Yield<span class="colon">:</span></dt>
<dd class="field-odd"><p>At most one (hypothesis, weight) 2-tuple.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.external_search.QueryParser">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.external_search.</span></span><span class="sig-name descname"><span class="pre">QueryParser</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">query_string</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">query_class=&lt;class</span> <span class="pre">'core.external_search.Query'&gt;</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/external_search.html#QueryParser"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.external_search.QueryParser" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Attempt to parse filter information out of a query string.</p>
<p>This class is where we make sense of queries like the following:</p>
<blockquote>
<div><p>asteroids nonfiction
grade 5 dogs
young adult romance
divorce age 10 and up</p>
</div></blockquote>
<p>These queries contain information that can best be thought of in
terms of a filter against specific fields (“nonfiction”, “grade
5”, “romance”). Books either match these criteria or they don’t.</p>
<p>These queries may also contain information that can be thought of
in terms of a search (“asteroids”, “dogs”) – books may match
these criteria to a greater or lesser extent.</p>
<dl class="py method">
<dt class="sig sig-object py" id="core.external_search.QueryParser.add_match_term_filter">
<span class="sig-name descname"><span class="pre">add_match_term_filter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">query</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">field</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">query_string</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">matched_portion</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/external_search.html#QueryParser.add_match_term_filter"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.external_search.QueryParser.add_match_term_filter" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a match query that finds documents whose value for <cite>field</cite>
matches <cite>query</cite>.</p>
<p>Add it to <cite>self.filters</cite>, and remove the relevant portion
of <cite>query_string</cite> so it doesn’t get reused.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.external_search.QueryParser.add_target_age_filter">
<span class="sig-name descname"><span class="pre">add_target_age_filter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">query</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">query_string</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">matched_portion</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/external_search.html#QueryParser.add_target_age_filter"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.external_search.QueryParser.add_target_age_filter" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a query that finds documents whose value for <cite>target_age</cite>
matches <cite>query</cite>.</p>
<p>Add a filter version of this query to <cite>.match_queries</cite> (so that
all documents outside the target age are filtered out).</p>
<p>Add a boosted version of this query to <cite>.match_queries</cite> (so
that documents that cluster tightly around the target age are
boosted over documents that span a huge age range).</p>
<p>Remove the relevant portion of <cite>query_string</cite> so it doesn’t get
reused.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.external_search.SearchBase">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.external_search.</span></span><span class="sig-name descname"><span class="pre">SearchBase</span></span><a class="reference internal" href="_modules/core/external_search.html#SearchBase"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.external_search.SearchBase" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>A superclass containing helper methods for creating and modifying
Elasticsearch-dsl Query-type objects.</p>
<dl class="py method">
<dt class="sig sig-object py" id="core.external_search.SearchBase.make_target_age_query">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">make_target_age_query</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">target_age</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">boost</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1.1</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/external_search.html#SearchBase.make_target_age_query"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.external_search.SearchBase.make_target_age_query" title="Permalink to this definition">¶</a></dt>
<dd><p>Create an Elasticsearch query object for a boolean query that
matches works whose target ages overlap (partially or
entirely) the given age range.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>target_age</strong> – A 2-tuple (lower limit, upper limit)</p></li>
<li><p><strong>boost</strong> – Boost works that fit precisely into the target
age range by this amount, vis-a-vis works that don’t.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.external_search.SearchIndexCoverageProvider">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.external_search.</span></span><span class="sig-name descname"><span class="pre">SearchIndexCoverageProvider</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/external_search.html#SearchIndexCoverageProvider"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.external_search.SearchIndexCoverageProvider" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.coverage.WorkPresentationProvider" title="core.coverage.WorkPresentationProvider"><code class="xref py py-class docutils literal notranslate"><span class="pre">WorkPresentationProvider</span></code></a></p>
<p>Make sure all Works have up-to-date representation in the
search index.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="core.external_search.SearchIndexCoverageProvider.DEFAULT_BATCH_SIZE">
<span class="sig-name descname"><span class="pre">DEFAULT_BATCH_SIZE</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">500</span></em><a class="headerlink" href="#core.external_search.SearchIndexCoverageProvider.DEFAULT_BATCH_SIZE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.external_search.SearchIndexCoverageProvider.OPERATION">
<span class="sig-name descname"><span class="pre">OPERATION</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'update-search-index'</span></em><a class="headerlink" href="#core.external_search.SearchIndexCoverageProvider.OPERATION" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.external_search.SearchIndexCoverageProvider.SERVICE_NAME">
<span class="sig-name descname"><span class="pre">SERVICE_NAME</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'Search</span> <span class="pre">index</span> <span class="pre">coverage</span> <span class="pre">provider'</span></em><a class="headerlink" href="#core.external_search.SearchIndexCoverageProvider.SERVICE_NAME" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.external_search.SearchIndexCoverageProvider.process_batch">
<span class="sig-name descname"><span class="pre">process_batch</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">works</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/external_search.html#SearchIndexCoverageProvider.process_batch"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.external_search.SearchIndexCoverageProvider.process_batch" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>a mixed list of Works and CoverageFailure objects.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.external_search.SortKeyPagination">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.external_search.</span></span><span class="sig-name descname"><span class="pre">SortKeyPagination</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">last_item_on_previous_page</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">50</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/external_search.html#SortKeyPagination"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.external_search.SortKeyPagination" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.lane.Pagination" title="core.lane.Pagination"><code class="xref py py-class docutils literal notranslate"><span class="pre">Pagination</span></code></a></p>
<p>An Elasticsearch-specific implementation of Pagination that
paginates search results by tracking where in a sorted list the
previous page left off, rather than using a numeric index into the
list.</p>
<dl class="py method">
<dt class="sig sig-object py" id="core.external_search.SortKeyPagination.from_request">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">from_request</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">get_arg</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">default_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/external_search.html#SortKeyPagination.from_request"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.external_search.SortKeyPagination.from_request" title="Permalink to this definition">¶</a></dt>
<dd><p>Instantiate a SortKeyPagination object from a Flask request.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.external_search.SortKeyPagination.items">
<span class="sig-name descname"><span class="pre">items</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/external_search.html#SortKeyPagination.items"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.external_search.SortKeyPagination.items" title="Permalink to this definition">¶</a></dt>
<dd><p>Yield the URL arguments necessary to convey the current page
state.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.external_search.SortKeyPagination.modify_database_query">
<span class="sig-name descname"><span class="pre">modify_database_query</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">qu</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/external_search.html#SortKeyPagination.modify_database_query"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.external_search.SortKeyPagination.modify_database_query" title="Permalink to this definition">¶</a></dt>
<dd><p>Modify the given database query with OFFSET and LIMIT.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.external_search.SortKeyPagination.modify_search_query">
<span class="sig-name descname"><span class="pre">modify_search_query</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">search</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/external_search.html#SortKeyPagination.modify_search_query"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.external_search.SortKeyPagination.modify_search_query" title="Permalink to this definition">¶</a></dt>
<dd><p>Modify the given Search object so that it starts
picking up items immediately after the previous page.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>search</strong> – An elasticsearch-dsl Search object.</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="core.external_search.SortKeyPagination.next_page">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">next_page</span></span><a class="headerlink" href="#core.external_search.SortKeyPagination.next_page" title="Permalink to this definition">¶</a></dt>
<dd><p>If possible, create a new SortKeyPagination representing the
next page of results.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="core.external_search.SortKeyPagination.offset">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">offset</span></span><a class="headerlink" href="#core.external_search.SortKeyPagination.offset" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.external_search.SortKeyPagination.page_loaded">
<span class="sig-name descname"><span class="pre">page_loaded</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">page</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/external_search.html#SortKeyPagination.page_loaded"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.external_search.SortKeyPagination.page_loaded" title="Permalink to this definition">¶</a></dt>
<dd><p>An actual page of results has been fetched. Keep any internal state
that would be useful to know when reasoning about earlier or
later pages.</p>
<p>Specifically, keep track of the sort value of the last item on
this page, so that self.next_page will create a
SortKeyPagination object capable of generating the subsequent
page.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>page</strong> – A list of elasticsearch-dsl Hit objects.</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="core.external_search.SortKeyPagination.pagination_key">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">pagination_key</span></span><a class="headerlink" href="#core.external_search.SortKeyPagination.pagination_key" title="Permalink to this definition">¶</a></dt>
<dd><p>Create the pagination key for this page.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="core.external_search.SortKeyPagination.previous_page">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">previous_page</span></span><a class="headerlink" href="#core.external_search.SortKeyPagination.previous_page" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="core.external_search.SortKeyPagination.total_size">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">total_size</span></span><a class="headerlink" href="#core.external_search.SortKeyPagination.total_size" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.external_search.WorkSearchResult">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.external_search.</span></span><span class="sig-name descname"><span class="pre">WorkSearchResult</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">work</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hit</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/external_search.html#WorkSearchResult"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.external_search.WorkSearchResult" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Wraps a Work object to give extra information obtained from
ElasticSearch.</p>
<p>This object acts just like a Work (though isinstance(x, Work) will
fail), with one exception: you can access the raw ElasticSearch Hit
result as ._hit.</p>
<p>This is useful when a Work needs to be ‘tagged’ with information
obtained through Elasticsearch, such as its ‘last modified’ date
the context of a specific lane.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="core.external_search.mock_search_index">
<span class="sig-prename descclassname"><span class="pre">core.external_search.</span></span><span class="sig-name descname"><span class="pre">mock_search_index</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mock</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/external_search.html#mock_search_index"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.external_search.mock_search_index" title="Permalink to this definition">¶</a></dt>
<dd><p>Temporarily mock the ExternalSearchIndex implementation
returned by the load() class method.</p>
</dd></dl>

</section>
<section id="module-core.facets">
<span id="core-facets-module"></span><h2>core.facets module<a class="headerlink" href="#module-core.facets" title="Permalink to this heading">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="core.facets.FacetConfig">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.facets.</span></span><span class="sig-name descname"><span class="pre">FacetConfig</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">enabled_facets</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">default_facets</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">entrypoints</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[]</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/facets.html#FacetConfig"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.facets.FacetConfig" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.facets.FacetConstants" title="core.facets.FacetConstants"><code class="xref py py-class docutils literal notranslate"><span class="pre">FacetConstants</span></code></a></p>
<p>A class that implements the facet-related methods of
Library, and allows modifications to the enabled
and default facets. For use when a controller needs to
use a facet configuration different from the site-wide
facets.</p>
<dl class="py method">
<dt class="sig sig-object py" id="core.facets.FacetConfig.default_facet">
<span class="sig-name descname"><span class="pre">default_facet</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">group_name</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/facets.html#FacetConfig.default_facet"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.facets.FacetConfig.default_facet" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.facets.FacetConfig.enable_facet">
<span class="sig-name descname"><span class="pre">enable_facet</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">group_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">facet</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/facets.html#FacetConfig.enable_facet"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.facets.FacetConfig.enable_facet" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.facets.FacetConfig.enabled_facets">
<span class="sig-name descname"><span class="pre">enabled_facets</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">group_name</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/facets.html#FacetConfig.enabled_facets"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.facets.FacetConfig.enabled_facets" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.facets.FacetConfig.from_library">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">from_library</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">library</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/facets.html#FacetConfig.from_library"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.facets.FacetConfig.from_library" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.facets.FacetConfig.set_default_facet">
<span class="sig-name descname"><span class="pre">set_default_facet</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">group_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">facet</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/facets.html#FacetConfig.set_default_facet"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.facets.FacetConfig.set_default_facet" title="Permalink to this definition">¶</a></dt>
<dd><p>Add <cite>facet</cite> to the list of possible values for <cite>group_name</cite>, even
if the library does not have that facet configured.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.facets.FacetConstants">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.facets.</span></span><span class="sig-name descname"><span class="pre">FacetConstants</span></span><a class="reference internal" href="_modules/core/facets.html#FacetConstants"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.facets.FacetConstants" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<dl class="py attribute">
<dt class="sig sig-object py" id="core.facets.FacetConstants.AVAILABILITY_FACETS">
<span class="sig-name descname"><span class="pre">AVAILABILITY_FACETS</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">['now',</span> <span class="pre">'all',</span> <span class="pre">'always']</span></em><a class="headerlink" href="#core.facets.FacetConstants.AVAILABILITY_FACETS" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.facets.FacetConstants.AVAILABILITY_FACET_GROUP_NAME">
<span class="sig-name descname"><span class="pre">AVAILABILITY_FACET_GROUP_NAME</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'available'</span></em><a class="headerlink" href="#core.facets.FacetConstants.AVAILABILITY_FACET_GROUP_NAME" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.facets.FacetConstants.AVAILABLE_ALL">
<span class="sig-name descname"><span class="pre">AVAILABLE_ALL</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'all'</span></em><a class="headerlink" href="#core.facets.FacetConstants.AVAILABLE_ALL" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.facets.FacetConstants.AVAILABLE_NOT_NOW">
<span class="sig-name descname"><span class="pre">AVAILABLE_NOT_NOW</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'not_now'</span></em><a class="headerlink" href="#core.facets.FacetConstants.AVAILABLE_NOT_NOW" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.facets.FacetConstants.AVAILABLE_NOW">
<span class="sig-name descname"><span class="pre">AVAILABLE_NOW</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'now'</span></em><a class="headerlink" href="#core.facets.FacetConstants.AVAILABLE_NOW" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.facets.FacetConstants.AVAILABLE_OPEN_ACCESS">
<span class="sig-name descname"><span class="pre">AVAILABLE_OPEN_ACCESS</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'always'</span></em><a class="headerlink" href="#core.facets.FacetConstants.AVAILABLE_OPEN_ACCESS" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.facets.FacetConstants.COLLECTION_FACETS">
<span class="sig-name descname"><span class="pre">COLLECTION_FACETS</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">['full',</span> <span class="pre">'featured']</span></em><a class="headerlink" href="#core.facets.FacetConstants.COLLECTION_FACETS" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.facets.FacetConstants.COLLECTION_FACET_GROUP_NAME">
<span class="sig-name descname"><span class="pre">COLLECTION_FACET_GROUP_NAME</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'collection'</span></em><a class="headerlink" href="#core.facets.FacetConstants.COLLECTION_FACET_GROUP_NAME" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.facets.FacetConstants.COLLECTION_FEATURED">
<span class="sig-name descname"><span class="pre">COLLECTION_FEATURED</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'featured'</span></em><a class="headerlink" href="#core.facets.FacetConstants.COLLECTION_FEATURED" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.facets.FacetConstants.COLLECTION_FULL">
<span class="sig-name descname"><span class="pre">COLLECTION_FULL</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'full'</span></em><a class="headerlink" href="#core.facets.FacetConstants.COLLECTION_FULL" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.facets.FacetConstants.DEFAULT_ENABLED_FACETS">
<span class="sig-name descname"><span class="pre">DEFAULT_ENABLED_FACETS</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">{'available':</span> <span class="pre">['all',</span> <span class="pre">'now',</span> <span class="pre">'always'],</span> <span class="pre">'collection':</span> <span class="pre">['full',</span> <span class="pre">'featured'],</span> <span class="pre">'order':</span> <span class="pre">['author',</span> <span class="pre">'title',</span> <span class="pre">'added']}</span></em><a class="headerlink" href="#core.facets.FacetConstants.DEFAULT_ENABLED_FACETS" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.facets.FacetConstants.DEFAULT_FACET">
<span class="sig-name descname"><span class="pre">DEFAULT_FACET</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">{'available':</span> <span class="pre">'all',</span> <span class="pre">'collection':</span> <span class="pre">'full',</span> <span class="pre">'order':</span> <span class="pre">'author'}</span></em><a class="headerlink" href="#core.facets.FacetConstants.DEFAULT_FACET" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.facets.FacetConstants.ENTRY_POINT_FACET_GROUP_NAME">
<span class="sig-name descname"><span class="pre">ENTRY_POINT_FACET_GROUP_NAME</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'entrypoint'</span></em><a class="headerlink" href="#core.facets.FacetConstants.ENTRY_POINT_FACET_GROUP_NAME" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.facets.FacetConstants.ENTRY_POINT_REL">
<span class="sig-name descname"><span class="pre">ENTRY_POINT_REL</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'http://librarysimplified.org/terms/rel/entrypoint'</span></em><a class="headerlink" href="#core.facets.FacetConstants.ENTRY_POINT_REL" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.facets.FacetConstants.FACETS_BY_GROUP">
<span class="sig-name descname"><span class="pre">FACETS_BY_GROUP</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">{'available':</span> <span class="pre">['now',</span> <span class="pre">'all',</span> <span class="pre">'always'],</span> <span class="pre">'collection':</span> <span class="pre">['full',</span> <span class="pre">'featured'],</span> <span class="pre">'order':</span> <span class="pre">['title',</span> <span class="pre">'author',</span> <span class="pre">'added',</span> <span class="pre">'random']}</span></em><a class="headerlink" href="#core.facets.FacetConstants.FACETS_BY_GROUP" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.facets.FacetConstants.FACET_DISPLAY_TITLES">
<span class="sig-name descname"><span class="pre">FACET_DISPLAY_TITLES</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">{'added':</span> <span class="pre">l'Recently</span> <span class="pre">Added',</span> <span class="pre">'all':</span> <span class="pre">l'All',</span> <span class="pre">'always':</span> <span class="pre">l'Yours</span> <span class="pre">to</span> <span class="pre">keep',</span> <span class="pre">'author':</span> <span class="pre">l'Author',</span> <span class="pre">'featured':</span> <span class="pre">l'Popular</span> <span class="pre">Books',</span> <span class="pre">'full':</span> <span class="pre">l'Everything',</span> <span class="pre">'last_update':</span> <span class="pre">l'Last</span> <span class="pre">Update',</span> <span class="pre">'now':</span> <span class="pre">l'Available</span> <span class="pre">now',</span> <span class="pre">'random':</span> <span class="pre">l'Random',</span> <span class="pre">'series':</span> <span class="pre">l'Series</span> <span class="pre">Position',</span> <span class="pre">'title':</span> <span class="pre">l'Title',</span> <span class="pre">'work_id':</span> <span class="pre">l'Work</span> <span class="pre">ID'}</span></em><a class="headerlink" href="#core.facets.FacetConstants.FACET_DISPLAY_TITLES" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.facets.FacetConstants.GROUP_DESCRIPTIONS">
<span class="sig-name descname"><span class="pre">GROUP_DESCRIPTIONS</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">{'available':</span> <span class="pre">l'Allow</span> <span class="pre">patrons</span> <span class="pre">to</span> <span class="pre">filter</span> <span class="pre">availability</span> <span class="pre">to',</span> <span class="pre">'collection':</span> <span class="pre">l'Allow</span> <span class="pre">patrons</span> <span class="pre">to</span> <span class="pre">filter</span> <span class="pre">collection</span> <span class="pre">to',</span> <span class="pre">'order':</span> <span class="pre">l'Allow</span> <span class="pre">patrons</span> <span class="pre">to</span> <span class="pre">sort</span> <span class="pre">by'}</span></em><a class="headerlink" href="#core.facets.FacetConstants.GROUP_DESCRIPTIONS" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.facets.FacetConstants.GROUP_DISPLAY_TITLES">
<span class="sig-name descname"><span class="pre">GROUP_DISPLAY_TITLES</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">{'available':</span> <span class="pre">l'Availability',</span> <span class="pre">'collection':</span> <span class="pre">l'Collection',</span> <span class="pre">'order':</span> <span class="pre">l'Sort</span> <span class="pre">by'}</span></em><a class="headerlink" href="#core.facets.FacetConstants.GROUP_DISPLAY_TITLES" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.facets.FacetConstants.MAX_CACHE_AGE_NAME">
<span class="sig-name descname"><span class="pre">MAX_CACHE_AGE_NAME</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'max_age'</span></em><a class="headerlink" href="#core.facets.FacetConstants.MAX_CACHE_AGE_NAME" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.facets.FacetConstants.ORDER_ADDED_TO_COLLECTION">
<span class="sig-name descname"><span class="pre">ORDER_ADDED_TO_COLLECTION</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'added'</span></em><a class="headerlink" href="#core.facets.FacetConstants.ORDER_ADDED_TO_COLLECTION" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.facets.FacetConstants.ORDER_ASCENDING">
<span class="sig-name descname"><span class="pre">ORDER_ASCENDING</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'asc'</span></em><a class="headerlink" href="#core.facets.FacetConstants.ORDER_ASCENDING" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.facets.FacetConstants.ORDER_AUTHOR">
<span class="sig-name descname"><span class="pre">ORDER_AUTHOR</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'author'</span></em><a class="headerlink" href="#core.facets.FacetConstants.ORDER_AUTHOR" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.facets.FacetConstants.ORDER_DESCENDING">
<span class="sig-name descname"><span class="pre">ORDER_DESCENDING</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'desc'</span></em><a class="headerlink" href="#core.facets.FacetConstants.ORDER_DESCENDING" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.facets.FacetConstants.ORDER_DESCENDING_BY_DEFAULT">
<span class="sig-name descname"><span class="pre">ORDER_DESCENDING_BY_DEFAULT</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">['added',</span> <span class="pre">'last_update']</span></em><a class="headerlink" href="#core.facets.FacetConstants.ORDER_DESCENDING_BY_DEFAULT" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.facets.FacetConstants.ORDER_FACETS">
<span class="sig-name descname"><span class="pre">ORDER_FACETS</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">['title',</span> <span class="pre">'author',</span> <span class="pre">'added',</span> <span class="pre">'random']</span></em><a class="headerlink" href="#core.facets.FacetConstants.ORDER_FACETS" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.facets.FacetConstants.ORDER_FACET_GROUP_NAME">
<span class="sig-name descname"><span class="pre">ORDER_FACET_GROUP_NAME</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'order'</span></em><a class="headerlink" href="#core.facets.FacetConstants.ORDER_FACET_GROUP_NAME" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.facets.FacetConstants.ORDER_LAST_UPDATE">
<span class="sig-name descname"><span class="pre">ORDER_LAST_UPDATE</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'last_update'</span></em><a class="headerlink" href="#core.facets.FacetConstants.ORDER_LAST_UPDATE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.facets.FacetConstants.ORDER_RANDOM">
<span class="sig-name descname"><span class="pre">ORDER_RANDOM</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'random'</span></em><a class="headerlink" href="#core.facets.FacetConstants.ORDER_RANDOM" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.facets.FacetConstants.ORDER_SERIES_POSITION">
<span class="sig-name descname"><span class="pre">ORDER_SERIES_POSITION</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'series'</span></em><a class="headerlink" href="#core.facets.FacetConstants.ORDER_SERIES_POSITION" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.facets.FacetConstants.ORDER_TITLE">
<span class="sig-name descname"><span class="pre">ORDER_TITLE</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'title'</span></em><a class="headerlink" href="#core.facets.FacetConstants.ORDER_TITLE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.facets.FacetConstants.ORDER_WORK_ID">
<span class="sig-name descname"><span class="pre">ORDER_WORK_ID</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'work_id'</span></em><a class="headerlink" href="#core.facets.FacetConstants.ORDER_WORK_ID" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.facets.FacetConstants.SORT_ORDER_TO_ELASTICSEARCH_FIELD_NAME">
<span class="sig-name descname"><span class="pre">SORT_ORDER_TO_ELASTICSEARCH_FIELD_NAME</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">{'added':</span> <span class="pre">'licensepools.availability_time',</span> <span class="pre">'author':</span> <span class="pre">'sort_author',</span> <span class="pre">'last_update':</span> <span class="pre">'last_update_time',</span> <span class="pre">'random':</span> <span class="pre">'random',</span> <span class="pre">'series':</span> <span class="pre">['series_position',</span> <span class="pre">'sort_title'],</span> <span class="pre">'title':</span> <span class="pre">'sort_title',</span> <span class="pre">'work_id':</span> <span class="pre">'_id'}</span></em><a class="headerlink" href="#core.facets.FacetConstants.SORT_ORDER_TO_ELASTICSEARCH_FIELD_NAME" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</section>
<section id="module-core.lane">
<span id="core-lane-module"></span><h2>core.lane module<a class="headerlink" href="#module-core.lane" title="Permalink to this heading">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="core.lane.BaseFacets">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.lane.</span></span><span class="sig-name descname"><span class="pre">BaseFacets</span></span><a class="reference internal" href="_modules/core/lane.html#BaseFacets"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.lane.BaseFacets" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.facets.FacetConstants" title="core.facets.FacetConstants"><code class="xref py py-class docutils literal notranslate"><span class="pre">FacetConstants</span></code></a></p>
<p>Basic faceting class that doesn’t modify a search filter at all.</p>
<p>This is intended solely for use as a base class.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="core.lane.BaseFacets.CACHED_FEED_TYPE">
<span class="sig-name descname"><span class="pre">CACHED_FEED_TYPE</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#core.lane.BaseFacets.CACHED_FEED_TYPE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="core.lane.BaseFacets.cached">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">cached</span></span><a class="headerlink" href="#core.lane.BaseFacets.cached" title="Permalink to this definition">¶</a></dt>
<dd><p>This faceting object’s opinion on whether feeds should be cached.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>A boolean, or None for ‘no opinion’.</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="core.lane.BaseFacets.facet_groups">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">facet_groups</span></span><a class="headerlink" href="#core.lane.BaseFacets.facet_groups" title="Permalink to this definition">¶</a></dt>
<dd><p>Yield a list of 4-tuples
(facet group, facet value, new Facets object, selected)
for use in building OPDS facets.</p>
<p>This does not include the ‘entry point’ facet group,
which must be handled separately.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.lane.BaseFacets.items">
<span class="sig-name descname"><span class="pre">items</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/lane.html#BaseFacets.items"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.lane.BaseFacets.items" title="Permalink to this definition">¶</a></dt>
<dd><p>Yields a 2-tuple for every active facet setting.</p>
<p>These tuples are used to generate URLs that can identify
specific facet settings, and to distinguish between CachedFeed
objects that represent the same feed with different facet
settings.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.lane.BaseFacets.max_cache_age">
<span class="sig-name descname"><span class="pre">max_cache_age</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#core.lane.BaseFacets.max_cache_age" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.lane.BaseFacets.modify_database_query">
<span class="sig-name descname"><span class="pre">modify_database_query</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">qu</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/lane.html#BaseFacets.modify_database_query"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.lane.BaseFacets.modify_database_query" title="Permalink to this definition">¶</a></dt>
<dd><p>If necessary, modify a database query so that resulting
items conform the constraints of this faceting object.</p>
<p>The default behavior is to not modify the query.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.lane.BaseFacets.modify_search_filter">
<span class="sig-name descname"><span class="pre">modify_search_filter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filter</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/lane.html#BaseFacets.modify_search_filter"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.lane.BaseFacets.modify_search_filter" title="Permalink to this definition">¶</a></dt>
<dd><p>Modify an external_search.Filter object to filter out works
excluded by the business logic of this faceting class.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="core.lane.BaseFacets.query_string">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">query_string</span></span><a class="headerlink" href="#core.lane.BaseFacets.query_string" title="Permalink to this definition">¶</a></dt>
<dd><p>A query string fragment that propagates all active facet
settings.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.lane.BaseFacets.scoring_functions">
<span class="sig-name descname"><span class="pre">scoring_functions</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filter</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/lane.html#BaseFacets.scoring_functions"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.lane.BaseFacets.scoring_functions" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a list of ScoringFunction objects that modify how
works in the given WorkList should be ordered.</p>
<p>Most subclasses will not use this because they order
works using the ‘order’ feature.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.lane.BaseFacets.selectable_entrypoints">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">selectable_entrypoints</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">worklist</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/lane.html#BaseFacets.selectable_entrypoints"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.lane.BaseFacets.selectable_entrypoints" title="Permalink to this definition">¶</a></dt>
<dd><p>Ignore all entry points, even if the WorkList supports them.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.lane.DatabaseBackedFacets">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.lane.</span></span><span class="sig-name descname"><span class="pre">DatabaseBackedFacets</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">library</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">collection</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">availability</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">order</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">order_ascending</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">enabled_facets</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">entrypoint</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">entrypoint_is_default</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">constructor_kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/lane.html#DatabaseBackedFacets"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.lane.DatabaseBackedFacets" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.lane.Facets" title="core.lane.Facets"><code class="xref py py-class docutils literal notranslate"><span class="pre">Facets</span></code></a></p>
<p>A generic faceting object designed for managing queries against the
database. (Other faceting objects are designed for managing
Elasticsearch searches.)</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="core.lane.DatabaseBackedFacets.ORDER_FACET_TO_DATABASE_FIELD">
<span class="sig-name descname"><span class="pre">ORDER_FACET_TO_DATABASE_FIELD</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">{'author':</span> <span class="pre">&lt;sqlalchemy.orm.attributes.InstrumentedAttribute</span> <span class="pre">object&gt;,</span> <span class="pre">'last_update':</span> <span class="pre">&lt;sqlalchemy.orm.attributes.InstrumentedAttribute</span> <span class="pre">object&gt;,</span> <span class="pre">'title':</span> <span class="pre">&lt;sqlalchemy.orm.attributes.InstrumentedAttribute</span> <span class="pre">object&gt;,</span> <span class="pre">'work_id':</span> <span class="pre">&lt;sqlalchemy.orm.attributes.InstrumentedAttribute</span> <span class="pre">object&gt;}</span></em><a class="headerlink" href="#core.lane.DatabaseBackedFacets.ORDER_FACET_TO_DATABASE_FIELD" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.lane.DatabaseBackedFacets.available_facets">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">available_facets</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">facet_group_name</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/lane.html#DatabaseBackedFacets.available_facets"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.lane.DatabaseBackedFacets.available_facets" title="Permalink to this definition">¶</a></dt>
<dd><p>Exclude search orders not available through database queries.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.lane.DatabaseBackedFacets.default_facet">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">default_facet</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">facet_group_name</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/lane.html#DatabaseBackedFacets.default_facet"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.lane.DatabaseBackedFacets.default_facet" title="Permalink to this definition">¶</a></dt>
<dd><p>Exclude search orders not available through database queries.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.lane.DatabaseBackedFacets.modify_database_query">
<span class="sig-name descname"><span class="pre">modify_database_query</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">qu</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/lane.html#DatabaseBackedFacets.modify_database_query"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.lane.DatabaseBackedFacets.modify_database_query" title="Permalink to this definition">¶</a></dt>
<dd><p>Restrict a query so that it matches only works
that fit the criteria of this faceting object. Ensure
query is appropriately ordered and made distinct.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.lane.DatabaseBackedFacets.order_by">
<span class="sig-name descname"><span class="pre">order_by</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/lane.html#DatabaseBackedFacets.order_by"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.lane.DatabaseBackedFacets.order_by" title="Permalink to this definition">¶</a></dt>
<dd><p>Given these Facets, create a complete ORDER BY clause for queries
against WorkModelWithGenre.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.lane.DatabaseBackedWorkList">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.lane.</span></span><span class="sig-name descname"><span class="pre">DatabaseBackedWorkList</span></span><a class="reference internal" href="_modules/core/lane.html#DatabaseBackedWorkList"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.lane.DatabaseBackedWorkList" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.lane.WorkList" title="core.lane.WorkList"><code class="xref py py-class docutils literal notranslate"><span class="pre">WorkList</span></code></a></p>
<p>A WorkList that can get its works from the database in addition to
(or possibly instead of) the search index.</p>
<p>Even when works _are_ obtained through the search index, a
DatabaseBackedWorkList is then created to look up the Work objects
for use in an OPDS feed.</p>
<dl class="py method">
<dt class="sig sig-object py" id="core.lane.DatabaseBackedWorkList.age_range_filter_clauses">
<span class="sig-name descname"><span class="pre">age_range_filter_clauses</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/lane.html#DatabaseBackedWorkList.age_range_filter_clauses"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.lane.DatabaseBackedWorkList.age_range_filter_clauses" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a clause that filters out all books not classified as
suitable for this DatabaseBackedWorkList’s age range.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.lane.DatabaseBackedWorkList.audience_filter_clauses">
<span class="sig-name descname"><span class="pre">audience_filter_clauses</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">qu</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/lane.html#DatabaseBackedWorkList.audience_filter_clauses"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.lane.DatabaseBackedWorkList.audience_filter_clauses" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a SQLAlchemy filter that excludes books whose intended
audience doesn’t match what we’re looking for.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.lane.DatabaseBackedWorkList.base_query">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">base_query</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/lane.html#DatabaseBackedWorkList.base_query"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.lane.DatabaseBackedWorkList.base_query" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a query that contains the joins set up as necessary to
create OPDS feeds.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.lane.DatabaseBackedWorkList.bibliographic_filter_clauses">
<span class="sig-name descname"><span class="pre">bibliographic_filter_clauses</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">qu</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/lane.html#DatabaseBackedWorkList.bibliographic_filter_clauses"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.lane.DatabaseBackedWorkList.bibliographic_filter_clauses" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a SQLAlchemy filter that excludes books whose bibliographic
metadata doesn’t match what we’re looking for.</p>
<p>query is either <cite>qu</cite>, or a new query that has been modified to
join against additional tables.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>A 2-tuple (query, clauses).</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.lane.DatabaseBackedWorkList.customlist_filter_clauses">
<span class="sig-name descname"><span class="pre">customlist_filter_clauses</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">qu</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/lane.html#DatabaseBackedWorkList.customlist_filter_clauses"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.lane.DatabaseBackedWorkList.customlist_filter_clauses" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a filter clause that only books that are on one of the
CustomLists allowed by Lane configuration.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>A 3-tuple (query, clauses).</p>
</dd>
</dl>
<p><cite>query</cite> is the same query as <cite>qu</cite>, possibly extended with
additional table joins.</p>
<p><cite>clauses</cite> is a list of SQLAlchemy statements for use in a
filter() or case() statement.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.lane.DatabaseBackedWorkList.genre_filter_clause">
<span class="sig-name descname"><span class="pre">genre_filter_clause</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">qu</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/lane.html#DatabaseBackedWorkList.genre_filter_clause"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.lane.DatabaseBackedWorkList.genre_filter_clause" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.lane.DatabaseBackedWorkList.modify_database_query_hook">
<span class="sig-name descname"><span class="pre">modify_database_query_hook</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">qu</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/lane.html#DatabaseBackedWorkList.modify_database_query_hook"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.lane.DatabaseBackedWorkList.modify_database_query_hook" title="Permalink to this definition">¶</a></dt>
<dd><p>A hook method allowing subclasses to modify a database query
that’s about to find all the works in this WorkList.</p>
<p>This can avoid the need for complex subclasses of
DatabaseBackedFacets.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.lane.DatabaseBackedWorkList.only_show_ready_deliverable_works">
<span class="sig-name descname"><span class="pre">only_show_ready_deliverable_works</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">query</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">show_suppressed</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/lane.html#DatabaseBackedWorkList.only_show_ready_deliverable_works"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.lane.DatabaseBackedWorkList.only_show_ready_deliverable_works" title="Permalink to this definition">¶</a></dt>
<dd><p>Restrict a query to show only presentation-ready works present in
an appropriate collection which the default client can
fulfill.</p>
<p>Note that this assumes the query has an active join against
LicensePool.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.lane.DatabaseBackedWorkList.works_from_database">
<span class="sig-name descname"><span class="pre">works_from_database</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">facets</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pagination</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/lane.html#DatabaseBackedWorkList.works_from_database"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.lane.DatabaseBackedWorkList.works_from_database" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a query against the <cite>works</cite> table that finds Work objects
corresponding to all the Works that belong in this WorkList.</p>
<p>The apply_filters() implementation defines which Works qualify
for membership in a WorkList of this type.</p>
<p>This tends to be slower than WorkList.works, but not all
lanes can be generated through search engine queries.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>_db</strong> – A database connection.</p></li>
<li><p><strong>facets</strong> – A faceting object, which may place additional
constraints on WorkList membership.</p></li>
<li><p><strong>pagination</strong> – A Pagination object indicating which part of
the WorkList the caller is looking at.</p></li>
<li><p><strong>kwargs</strong> – Ignored – only included for compatibility with works().</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A Query.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.lane.DefaultSortOrderFacets">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.lane.</span></span><span class="sig-name descname"><span class="pre">DefaultSortOrderFacets</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">library</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">collection</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">availability</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">order</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">order_ascending</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">enabled_facets</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">entrypoint</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">entrypoint_is_default</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">constructor_kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/lane.html#DefaultSortOrderFacets"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.lane.DefaultSortOrderFacets" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.lane.Facets" title="core.lane.Facets"><code class="xref py py-class docutils literal notranslate"><span class="pre">Facets</span></code></a></p>
<p>A faceting object that changes the default sort order.</p>
<p>Subclasses must set DEFAULT_SORT_ORDER</p>
<dl class="py method">
<dt class="sig sig-object py" id="core.lane.DefaultSortOrderFacets.available_facets">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">available_facets</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">facet_group_name</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/lane.html#DefaultSortOrderFacets.available_facets"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.lane.DefaultSortOrderFacets.available_facets" title="Permalink to this definition">¶</a></dt>
<dd><p>Make sure the default sort order is the first item
in the list of available sort orders.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.lane.DefaultSortOrderFacets.default_facet">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">default_facet</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">facet_group_name</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/lane.html#DefaultSortOrderFacets.default_facet"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.lane.DefaultSortOrderFacets.default_facet" title="Permalink to this definition">¶</a></dt>
<dd><p>The default value for the given facet group.</p>
<p>The default value must be one of the values returned by available_facets() above.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.lane.Facets">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.lane.</span></span><span class="sig-name descname"><span class="pre">Facets</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">library</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">collection</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">availability</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">order</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">order_ascending</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">enabled_facets</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">entrypoint</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">entrypoint_is_default</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">constructor_kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/lane.html#Facets"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.lane.Facets" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.lane.FacetsWithEntryPoint" title="core.lane.FacetsWithEntryPoint"><code class="xref py py-class docutils literal notranslate"><span class="pre">FacetsWithEntryPoint</span></code></a></p>
<p>A full-fledged facet class that supports complex navigation between
multiple facet groups.</p>
<p>Despite the generic name, this is only used in ‘page’ type OPDS
feeds that list all the works in some WorkList.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="core.lane.Facets.ORDER_BY_RELEVANCE">
<span class="sig-name descname"><span class="pre">ORDER_BY_RELEVANCE</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'relevance'</span></em><a class="headerlink" href="#core.lane.Facets.ORDER_BY_RELEVANCE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.lane.Facets.available_facets">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">available_facets</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">facet_group_name</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/lane.html#Facets.available_facets"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.lane.Facets.available_facets" title="Permalink to this definition">¶</a></dt>
<dd><p>Which facets are enabled for the given facet group?</p>
<p>You can override this to forcible enable or disable facets
that might not be enabled in library configuration, but you
can’t make up totally new facets.</p>
<p>TODO: This sytem would make more sense if you _could_ make up
totally new facets, maybe because each facet was represented
as a policy object rather than a key to code implemented
elsewhere in this class. Right now this method implies more
flexibility than actually exists.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.lane.Facets.default">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">default</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">library</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">collection</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">availability</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">order</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">entrypoint</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/lane.html#Facets.default"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.lane.Facets.default" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.lane.Facets.default_facet">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">default_facet</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">facet_group_name</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/lane.html#Facets.default_facet"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.lane.Facets.default_facet" title="Permalink to this definition">¶</a></dt>
<dd><p>The default value for the given facet group.</p>
<p>The default value must be one of the values returned by available_facets() above.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="core.lane.Facets.enabled_facets">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">enabled_facets</span></span><a class="headerlink" href="#core.lane.Facets.enabled_facets" title="Permalink to this definition">¶</a></dt>
<dd><p>Yield a 3-tuple of lists (order, availability, collection)
representing facet values enabled via initialization or configuration</p>
<p>The ‘entry point’ facet group is handled separately, since it
is not always used.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="core.lane.Facets.facet_groups">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">facet_groups</span></span><a class="headerlink" href="#core.lane.Facets.facet_groups" title="Permalink to this definition">¶</a></dt>
<dd><p>Yield a list of 4-tuples
(facet group, facet value, new Facets object, selected)
for use in building OPDS facets.</p>
<p>This does not yield anything for the ‘entry point’ facet group,
which must be handled separately.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.lane.Facets.from_request">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">from_request</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">library</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">config</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">get_argument</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">get_header</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">worklist</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">default_entrypoint</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">extra</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/lane.html#Facets.from_request"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.lane.Facets.from_request" title="Permalink to this definition">¶</a></dt>
<dd><p>Load a faceting object from an HTTP request.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.lane.Facets.items">
<span class="sig-name descname"><span class="pre">items</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/lane.html#Facets.items"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.lane.Facets.items" title="Permalink to this definition">¶</a></dt>
<dd><p>Yields a 2-tuple for every active facet setting.</p>
<p>In this class that just means the entrypoint and any max_cache_age.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.lane.Facets.modify_database_query">
<span class="sig-name descname"><span class="pre">modify_database_query</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">qu</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/lane.html#Facets.modify_database_query"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.lane.Facets.modify_database_query" title="Permalink to this definition">¶</a></dt>
<dd><p>Restrict a query against Work+LicensePool+Edition so that it
matches only works that fit the criteria of this Faceting object.</p>
<p>Sort order facet cannot be handled in this method, but can be
handled in subclasses that override this method.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.lane.Facets.modify_search_filter">
<span class="sig-name descname"><span class="pre">modify_search_filter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filter</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/lane.html#Facets.modify_search_filter"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.lane.Facets.modify_search_filter" title="Permalink to this definition">¶</a></dt>
<dd><p>Modify the given external_search.Filter object
so that it reflects the settings of this Facets object.</p>
<p>This is the Elasticsearch equivalent of apply(). However, the
Elasticsearch implementation of (e.g.) the meaning of the
different availabilty statuses is kept in Filter.build().</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.lane.Facets.navigate">
<span class="sig-name descname"><span class="pre">navigate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">collection</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">availability</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">order</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">entrypoint</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/lane.html#Facets.navigate"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.lane.Facets.navigate" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a slightly different Facets object from this one.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.lane.FacetsWithEntryPoint">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.lane.</span></span><span class="sig-name descname"><span class="pre">FacetsWithEntryPoint</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">entrypoint</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">entrypoint_is_default</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_cache_age</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/lane.html#FacetsWithEntryPoint"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.lane.FacetsWithEntryPoint" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.lane.BaseFacets" title="core.lane.BaseFacets"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseFacets</span></code></a></p>
<p>Basic Facets class that knows how to filter a query based on a
selected EntryPoint.</p>
<dl class="py method">
<dt class="sig sig-object py" id="core.lane.FacetsWithEntryPoint.from_request">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">from_request</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">library</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">facet_config</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">get_argument</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">get_header</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">worklist</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">default_entrypoint</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">extra_kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/lane.html#FacetsWithEntryPoint.from_request"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.lane.FacetsWithEntryPoint.from_request" title="Permalink to this definition">¶</a></dt>
<dd><p>Load a faceting object from an HTTP request.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>facet_config</strong> – A Library (or mock of one) that knows
which subset of the available facets are configured.</p></li>
<li><p><strong>get_argument</strong> – A callable that takes one argument and
retrieves (or pretends to retrieve) a query string
parameter of that name from an incoming HTTP request.</p></li>
<li><p><strong>get_header</strong> – A callable that takes one argument and
retrieves (or pretends to retrieve) an HTTP header
of that name from an incoming HTTP request.</p></li>
<li><p><strong>worklist</strong> – A WorkList associated with the current request,
if any.</p></li>
<li><p><strong>default_entrypoint</strong> – Select this EntryPoint if the
incoming request does not specify an enabled EntryPoint.
If this is None, the first enabled EntryPoint will be used
as the default.</p></li>
<li><p><strong>extra_kwargs</strong> – A dictionary of keyword arguments to pass
into the constructor when a faceting object is instantiated.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A FacetsWithEntryPoint, or a ProblemDetail if there’s
a problem with the input from the request.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.lane.FacetsWithEntryPoint.items">
<span class="sig-name descname"><span class="pre">items</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/lane.html#FacetsWithEntryPoint.items"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.lane.FacetsWithEntryPoint.items" title="Permalink to this definition">¶</a></dt>
<dd><p>Yields a 2-tuple for every active facet setting.</p>
<p>In this class that just means the entrypoint and any max_cache_age.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.lane.FacetsWithEntryPoint.load_entrypoint">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">load_entrypoint</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">valid_entrypoints</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">default</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/lane.html#FacetsWithEntryPoint.load_entrypoint"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.lane.FacetsWithEntryPoint.load_entrypoint" title="Permalink to this definition">¶</a></dt>
<dd><p>Look up an EntryPoint by name, assuming it’s valid in the
given WorkList.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>valid_entrypoints</strong> – The EntryPoints that might be
valid. This is probably not the value of
WorkList.selectable_entrypoints, because an EntryPoint
selected in a WorkList remains valid (but not selectable) for
all of its children.</p></li>
<li><p><strong>default</strong> – A class to use as the default EntryPoint if
none is specified. If no default is specified, the first
enabled EntryPoint will be used.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A 2-tuple (EntryPoint class, is_default).</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.lane.FacetsWithEntryPoint.load_max_cache_age">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">load_max_cache_age</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/lane.html#FacetsWithEntryPoint.load_max_cache_age"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.lane.FacetsWithEntryPoint.load_max_cache_age" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert a value for the MAX_CACHE_AGE_NAME parameter to a value
that CachedFeed will understand.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>value</strong> – A string.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>For now, either CachedFeed.IGNORE_CACHE or None.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.lane.FacetsWithEntryPoint.modify_database_query">
<span class="sig-name descname"><span class="pre">modify_database_query</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">qu</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/lane.html#FacetsWithEntryPoint.modify_database_query"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.lane.FacetsWithEntryPoint.modify_database_query" title="Permalink to this definition">¶</a></dt>
<dd><p>Modify the given database query so that it reflects this set of
facets.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.lane.FacetsWithEntryPoint.modify_search_filter">
<span class="sig-name descname"><span class="pre">modify_search_filter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filter</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/lane.html#FacetsWithEntryPoint.modify_search_filter"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.lane.FacetsWithEntryPoint.modify_search_filter" title="Permalink to this definition">¶</a></dt>
<dd><p>Modify the given external_search.Filter object
so that it reflects this set of facets.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.lane.FacetsWithEntryPoint.navigate">
<span class="sig-name descname"><span class="pre">navigate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">entrypoint</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/lane.html#FacetsWithEntryPoint.navigate"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.lane.FacetsWithEntryPoint.navigate" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a very similar FacetsWithEntryPoint that points to
a different EntryPoint.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.lane.FacetsWithEntryPoint.selectable_entrypoints">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">selectable_entrypoints</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">worklist</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/lane.html#FacetsWithEntryPoint.selectable_entrypoints"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.lane.FacetsWithEntryPoint.selectable_entrypoints" title="Permalink to this definition">¶</a></dt>
<dd><p>Which EntryPoints can be selected for these facets on this
WorkList?</p>
<p>In most cases, there are no selectable EntryPoints; this generally
happens only at the top level.</p>
<p>By default, this is completely determined by the WorkList.
See SearchFacets for an example that changes this.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.lane.FeaturedFacets">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.lane.</span></span><span class="sig-name descname"><span class="pre">FeaturedFacets</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">minimum_featured_quality</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">entrypoint</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">random_seed</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/lane.html#FeaturedFacets"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.lane.FeaturedFacets" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.lane.FacetsWithEntryPoint" title="core.lane.FacetsWithEntryPoint"><code class="xref py py-class docutils literal notranslate"><span class="pre">FacetsWithEntryPoint</span></code></a></p>
<p>A simple faceting object that configures a query so that the ‘most
featurable’ items are at the front.</p>
<p>This is mainly a convenient thing to pass into
AcquisitionFeed.groups().</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="core.lane.FeaturedFacets.CACHED_FEED_TYPE">
<span class="sig-name descname"><span class="pre">CACHED_FEED_TYPE</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'groups'</span></em><a class="headerlink" href="#core.lane.FeaturedFacets.CACHED_FEED_TYPE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.lane.FeaturedFacets.default">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">default</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">lane</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/lane.html#FeaturedFacets.default"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.lane.FeaturedFacets.default" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.lane.FeaturedFacets.modify_search_filter">
<span class="sig-name descname"><span class="pre">modify_search_filter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filter</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/lane.html#FeaturedFacets.modify_search_filter"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.lane.FeaturedFacets.modify_search_filter" title="Permalink to this definition">¶</a></dt>
<dd><p>Modify the given external_search.Filter object
so that it reflects this set of facets.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.lane.FeaturedFacets.navigate">
<span class="sig-name descname"><span class="pre">navigate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">minimum_featured_quality</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">entrypoint</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/lane.html#FeaturedFacets.navigate"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.lane.FeaturedFacets.navigate" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a slightly different FeaturedFacets object based on this
one.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.lane.FeaturedFacets.scoring_functions">
<span class="sig-name descname"><span class="pre">scoring_functions</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filter</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/lane.html#FeaturedFacets.scoring_functions"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.lane.FeaturedFacets.scoring_functions" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate scoring functions that weight works randomly, but
with ‘more featurable’ works tending to be at the top.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.lane.HierarchyWorkList">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.lane.</span></span><span class="sig-name descname"><span class="pre">HierarchyWorkList</span></span><a class="reference internal" href="_modules/core/lane.html#HierarchyWorkList"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.lane.HierarchyWorkList" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.lane.WorkList" title="core.lane.WorkList"><code class="xref py py-class docutils literal notranslate"><span class="pre">WorkList</span></code></a></p>
<p>A WorkList representing part of a hierarchical view of a a
library’s collection. (As opposed to a non-hierarchical view such
as search results or “books by author X”.)</p>
<dl class="py method">
<dt class="sig sig-object py" id="core.lane.HierarchyWorkList.accessible_to">
<span class="sig-name descname"><span class="pre">accessible_to</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">patron</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/lane.html#HierarchyWorkList.accessible_to"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.lane.HierarchyWorkList.accessible_to" title="Permalink to this definition">¶</a></dt>
<dd><p>As a matter of library policy, is the given <cite>Patron</cite> allowed
to access this <cite>WorkList</cite>?</p>
<p>Most of the logic is inherited from <cite>WorkList</cite>, but there’s also
a restriction based on the site hierarchy.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>patron</strong> – A Patron</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A boolean</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.lane.Lane">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.lane.</span></span><span class="sig-name descname"><span class="pre">Lane</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/lane.html#Lane"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.lane.Lane" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">Base</span></code>, <a class="reference internal" href="#core.lane.DatabaseBackedWorkList" title="core.lane.DatabaseBackedWorkList"><code class="xref py py-class docutils literal notranslate"><span class="pre">DatabaseBackedWorkList</span></code></a>, <a class="reference internal" href="#core.lane.HierarchyWorkList" title="core.lane.HierarchyWorkList"><code class="xref py py-class docutils literal notranslate"><span class="pre">HierarchyWorkList</span></code></a></p>
<p>A WorkList that draws its search criteria from a row in a
database table.</p>
<p>A Lane corresponds roughly to a section in a branch library or
bookstore. Lanes are the primary means by which patrons discover
books.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="core.lane.Lane.MAX_CACHE_AGE">
<span class="sig-name descname"><span class="pre">MAX_CACHE_AGE</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">1200</span></em><a class="headerlink" href="#core.lane.Lane.MAX_CACHE_AGE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.lane.Lane.add_genre">
<span class="sig-name descname"><span class="pre">add_genre</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">genre</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">inclusive</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">recursive</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/lane.html#Lane.add_genre"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.lane.Lane.add_genre" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a new LaneGenre for the given genre and
associate it with this Lane.</p>
<p>Mainly used in tests.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.lane.Lane.affected_by_customlist">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">affected_by_customlist</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">customlist</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/lane.html#Lane.affected_by_customlist"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.lane.Lane.affected_by_customlist" title="Permalink to this definition">¶</a></dt>
<dd><p>Find all Lanes whose membership is partially derived
from the membership of the given CustomList.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.lane.Lane.audiences">
<span class="sig-name descname"><span class="pre">audiences</span></span><a class="headerlink" href="#core.lane.Lane.audiences" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.lane.Lane.cachedfeeds">
<span class="sig-name descname"><span class="pre">cachedfeeds</span></span><a class="headerlink" href="#core.lane.Lane.cachedfeeds" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.lane.Lane.cachedmarcfiles">
<span class="sig-name descname"><span class="pre">cachedmarcfiles</span></span><a class="headerlink" href="#core.lane.Lane.cachedmarcfiles" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="core.lane.Lane.children">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">children</span></span><a class="headerlink" href="#core.lane.Lane.children" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="core.lane.Lane.collection_ids">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">collection_ids</span></span><a class="headerlink" href="#core.lane.Lane.collection_ids" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="core.lane.Lane.customlist_ids">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">customlist_ids</span></span><a class="headerlink" href="#core.lane.Lane.customlist_ids" title="Permalink to this definition">¶</a></dt>
<dd><p>Find the database ID of every CustomList such that a Work filed
in that List should be in this Lane.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>A list of CustomList IDs, possibly empty.</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.lane.Lane.customlists">
<span class="sig-name descname"><span class="pre">customlists</span></span><a class="headerlink" href="#core.lane.Lane.customlists" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="core.lane.Lane.depth">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">depth</span></span><a class="headerlink" href="#core.lane.Lane.depth" title="Permalink to this definition">¶</a></dt>
<dd><p>How deep is this lane in this site’s hierarchy?
i.e. how many times do we have to follow .parent before we get None?</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.lane.Lane.display_name">
<span class="sig-name descname"><span class="pre">display_name</span></span><a class="headerlink" href="#core.lane.Lane.display_name" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="core.lane.Lane.entrypoints">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">entrypoints</span></span><a class="headerlink" href="#core.lane.Lane.entrypoints" title="Permalink to this definition">¶</a></dt>
<dd><p>Lanes cannot currently have EntryPoints.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.lane.Lane.explain">
<span class="sig-name descname"><span class="pre">explain</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/lane.html#Lane.explain"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.lane.Lane.explain" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a series of human-readable strings to explain a lane’s settings.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.lane.Lane.fiction">
<span class="sig-name descname"><span class="pre">fiction</span></span><a class="headerlink" href="#core.lane.Lane.fiction" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="core.lane.Lane.genre_ids">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">genre_ids</span></span><a class="headerlink" href="#core.lane.Lane.genre_ids" title="Permalink to this definition">¶</a></dt>
<dd><p>Find the database ID of every Genre such that a Work classified in
that Genre should be in this Lane.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>A list of genre IDs, or None if this Lane does not
consider genres at all.</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.lane.Lane.genres">
<span class="sig-name descname"><span class="pre">genres</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">ObjectAssociationProxyInstance(AssociationProxy('lane_genres',</span> <span class="pre">'genre'))</span></em><a class="headerlink" href="#core.lane.Lane.genres" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.lane.Lane.get_library">
<span class="sig-name descname"><span class="pre">get_library</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/lane.html#Lane.get_library"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.lane.Lane.get_library" title="Permalink to this definition">¶</a></dt>
<dd><p>For compatibility with WorkList.get_library().</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.lane.Lane.groups">
<span class="sig-name descname"><span class="pre">groups</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">include_sublanes</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pagination</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">facets</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">search_engine</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">debug</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/lane.html#Lane.groups"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.lane.Lane.groups" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a list of (Work, Lane) 2-tuples
describing a sequence of featured items for this lane and
(optionally) its children.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>pagination</strong> – A Pagination object which may affect how many
works each child of this WorkList may contribute.</p></li>
<li><p><strong>facets</strong> – A FeaturedFacets object.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.lane.Lane.id">
<span class="sig-name descname"><span class="pre">id</span></span><a class="headerlink" href="#core.lane.Lane.id" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.lane.Lane.include_self_in_grouped_feed">
<span class="sig-name descname"><span class="pre">include_self_in_grouped_feed</span></span><a class="headerlink" href="#core.lane.Lane.include_self_in_grouped_feed" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.lane.Lane.inherit_parent_restrictions">
<span class="sig-name descname"><span class="pre">inherit_parent_restrictions</span></span><a class="headerlink" href="#core.lane.Lane.inherit_parent_restrictions" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.lane.Lane.is_self_or_descendant">
<span class="sig-name descname"><span class="pre">is_self_or_descendant</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ancestor</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/lane.html#Lane.is_self_or_descendant"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.lane.Lane.is_self_or_descendant" title="Permalink to this definition">¶</a></dt>
<dd><p>Is this WorkList the given WorkList or one of its descendants?</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>ancestor</strong> – A WorkList.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A boolean.</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.lane.Lane.lane_genres">
<span class="sig-name descname"><span class="pre">lane_genres</span></span><a class="headerlink" href="#core.lane.Lane.lane_genres" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.lane.Lane.languages">
<span class="sig-name descname"><span class="pre">languages</span></span><a class="headerlink" href="#core.lane.Lane.languages" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.lane.Lane.library_id">
<span class="sig-name descname"><span class="pre">library_id</span></span><a class="headerlink" href="#core.lane.Lane.library_id" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.lane.Lane.license_datasource_id">
<span class="sig-name descname"><span class="pre">license_datasource_id</span></span><a class="headerlink" href="#core.lane.Lane.license_datasource_id" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.lane.Lane.list_datasource">
<span class="sig-name descname"><span class="pre">list_datasource</span></span><a class="headerlink" href="#core.lane.Lane.list_datasource" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="core.lane.Lane.list_datasource_id">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">list_datasource_id</span></span><a class="headerlink" href="#core.lane.Lane.list_datasource_id" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.lane.Lane.list_seen_in_previous_days">
<span class="sig-name descname"><span class="pre">list_seen_in_previous_days</span></span><a class="headerlink" href="#core.lane.Lane.list_seen_in_previous_days" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.lane.Lane.max_cache_age">
<span class="sig-name descname"><span class="pre">max_cache_age</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">type</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/lane.html#Lane.max_cache_age"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.lane.Lane.max_cache_age" title="Permalink to this definition">¶</a></dt>
<dd><p>Determine how long a feed for this WorkList should be cached
internally.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>type</strong> – The type of feed.</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.lane.Lane.media">
<span class="sig-name descname"><span class="pre">media</span></span><a class="headerlink" href="#core.lane.Lane.media" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.lane.Lane.parent">
<span class="sig-name descname"><span class="pre">parent</span></span><a class="headerlink" href="#core.lane.Lane.parent" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.lane.Lane.parent_id">
<span class="sig-name descname"><span class="pre">parent_id</span></span><a class="headerlink" href="#core.lane.Lane.parent_id" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="core.lane.Lane.parentage">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">parentage</span></span><a class="headerlink" href="#core.lane.Lane.parentage" title="Permalink to this definition">¶</a></dt>
<dd><p>Yield the parent, grandparent, etc. of this Lane.</p>
<p>The Lane may be inside one or more non-Lane WorkLists, but those
WorkLists are not counted in the parentage.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.lane.Lane.priority">
<span class="sig-name descname"><span class="pre">priority</span></span><a class="headerlink" href="#core.lane.Lane.priority" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.lane.Lane.root_for_patron_type">
<span class="sig-name descname"><span class="pre">root_for_patron_type</span></span><a class="headerlink" href="#core.lane.Lane.root_for_patron_type" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.lane.Lane.search">
<span class="sig-name descname"><span class="pre">search</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">query_string</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">search_client</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pagination</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">facets</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/lane.html#Lane.search"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.lane.Lane.search" title="Permalink to this definition">¶</a></dt>
<dd><p>Find works in this lane that also match a search query.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>_db</strong> – A database connection.</p></li>
<li><p><strong>query_string</strong> – Search for this string.</p></li>
<li><p><strong>search_client</strong> – An ExternalSearchIndex object.</p></li>
<li><p><strong>pagination</strong> – A Pagination object.</p></li>
<li><p><strong>facets</strong> – A faceting object, probably a SearchFacets.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="core.lane.Lane.search_target">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">search_target</span></span><a class="headerlink" href="#core.lane.Lane.search_target" title="Permalink to this definition">¶</a></dt>
<dd><p>Obtain the WorkList that should be searched when someone
initiates a search from this Lane.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.lane.Lane.size">
<span class="sig-name descname"><span class="pre">size</span></span><a class="headerlink" href="#core.lane.Lane.size" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.lane.Lane.size_by_entrypoint">
<span class="sig-name descname"><span class="pre">size_by_entrypoint</span></span><a class="headerlink" href="#core.lane.Lane.size_by_entrypoint" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.lane.Lane.sublanes">
<span class="sig-name descname"><span class="pre">sublanes</span></span><a class="headerlink" href="#core.lane.Lane.sublanes" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.lane.Lane.target_age">
<span class="sig-name descname"><span class="pre">target_age</span></span><a class="headerlink" href="#core.lane.Lane.target_age" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.lane.Lane.update_size">
<span class="sig-name descname"><span class="pre">update_size</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">search_engine</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/lane.html#Lane.update_size"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.lane.Lane.update_size" title="Permalink to this definition">¶</a></dt>
<dd><p>Update the stored estimate of the number of Works in this Lane.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="core.lane.Lane.url_name">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">url_name</span></span><a class="headerlink" href="#core.lane.Lane.url_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the name of this lane to be used in URLs.</p>
<p>Since most aspects of the lane can change through administrative
action, we use the internal database ID of the lane in URLs.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="core.lane.Lane.uses_customlists">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">uses_customlists</span></span><a class="headerlink" href="#core.lane.Lane.uses_customlists" title="Permalink to this definition">¶</a></dt>
<dd><p>Does the works() implementation for this Lane look for works on
CustomLists?</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.lane.Lane.visible">
<span class="sig-name descname"><span class="pre">visible</span></span><a class="headerlink" href="#core.lane.Lane.visible" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="core.lane.Lane.visible_children">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">visible_children</span></span><a class="headerlink" href="#core.lane.Lane.visible_children" title="Permalink to this definition">¶</a></dt>
<dd><p>A WorkList’s children can be used to create a grouped acquisition
feed for that WorkList.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.lane.LaneGenre">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.lane.</span></span><span class="sig-name descname"><span class="pre">LaneGenre</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/lane.html#LaneGenre"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.lane.LaneGenre" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">Base</span></code></p>
<p>Relationship object between Lane and Genre.</p>
<dl class="py method">
<dt class="sig sig-object py" id="core.lane.LaneGenre.from_genre">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">from_genre</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">genre</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/lane.html#LaneGenre.from_genre"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.lane.LaneGenre.from_genre" title="Permalink to this definition">¶</a></dt>
<dd><p>Used in the Lane.genres association proxy.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.lane.LaneGenre.genre">
<span class="sig-name descname"><span class="pre">genre</span></span><a class="headerlink" href="#core.lane.LaneGenre.genre" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.lane.LaneGenre.genre_id">
<span class="sig-name descname"><span class="pre">genre_id</span></span><a class="headerlink" href="#core.lane.LaneGenre.genre_id" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.lane.LaneGenre.id">
<span class="sig-name descname"><span class="pre">id</span></span><a class="headerlink" href="#core.lane.LaneGenre.id" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.lane.LaneGenre.inclusive">
<span class="sig-name descname"><span class="pre">inclusive</span></span><a class="headerlink" href="#core.lane.LaneGenre.inclusive" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.lane.LaneGenre.lane">
<span class="sig-name descname"><span class="pre">lane</span></span><a class="headerlink" href="#core.lane.LaneGenre.lane" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.lane.LaneGenre.lane_id">
<span class="sig-name descname"><span class="pre">lane_id</span></span><a class="headerlink" href="#core.lane.LaneGenre.lane_id" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.lane.LaneGenre.recursive">
<span class="sig-name descname"><span class="pre">recursive</span></span><a class="headerlink" href="#core.lane.LaneGenre.recursive" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.lane.Pagination">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.lane.</span></span><span class="sig-name descname"><span class="pre">Pagination</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">offset</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">50</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/lane.html#Pagination"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.lane.Pagination" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<dl class="py attribute">
<dt class="sig sig-object py" id="core.lane.Pagination.DEFAULT_CRAWLABLE_SIZE">
<span class="sig-name descname"><span class="pre">DEFAULT_CRAWLABLE_SIZE</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">100</span></em><a class="headerlink" href="#core.lane.Pagination.DEFAULT_CRAWLABLE_SIZE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.lane.Pagination.DEFAULT_FEATURED_SIZE">
<span class="sig-name descname"><span class="pre">DEFAULT_FEATURED_SIZE</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">10</span></em><a class="headerlink" href="#core.lane.Pagination.DEFAULT_FEATURED_SIZE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.lane.Pagination.DEFAULT_SEARCH_SIZE">
<span class="sig-name descname"><span class="pre">DEFAULT_SEARCH_SIZE</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">10</span></em><a class="headerlink" href="#core.lane.Pagination.DEFAULT_SEARCH_SIZE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.lane.Pagination.DEFAULT_SIZE">
<span class="sig-name descname"><span class="pre">DEFAULT_SIZE</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">50</span></em><a class="headerlink" href="#core.lane.Pagination.DEFAULT_SIZE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.lane.Pagination.MAX_SIZE">
<span class="sig-name descname"><span class="pre">MAX_SIZE</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">100</span></em><a class="headerlink" href="#core.lane.Pagination.MAX_SIZE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.lane.Pagination.default">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">default</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/lane.html#Pagination.default"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.lane.Pagination.default" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="core.lane.Pagination.first_page">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">first_page</span></span><a class="headerlink" href="#core.lane.Pagination.first_page" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.lane.Pagination.from_request">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">from_request</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">get_arg</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">default_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/lane.html#Pagination.from_request"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.lane.Pagination.from_request" title="Permalink to this definition">¶</a></dt>
<dd><p>Instantiate a Pagination object from a Flask request.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="core.lane.Pagination.has_next_page">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">has_next_page</span></span><a class="headerlink" href="#core.lane.Pagination.has_next_page" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns boolean reporting whether pagination is done for a query</p>
<p>Either <cite>total_size</cite> or <cite>this_page_size</cite> must be set for this
method to be accurate.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.lane.Pagination.items">
<span class="sig-name descname"><span class="pre">items</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/lane.html#Pagination.items"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.lane.Pagination.items" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.lane.Pagination.modify_database_query">
<span class="sig-name descname"><span class="pre">modify_database_query</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">qu</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/lane.html#Pagination.modify_database_query"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.lane.Pagination.modify_database_query" title="Permalink to this definition">¶</a></dt>
<dd><p>Modify the given database query with OFFSET and LIMIT.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.lane.Pagination.modify_search_query">
<span class="sig-name descname"><span class="pre">modify_search_query</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">search</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/lane.html#Pagination.modify_search_query"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.lane.Pagination.modify_search_query" title="Permalink to this definition">¶</a></dt>
<dd><p>Modify a Search object so that it retrieves only a single ‘page’
of results.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>A Search object.</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="core.lane.Pagination.next_page">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">next_page</span></span><a class="headerlink" href="#core.lane.Pagination.next_page" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.lane.Pagination.page_loaded">
<span class="sig-name descname"><span class="pre">page_loaded</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">page</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/lane.html#Pagination.page_loaded"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.lane.Pagination.page_loaded" title="Permalink to this definition">¶</a></dt>
<dd><p>An actual page of results has been fetched. Keep any internal state
that would be useful to know when reasoning about earlier or
later pages.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="core.lane.Pagination.previous_page">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">previous_page</span></span><a class="headerlink" href="#core.lane.Pagination.previous_page" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="core.lane.Pagination.query_string">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">query_string</span></span><a class="headerlink" href="#core.lane.Pagination.query_string" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.lane.Pagination.size_from_request">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">size_from_request</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">get_arg</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">default</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/lane.html#Pagination.size_from_request"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.lane.Pagination.size_from_request" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.lane.SearchFacets">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.lane.</span></span><span class="sig-name descname"><span class="pre">SearchFacets</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/lane.html#SearchFacets"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.lane.SearchFacets" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.lane.Facets" title="core.lane.Facets"><code class="xref py py-class docutils literal notranslate"><span class="pre">Facets</span></code></a></p>
<p>A Facets object designed to filter search results.</p>
<p>Most search result filtering is handled by WorkList, but this
allows someone to, e.g., search a multi-lingual WorkList in their
preferred language.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="core.lane.SearchFacets.DEFAULT_MIN_SCORE">
<span class="sig-name descname"><span class="pre">DEFAULT_MIN_SCORE</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">500</span></em><a class="headerlink" href="#core.lane.SearchFacets.DEFAULT_MIN_SCORE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.lane.SearchFacets.default_facet">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">default_facet</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ignore</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">group_name</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/lane.html#SearchFacets.default_facet"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.lane.SearchFacets.default_facet" title="Permalink to this definition">¶</a></dt>
<dd><p>The default facet settings for SearchFacets are hard-coded.</p>
<p>By default, we will search the full collection and all
availabilities, and order by match quality rather than any
bibliographic field.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.lane.SearchFacets.from_request">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">from_request</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">library</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">config</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">get_argument</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">get_header</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">worklist</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">default_entrypoint=&lt;class</span> <span class="pre">'core.entrypoint.EverythingEntryPoint'&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">**extra</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/lane.html#SearchFacets.from_request"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.lane.SearchFacets.from_request" title="Permalink to this definition">¶</a></dt>
<dd><p>Load a faceting object from an HTTP request.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.lane.SearchFacets.items">
<span class="sig-name descname"><span class="pre">items</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/lane.html#SearchFacets.items"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.lane.SearchFacets.items" title="Permalink to this definition">¶</a></dt>
<dd><p>Yields a 2-tuple for every active facet setting.</p>
<p>This means the EntryPoint (handled by the superclass)
as well as possible settings for ‘media’ and “min_score”.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.lane.SearchFacets.modify_search_filter">
<span class="sig-name descname"><span class="pre">modify_search_filter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filter</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/lane.html#SearchFacets.modify_search_filter"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.lane.SearchFacets.modify_search_filter" title="Permalink to this definition">¶</a></dt>
<dd><p>Modify the given external_search.Filter object
so that it reflects this SearchFacets object.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.lane.SearchFacets.navigate">
<span class="sig-name descname"><span class="pre">navigate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/lane.html#SearchFacets.navigate"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.lane.SearchFacets.navigate" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a slightly different Facets object from this one.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.lane.SearchFacets.selectable_entrypoints">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">selectable_entrypoints</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">worklist</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/lane.html#SearchFacets.selectable_entrypoints"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.lane.SearchFacets.selectable_entrypoints" title="Permalink to this definition">¶</a></dt>
<dd><p>If the WorkList has more than one facet, an ‘everything’ facet
is added for search purposes.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.lane.SpecificWorkList">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.lane.</span></span><span class="sig-name descname"><span class="pre">SpecificWorkList</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">work_ids</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/lane.html#SpecificWorkList"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.lane.SpecificWorkList" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.lane.DatabaseBackedWorkList" title="core.lane.DatabaseBackedWorkList"><code class="xref py py-class docutils literal notranslate"><span class="pre">DatabaseBackedWorkList</span></code></a></p>
<p>A WorkList that only finds specific works, identified by ID.</p>
<dl class="py method">
<dt class="sig sig-object py" id="core.lane.SpecificWorkList.modify_database_query_hook">
<span class="sig-name descname"><span class="pre">modify_database_query_hook</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">qu</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/lane.html#SpecificWorkList.modify_database_query_hook"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.lane.SpecificWorkList.modify_database_query_hook" title="Permalink to this definition">¶</a></dt>
<dd><p>A hook method allowing subclasses to modify a database query
that’s about to find all the works in this WorkList.</p>
<p>This can avoid the need for complex subclasses of
DatabaseBackedFacets.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.lane.TopLevelWorkList">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.lane.</span></span><span class="sig-name descname"><span class="pre">TopLevelWorkList</span></span><a class="reference internal" href="_modules/core/lane.html#TopLevelWorkList"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.lane.TopLevelWorkList" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.lane.HierarchyWorkList" title="core.lane.HierarchyWorkList"><code class="xref py py-class docutils literal notranslate"><span class="pre">HierarchyWorkList</span></code></a></p>
<p>A special WorkList representing the top-level view of
a library’s collection.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.lane.WorkList">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.lane.</span></span><span class="sig-name descname"><span class="pre">WorkList</span></span><a class="reference internal" href="_modules/core/lane.html#WorkList"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.lane.WorkList" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>An object that can obtain a list of Work objects for use
in generating an OPDS feed.</p>
<p>By default, these Work objects come from a search index.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="core.lane.WorkList.CACHED_FEED_TYPE">
<span class="sig-name descname"><span class="pre">CACHED_FEED_TYPE</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#core.lane.WorkList.CACHED_FEED_TYPE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.lane.WorkList.MAX_CACHE_AGE">
<span class="sig-name descname"><span class="pre">MAX_CACHE_AGE</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">600</span></em><a class="headerlink" href="#core.lane.WorkList.MAX_CACHE_AGE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.lane.WorkList.accessible_to">
<span class="sig-name descname"><span class="pre">accessible_to</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">patron</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/lane.html#WorkList.accessible_to"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.lane.WorkList.accessible_to" title="Permalink to this definition">¶</a></dt>
<dd><p>As a matter of library policy, is the given <cite>Patron</cite> allowed
to access this <cite>WorkList</cite>?</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.lane.WorkList.append_child">
<span class="sig-name descname"><span class="pre">append_child</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">child</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/lane.html#WorkList.append_child"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.lane.WorkList.append_child" title="Permalink to this definition">¶</a></dt>
<dd><p>Add one child to the list of children in this WorkList.</p>
<p>This hook method can be overridden to modify the child’s
configuration so as to make it fit with what the parent is
offering.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="core.lane.WorkList.audience_key">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">audience_key</span></span><a class="headerlink" href="#core.lane.WorkList.audience_key" title="Permalink to this definition">¶</a></dt>
<dd><p>Translates audiences list into url-safe string</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="core.lane.WorkList.customlist_ids">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">customlist_ids</span></span><a class="headerlink" href="#core.lane.WorkList.customlist_ids" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the custom list IDs.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="core.lane.WorkList.display_name_for_all">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">display_name_for_all</span></span><a class="headerlink" href="#core.lane.WorkList.display_name_for_all" title="Permalink to this definition">¶</a></dt>
<dd><p>The display name to use when referring to the set of all books in
this WorkList, as opposed to the WorkList itself.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.lane.WorkList.filter">
<span class="sig-name descname"><span class="pre">filter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">facets</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/lane.html#WorkList.filter"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.lane.WorkList.filter" title="Permalink to this definition">¶</a></dt>
<dd><p>Helper method to instantiate a Filter object for this WorkList.</p>
<p>Using this ensures that modify_search_filter_hook() is always
called.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="core.lane.WorkList.full_identifier">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">full_identifier</span></span><a class="headerlink" href="#core.lane.WorkList.full_identifier" title="Permalink to this definition">¶</a></dt>
<dd><p>A human-readable identifier for this WorkList that
captures its position within the heirarchy.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.lane.WorkList.get_customlists">
<span class="sig-name descname"><span class="pre">get_customlists</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/lane.html#WorkList.get_customlists"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.lane.WorkList.get_customlists" title="Permalink to this definition">¶</a></dt>
<dd><p>Get customlists associated with the Worklist.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.lane.WorkList.get_library">
<span class="sig-name descname"><span class="pre">get_library</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/lane.html#WorkList.get_library"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.lane.WorkList.get_library" title="Permalink to this definition">¶</a></dt>
<dd><p>Find the Library object associated with this WorkList.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.lane.WorkList.groups">
<span class="sig-name descname"><span class="pre">groups</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">include_sublanes</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pagination</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">facets</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">search_engine</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">debug</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/lane.html#WorkList.groups"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.lane.WorkList.groups" title="Permalink to this definition">¶</a></dt>
<dd><p>Extract a list of samples from each child of this WorkList.  This
can be used to create a grouped acquisition feed for the WorkList.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>pagination</strong> – A Pagination object which may affect how many
works each child of this WorkList may contribute.</p></li>
<li><p><strong>facets</strong> – A FeaturedFacets object that may restrict the works on view.</p></li>
<li><p><strong>search_engine</strong> – An ExternalSearchIndex to use when
asking for the featured works in a given WorkList.</p></li>
<li><p><strong>debug</strong> – A debug argument passed into <cite>search_engine</cite> when
running the search.</p></li>
</ul>
</dd>
<dt class="field-even">Yield<span class="colon">:</span></dt>
<dd class="field-even"><p>A sequence of (Work, WorkList) 2-tuples, with each
WorkList representing the child WorkList in which the Work is
found.</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="core.lane.WorkList.has_visible_children">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">has_visible_children</span></span><a class="headerlink" href="#core.lane.WorkList.has_visible_children" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="core.lane.WorkList.hierarchy">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">hierarchy</span></span><a class="headerlink" href="#core.lane.WorkList.hierarchy" title="Permalink to this definition">¶</a></dt>
<dd><p>The portion of the WorkList hierarchy that culminates in this
WorkList.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="core.lane.WorkList.inherit_parent_restrictions">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">inherit_parent_restrictions</span></span><a class="headerlink" href="#core.lane.WorkList.inherit_parent_restrictions" title="Permalink to this definition">¶</a></dt>
<dd><p>Since a WorkList has no parent, it cannot inherit any restrictions
from its parent. This method is defined for compatibility
with Lane.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.lane.WorkList.inherited_value">
<span class="sig-name descname"><span class="pre">inherited_value</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">k</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/lane.html#WorkList.inherited_value"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.lane.WorkList.inherited_value" title="Permalink to this definition">¶</a></dt>
<dd><p>Try to find this WorkList’s value for the given key (e.g. ‘fiction’
or ‘audiences’).</p>
<p>If it’s not set, try to inherit a value from the WorkList’s
parent. This only works if this WorkList has a parent and is
configured to inherit values from its parent.</p>
<p>Note that inheritance works differently for genre_ids and
customlist_ids – use inherited_values() for that.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.lane.WorkList.inherited_values">
<span class="sig-name descname"><span class="pre">inherited_values</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">k</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/lane.html#WorkList.inherited_values"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.lane.WorkList.inherited_values" title="Permalink to this definition">¶</a></dt>
<dd><p>Find the values for the given key (e.g. ‘genre_ids’ or
‘customlist_ids’) imposed by this WorkList and its parentage.</p>
<p>This is for values like .genre_ids and .customlist_ids, where
each member of the WorkList hierarchy can impose a restriction
on query results, and the effects of the restrictions are
additive.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.lane.WorkList.initialize">
<span class="sig-name descname"><span class="pre">initialize</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">library</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">display_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">genres</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">audiences</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">languages</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">media</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">customlists</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">list_datasource</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">list_seen_in_previous_days</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">children</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">priority</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">entrypoints</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fiction</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">license_datasource</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target_age</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/lane.html#WorkList.initialize"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.lane.WorkList.initialize" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize with basic data.</p>
<p>This is not a constructor, to avoid conflicts with <cite>Lane</cite>, an
ORM object that subclasses this object but does not use this
initialization code.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>library</strong> – Only Works available in this Library will be
included in lists.</p></li>
<li><p><strong>display_name</strong> – Name to display for this WorkList in the
user interface.</p></li>
<li><p><strong>genres</strong> – Only Works classified under one of these Genres
will be included in lists.</p></li>
<li><p><strong>audiences</strong> – Only Works classified under one of these audiences
will be included in lists.</p></li>
<li><p><strong>languages</strong> – Only Works in one of these languages will be
included in lists.</p></li>
<li><p><strong>media</strong> – Only Works in one of these media will be included
in lists.</p></li>
<li><p><strong>fiction</strong> – Only Works with this fiction status will be included
in lists.</p></li>
<li><p><strong>target_age</strong> – Only Works targeted at readers in this age range
will be included in lists.</p></li>
<li><p><strong>license_datasource</strong> – Only Works with a LicensePool from this
DataSource will be included in lists.</p></li>
<li><p><strong>customlists</strong> – Only Works included on one of these CustomLists
will be included in lists.</p></li>
<li><p><strong>list_datasource</strong> – Only Works included on a CustomList
associated with this DataSource will be included in
lists. This overrides any specific CustomLists provided in
<cite>customlists</cite>.</p></li>
<li><p><strong>list_seen_in_previous_days</strong> – Only Works that were added
to a matching CustomList within this number of days will be
included in lists.</p></li>
<li><p><strong>children</strong> – This WorkList has children, which are also
WorkLists.</p></li>
<li><p><strong>priority</strong> – A number indicating where this WorkList should
show up in relation to its siblings when it is the child of
some other WorkList.</p></li>
<li><p><strong>entrypoints</strong> – A list of EntryPoint classes representing
different ways of slicing up this WorkList.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.lane.WorkList.is_self_or_descendant">
<span class="sig-name descname"><span class="pre">is_self_or_descendant</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ancestor</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/lane.html#WorkList.is_self_or_descendant"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.lane.WorkList.is_self_or_descendant" title="Permalink to this definition">¶</a></dt>
<dd><p>Is this WorkList the given WorkList or one of its descendants?</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>ancestor</strong> – A WorkList.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A boolean.</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="core.lane.WorkList.language_key">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">language_key</span></span><a class="headerlink" href="#core.lane.WorkList.language_key" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a string identifying the languages used in this WorkList.
This will usually be in the form of ‘eng,spa’ (English and Spanish).</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.lane.WorkList.max_cache_age">
<span class="sig-name descname"><span class="pre">max_cache_age</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">type</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/lane.html#WorkList.max_cache_age"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.lane.WorkList.max_cache_age" title="Permalink to this definition">¶</a></dt>
<dd><p>Determine how long a feed for this WorkList should be cached
internally.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.lane.WorkList.modify_search_filter_hook">
<span class="sig-name descname"><span class="pre">modify_search_filter_hook</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filter</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/lane.html#WorkList.modify_search_filter_hook"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.lane.WorkList.modify_search_filter_hook" title="Permalink to this definition">¶</a></dt>
<dd><p>A hook method allowing subclasses to modify a Filter
object that’s about to find all the works in this WorkList.</p>
<p>This can avoid the need for complex subclasses of Facets.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.lane.WorkList.overview_facets">
<span class="sig-name descname"><span class="pre">overview_facets</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">facets</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/lane.html#WorkList.overview_facets"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.lane.WorkList.overview_facets" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert a generic FeaturedFacets to some other faceting object,
suitable for showing an overview of this WorkList in a grouped
feed.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="core.lane.WorkList.parent">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">parent</span></span><a class="headerlink" href="#core.lane.WorkList.parent" title="Permalink to this definition">¶</a></dt>
<dd><p>A WorkList has no parent. This method is defined for compatibility
with Lane.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="core.lane.WorkList.parentage">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">parentage</span></span><a class="headerlink" href="#core.lane.WorkList.parentage" title="Permalink to this definition">¶</a></dt>
<dd><p>WorkLists have no parentage. This method is defined for compatibility
with Lane.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.lane.WorkList.search">
<span class="sig-name descname"><span class="pre">search</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">query</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">search_client</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pagination</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">facets</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">debug</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/lane.html#WorkList.search"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.lane.WorkList.search" title="Permalink to this definition">¶</a></dt>
<dd><p>Find works in this WorkList that match a search query.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>_db</strong> – A database connection.</p></li>
<li><p><strong>query</strong> – Search for this string.</p></li>
<li><p><strong>search_client</strong> – An ExternalSearchIndex object.</p></li>
<li><p><strong>pagination</strong> – A Pagination object.</p></li>
<li><p><strong>facets</strong> – A faceting object, probably a SearchFacets.</p></li>
<li><p><strong>debug</strong> – Pass in True to see a summary of results returned
from the search index.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="core.lane.WorkList.search_target">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">search_target</span></span><a class="headerlink" href="#core.lane.WorkList.search_target" title="Permalink to this definition">¶</a></dt>
<dd><p>By default, a WorkList is searchable.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.lane.WorkList.top_level_for_library">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">top_level_for_library</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">library</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/lane.html#WorkList.top_level_for_library"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.lane.WorkList.top_level_for_library" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a WorkList representing this library’s collection
as a whole.</p>
<p>If no top-level visible lanes are configured, the WorkList
will be configured to show every book in the collection.</p>
<p>If a single top-level Lane is configured, it will returned as
the WorkList.</p>
<p>Otherwise, a WorkList containing the visible top-level lanes
is returned.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="core.lane.WorkList.unique_key">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">unique_key</span></span><a class="headerlink" href="#core.lane.WorkList.unique_key" title="Permalink to this definition">¶</a></dt>
<dd><p>A string key that uniquely describes this WorkList within
its Library.</p>
<p>This is used when caching feeds for this WorkList. For Lanes,
the lane_id is used instead.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="core.lane.WorkList.uses_customlists">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">uses_customlists</span></span><a class="headerlink" href="#core.lane.WorkList.uses_customlists" title="Permalink to this definition">¶</a></dt>
<dd><p>Does the works() implementation for this WorkList look for works on
CustomLists?</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.lane.WorkList.visible">
<span class="sig-name descname"><span class="pre">visible</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">True</span></em><a class="headerlink" href="#core.lane.WorkList.visible" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="core.lane.WorkList.visible_children">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">visible_children</span></span><a class="headerlink" href="#core.lane.WorkList.visible_children" title="Permalink to this definition">¶</a></dt>
<dd><p>A WorkList’s children can be used to create a grouped acquisition
feed for that WorkList.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.lane.WorkList.works">
<span class="sig-name descname"><span class="pre">works</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">facets</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pagination</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">search_engine</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">debug</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/lane.html#WorkList.works"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.lane.WorkList.works" title="Permalink to this definition">¶</a></dt>
<dd><p>Use a search engine to obtain Work or Work-like objects that belong
in this WorkList.</p>
<p>Compare DatabaseBackedWorkList.works_from_database, which uses
a database query to obtain the same Work objects.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>_db</strong> – A database connection.</p></li>
<li><p><strong>facets</strong> – A Facets object which may put additional
constraints on WorkList membership.</p></li>
<li><p><strong>pagination</strong> – A Pagination object indicating which part of
the WorkList the caller is looking at, and/or a limit on the
number of works to fetch.</p></li>
<li><p><strong>kwargs</strong> – Different implementations may fetch the
list of works from different sources and may need different
keyword arguments.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A list of Work or Work-like objects, or a database query
that generates such a list when executed.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.lane.WorkList.works_for_hits">
<span class="sig-name descname"><span class="pre">works_for_hits</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hits</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">facets</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/lane.html#WorkList.works_for_hits"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.lane.WorkList.works_for_hits" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert a list of search results into Work objects.</p>
<p>This works by calling works_for_resultsets() on a list
containing a single list of search results.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>_db</strong> – A database connection</p></li>
<li><p><strong>hits</strong> – A list of Hit objects from ElasticSearch.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A list of Work or (if the search results include
script fields), WorkSearchResult objects.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.lane.WorkList.works_for_resultsets">
<span class="sig-name descname"><span class="pre">works_for_resultsets</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">resultsets</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">facets</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/lane.html#WorkList.works_for_resultsets"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.lane.WorkList.works_for_resultsets" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert a list of lists of Hit objects into a list
of lists of Work objects.</p>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="core.lane.configuration_relevant_lifecycle_event">
<span class="sig-prename descclassname"><span class="pre">core.lane.</span></span><span class="sig-name descname"><span class="pre">configuration_relevant_lifecycle_event</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mapper</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">connection</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/lane.html#configuration_relevant_lifecycle_event"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.lane.configuration_relevant_lifecycle_event" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="core.lane.configuration_relevant_update">
<span class="sig-prename descclassname"><span class="pre">core.lane.</span></span><span class="sig-name descname"><span class="pre">configuration_relevant_update</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mapper</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">connection</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/lane.html#configuration_relevant_update"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.lane.configuration_relevant_update" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</section>
<section id="module-core.local_analytics_provider">
<span id="core-local-analytics-provider-module"></span><h2>core.local_analytics_provider module<a class="headerlink" href="#module-core.local_analytics_provider" title="Permalink to this heading">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="core.local_analytics_provider.LocalAnalyticsProvider">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.local_analytics_provider.</span></span><span class="sig-name descname"><span class="pre">LocalAnalyticsProvider</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">integration</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">library</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/local_analytics_provider.html#LocalAnalyticsProvider"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.local_analytics_provider.LocalAnalyticsProvider" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<dl class="py attribute">
<dt class="sig sig-object py" id="core.local_analytics_provider.LocalAnalyticsProvider.CARDINALITY">
<span class="sig-name descname"><span class="pre">CARDINALITY</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">1</span></em><a class="headerlink" href="#core.local_analytics_provider.LocalAnalyticsProvider.CARDINALITY" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.local_analytics_provider.LocalAnalyticsProvider.DESCRIPTION">
<span class="sig-name descname"><span class="pre">DESCRIPTION</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">l'Store</span> <span class="pre">analytics</span> <span class="pre">events</span> <span class="pre">in</span> <span class="pre">the</span> <span class="pre">'circulationevents'</span> <span class="pre">database</span> <span class="pre">table.'</span></em><a class="headerlink" href="#core.local_analytics_provider.LocalAnalyticsProvider.DESCRIPTION" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.local_analytics_provider.LocalAnalyticsProvider.LOCATION_SOURCE">
<span class="sig-name descname"><span class="pre">LOCATION_SOURCE</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'location_source'</span></em><a class="headerlink" href="#core.local_analytics_provider.LocalAnalyticsProvider.LOCATION_SOURCE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.local_analytics_provider.LocalAnalyticsProvider.LOCATION_SOURCE_DISABLED">
<span class="sig-name descname"><span class="pre">LOCATION_SOURCE_DISABLED</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">''</span></em><a class="headerlink" href="#core.local_analytics_provider.LocalAnalyticsProvider.LOCATION_SOURCE_DISABLED" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.local_analytics_provider.LocalAnalyticsProvider.LOCATION_SOURCE_NEIGHBORHOOD">
<span class="sig-name descname"><span class="pre">LOCATION_SOURCE_NEIGHBORHOOD</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'neighborhood'</span></em><a class="headerlink" href="#core.local_analytics_provider.LocalAnalyticsProvider.LOCATION_SOURCE_NEIGHBORHOOD" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.local_analytics_provider.LocalAnalyticsProvider.NAME">
<span class="sig-name descname"><span class="pre">NAME</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">l'Local</span> <span class="pre">Analytics'</span></em><a class="headerlink" href="#core.local_analytics_provider.LocalAnalyticsProvider.NAME" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.local_analytics_provider.LocalAnalyticsProvider.SETTINGS">
<span class="sig-name descname"><span class="pre">SETTINGS</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">[{'key':</span> <span class="pre">'location_source',</span> <span class="pre">'label':</span> <span class="pre">l'Geographic</span> <span class="pre">location</span> <span class="pre">of</span> <span class="pre">events',</span> <span class="pre">'description':</span> <span class="pre">l'Local</span> <span class="pre">analytics</span> <span class="pre">events</span> <span class="pre">may</span> <span class="pre">have</span> <span class="pre">a</span> <span class="pre">geographic</span> <span class="pre">location</span> <span class="pre">associated</span> <span class="pre">with</span> <span class="pre">them.</span> <span class="pre">How</span> <span class="pre">should</span> <span class="pre">the</span> <span class="pre">location</span> <span class="pre">be</span> <span class="pre">determined?&lt;p&gt;Note:</span> <span class="pre">to</span> <span class="pre">use</span> <span class="pre">the</span> <span class="pre">patron's</span> <span class="pre">neighborhood</span> <span class="pre">as</span> <span class="pre">the</span> <span class="pre">event</span> <span class="pre">location,</span> <span class="pre">you</span> <span class="pre">must</span> <span class="pre">also</span> <span class="pre">tell</span> <span class="pre">your</span> <span class="pre">patron</span> <span class="pre">authentication</span> <span class="pre">mechanism</span> <span class="pre">how</span> <span class="pre">to</span> <span class="pre">&lt;i&gt;gather&lt;/i&gt;</span> <span class="pre">a</span> <span class="pre">patron's</span> <span class="pre">neighborhood</span> <span class="pre">information.',</span> <span class="pre">'default':</span> <span class="pre">'',</span> <span class="pre">'type':</span> <span class="pre">'select',</span> <span class="pre">'options':</span> <span class="pre">[{'key':</span> <span class="pre">'',</span> <span class="pre">'label':</span> <span class="pre">l'Disable</span> <span class="pre">this</span> <span class="pre">feature.'},</span> <span class="pre">{'key':</span> <span class="pre">'neighborhood',</span> <span class="pre">'label':</span> <span class="pre">l'Use</span> <span class="pre">the</span> <span class="pre">patron's</span> <span class="pre">neighborhood</span> <span class="pre">as</span> <span class="pre">the</span> <span class="pre">event</span> <span class="pre">location.'}]}]</span></em><a class="headerlink" href="#core.local_analytics_provider.LocalAnalyticsProvider.SETTINGS" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.local_analytics_provider.LocalAnalyticsProvider.collect_event">
<span class="sig-name descname"><span class="pre">collect_event</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">library</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">license_pool</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">event_type</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">time</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">old_value</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">new_value</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/local_analytics_provider.html#LocalAnalyticsProvider.collect_event"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.local_analytics_provider.LocalAnalyticsProvider.collect_event" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.local_analytics_provider.LocalAnalyticsProvider.initialize">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">initialize</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/local_analytics_provider.html#LocalAnalyticsProvider.initialize"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.local_analytics_provider.LocalAnalyticsProvider.initialize" title="Permalink to this definition">¶</a></dt>
<dd><p>Find or create a local analytics service.</p>
</dd></dl>

</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.local_analytics_provider.Provider">
<span class="sig-prename descclassname"><span class="pre">core.local_analytics_provider.</span></span><span class="sig-name descname"><span class="pre">Provider</span></span><a class="headerlink" href="#core.local_analytics_provider.Provider" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <a class="reference internal" href="#core.local_analytics_provider.LocalAnalyticsProvider" title="core.local_analytics_provider.LocalAnalyticsProvider"><code class="xref py py-class docutils literal notranslate"><span class="pre">LocalAnalyticsProvider</span></code></a></p>
</dd></dl>

</section>
<section id="module-core.log">
<span id="core-log-module"></span><h2>core.log module<a class="headerlink" href="#module-core.log" title="Permalink to this heading">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="core.log.CloudwatchLogs">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.log.</span></span><span class="sig-name descname"><span class="pre">CloudwatchLogs</span></span><a class="reference internal" href="_modules/core/log.html#CloudwatchLogs"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.log.CloudwatchLogs" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.log.Logger" title="core.log.Logger"><code class="xref py py-class docutils literal notranslate"><span class="pre">Logger</span></code></a></p>
<dl class="py attribute">
<dt class="sig sig-object py" id="core.log.CloudwatchLogs.CREATE_GROUP">
<span class="sig-name descname"><span class="pre">CREATE_GROUP</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'create_group'</span></em><a class="headerlink" href="#core.log.CloudwatchLogs.CREATE_GROUP" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.log.CloudwatchLogs.DEFAULT_CREATE_GROUP">
<span class="sig-name descname"><span class="pre">DEFAULT_CREATE_GROUP</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'TRUE'</span></em><a class="headerlink" href="#core.log.CloudwatchLogs.DEFAULT_CREATE_GROUP" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.log.CloudwatchLogs.DEFAULT_INTERVAL">
<span class="sig-name descname"><span class="pre">DEFAULT_INTERVAL</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">60</span></em><a class="headerlink" href="#core.log.CloudwatchLogs.DEFAULT_INTERVAL" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.log.CloudwatchLogs.DEFAULT_REGION">
<span class="sig-name descname"><span class="pre">DEFAULT_REGION</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'us-west-2'</span></em><a class="headerlink" href="#core.log.CloudwatchLogs.DEFAULT_REGION" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.log.CloudwatchLogs.GROUP">
<span class="sig-name descname"><span class="pre">GROUP</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'group'</span></em><a class="headerlink" href="#core.log.CloudwatchLogs.GROUP" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.log.CloudwatchLogs.INTERVAL">
<span class="sig-name descname"><span class="pre">INTERVAL</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'interval'</span></em><a class="headerlink" href="#core.log.CloudwatchLogs.INTERVAL" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.log.CloudwatchLogs.NAME">
<span class="sig-name descname"><span class="pre">NAME</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'AWS</span> <span class="pre">Cloudwatch</span> <span class="pre">Logs'</span></em><a class="headerlink" href="#core.log.CloudwatchLogs.NAME" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.log.CloudwatchLogs.REGION">
<span class="sig-name descname"><span class="pre">REGION</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'region'</span></em><a class="headerlink" href="#core.log.CloudwatchLogs.REGION" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.log.CloudwatchLogs.REGIONS">
<span class="sig-name descname"><span class="pre">REGIONS</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">[{'key':</span> <span class="pre">'us-east-2',</span> <span class="pre">'label':</span> <span class="pre">l'US</span> <span class="pre">East</span> <span class="pre">(Ohio)'},</span> <span class="pre">{'key':</span> <span class="pre">'us-east-1',</span> <span class="pre">'label':</span> <span class="pre">l'US</span> <span class="pre">East</span> <span class="pre">(N.</span> <span class="pre">Virginia)'},</span> <span class="pre">{'key':</span> <span class="pre">'us-west-1',</span> <span class="pre">'label':</span> <span class="pre">l'US</span> <span class="pre">West</span> <span class="pre">(N.</span> <span class="pre">California)'},</span> <span class="pre">{'key':</span> <span class="pre">'us-west-2',</span> <span class="pre">'label':</span> <span class="pre">l'US</span> <span class="pre">West</span> <span class="pre">(Oregon)'},</span> <span class="pre">{'key':</span> <span class="pre">'ap-south-1',</span> <span class="pre">'label':</span> <span class="pre">l'Asia</span> <span class="pre">Pacific</span> <span class="pre">(Mumbai)'},</span> <span class="pre">{'key':</span> <span class="pre">'ap-northeast-3',</span> <span class="pre">'label':</span> <span class="pre">l'Asia</span> <span class="pre">Pacific</span> <span class="pre">(Osaka-Local)'},</span> <span class="pre">{'key':</span> <span class="pre">'ap-northeast-2',</span> <span class="pre">'label':</span> <span class="pre">l'Asia</span> <span class="pre">Pacific</span> <span class="pre">(Seoul)'},</span> <span class="pre">{'key':</span> <span class="pre">'ap-southeast-1',</span> <span class="pre">'label':</span> <span class="pre">l'Asia</span> <span class="pre">Pacific</span> <span class="pre">(Singapore)'},</span> <span class="pre">{'key':</span> <span class="pre">'ap-southeast-2',</span> <span class="pre">'label':</span> <span class="pre">l'Asia</span> <span class="pre">Pacific</span> <span class="pre">(Sydney)'},</span> <span class="pre">{'key':</span> <span class="pre">'ap-northeast-1',</span> <span class="pre">'label':</span> <span class="pre">l'Asia</span> <span class="pre">Pacific</span> <span class="pre">(Tokyo)'},</span> <span class="pre">{'key':</span> <span class="pre">'ca-central-1',</span> <span class="pre">'label':</span> <span class="pre">l'Canada</span> <span class="pre">(Central)'},</span> <span class="pre">{'key':</span> <span class="pre">'cn-north-1',</span> <span class="pre">'label':</span> <span class="pre">l'China</span> <span class="pre">(Beijing)'},</span> <span class="pre">{'key':</span> <span class="pre">'cn-northwest-1',</span> <span class="pre">'label':</span> <span class="pre">l'China</span> <span class="pre">(Ningxia)'},</span> <span class="pre">{'key':</span> <span class="pre">'eu-central-1',</span> <span class="pre">'label':</span> <span class="pre">l'EU</span> <span class="pre">(Frankfurt)'},</span> <span class="pre">{'key':</span> <span class="pre">'eu-west-1',</span> <span class="pre">'label':</span> <span class="pre">l'EU</span> <span class="pre">(Ireland)'},</span> <span class="pre">{'key':</span> <span class="pre">'eu-west-2',</span> <span class="pre">'label':</span> <span class="pre">l'EU</span> <span class="pre">(London)'},</span> <span class="pre">{'key':</span> <span class="pre">'eu-west-3',</span> <span class="pre">'label':</span> <span class="pre">l'EU</span> <span class="pre">(Paris)'},</span> <span class="pre">{'key':</span> <span class="pre">'sa-east-1',</span> <span class="pre">'label':</span> <span class="pre">l'South</span> <span class="pre">America</span> <span class="pre">(Sao</span> <span class="pre">Paulo)'}]</span></em><a class="headerlink" href="#core.log.CloudwatchLogs.REGIONS" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.log.CloudwatchLogs.SETTINGS">
<span class="sig-name descname"><span class="pre">SETTINGS</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">[{'key':</span> <span class="pre">'group',</span> <span class="pre">'label':</span> <span class="pre">l'Log</span> <span class="pre">Group',</span> <span class="pre">'default':</span> <span class="pre">'simplified',</span> <span class="pre">'required':</span> <span class="pre">True},</span> <span class="pre">{'key':</span> <span class="pre">'stream',</span> <span class="pre">'label':</span> <span class="pre">l'Log</span> <span class="pre">Stream',</span> <span class="pre">'default':</span> <span class="pre">'simplified',</span> <span class="pre">'required':</span> <span class="pre">True},</span> <span class="pre">{'key':</span> <span class="pre">'interval',</span> <span class="pre">'label':</span> <span class="pre">l'Update</span> <span class="pre">Interval</span> <span class="pre">Seconds',</span> <span class="pre">'default':</span> <span class="pre">60,</span> <span class="pre">'required':</span> <span class="pre">True},</span> <span class="pre">{'key':</span> <span class="pre">'region',</span> <span class="pre">'label':</span> <span class="pre">l'AWS</span> <span class="pre">Region',</span> <span class="pre">'type':</span> <span class="pre">'select',</span> <span class="pre">'options':</span> <span class="pre">[{'key':</span> <span class="pre">'us-east-2',</span> <span class="pre">'label':</span> <span class="pre">l'US</span> <span class="pre">East</span> <span class="pre">(Ohio)'},</span> <span class="pre">{'key':</span> <span class="pre">'us-east-1',</span> <span class="pre">'label':</span> <span class="pre">l'US</span> <span class="pre">East</span> <span class="pre">(N.</span> <span class="pre">Virginia)'},</span> <span class="pre">{'key':</span> <span class="pre">'us-west-1',</span> <span class="pre">'label':</span> <span class="pre">l'US</span> <span class="pre">West</span> <span class="pre">(N.</span> <span class="pre">California)'},</span> <span class="pre">{'key':</span> <span class="pre">'us-west-2',</span> <span class="pre">'label':</span> <span class="pre">l'US</span> <span class="pre">West</span> <span class="pre">(Oregon)'},</span> <span class="pre">{'key':</span> <span class="pre">'ap-south-1',</span> <span class="pre">'label':</span> <span class="pre">l'Asia</span> <span class="pre">Pacific</span> <span class="pre">(Mumbai)'},</span> <span class="pre">{'key':</span> <span class="pre">'ap-northeast-3',</span> <span class="pre">'label':</span> <span class="pre">l'Asia</span> <span class="pre">Pacific</span> <span class="pre">(Osaka-Local)'},</span> <span class="pre">{'key':</span> <span class="pre">'ap-northeast-2',</span> <span class="pre">'label':</span> <span class="pre">l'Asia</span> <span class="pre">Pacific</span> <span class="pre">(Seoul)'},</span> <span class="pre">{'key':</span> <span class="pre">'ap-southeast-1',</span> <span class="pre">'label':</span> <span class="pre">l'Asia</span> <span class="pre">Pacific</span> <span class="pre">(Singapore)'},</span> <span class="pre">{'key':</span> <span class="pre">'ap-southeast-2',</span> <span class="pre">'label':</span> <span class="pre">l'Asia</span> <span class="pre">Pacific</span> <span class="pre">(Sydney)'},</span> <span class="pre">{'key':</span> <span class="pre">'ap-northeast-1',</span> <span class="pre">'label':</span> <span class="pre">l'Asia</span> <span class="pre">Pacific</span> <span class="pre">(Tokyo)'},</span> <span class="pre">{'key':</span> <span class="pre">'ca-central-1',</span> <span class="pre">'label':</span> <span class="pre">l'Canada</span> <span class="pre">(Central)'},</span> <span class="pre">{'key':</span> <span class="pre">'cn-north-1',</span> <span class="pre">'label':</span> <span class="pre">l'China</span> <span class="pre">(Beijing)'},</span> <span class="pre">{'key':</span> <span class="pre">'cn-northwest-1',</span> <span class="pre">'label':</span> <span class="pre">l'China</span> <span class="pre">(Ningxia)'},</span> <span class="pre">{'key':</span> <span class="pre">'eu-central-1',</span> <span class="pre">'label':</span> <span class="pre">l'EU</span> <span class="pre">(Frankfurt)'},</span> <span class="pre">{'key':</span> <span class="pre">'eu-west-1',</span> <span class="pre">'label':</span> <span class="pre">l'EU</span> <span class="pre">(Ireland)'},</span> <span class="pre">{'key':</span> <span class="pre">'eu-west-2',</span> <span class="pre">'label':</span> <span class="pre">l'EU</span> <span class="pre">(London)'},</span> <span class="pre">{'key':</span> <span class="pre">'eu-west-3',</span> <span class="pre">'label':</span> <span class="pre">l'EU</span> <span class="pre">(Paris)'},</span> <span class="pre">{'key':</span> <span class="pre">'sa-east-1',</span> <span class="pre">'label':</span> <span class="pre">l'South</span> <span class="pre">America</span> <span class="pre">(Sao</span> <span class="pre">Paulo)'}],</span> <span class="pre">'default':</span> <span class="pre">'us-west-2',</span> <span class="pre">'required':</span> <span class="pre">True},</span> <span class="pre">{'key':</span> <span class="pre">'create_group',</span> <span class="pre">'label':</span> <span class="pre">l'Automatically</span> <span class="pre">Create</span> <span class="pre">Log</span> <span class="pre">Group',</span> <span class="pre">'type':</span> <span class="pre">'select',</span> <span class="pre">'options':</span> <span class="pre">[{'key':</span> <span class="pre">'TRUE',</span> <span class="pre">'label':</span> <span class="pre">l'Yes'},</span> <span class="pre">{'key':</span> <span class="pre">'FALSE',</span> <span class="pre">'label':</span> <span class="pre">l'No'}],</span> <span class="pre">'default':</span> <span class="pre">True,</span> <span class="pre">'required':</span> <span class="pre">True}]</span></em><a class="headerlink" href="#core.log.CloudwatchLogs.SETTINGS" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.log.CloudwatchLogs.SITEWIDE">
<span class="sig-name descname"><span class="pre">SITEWIDE</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">True</span></em><a class="headerlink" href="#core.log.CloudwatchLogs.SITEWIDE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.log.CloudwatchLogs.STREAM">
<span class="sig-name descname"><span class="pre">STREAM</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'stream'</span></em><a class="headerlink" href="#core.log.CloudwatchLogs.STREAM" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.log.CloudwatchLogs.from_configuration">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">from_configuration</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">testing</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/log.html#CloudwatchLogs.from_configuration"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.log.CloudwatchLogs.from_configuration" title="Permalink to this definition">¶</a></dt>
<dd><p>Should be implemented in each logging class.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.log.CloudwatchLogs.get_handler">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">get_handler</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">settings</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">testing</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/log.html#CloudwatchLogs.get_handler"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.log.CloudwatchLogs.get_handler" title="Permalink to this definition">¶</a></dt>
<dd><p>Turn ExternalIntegration into a log handler.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.log.JSONFormatter">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.log.</span></span><span class="sig-name descname"><span class="pre">JSONFormatter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">app_name</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/log.html#JSONFormatter"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.log.JSONFormatter" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">Formatter</span></code></p>
<dl class="py method">
<dt class="sig sig-object py" id="core.log.JSONFormatter.format">
<span class="sig-name descname"><span class="pre">format</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">record</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/log.html#JSONFormatter.format"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.log.JSONFormatter.format" title="Permalink to this definition">¶</a></dt>
<dd><p>Format the specified record as text.</p>
<p>The record’s attribute dictionary is used as the operand to a
string formatting operation which yields the returned string.
Before formatting the dictionary, a couple of preparatory steps
are carried out. The message attribute of the record is computed
using LogRecord.getMessage(). If the formatting string uses the
time (as determined by a call to usesTime(), formatTime() is
called to format the event time. If there is exception information,
it is formatted using formatException() and appended to the message.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.log.JSONFormatter.fqdn">
<span class="sig-name descname"><span class="pre">fqdn</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'fv-az344-96.gmg1d1ggmrrupiaxmptgzqcbbf.gx.internal.cloudapp.net'</span></em><a class="headerlink" href="#core.log.JSONFormatter.fqdn" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.log.JSONFormatter.hostname">
<span class="sig-name descname"><span class="pre">hostname</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'fv-az344-96.gmg1d1ggmrrupiaxmptgzqcbbf.gx.internal.cloudapp.net'</span></em><a class="headerlink" href="#core.log.JSONFormatter.hostname" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.log.LogConfiguration">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.log.</span></span><span class="sig-name descname"><span class="pre">LogConfiguration</span></span><a class="reference internal" href="_modules/core/log.html#LogConfiguration"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.log.LogConfiguration" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Configures the active Python logging handlers based on logging
configuration from the database.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="core.log.LogConfiguration.DATABASE_LOG_LEVEL">
<span class="sig-name descname"><span class="pre">DATABASE_LOG_LEVEL</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'database_log_level'</span></em><a class="headerlink" href="#core.log.LogConfiguration.DATABASE_LOG_LEVEL" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.log.LogConfiguration.DEBUG">
<span class="sig-name descname"><span class="pre">DEBUG</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'DEBUG'</span></em><a class="headerlink" href="#core.log.LogConfiguration.DEBUG" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.log.LogConfiguration.DEFAULT_APP_NAME">
<span class="sig-name descname"><span class="pre">DEFAULT_APP_NAME</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'simplified'</span></em><a class="headerlink" href="#core.log.LogConfiguration.DEFAULT_APP_NAME" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.log.LogConfiguration.DEFAULT_DATABASE_LOG_LEVEL">
<span class="sig-name descname"><span class="pre">DEFAULT_DATABASE_LOG_LEVEL</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'WARN'</span></em><a class="headerlink" href="#core.log.LogConfiguration.DEFAULT_DATABASE_LOG_LEVEL" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.log.LogConfiguration.DEFAULT_LOG_LEVEL">
<span class="sig-name descname"><span class="pre">DEFAULT_LOG_LEVEL</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'INFO'</span></em><a class="headerlink" href="#core.log.LogConfiguration.DEFAULT_LOG_LEVEL" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.log.LogConfiguration.ERROR">
<span class="sig-name descname"><span class="pre">ERROR</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'ERROR'</span></em><a class="headerlink" href="#core.log.LogConfiguration.ERROR" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.log.LogConfiguration.INFO">
<span class="sig-name descname"><span class="pre">INFO</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'INFO'</span></em><a class="headerlink" href="#core.log.LogConfiguration.INFO" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.log.LogConfiguration.LOG_APP_NAME">
<span class="sig-name descname"><span class="pre">LOG_APP_NAME</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'log_app'</span></em><a class="headerlink" href="#core.log.LogConfiguration.LOG_APP_NAME" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.log.LogConfiguration.LOG_LEVEL">
<span class="sig-name descname"><span class="pre">LOG_LEVEL</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'log_level'</span></em><a class="headerlink" href="#core.log.LogConfiguration.LOG_LEVEL" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.log.LogConfiguration.LOG_LEVEL_UI">
<span class="sig-name descname"><span class="pre">LOG_LEVEL_UI</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">[{'key':</span> <span class="pre">'DEBUG',</span> <span class="pre">'value':</span> <span class="pre">l'Debug'},</span> <span class="pre">{'key':</span> <span class="pre">'INFO',</span> <span class="pre">'value':</span> <span class="pre">l'Info'},</span> <span class="pre">{'key':</span> <span class="pre">'WARN',</span> <span class="pre">'value':</span> <span class="pre">l'Warn'},</span> <span class="pre">{'key':</span> <span class="pre">'ERROR',</span> <span class="pre">'value':</span> <span class="pre">l'Error'}]</span></em><a class="headerlink" href="#core.log.LogConfiguration.LOG_LEVEL_UI" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.log.LogConfiguration.SITEWIDE_SETTINGS">
<span class="sig-name descname"><span class="pre">SITEWIDE_SETTINGS</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">[{'key':</span> <span class="pre">'log_level',</span> <span class="pre">'label':</span> <span class="pre">l'Log</span> <span class="pre">Level',</span> <span class="pre">'type':</span> <span class="pre">'select',</span> <span class="pre">'options':</span> <span class="pre">[{'key':</span> <span class="pre">'DEBUG',</span> <span class="pre">'value':</span> <span class="pre">l'Debug'},</span> <span class="pre">{'key':</span> <span class="pre">'INFO',</span> <span class="pre">'value':</span> <span class="pre">l'Info'},</span> <span class="pre">{'key':</span> <span class="pre">'WARN',</span> <span class="pre">'value':</span> <span class="pre">l'Warn'},</span> <span class="pre">{'key':</span> <span class="pre">'ERROR',</span> <span class="pre">'value':</span> <span class="pre">l'Error'}],</span> <span class="pre">'default':</span> <span class="pre">'INFO'},</span> <span class="pre">{'key':</span> <span class="pre">'log_app',</span> <span class="pre">'label':</span> <span class="pre">l'Log</span> <span class="pre">Application</span> <span class="pre">name',</span> <span class="pre">'description':</span> <span class="pre">l'Log</span> <span class="pre">messages</span> <span class="pre">originating</span> <span class="pre">from</span> <span class="pre">this</span> <span class="pre">application</span> <span class="pre">will</span> <span class="pre">be</span> <span class="pre">tagged</span> <span class="pre">with</span> <span class="pre">this</span> <span class="pre">name.</span> <span class="pre">If</span> <span class="pre">you</span> <span class="pre">run</span> <span class="pre">multiple</span> <span class="pre">instances,</span> <span class="pre">giving</span> <span class="pre">each</span> <span class="pre">one</span> <span class="pre">a</span> <span class="pre">different</span> <span class="pre">application</span> <span class="pre">name</span> <span class="pre">will</span> <span class="pre">help</span> <span class="pre">you</span> <span class="pre">determine</span> <span class="pre">which</span> <span class="pre">instance</span> <span class="pre">is</span> <span class="pre">having</span> <span class="pre">problems.',</span> <span class="pre">'default':</span> <span class="pre">'simplified'},</span> <span class="pre">{'key':</span> <span class="pre">'database_log_level',</span> <span class="pre">'label':</span> <span class="pre">l'Database</span> <span class="pre">Log</span> <span class="pre">Level',</span> <span class="pre">'type':</span> <span class="pre">'select',</span> <span class="pre">'options':</span> <span class="pre">[{'key':</span> <span class="pre">'DEBUG',</span> <span class="pre">'value':</span> <span class="pre">l'Debug'},</span> <span class="pre">{'key':</span> <span class="pre">'INFO',</span> <span class="pre">'value':</span> <span class="pre">l'Info'},</span> <span class="pre">{'key':</span> <span class="pre">'WARN',</span> <span class="pre">'value':</span> <span class="pre">l'Warn'},</span> <span class="pre">{'key':</span> <span class="pre">'ERROR',</span> <span class="pre">'value':</span> <span class="pre">l'Error'}],</span> <span class="pre">'description':</span> <span class="pre">l'Database</span> <span class="pre">logs</span> <span class="pre">are</span> <span class="pre">extremely</span> <span class="pre">verbose,</span> <span class="pre">so</span> <span class="pre">unless</span> <span class="pre">you're</span> <span class="pre">diagnosing</span> <span class="pre">a</span> <span class="pre">database-related</span> <span class="pre">problem,</span> <span class="pre">it's</span> <span class="pre">a</span> <span class="pre">good</span> <span class="pre">idea</span> <span class="pre">to</span> <span class="pre">set</span> <span class="pre">a</span> <span class="pre">higher</span> <span class="pre">log</span> <span class="pre">level</span> <span class="pre">for</span> <span class="pre">database</span> <span class="pre">messages.',</span> <span class="pre">'default':</span> <span class="pre">'WARN'}]</span></em><a class="headerlink" href="#core.log.LogConfiguration.SITEWIDE_SETTINGS" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.log.LogConfiguration.WARN">
<span class="sig-name descname"><span class="pre">WARN</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'WARN'</span></em><a class="headerlink" href="#core.log.LogConfiguration.WARN" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.log.LogConfiguration.from_configuration">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">from_configuration</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">testing</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/log.html#LogConfiguration.from_configuration"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.log.LogConfiguration.from_configuration" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the logging policy as configured in the database.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>_db</strong> – A database connection. If None, the default
logging policy will be used.</p></li>
<li><p><strong>testing</strong> – A boolean indicating whether a unit test is
happening right now. If True, the database configuration will
be ignored in favor of a known test-friendly policy. (It’s
okay to pass in False during a test <em>of this method</em>.)</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A 3-tuple (internal_log_level, database_log_level,
handlers). <cite>internal_log_level</cite> is the log level to be used
for most log messages. <cite>database_log_level</cite> is the log level
to be applied to the loggers for the database connector and
other verbose third-party libraries. <cite>handlers</cite> is a list of
Handler objects that will be associated with the top-level
logger.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.log.LogConfiguration.initialize">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">initialize</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">testing</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/log.html#LogConfiguration.initialize"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.log.LogConfiguration.initialize" title="Permalink to this definition">¶</a></dt>
<dd><p>Make the logging handlers reflect the current logging rules
as configured in the database.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>_db</strong> – A database connection. If this is None, the default logging
configuration will be used.</p></li>
<li><p><strong>testing</strong> – True if unit tests are currently running; otherwise False.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.log.Logger">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.log.</span></span><span class="sig-name descname"><span class="pre">Logger</span></span><a class="reference internal" href="_modules/core/log.html#Logger"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.log.Logger" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Abstract base class for logging</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="core.log.Logger.DEFAULT_APP_NAME">
<span class="sig-name descname"><span class="pre">DEFAULT_APP_NAME</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'simplified'</span></em><a class="headerlink" href="#core.log.Logger.DEFAULT_APP_NAME" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.log.Logger.DEFAULT_MESSAGE_TEMPLATE">
<span class="sig-name descname"><span class="pre">DEFAULT_MESSAGE_TEMPLATE</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'%(asctime)s:%(name)s:%(levelname)s:%(filename)s:%(message)s'</span></em><a class="headerlink" href="#core.log.Logger.DEFAULT_MESSAGE_TEMPLATE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.log.Logger.JSON_LOG_FORMAT">
<span class="sig-name descname"><span class="pre">JSON_LOG_FORMAT</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'json'</span></em><a class="headerlink" href="#core.log.Logger.JSON_LOG_FORMAT" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.log.Logger.TEXT_LOG_FORMAT">
<span class="sig-name descname"><span class="pre">TEXT_LOG_FORMAT</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'text'</span></em><a class="headerlink" href="#core.log.Logger.TEXT_LOG_FORMAT" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.log.Logger.from_configuration">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">from_configuration</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">testing</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/log.html#Logger.from_configuration"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.log.Logger.from_configuration" title="Permalink to this definition">¶</a></dt>
<dd><p>Should be implemented in each logging class.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.log.Logger.set_formatter">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">set_formatter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">handler</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">app_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">log_format</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">message_template</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/log.html#Logger.set_formatter"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.log.Logger.set_formatter" title="Permalink to this definition">¶</a></dt>
<dd><p>Tell the given <cite>handler</cite> to format its log messages in a
certain way.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.log.Loggly">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.log.</span></span><span class="sig-name descname"><span class="pre">Loggly</span></span><a class="reference internal" href="_modules/core/log.html#Loggly"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.log.Loggly" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.log.Logger" title="core.log.Logger"><code class="xref py py-class docutils literal notranslate"><span class="pre">Logger</span></code></a></p>
<dl class="py attribute">
<dt class="sig sig-object py" id="core.log.Loggly.DEFAULT_LOGGLY_URL">
<span class="sig-name descname"><span class="pre">DEFAULT_LOGGLY_URL</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'https://logs-01.loggly.com/inputs/%(token)s/tag/python/'</span></em><a class="headerlink" href="#core.log.Loggly.DEFAULT_LOGGLY_URL" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.log.Loggly.NAME">
<span class="sig-name descname"><span class="pre">NAME</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'Loggly'</span></em><a class="headerlink" href="#core.log.Loggly.NAME" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.log.Loggly.PASSWORD">
<span class="sig-name descname"><span class="pre">PASSWORD</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'password'</span></em><a class="headerlink" href="#core.log.Loggly.PASSWORD" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.log.Loggly.SETTINGS">
<span class="sig-name descname"><span class="pre">SETTINGS</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">[{'key':</span> <span class="pre">'user',</span> <span class="pre">'label':</span> <span class="pre">l'Username',</span> <span class="pre">'required':</span> <span class="pre">True},</span> <span class="pre">{'key':</span> <span class="pre">'password',</span> <span class="pre">'label':</span> <span class="pre">l'Password',</span> <span class="pre">'required':</span> <span class="pre">True},</span> <span class="pre">{'key':</span> <span class="pre">'url',</span> <span class="pre">'label':</span> <span class="pre">l'URL',</span> <span class="pre">'required':</span> <span class="pre">True,</span> <span class="pre">'format':</span> <span class="pre">'url'}]</span></em><a class="headerlink" href="#core.log.Loggly.SETTINGS" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.log.Loggly.SITEWIDE">
<span class="sig-name descname"><span class="pre">SITEWIDE</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">True</span></em><a class="headerlink" href="#core.log.Loggly.SITEWIDE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.log.Loggly.URL">
<span class="sig-name descname"><span class="pre">URL</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'url'</span></em><a class="headerlink" href="#core.log.Loggly.URL" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.log.Loggly.USER">
<span class="sig-name descname"><span class="pre">USER</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'user'</span></em><a class="headerlink" href="#core.log.Loggly.USER" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.log.Loggly.from_configuration">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">from_configuration</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">testing</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/log.html#Loggly.from_configuration"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.log.Loggly.from_configuration" title="Permalink to this definition">¶</a></dt>
<dd><p>Should be implemented in each logging class.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.log.Loggly.loggly_handler">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">loggly_handler</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">externalintegration</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/log.html#Loggly.loggly_handler"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.log.Loggly.loggly_handler" title="Permalink to this definition">¶</a></dt>
<dd><p>Turn a Loggly ExternalIntegration into a log handler.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.log.Loggly.set_formatter">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">set_formatter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">handler</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">app_name</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/log.html#Loggly.set_formatter"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.log.Loggly.set_formatter" title="Permalink to this definition">¶</a></dt>
<dd><p>Tell the given <cite>handler</cite> to format its log messages in a
certain way.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.log.StringFormatter">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.log.</span></span><span class="sig-name descname"><span class="pre">StringFormatter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fmt</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">datefmt</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">style</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'%'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">validate</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">defaults</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/log.html#StringFormatter"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.log.StringFormatter" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">Formatter</span></code></p>
<p>Encode all output as a string.</p>
<dl class="py method">
<dt class="sig sig-object py" id="core.log.StringFormatter.format">
<span class="sig-name descname"><span class="pre">format</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">record</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/log.html#StringFormatter.format"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.log.StringFormatter.format" title="Permalink to this definition">¶</a></dt>
<dd><p>Format the specified record as text.</p>
<p>The record’s attribute dictionary is used as the operand to a
string formatting operation which yields the returned string.
Before formatting the dictionary, a couple of preparatory steps
are carried out. The message attribute of the record is computed
using LogRecord.getMessage(). If the formatting string uses the
time (as determined by a call to usesTime(), formatTime() is
called to format the event time. If there is exception information,
it is formatted using formatException() and appended to the message.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.log.SysLogger">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.log.</span></span><span class="sig-name descname"><span class="pre">SysLogger</span></span><a class="reference internal" href="_modules/core/log.html#SysLogger"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.log.SysLogger" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.log.Logger" title="core.log.Logger"><code class="xref py py-class docutils literal notranslate"><span class="pre">Logger</span></code></a></p>
<dl class="py attribute">
<dt class="sig sig-object py" id="core.log.SysLogger.LOG_FORMAT">
<span class="sig-name descname"><span class="pre">LOG_FORMAT</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'log_format'</span></em><a class="headerlink" href="#core.log.SysLogger.LOG_FORMAT" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.log.SysLogger.LOG_MESSAGE_TEMPLATE">
<span class="sig-name descname"><span class="pre">LOG_MESSAGE_TEMPLATE</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'message_template'</span></em><a class="headerlink" href="#core.log.SysLogger.LOG_MESSAGE_TEMPLATE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.log.SysLogger.NAME">
<span class="sig-name descname"><span class="pre">NAME</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'sysLog'</span></em><a class="headerlink" href="#core.log.SysLogger.NAME" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.log.SysLogger.SETTINGS">
<span class="sig-name descname"><span class="pre">SETTINGS</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">[{'key':</span> <span class="pre">'log_format',</span> <span class="pre">'label':</span> <span class="pre">l'Log</span> <span class="pre">Format',</span> <span class="pre">'type':</span> <span class="pre">'select',</span> <span class="pre">'options':</span> <span class="pre">[{'key':</span> <span class="pre">'json',</span> <span class="pre">'label':</span> <span class="pre">l'json'},</span> <span class="pre">{'key':</span> <span class="pre">'text',</span> <span class="pre">'label':</span> <span class="pre">l'text'}]},</span> <span class="pre">{'key':</span> <span class="pre">'message_template',</span> <span class="pre">'label':</span> <span class="pre">l'template',</span> <span class="pre">'default':</span> <span class="pre">'%(asctime)s:%(name)s:%(levelname)s:%(filename)s:%(message)s',</span> <span class="pre">'required':</span> <span class="pre">True}]</span></em><a class="headerlink" href="#core.log.SysLogger.SETTINGS" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.log.SysLogger.SITEWIDE">
<span class="sig-name descname"><span class="pre">SITEWIDE</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">True</span></em><a class="headerlink" href="#core.log.SysLogger.SITEWIDE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.log.SysLogger.from_configuration">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">from_configuration</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">testing</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/log.html#SysLogger.from_configuration"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.log.SysLogger.from_configuration" title="Permalink to this definition">¶</a></dt>
<dd><p>Should be implemented in each logging class.</p>
</dd></dl>

</dd></dl>

</section>
<section id="module-core.marc">
<span id="core-marc-module"></span><h2>core.marc module<a class="headerlink" href="#module-core.marc" title="Permalink to this heading">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="core.marc.Annotator">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.marc.</span></span><span class="sig-name descname"><span class="pre">Annotator</span></span><a class="reference internal" href="_modules/core/marc.html#Annotator"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.marc.Annotator" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>The Annotator knows how to add information about a Work to
a MARC record.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="core.marc.Annotator.AUDIENCE_TERMS">
<span class="sig-name descname"><span class="pre">AUDIENCE_TERMS</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">{'Adult':</span> <span class="pre">'General',</span> <span class="pre">'Adults</span> <span class="pre">Only':</span> <span class="pre">'Adult',</span> <span class="pre">'Children':</span> <span class="pre">'Juvenile',</span> <span class="pre">'Young</span> <span class="pre">Adult':</span> <span class="pre">'Adolescent'}</span></em><a class="headerlink" href="#core.marc.Annotator.AUDIENCE_TERMS" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.marc.Annotator.FORMAT_TERMS">
<span class="sig-name descname"><span class="pre">FORMAT_TERMS</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">{('application/epub+zip',</span> <span class="pre">None):</span> <span class="pre">'EPUB</span> <span class="pre">eBook',</span> <span class="pre">('application/epub+zip',</span> <span class="pre">'application/vnd.adobe.adept+xml'):</span> <span class="pre">'Adobe</span> <span class="pre">EPUB</span> <span class="pre">eBook',</span> <span class="pre">('application/pdf',</span> <span class="pre">None):</span> <span class="pre">'PDF</span> <span class="pre">eBook',</span> <span class="pre">('application/pdf',</span> <span class="pre">'application/vnd.adobe.adept+xml'):</span> <span class="pre">'Adobe</span> <span class="pre">PDF</span> <span class="pre">eBook'}</span></em><a class="headerlink" href="#core.marc.Annotator.FORMAT_TERMS" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.marc.Annotator.add_audience">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">add_audience</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">record</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">work</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/marc.html#Annotator.add_audience"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.marc.Annotator.add_audience" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.marc.Annotator.add_contributors">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">add_contributors</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">record</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">edition</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/marc.html#Annotator.add_contributors"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.marc.Annotator.add_contributors" title="Permalink to this definition">¶</a></dt>
<dd><p>Create contributor fields for this edition.</p>
<p>TODO: Use canonical names from LoC.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.marc.Annotator.add_control_fields">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">add_control_fields</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">record</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">identifier</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pool</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">edition</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/marc.html#Annotator.add_control_fields"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.marc.Annotator.add_control_fields" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.marc.Annotator.add_distributor">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">add_distributor</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">record</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pool</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/marc.html#Annotator.add_distributor"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.marc.Annotator.add_distributor" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.marc.Annotator.add_ebooks_subject">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">add_ebooks_subject</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">record</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/marc.html#Annotator.add_ebooks_subject"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.marc.Annotator.add_ebooks_subject" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.marc.Annotator.add_formats">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">add_formats</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">record</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pool</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/marc.html#Annotator.add_formats"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.marc.Annotator.add_formats" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.marc.Annotator.add_isbn">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">add_isbn</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">record</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">identifier</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/marc.html#Annotator.add_isbn"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.marc.Annotator.add_isbn" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.marc.Annotator.add_marc_organization_code">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">add_marc_organization_code</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">record</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">marc_org</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/marc.html#Annotator.add_marc_organization_code"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.marc.Annotator.add_marc_organization_code" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.marc.Annotator.add_physical_description">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">add_physical_description</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">record</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">edition</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/marc.html#Annotator.add_physical_description"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.marc.Annotator.add_physical_description" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.marc.Annotator.add_publisher">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">add_publisher</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">record</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">edition</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/marc.html#Annotator.add_publisher"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.marc.Annotator.add_publisher" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.marc.Annotator.add_series">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">add_series</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">record</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">edition</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/marc.html#Annotator.add_series"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.marc.Annotator.add_series" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.marc.Annotator.add_simplified_genres">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">add_simplified_genres</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">record</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">work</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/marc.html#Annotator.add_simplified_genres"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.marc.Annotator.add_simplified_genres" title="Permalink to this definition">¶</a></dt>
<dd><p>Create subject fields for this work.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.marc.Annotator.add_summary">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">add_summary</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">record</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">work</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/marc.html#Annotator.add_summary"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.marc.Annotator.add_summary" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.marc.Annotator.add_system_details">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">add_system_details</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">record</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/marc.html#Annotator.add_system_details"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.marc.Annotator.add_system_details" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.marc.Annotator.add_title">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">add_title</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">record</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">edition</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/marc.html#Annotator.add_title"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.marc.Annotator.add_title" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.marc.Annotator.annotate_work_record">
<span class="sig-name descname"><span class="pre">annotate_work_record</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">work</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">active_license_pool</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">edition</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">identifier</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">record</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">integration</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">updated</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/marc.html#Annotator.annotate_work_record"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.marc.Annotator.annotate_work_record" title="Permalink to this definition">¶</a></dt>
<dd><p>Add metadata from this work to a MARC record.</p>
<dl class="field-list simple">
<dt class="field-odd">Work<span class="colon">:</span></dt>
<dd class="field-odd"><p>The Work whose record is being annotated.</p>
</dd>
<dt class="field-even">Active_license_pool<span class="colon">:</span></dt>
<dd class="field-even"><p>Of all the LicensePools associated with this
Work, the client has expressed interest in this one.</p>
</dd>
<dt class="field-odd">Edition<span class="colon">:</span></dt>
<dd class="field-odd"><p>The Edition to use when associating bibliographic
metadata with this entry.</p>
</dd>
<dt class="field-even">Identifier<span class="colon">:</span></dt>
<dd class="field-even"><p>Of all the Identifiers associated with this
Work, the client has expressed interest in this one.</p>
</dd>
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>record</strong> – A MARCRecord object to be annotated.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.marc.Annotator.leader">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">leader</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">work</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/marc.html#Annotator.leader"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.marc.Annotator.leader" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.marc.Annotator.marc_cache_field">
<span class="sig-name descname"><span class="pre">marc_cache_field</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'marc_record'</span></em><a class="headerlink" href="#core.marc.Annotator.marc_cache_field" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.marc.MARCExporter">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.marc.</span></span><span class="sig-name descname"><span class="pre">MARCExporter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">library</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">integration</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/marc.html#MARCExporter"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.marc.MARCExporter" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Turn a work into a record for a MARC file.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="core.marc.MARCExporter.DEFAULT_MIRROR_INTEGRATION">
<span class="sig-name descname"><span class="pre">DEFAULT_MIRROR_INTEGRATION</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">{'key':</span> <span class="pre">'NO_MIRROR',</span> <span class="pre">'label':</span> <span class="pre">l'None</span> <span class="pre">-</span> <span class="pre">Do</span> <span class="pre">not</span> <span class="pre">mirror</span> <span class="pre">MARC</span> <span class="pre">files'}</span></em><a class="headerlink" href="#core.marc.MARCExporter.DEFAULT_MIRROR_INTEGRATION" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.marc.MARCExporter.DEFAULT_UPDATE_FREQUENCY">
<span class="sig-name descname"><span class="pre">DEFAULT_UPDATE_FREQUENCY</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">30</span></em><a class="headerlink" href="#core.marc.MARCExporter.DEFAULT_UPDATE_FREQUENCY" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.marc.MARCExporter.DESCRIPTION">
<span class="sig-name descname"><span class="pre">DESCRIPTION</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">l'Export</span> <span class="pre">metadata</span> <span class="pre">into</span> <span class="pre">MARC</span> <span class="pre">files</span> <span class="pre">that</span> <span class="pre">can</span> <span class="pre">be</span> <span class="pre">imported</span> <span class="pre">into</span> <span class="pre">an</span> <span class="pre">ILS</span> <span class="pre">manually.'</span></em><a class="headerlink" href="#core.marc.MARCExporter.DESCRIPTION" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.marc.MARCExporter.INCLUDE_SIMPLIFIED_GENRES">
<span class="sig-name descname"><span class="pre">INCLUDE_SIMPLIFIED_GENRES</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'include_simplified_genres'</span></em><a class="headerlink" href="#core.marc.MARCExporter.INCLUDE_SIMPLIFIED_GENRES" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.marc.MARCExporter.INCLUDE_SUMMARY">
<span class="sig-name descname"><span class="pre">INCLUDE_SUMMARY</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'include_summary'</span></em><a class="headerlink" href="#core.marc.MARCExporter.INCLUDE_SUMMARY" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.marc.MARCExporter.LIBRARY_SETTINGS">
<span class="sig-name descname"><span class="pre">LIBRARY_SETTINGS</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">[{'key':</span> <span class="pre">'marc_update_frequency',</span> <span class="pre">'label':</span> <span class="pre">l'Update</span> <span class="pre">frequency</span> <span class="pre">(in</span> <span class="pre">days)',</span> <span class="pre">'description':</span> <span class="pre">l'The</span> <span class="pre">circulation</span> <span class="pre">manager</span> <span class="pre">will</span> <span class="pre">wait</span> <span class="pre">this</span> <span class="pre">number</span> <span class="pre">of</span> <span class="pre">days</span> <span class="pre">between</span> <span class="pre">generating</span> <span class="pre">MARC</span> <span class="pre">files.',</span> <span class="pre">'type':</span> <span class="pre">'number',</span> <span class="pre">'default':</span> <span class="pre">30},</span> <span class="pre">{'key':</span> <span class="pre">'marc_organization_code',</span> <span class="pre">'label':</span> <span class="pre">l'The</span> <span class="pre">MARC</span> <span class="pre">organization</span> <span class="pre">code</span> <span class="pre">for</span> <span class="pre">this</span> <span class="pre">library</span> <span class="pre">(003</span> <span class="pre">field).',</span> <span class="pre">'description':</span> <span class="pre">l'MARC</span> <span class="pre">organization</span> <span class="pre">codes</span> <span class="pre">are</span> <span class="pre">assigned</span> <span class="pre">by</span> <span class="pre">the</span> <span class="pre">Library</span> <span class="pre">of</span> <span class="pre">Congress.'},</span> <span class="pre">{'key':</span> <span class="pre">'marc_web_client_url',</span> <span class="pre">'label':</span> <span class="pre">l'The</span> <span class="pre">base</span> <span class="pre">URL</span> <span class="pre">for</span> <span class="pre">the</span> <span class="pre">web</span> <span class="pre">catalog</span> <span class="pre">for</span> <span class="pre">this</span> <span class="pre">library,</span> <span class="pre">for</span> <span class="pre">the</span> <span class="pre">856</span> <span class="pre">field.',</span> <span class="pre">'description':</span> <span class="pre">l'If</span> <span class="pre">using</span> <span class="pre">a</span> <span class="pre">library</span> <span class="pre">registry</span> <span class="pre">that</span> <span class="pre">provides</span> <span class="pre">a</span> <span class="pre">web</span> <span class="pre">catalog,</span> <span class="pre">this</span> <span class="pre">can</span> <span class="pre">be</span> <span class="pre">left</span> <span class="pre">blank.'},</span> <span class="pre">{'key':</span> <span class="pre">'include_summary',</span> <span class="pre">'label':</span> <span class="pre">l'Include</span> <span class="pre">summaries</span> <span class="pre">in</span> <span class="pre">MARC</span> <span class="pre">records</span> <span class="pre">(520</span> <span class="pre">field)',</span> <span class="pre">'type':</span> <span class="pre">'select',</span> <span class="pre">'options':</span> <span class="pre">[{'key':</span> <span class="pre">'false',</span> <span class="pre">'label':</span> <span class="pre">l'Do</span> <span class="pre">not</span> <span class="pre">include</span> <span class="pre">summaries'},</span> <span class="pre">{'key':</span> <span class="pre">'true',</span> <span class="pre">'label':</span> <span class="pre">l'Include</span> <span class="pre">summaries'}],</span> <span class="pre">'default':</span> <span class="pre">'false'},</span> <span class="pre">{'key':</span> <span class="pre">'include_simplified_genres',</span> <span class="pre">'label':</span> <span class="pre">l'Include</span> <span class="pre">Library</span> <span class="pre">Simplified</span> <span class="pre">genres</span> <span class="pre">in</span> <span class="pre">MARC</span> <span class="pre">records</span> <span class="pre">(650</span> <span class="pre">fields)',</span> <span class="pre">'type':</span> <span class="pre">'select',</span> <span class="pre">'options':</span> <span class="pre">[{'key':</span> <span class="pre">'false',</span> <span class="pre">'label':</span> <span class="pre">l'Do</span> <span class="pre">not</span> <span class="pre">include</span> <span class="pre">Library</span> <span class="pre">Simplified</span> <span class="pre">genres'},</span> <span class="pre">{'key':</span> <span class="pre">'true',</span> <span class="pre">'label':</span> <span class="pre">l'Include</span> <span class="pre">Library</span> <span class="pre">Simplified</span> <span class="pre">genres'}],</span> <span class="pre">'default':</span> <span class="pre">'false'}]</span></em><a class="headerlink" href="#core.marc.MARCExporter.LIBRARY_SETTINGS" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.marc.MARCExporter.MARC_ORGANIZATION_CODE">
<span class="sig-name descname"><span class="pre">MARC_ORGANIZATION_CODE</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'marc_organization_code'</span></em><a class="headerlink" href="#core.marc.MARCExporter.MARC_ORGANIZATION_CODE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.marc.MARCExporter.NAME">
<span class="sig-name descname"><span class="pre">NAME</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'MARC</span> <span class="pre">Export'</span></em><a class="headerlink" href="#core.marc.MARCExporter.NAME" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.marc.MARCExporter.NO_MIRROR_INTEGRATION">
<span class="sig-name descname"><span class="pre">NO_MIRROR_INTEGRATION</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'NO_MIRROR'</span></em><a class="headerlink" href="#core.marc.MARCExporter.NO_MIRROR_INTEGRATION" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.marc.MARCExporter.SETTING">
<span class="sig-name descname"><span class="pre">SETTING</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">{'description':</span> <span class="pre">l'Storage</span> <span class="pre">protocol</span> <span class="pre">to</span> <span class="pre">use</span> <span class="pre">for</span> <span class="pre">uploading</span> <span class="pre">generated</span> <span class="pre">MARC</span> <span class="pre">files.</span> <span class="pre">The</span> <span class="pre">service</span> <span class="pre">must</span> <span class="pre">already</span> <span class="pre">be</span> <span class="pre">configured</span> <span class="pre">under</span> <span class="pre">'Storage</span> <span class="pre">Services'.',</span> <span class="pre">'key':</span> <span class="pre">'mirror_integration_id',</span> <span class="pre">'label':</span> <span class="pre">l'MARC</span> <span class="pre">Mirror',</span> <span class="pre">'options':</span> <span class="pre">[{'key':</span> <span class="pre">'NO_MIRROR',</span> <span class="pre">'label':</span> <span class="pre">l'None</span> <span class="pre">-</span> <span class="pre">Do</span> <span class="pre">not</span> <span class="pre">mirror</span> <span class="pre">MARC</span> <span class="pre">files'}],</span> <span class="pre">'type':</span> <span class="pre">'select'}</span></em><a class="headerlink" href="#core.marc.MARCExporter.SETTING" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.marc.MARCExporter.UPDATE_FREQUENCY">
<span class="sig-name descname"><span class="pre">UPDATE_FREQUENCY</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'marc_update_frequency'</span></em><a class="headerlink" href="#core.marc.MARCExporter.UPDATE_FREQUENCY" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.marc.MARCExporter.WEB_CLIENT_URL">
<span class="sig-name descname"><span class="pre">WEB_CLIENT_URL</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'marc_web_client_url'</span></em><a class="headerlink" href="#core.marc.MARCExporter.WEB_CLIENT_URL" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.marc.MARCExporter.create_record">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">create_record</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">work</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">annotator</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">force_create</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">integration</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/marc.html#MARCExporter.create_record"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.marc.MARCExporter.create_record" title="Permalink to this definition">¶</a></dt>
<dd><p>Build a complete MARC record for a given work.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.marc.MARCExporter.from_config">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">from_config</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">library</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/marc.html#MARCExporter.from_config"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.marc.MARCExporter.from_config" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.marc.MARCExporter.get_storage_settings">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">get_storage_settings</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/marc.html#MARCExporter.get_storage_settings"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.marc.MARCExporter.get_storage_settings" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.marc.MARCExporter.records">
<span class="sig-name descname"><span class="pre">records</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">lane</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">annotator</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mirror_integration</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">start_time</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">force_refresh</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mirror</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">search_engine</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">query_batch_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">500</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">upload_batch_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">7500</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/marc.html#MARCExporter.records"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.marc.MARCExporter.records" title="Permalink to this definition">¶</a></dt>
<dd><p>Create and export a MARC file for the books in a lane.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>lane</strong> – The Lane to export books from.</p></li>
<li><p><strong>annotator</strong> – The Annotator to use when creating MARC records.</p></li>
<li><p><strong>mirror_integration</strong> – The mirror integration to use for MARC files.</p></li>
<li><p><strong>start_time</strong> – Only include records that were created or modified after this time.</p></li>
<li><p><strong>force_refresh</strong> – Create new records even when cached records are available.</p></li>
<li><p><strong>mirror</strong> – Optional mirror to use instead of loading one from configuration.</p></li>
<li><p><strong>query_batch_size</strong> – Number of works to retrieve with a single Elasticsearch query.</p></li>
<li><p><strong>upload_batch_size</strong> – Number of records to mirror at a time. This is different
from query_batch_size because S3 enforces a minimum size of 5MB for all parts
of a multipart upload except the last, but 5MB of records would be too many
works for a single query.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.marc.MARCExporterFacets">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.marc.</span></span><span class="sig-name descname"><span class="pre">MARCExporterFacets</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">start_time</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/marc.html#MARCExporterFacets"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.marc.MARCExporterFacets" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.lane.BaseFacets" title="core.lane.BaseFacets"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseFacets</span></code></a></p>
<p>A faceting object used to configure the search engine so that
it only works updated since a certain time.</p>
<dl class="py method">
<dt class="sig sig-object py" id="core.marc.MARCExporterFacets.modify_search_filter">
<span class="sig-name descname"><span class="pre">modify_search_filter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filter</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/marc.html#MARCExporterFacets.modify_search_filter"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.marc.MARCExporterFacets.modify_search_filter" title="Permalink to this definition">¶</a></dt>
<dd><p>Modify an external_search.Filter object to filter out works
excluded by the business logic of this faceting class.</p>
</dd></dl>

</dd></dl>

</section>
<section id="module-core.metadata_layer">
<span id="core-metadata-layer-module"></span><h2>core.metadata_layer module<a class="headerlink" href="#module-core.metadata_layer" title="Permalink to this heading">¶</a></h2>
<p>An abstract way of representing incoming metadata and applying it
to Identifiers and Editions.</p>
<p>This acts as an intermediary between the third-party integrations
(which have this information in idiosyncratic formats) and the
model. Doing a third-party integration should be as simple as putting
the information into this format.</p>
<dl class="py exception">
<dt class="sig sig-object py" id="core.metadata_layer.CSVFormatError">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.metadata_layer.</span></span><span class="sig-name descname"><span class="pre">CSVFormatError</span></span><a class="reference internal" href="_modules/core/metadata_layer.html#CSVFormatError"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.metadata_layer.CSVFormatError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">Error</span></code></p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.metadata_layer.CSVMetadataImporter">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.metadata_layer.</span></span><span class="sig-name descname"><span class="pre">CSVMetadataImporter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data_source_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">title_field</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'title'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">language_field</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'language'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">default_language</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'eng'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">medium_field</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'medium'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">default_medium</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'Book'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">series_field</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'series'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">publisher_field</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'publisher'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">imprint_field</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'imprint'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">issued_field</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'issued'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">published_field</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">['published',</span> <span class="pre">'publication</span> <span class="pre">year']</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">identifier_fields</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">{'Axis</span> <span class="pre">360</span> <span class="pre">ID':</span> <span class="pre">('axis</span> <span class="pre">360</span> <span class="pre">id',</span> <span class="pre">0.75),</span> <span class="pre">'Bibliotheca</span> <span class="pre">ID':</span> <span class="pre">('3m</span> <span class="pre">id',</span> <span class="pre">0.75),</span> <span class="pre">'ISBN':</span> <span class="pre">('isbn',</span> <span class="pre">0.75),</span> <span class="pre">'Overdrive</span> <span class="pre">ID':</span> <span class="pre">('overdrive</span> <span class="pre">id',</span> <span class="pre">0.75)}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">subject_fields</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">{'age':</span> <span class="pre">('schema:typicalAgeRange',</span> <span class="pre">100.0),</span> <span class="pre">'audience':</span> <span class="pre">('schema:audience',</span> <span class="pre">100.0),</span> <span class="pre">'tags':</span> <span class="pre">('tag',</span> <span class="pre">100.0)}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sort_author_field</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'file</span> <span class="pre">author</span> <span class="pre">as'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">display_author_field</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">['author',</span> <span class="pre">'display</span> <span class="pre">author</span> <span class="pre">as']</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/metadata_layer.html#CSVMetadataImporter"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.metadata_layer.CSVMetadataImporter" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Turn a CSV file into a list of Metadata objects.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="core.metadata_layer.CSVMetadataImporter.DEFAULT_IDENTIFIER_FIELD_NAMES">
<span class="sig-name descname"><span class="pre">DEFAULT_IDENTIFIER_FIELD_NAMES</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">{'Axis</span> <span class="pre">360</span> <span class="pre">ID':</span> <span class="pre">('axis</span> <span class="pre">360</span> <span class="pre">id',</span> <span class="pre">0.75),</span> <span class="pre">'Bibliotheca</span> <span class="pre">ID':</span> <span class="pre">('3m</span> <span class="pre">id',</span> <span class="pre">0.75),</span> <span class="pre">'ISBN':</span> <span class="pre">('isbn',</span> <span class="pre">0.75),</span> <span class="pre">'Overdrive</span> <span class="pre">ID':</span> <span class="pre">('overdrive</span> <span class="pre">id',</span> <span class="pre">0.75)}</span></em><a class="headerlink" href="#core.metadata_layer.CSVMetadataImporter.DEFAULT_IDENTIFIER_FIELD_NAMES" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.metadata_layer.CSVMetadataImporter.DEFAULT_SUBJECT_FIELD_NAMES">
<span class="sig-name descname"><span class="pre">DEFAULT_SUBJECT_FIELD_NAMES</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">{'age':</span> <span class="pre">('schema:typicalAgeRange',</span> <span class="pre">100.0),</span> <span class="pre">'audience':</span> <span class="pre">('schema:audience',</span> <span class="pre">100.0),</span> <span class="pre">'tags':</span> <span class="pre">('tag',</span> <span class="pre">100.0)}</span></em><a class="headerlink" href="#core.metadata_layer.CSVMetadataImporter.DEFAULT_SUBJECT_FIELD_NAMES" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.metadata_layer.CSVMetadataImporter.IDENTIFIER_PRECEDENCE">
<span class="sig-name descname"><span class="pre">IDENTIFIER_PRECEDENCE</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">['Axis</span> <span class="pre">360</span> <span class="pre">ID',</span> <span class="pre">'Overdrive</span> <span class="pre">ID',</span> <span class="pre">'Bibliotheca</span> <span class="pre">ID',</span> <span class="pre">'ISBN']</span></em><a class="headerlink" href="#core.metadata_layer.CSVMetadataImporter.IDENTIFIER_PRECEDENCE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="core.metadata_layer.CSVMetadataImporter.identifier_field_names">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">identifier_field_names</span></span><a class="headerlink" href="#core.metadata_layer.CSVMetadataImporter.identifier_field_names" title="Permalink to this definition">¶</a></dt>
<dd><p>All potential field names that would identify an identifier.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.metadata_layer.CSVMetadataImporter.list_field">
<span class="sig-name descname"><span class="pre">list_field</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">row</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">names</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/metadata_layer.html#CSVMetadataImporter.list_field"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.metadata_layer.CSVMetadataImporter.list_field" title="Permalink to this definition">¶</a></dt>
<dd><p>Parse a string into a list by splitting on commas.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.metadata_layer.CSVMetadataImporter.log">
<span class="sig-name descname"><span class="pre">log</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">&lt;Logger</span> <span class="pre">CSV</span> <span class="pre">metadata</span> <span class="pre">importer</span> <span class="pre">(WARNING)&gt;</span></em><a class="headerlink" href="#core.metadata_layer.CSVMetadataImporter.log" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.metadata_layer.CSVMetadataImporter.row_to_metadata">
<span class="sig-name descname"><span class="pre">row_to_metadata</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">row</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/metadata_layer.html#CSVMetadataImporter.row_to_metadata"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.metadata_layer.CSVMetadataImporter.row_to_metadata" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.metadata_layer.CSVMetadataImporter.to_metadata">
<span class="sig-name descname"><span class="pre">to_metadata</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dictreader</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/metadata_layer.html#CSVMetadataImporter.to_metadata"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.metadata_layer.CSVMetadataImporter.to_metadata" title="Permalink to this definition">¶</a></dt>
<dd><p>Turn the CSV file in <cite>dictreader</cite> into a sequence of Metadata.</p>
<dl class="field-list simple">
<dt class="field-odd">Yield<span class="colon">:</span></dt>
<dd class="field-odd"><p>A sequence of Metadata objects.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.metadata_layer.CirculationData">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.metadata_layer.</span></span><span class="sig-name descname"><span class="pre">CirculationData</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data_source</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">primary_identifier</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">licenses_owned</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">licenses_available</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">licenses_reserved</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">patrons_in_hold_queue</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">formats</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">default_rights_uri</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">links</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">licenses</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">last_checked</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/metadata_layer.html#CirculationData"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.metadata_layer.CirculationData" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.metadata_layer.MetaToModelUtility" title="core.metadata_layer.MetaToModelUtility"><code class="xref py py-class docutils literal notranslate"><span class="pre">MetaToModelUtility</span></code></a></p>
<p>Information about actual copies of a book that can be delivered to
patrons.</p>
<p>As distinct from Metadata, which is a container for information
about a book.</p>
<dl class="simple">
<dt>Basically,</dt><dd><p>Metadata : Edition :: CirculationData : Licensepool</p>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="core.metadata_layer.CirculationData.apply">
<span class="sig-name descname"><span class="pre">apply</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">collection</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">replace</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/metadata_layer.html#CirculationData.apply"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.metadata_layer.CirculationData.apply" title="Permalink to this definition">¶</a></dt>
<dd><p>Update the title with this CirculationData’s information.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>collection</strong> – A Collection representing actual copies of
this title. Availability information (e.g. number of copies)
will be associated with a LicensePool in this Collection. If
this is not present, only delivery information (e.g. format
information and open-access downloads) will be processed.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.metadata_layer.CirculationData.data_source">
<span class="sig-name descname"><span class="pre">data_source</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/metadata_layer.html#CirculationData.data_source"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.metadata_layer.CirculationData.data_source" title="Permalink to this definition">¶</a></dt>
<dd><p>Find the DataSource associated with this circulation information.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="core.metadata_layer.CirculationData.has_open_access_link">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">has_open_access_link</span></span><a class="headerlink" href="#core.metadata_layer.CirculationData.has_open_access_link" title="Permalink to this definition">¶</a></dt>
<dd><p>Does this Circulation object have an associated open-access link?</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.metadata_layer.CirculationData.license_pool">
<span class="sig-name descname"><span class="pre">license_pool</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">collection</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">analytics</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/metadata_layer.html#CirculationData.license_pool"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.metadata_layer.CirculationData.license_pool" title="Permalink to this definition">¶</a></dt>
<dd><p>Find or create a LicensePool object for this CirculationData.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>collection</strong> – The LicensePool object will be associated with
the given Collection.</p></li>
<li><p><strong>analytics</strong> – If the LicensePool is newly created, the event
will be tracked with this.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="core.metadata_layer.CirculationData.links">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">links</span></span><a class="headerlink" href="#core.metadata_layer.CirculationData.links" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.metadata_layer.CirculationData.log">
<span class="sig-name descname"><span class="pre">log</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">&lt;Logger</span> <span class="pre">Abstract</span> <span class="pre">metadata</span> <span class="pre">layer</span> <span class="pre">-</span> <span class="pre">Circulation</span> <span class="pre">data</span> <span class="pre">(WARNING)&gt;</span></em><a class="headerlink" href="#core.metadata_layer.CirculationData.log" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.metadata_layer.CirculationData.primary_identifier">
<span class="sig-name descname"><span class="pre">primary_identifier</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/metadata_layer.html#CirculationData.primary_identifier"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.metadata_layer.CirculationData.primary_identifier" title="Permalink to this definition">¶</a></dt>
<dd><p>Find the Identifier associated with this circulation information.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.metadata_layer.CirculationData.set_default_rights_uri">
<span class="sig-name descname"><span class="pre">set_default_rights_uri</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data_source_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">default_rights_uri</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/metadata_layer.html#CirculationData.set_default_rights_uri"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.metadata_layer.CirculationData.set_default_rights_uri" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.metadata_layer.ContributorData">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.metadata_layer.</span></span><span class="sig-name descname"><span class="pre">ContributorData</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sort_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">display_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">family_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">wikipedia_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">roles</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lc</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">viaf</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">biography</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">aliases</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">extra</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/metadata_layer.html#ContributorData"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.metadata_layer.ContributorData" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<dl class="py method">
<dt class="sig sig-object py" id="core.metadata_layer.ContributorData.apply">
<span class="sig-name descname"><span class="pre">apply</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">destination</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">replace</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/metadata_layer.html#ContributorData.apply"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.metadata_layer.ContributorData.apply" title="Permalink to this definition">¶</a></dt>
<dd><p>Update the passed-in Contributor-type object with this
ContributorData’s information.</p>
<dl class="field-list simple">
<dt class="field-odd">Param<span class="colon">:</span></dt>
<dd class="field-odd"><p>destination – the Contributor or ContributorData object to
write this ContributorData object’s metadata to.</p>
</dd>
<dt class="field-even">Param<span class="colon">:</span></dt>
<dd class="field-even"><p>replace – Replacement policy (not currently used).</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>the possibly changed Contributor object and a flag of whether it’s been changed.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.metadata_layer.ContributorData.display_name_to_sort_name_from_existing_contributor">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">display_name_to_sort_name_from_existing_contributor</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">display_name</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/metadata_layer.html#ContributorData.display_name_to_sort_name_from_existing_contributor"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.metadata_layer.ContributorData.display_name_to_sort_name_from_existing_contributor" title="Permalink to this definition">¶</a></dt>
<dd><p>Find the sort name for this book’s author, assuming it’s easy.</p>
<p>‘Easy’ means we already have an established sort name for a
Contributor with this exact display name.</p>
<p>If it’s not easy, this will be taken care of later with a call to
the metadata wrangler’s author canonicalization service.</p>
<p>If we have a copy of this book in our collection (the only
time an external list item is relevant), this will probably be
easy.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.metadata_layer.ContributorData.display_name_to_sort_name_through_canonicalizer">
<span class="sig-name descname"><span class="pre">display_name_to_sort_name_through_canonicalizer</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">identifiers</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">metadata_client</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/metadata_layer.html#ContributorData.display_name_to_sort_name_through_canonicalizer"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.metadata_layer.ContributorData.display_name_to_sort_name_through_canonicalizer" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.metadata_layer.ContributorData.find_sort_name">
<span class="sig-name descname"><span class="pre">find_sort_name</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">identifiers</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">metadata_client</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/metadata_layer.html#ContributorData.find_sort_name"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.metadata_layer.ContributorData.find_sort_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Try as hard as possible to find this person’s sort name.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.metadata_layer.ContributorData.from_contribution">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">from_contribution</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">contribution</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/metadata_layer.html#ContributorData.from_contribution"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.metadata_layer.ContributorData.from_contribution" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a ContributorData object from a data-model Contribution
object.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.metadata_layer.ContributorData.lookup">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">lookup</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sort_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">display_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lc</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">viaf</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/metadata_layer.html#ContributorData.lookup"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.metadata_layer.ContributorData.lookup" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a (potentially synthetic) ContributorData based on
the best available information in the database.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>A ContributorData.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.metadata_layer.FormatData">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.metadata_layer.</span></span><span class="sig-name descname"><span class="pre">FormatData</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">content_type</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">drm_scheme</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">link</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rights_uri</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/metadata_layer.html#FormatData"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.metadata_layer.FormatData" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.metadata_layer.IdentifierData">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.metadata_layer.</span></span><span class="sig-name descname"><span class="pre">IdentifierData</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">type</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">identifier</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">weight</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/metadata_layer.html#IdentifierData"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.metadata_layer.IdentifierData" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<dl class="py method">
<dt class="sig sig-object py" id="core.metadata_layer.IdentifierData.load">
<span class="sig-name descname"><span class="pre">load</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/metadata_layer.html#IdentifierData.load"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.metadata_layer.IdentifierData.load" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.metadata_layer.LicenseData">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.metadata_layer.</span></span><span class="sig-name descname"><span class="pre">LicenseData</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">identifier</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">checkout_url</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">status_url</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">expires</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">remaining_checkouts</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">concurrent_checkouts</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/metadata_layer.html#LicenseData"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.metadata_layer.LicenseData" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.metadata_layer.LinkData">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.metadata_layer.</span></span><span class="sig-name descname"><span class="pre">LinkData</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">rel</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">href</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">media_type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">content</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">thumbnail</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rights_uri</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rights_explanation</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">original</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">transformation_settings</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/metadata_layer.html#LinkData"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.metadata_layer.LinkData" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<dl class="py property">
<dt class="sig sig-object py" id="core.metadata_layer.LinkData.guessed_media_type">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">guessed_media_type</span></span><a class="headerlink" href="#core.metadata_layer.LinkData.guessed_media_type" title="Permalink to this definition">¶</a></dt>
<dd><p>If the media type of a link is unknown, take a guess.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.metadata_layer.LinkData.mirror_type">
<span class="sig-name descname"><span class="pre">mirror_type</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/metadata_layer.html#LinkData.mirror_type"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.metadata_layer.LinkData.mirror_type" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the type of mirror that should be used for the link.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.metadata_layer.MARCExtractor">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.metadata_layer.</span></span><span class="sig-name descname"><span class="pre">MARCExtractor</span></span><a class="reference internal" href="_modules/core/metadata_layer.html#MARCExtractor"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.metadata_layer.MARCExtractor" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Transform a MARC file into a list of Metadata objects.</p>
<p>This is not totally general, but it’s a good start.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="core.metadata_layer.MARCExtractor.END_OF_AUTHOR_NAME_RES">
<span class="sig-name descname"><span class="pre">END_OF_AUTHOR_NAME_RES</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">[re.compile(',\\s+[0-9]+-'),</span> <span class="pre">re.compile(',\\s+active</span> <span class="pre">'),</span> <span class="pre">re.compile(',\\s+graf,'),</span> <span class="pre">re.compile(',\\s+author.')]</span></em><a class="headerlink" href="#core.metadata_layer.MARCExtractor.END_OF_AUTHOR_NAME_RES" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.metadata_layer.MARCExtractor.name_cleanup">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">name_cleanup</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/metadata_layer.html#MARCExtractor.name_cleanup"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.metadata_layer.MARCExtractor.name_cleanup" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.metadata_layer.MARCExtractor.parse">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">parse</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data_source_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">default_medium_type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/metadata_layer.html#MARCExtractor.parse"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.metadata_layer.MARCExtractor.parse" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.metadata_layer.MARCExtractor.parse_year">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">parse_year</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/metadata_layer.html#MARCExtractor.parse_year"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.metadata_layer.MARCExtractor.parse_year" title="Permalink to this definition">¶</a></dt>
<dd><p>Handle a publication year that may not be in the right format.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.metadata_layer.MeasurementData">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.metadata_layer.</span></span><span class="sig-name descname"><span class="pre">MeasurementData</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">quantity_measured</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">value</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">weight</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">taken_at</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/metadata_layer.html#MeasurementData"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.metadata_layer.MeasurementData" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.metadata_layer.MetaToModelUtility">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.metadata_layer.</span></span><span class="sig-name descname"><span class="pre">MetaToModelUtility</span></span><a class="reference internal" href="_modules/core/metadata_layer.html#MetaToModelUtility"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.metadata_layer.MetaToModelUtility" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Contains functionality common to both CirculationData and Metadata.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="core.metadata_layer.MetaToModelUtility.log">
<span class="sig-name descname"><span class="pre">log</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">&lt;Logger</span> <span class="pre">Abstract</span> <span class="pre">metadata</span> <span class="pre">layer</span> <span class="pre">-</span> <span class="pre">mirror</span> <span class="pre">code</span> <span class="pre">(WARNING)&gt;</span></em><a class="headerlink" href="#core.metadata_layer.MetaToModelUtility.log" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.metadata_layer.MetaToModelUtility.mirror_link">
<span class="sig-name descname"><span class="pre">mirror_link</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">model_object</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data_source</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">link</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">link_obj</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">policy</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/metadata_layer.html#MetaToModelUtility.mirror_link"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.metadata_layer.MetaToModelUtility.mirror_link" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve a copy of the given link and make sure it gets
mirrored. If it’s a full-size image, create a thumbnail and
mirror that too.</p>
<p>The model_object can be either a pool or an edition.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.metadata_layer.Metadata">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.metadata_layer.</span></span><span class="sig-name descname"><span class="pre">Metadata</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data_source</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">title</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">subtitle</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sort_title</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">language</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">medium</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">series</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">series_position</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">publisher</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">imprint</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">issued</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">published</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">primary_identifier</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">identifiers</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">recommendations</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">subjects</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">contributors</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">measurements</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">links</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data_source_last_updated</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">circulation</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/metadata_layer.html#Metadata"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.metadata_layer.Metadata" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.metadata_layer.MetaToModelUtility" title="core.metadata_layer.MetaToModelUtility"><code class="xref py py-class docutils literal notranslate"><span class="pre">MetaToModelUtility</span></code></a></p>
<p>A (potentially partial) set of metadata for a published work.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="core.metadata_layer.Metadata.BASIC_EDITION_FIELDS">
<span class="sig-name descname"><span class="pre">BASIC_EDITION_FIELDS</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">['title',</span> <span class="pre">'sort_title',</span> <span class="pre">'subtitle',</span> <span class="pre">'language',</span> <span class="pre">'medium',</span> <span class="pre">'series',</span> <span class="pre">'series_position',</span> <span class="pre">'publisher',</span> <span class="pre">'imprint',</span> <span class="pre">'issued',</span> <span class="pre">'published']</span></em><a class="headerlink" href="#core.metadata_layer.Metadata.BASIC_EDITION_FIELDS" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.metadata_layer.Metadata.REL_REQUIRES_FULL_RECALCULATION">
<span class="sig-name descname"><span class="pre">REL_REQUIRES_FULL_RECALCULATION</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">['http://schema.org/description']</span></em><a class="headerlink" href="#core.metadata_layer.Metadata.REL_REQUIRES_FULL_RECALCULATION" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.metadata_layer.Metadata.REL_REQUIRES_NEW_PRESENTATION_EDITION">
<span class="sig-name descname"><span class="pre">REL_REQUIRES_NEW_PRESENTATION_EDITION</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">['http://opds-spec.org/image',</span> <span class="pre">'http://opds-spec.org/image/thumbnail']</span></em><a class="headerlink" href="#core.metadata_layer.Metadata.REL_REQUIRES_NEW_PRESENTATION_EDITION" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.metadata_layer.Metadata.apply">
<span class="sig-name descname"><span class="pre">apply</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">edition</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">collection</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">metadata_client</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">replace</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">replace_identifiers</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">replace_subjects</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">replace_contributions</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">replace_links</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">replace_formats</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">replace_rights</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">force</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/metadata_layer.html#Metadata.apply"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.metadata_layer.Metadata.apply" title="Permalink to this definition">¶</a></dt>
<dd><p>Apply this metadata to the given edition.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>(edition, made_core_changes), where edition is the newly-updated object, and made_core_changes
answers the question: were any edition core fields harmed in the making of this update?
So, if title changed, return True.
New: If contributors changed, this is now considered a core change,
so work.simple_opds_feed refresh can be triggered.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.metadata_layer.Metadata.associate_with_identifiers_based_on_permanent_work_id">
<span class="sig-name descname"><span class="pre">associate_with_identifiers_based_on_permanent_work_id</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/metadata_layer.html#Metadata.associate_with_identifiers_based_on_permanent_work_id"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.metadata_layer.Metadata.associate_with_identifiers_based_on_permanent_work_id" title="Permalink to this definition">¶</a></dt>
<dd><p>Try to associate this object’s primary identifier with
the primary identifiers of Editions in the database which share
a permanent work ID.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.metadata_layer.Metadata.calculate_permanent_work_id">
<span class="sig-name descname"><span class="pre">calculate_permanent_work_id</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">metadata_client</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/metadata_layer.html#Metadata.calculate_permanent_work_id"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.metadata_layer.Metadata.calculate_permanent_work_id" title="Permalink to this definition">¶</a></dt>
<dd><p>Try to calculate a permanent work ID from this metadata.</p>
<p>This may require asking a metadata wrangler to turn a display name
into a sort name–thus the <cite>metadata_client</cite> argument.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.metadata_layer.Metadata.consolidate_identifiers">
<span class="sig-name descname"><span class="pre">consolidate_identifiers</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/metadata_layer.html#Metadata.consolidate_identifiers"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.metadata_layer.Metadata.consolidate_identifiers" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.metadata_layer.Metadata.data_source">
<span class="sig-name descname"><span class="pre">data_source</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/metadata_layer.html#Metadata.data_source"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.metadata_layer.Metadata.data_source" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.metadata_layer.Metadata.edition">
<span class="sig-name descname"><span class="pre">edition</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">create_if_not_exists</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/metadata_layer.html#Metadata.edition"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.metadata_layer.Metadata.edition" title="Permalink to this definition">¶</a></dt>
<dd><p>Find or create the edition described by this Metadata object.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.metadata_layer.Metadata.filter_recommendations">
<span class="sig-name descname"><span class="pre">filter_recommendations</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/metadata_layer.html#Metadata.filter_recommendations"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.metadata_layer.Metadata.filter_recommendations" title="Permalink to this definition">¶</a></dt>
<dd><p>Filters out recommended identifiers that don’t exist in the db.
Any IdentifierData objects will be replaced with Identifiers.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.metadata_layer.Metadata.from_edition">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">from_edition</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">edition</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/metadata_layer.html#Metadata.from_edition"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.metadata_layer.Metadata.from_edition" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a basic Metadata object for the given Edition.</p>
<p>This doesn’t contain everything but it contains enough
information to run guess_license_pools.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.metadata_layer.Metadata.guess_license_pools">
<span class="sig-name descname"><span class="pre">guess_license_pools</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">metadata_client</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/metadata_layer.html#Metadata.guess_license_pools"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.metadata_layer.Metadata.guess_license_pools" title="Permalink to this definition">¶</a></dt>
<dd><p>Try to find existing license pools for this Metadata.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="core.metadata_layer.Metadata.links">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">links</span></span><a class="headerlink" href="#core.metadata_layer.Metadata.links" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.metadata_layer.Metadata.log">
<span class="sig-name descname"><span class="pre">log</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">&lt;Logger</span> <span class="pre">Abstract</span> <span class="pre">metadata</span> <span class="pre">layer</span> <span class="pre">(WARNING)&gt;</span></em><a class="headerlink" href="#core.metadata_layer.Metadata.log" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.metadata_layer.Metadata.make_thumbnail">
<span class="sig-name descname"><span class="pre">make_thumbnail</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data_source</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">link</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">link_obj</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/metadata_layer.html#Metadata.make_thumbnail"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.metadata_layer.Metadata.make_thumbnail" title="Permalink to this definition">¶</a></dt>
<dd><p>Make sure a Hyperlink representing an image is connected
to its thumbnail.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.metadata_layer.Metadata.normalize_contributors">
<span class="sig-name descname"><span class="pre">normalize_contributors</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">metadata_client</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/metadata_layer.html#Metadata.normalize_contributors"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.metadata_layer.Metadata.normalize_contributors" title="Permalink to this definition">¶</a></dt>
<dd><p>Make sure that all contributors without a .sort_name get one.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="core.metadata_layer.Metadata.primary_author">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">primary_author</span></span><a class="headerlink" href="#core.metadata_layer.Metadata.primary_author" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.metadata_layer.Metadata.update">
<span class="sig-name descname"><span class="pre">update</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">metadata</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/metadata_layer.html#Metadata.update"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.metadata_layer.Metadata.update" title="Permalink to this definition">¶</a></dt>
<dd><p>Update this Metadata object with values from the given Metadata
object.</p>
<p>TODO: We might want to take a policy object as an argument.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.metadata_layer.Metadata.update_contributions">
<span class="sig-name descname"><span class="pre">update_contributions</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">edition</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">metadata_client</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">replace</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/metadata_layer.html#Metadata.update_contributions"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.metadata_layer.Metadata.update_contributions" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.metadata_layer.ReplacementPolicy">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.metadata_layer.</span></span><span class="sig-name descname"><span class="pre">ReplacementPolicy</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">identifiers</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">subjects</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">contributions</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">links</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">formats</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rights</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">link_content</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mirrors</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">content_modifier</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">analytics</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">http_get</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">even_if_not_apparently_updated</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">presentation_calculation_policy</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/metadata_layer.html#ReplacementPolicy"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.metadata_layer.ReplacementPolicy" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>How serious should we be about overwriting old metadata with
this new metadata?</p>
<dl class="py method">
<dt class="sig sig-object py" id="core.metadata_layer.ReplacementPolicy.append_only">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">append_only</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">args</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/metadata_layer.html#ReplacementPolicy.append_only"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.metadata_layer.ReplacementPolicy.append_only" title="Permalink to this definition">¶</a></dt>
<dd><p>Don’t overwrite any information, just append it.</p>
<p>This should probably never be used.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.metadata_layer.ReplacementPolicy.from_license_source">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">from_license_source</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">args</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/metadata_layer.html#ReplacementPolicy.from_license_source"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.metadata_layer.ReplacementPolicy.from_license_source" title="Permalink to this definition">¶</a></dt>
<dd><p>When gathering data from the license source, overwrite all old data
from this source with new data from the same source. Also
overwrite an old rights status with an updated status and update
the list of available formats. Log availability changes to the
configured analytics services.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.metadata_layer.ReplacementPolicy.from_metadata_source">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">from_metadata_source</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">args</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/metadata_layer.html#ReplacementPolicy.from_metadata_source"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.metadata_layer.ReplacementPolicy.from_metadata_source" title="Permalink to this definition">¶</a></dt>
<dd><p>When gathering data from a metadata source, overwrite all old data
from this source, but do not overwrite the rights status or
the available formats. License sources are the authority on rights
and formats, and metadata sources have no say in the matter.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.metadata_layer.SubjectData">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.metadata_layer.</span></span><span class="sig-name descname"><span class="pre">SubjectData</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">type</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">identifier</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">weight</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/metadata_layer.html#SubjectData"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.metadata_layer.SubjectData" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<dl class="py property">
<dt class="sig sig-object py" id="core.metadata_layer.SubjectData.key">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">key</span></span><a class="headerlink" href="#core.metadata_layer.SubjectData.key" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.metadata_layer.TimestampData">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.metadata_layer.</span></span><span class="sig-name descname"><span class="pre">TimestampData</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">start</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">finish</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">achievements</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">counter</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">exception</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/metadata_layer.html#TimestampData"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.metadata_layer.TimestampData" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<dl class="py attribute">
<dt class="sig sig-object py" id="core.metadata_layer.TimestampData.CLEAR_VALUE">
<span class="sig-name descname"><span class="pre">CLEAR_VALUE</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">&lt;object</span> <span class="pre">object&gt;</span></em><a class="headerlink" href="#core.metadata_layer.TimestampData.CLEAR_VALUE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.metadata_layer.TimestampData.apply">
<span class="sig-name descname"><span class="pre">apply</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/metadata_layer.html#TimestampData.apply"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.metadata_layer.TimestampData.apply" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.metadata_layer.TimestampData.collection">
<span class="sig-name descname"><span class="pre">collection</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/metadata_layer.html#TimestampData.collection"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.metadata_layer.TimestampData.collection" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.metadata_layer.TimestampData.finalize">
<span class="sig-name descname"><span class="pre">finalize</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">service</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">service_type</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">collection</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">start</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">finish</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">achievements</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">counter</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">exception</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/metadata_layer.html#TimestampData.finalize"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.metadata_layer.TimestampData.finalize" title="Permalink to this definition">¶</a></dt>
<dd><p>Finalize any values that were not set during the constructor.</p>
<p>This is intended to be run by the code that originally ran the
service.</p>
<p>The given values for <cite>start</cite>, <cite>finish</cite>, <cite>achievements</cite>,
<cite>counter</cite>, and <cite>exception</cite> will be used only if the service
did not specify its own values for those fields.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="core.metadata_layer.TimestampData.is_complete">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">is_complete</span></span><a class="headerlink" href="#core.metadata_layer.TimestampData.is_complete" title="Permalink to this definition">¶</a></dt>
<dd><p>Does this TimestampData represent an operation that has
completed?</p>
<p>An operation is completed if it has failed, or if the time of its
completion is known.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="core.metadata_layer.TimestampData.is_failure">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">is_failure</span></span><a class="headerlink" href="#core.metadata_layer.TimestampData.is_failure" title="Permalink to this definition">¶</a></dt>
<dd><p>Does this TimestampData represent an unrecoverable failure?</p>
</dd></dl>

</dd></dl>

</section>
<section id="module-core.mirror">
<span id="core-mirror-module"></span><h2>core.mirror module<a class="headerlink" href="#module-core.mirror" title="Permalink to this heading">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="core.mirror.MirrorUploader">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.mirror.</span></span><span class="sig-name descname"><span class="pre">MirrorUploader</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">integration</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">host</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/mirror.html#MirrorUploader"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.mirror.MirrorUploader" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Handles the job of uploading a representation’s content to
a mirror that we control.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="core.mirror.MirrorUploader.IMPLEMENTATION_REGISTRY">
<span class="sig-name descname"><span class="pre">IMPLEMENTATION_REGISTRY</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">{'Amazon</span> <span class="pre">S3':</span> <span class="pre">&lt;class</span> <span class="pre">'core.s3.S3Uploader'&gt;,</span> <span class="pre">'LCP':</span> <span class="pre">&lt;class</span> <span class="pre">'api.lcp.mirror.LCPMirror'&gt;,</span> <span class="pre">'MinIO':</span> <span class="pre">&lt;class</span> <span class="pre">'core.s3.MinIOUploader'&gt;}</span></em><a class="headerlink" href="#core.mirror.MirrorUploader.IMPLEMENTATION_REGISTRY" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.mirror.MirrorUploader.STORAGE_GOAL">
<span class="sig-name descname"><span class="pre">STORAGE_GOAL</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'storage'</span></em><a class="headerlink" href="#core.mirror.MirrorUploader.STORAGE_GOAL" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.mirror.MirrorUploader.book_url">
<span class="sig-name descname"><span class="pre">book_url</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">identifier</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">extension</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'.epub'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">open_access</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data_source</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">title</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/mirror.html#MirrorUploader.book_url"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.mirror.MirrorUploader.book_url" title="Permalink to this definition">¶</a></dt>
<dd><p>The URL of the hosted EPUB file for the given identifier.</p>
<p>This does not upload anything to the URL, but it is expected
that calling mirror() on a certain Representation object will
make that representation end up at that URL.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.mirror.MirrorUploader.cover_image_url">
<span class="sig-name descname"><span class="pre">cover_image_url</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data_source</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">identifier</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filename</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scaled_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/mirror.html#MirrorUploader.cover_image_url"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.mirror.MirrorUploader.cover_image_url" title="Permalink to this definition">¶</a></dt>
<dd><p>The URL of the hosted cover image for the given identifier.</p>
<p>This does not upload anything to the URL, but it is expected
that calling mirror() on a certain Representation object will
make that representation end up at that URL.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.mirror.MirrorUploader.do_upload">
<span class="sig-name descname"><span class="pre">do_upload</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">representation</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/mirror.html#MirrorUploader.do_upload"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.mirror.MirrorUploader.do_upload" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.mirror.MirrorUploader.for_collection">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">for_collection</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">collection</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">purpose</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/mirror.html#MirrorUploader.for_collection"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.mirror.MirrorUploader.for_collection" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a MirrorUploader for the given Collection.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>collection</strong> – Use the mirror configuration for this Collection.</p></li>
<li><p><strong>purpose</strong> – Use the purpose of the mirror configuration.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A MirrorUploader, or None if the Collection has no
mirror integration.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.mirror.MirrorUploader.implementation">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">implementation</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">integration</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/mirror.html#MirrorUploader.implementation"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.mirror.MirrorUploader.implementation" title="Permalink to this definition">¶</a></dt>
<dd><p>Instantiate the appropriate implementation of MirrorUploader
for the given ExternalIntegration.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.mirror.MirrorUploader.integration_by_name">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">integration_by_name</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">storage_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/mirror.html#MirrorUploader.integration_by_name"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.mirror.MirrorUploader.integration_by_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Find the ExternalIntegration for the mirror by storage name.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.mirror.MirrorUploader.is_self_url">
<span class="sig-name descname"><span class="pre">is_self_url</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">url</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/mirror.html#MirrorUploader.is_self_url"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.mirror.MirrorUploader.is_self_url" title="Permalink to this definition">¶</a></dt>
<dd><p>Determines whether the URL has the mirror’s host or a custom domain</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>url</strong> (<em>string</em>) – The URL</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Boolean value indicating whether the URL has the mirror’s host or a custom domain</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.mirror.MirrorUploader.mirror">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">mirror</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">storage_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">integration</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/mirror.html#MirrorUploader.mirror"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.mirror.MirrorUploader.mirror" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a MirrorUploader from an integration or storage name.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>storage_name</strong> – The name of the storage integration.</p></li>
<li><p><strong>integration</strong> – The external integration.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A MirrorUploader.</p>
</dd>
<dt class="field-odd">Raise<span class="colon">:</span></dt>
<dd class="field-odd"><p>CannotLoadConfiguration if no integration with
goal==STORAGE_GOAL is configured.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.mirror.MirrorUploader.mirror_batch">
<span class="sig-name descname"><span class="pre">mirror_batch</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">representations</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/mirror.html#MirrorUploader.mirror_batch"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.mirror.MirrorUploader.mirror_batch" title="Permalink to this definition">¶</a></dt>
<dd><p>Mirror a batch of Representations at once.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.mirror.MirrorUploader.mirror_one">
<span class="sig-name descname"><span class="pre">mirror_one</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">representation</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mirror_to</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">collection</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/mirror.html#MirrorUploader.mirror_one"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.mirror.MirrorUploader.mirror_one" title="Permalink to this definition">¶</a></dt>
<dd><p>Mirror a single Representation.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>representation</strong> (<a class="reference internal" href="core.model.html#core.model.resource.Representation" title="core.model.resource.Representation"><em>Representation</em></a>) – Book’s representation</p></li>
<li><p><strong>mirror_to</strong> (<em>string</em>) – Mirror URL</p></li>
<li><p><strong>collection</strong> (<em>Optional</em><em>[</em><a class="reference internal" href="core.model.html#core.model.collection.Collection" title="core.model.collection.Collection"><em>core.model.collection.Collection</em></a><em>]</em>) – Collection</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.mirror.MirrorUploader.sign_url">
<span class="sig-name descname"><span class="pre">sign_url</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">url</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">expiration</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/mirror.html#MirrorUploader.sign_url"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.mirror.MirrorUploader.sign_url" title="Permalink to this definition">¶</a></dt>
<dd><p>Signs a URL and make it expirable</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>url</strong> (<em>string</em>) – URL</p></li>
<li><p><strong>expiration</strong> (<em>int</em>) – (Optional) Time in seconds for the presigned URL to remain valid.
Default value depends on a specific implementation</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Signed expirable link</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>string</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.mirror.MirrorUploader.split_url">
<em class="property"><span class="pre">abstract</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">split_url</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">url</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">unquote</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/mirror.html#MirrorUploader.split_url"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.mirror.MirrorUploader.split_url" title="Permalink to this definition">¶</a></dt>
<dd><p>Splits the URL into the components: container (bucket) and file path</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>url</strong> (<em>string</em>) – URL</p></li>
<li><p><strong>unquote</strong> (<em>bool</em>) – Boolean value indicating whether it’s required to unquote URL elements</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Tuple (bucket, file path)</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Tuple[string, string]</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="module-core.mock_analytics_provider">
<span id="core-mock-analytics-provider-module"></span><h2>core.mock_analytics_provider module<a class="headerlink" href="#module-core.mock_analytics_provider" title="Permalink to this heading">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="core.mock_analytics_provider.MockAnalyticsProvider">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.mock_analytics_provider.</span></span><span class="sig-name descname"><span class="pre">MockAnalyticsProvider</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">integration</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">library</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/mock_analytics_provider.html#MockAnalyticsProvider"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.mock_analytics_provider.MockAnalyticsProvider" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>A mock analytics provider that keeps track of how many times it’s called.</p>
<dl class="py method">
<dt class="sig sig-object py" id="core.mock_analytics_provider.MockAnalyticsProvider.collect_event">
<span class="sig-name descname"><span class="pre">collect_event</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">library</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lp</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">event_type</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">time</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/mock_analytics_provider.html#MockAnalyticsProvider.collect_event"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.mock_analytics_provider.MockAnalyticsProvider.collect_event" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.mock_analytics_provider.Provider">
<span class="sig-prename descclassname"><span class="pre">core.mock_analytics_provider.</span></span><span class="sig-name descname"><span class="pre">Provider</span></span><a class="headerlink" href="#core.mock_analytics_provider.Provider" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <a class="reference internal" href="#core.mock_analytics_provider.MockAnalyticsProvider" title="core.mock_analytics_provider.MockAnalyticsProvider"><code class="xref py py-class docutils literal notranslate"><span class="pre">MockAnalyticsProvider</span></code></a></p>
</dd></dl>

</section>
<section id="module-core.monitor">
<span id="core-monitor-module"></span><h2>core.monitor module<a class="headerlink" href="#module-core.monitor" title="Permalink to this heading">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="core.monitor.CachedFeedReaper">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.monitor.</span></span><span class="sig-name descname"><span class="pre">CachedFeedReaper</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/monitor.html#CachedFeedReaper"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.monitor.CachedFeedReaper" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.monitor.ReaperMonitor" title="core.monitor.ReaperMonitor"><code class="xref py py-class docutils literal notranslate"><span class="pre">ReaperMonitor</span></code></a></p>
<p>Removed cached feeds older than thirty days.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="core.monitor.CachedFeedReaper.MAX_AGE">
<span class="sig-name descname"><span class="pre">MAX_AGE</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">30</span></em><a class="headerlink" href="#core.monitor.CachedFeedReaper.MAX_AGE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.monitor.CachedFeedReaper.MODEL_CLASS">
<span class="sig-name descname"><span class="pre">MODEL_CLASS</span></span><a class="headerlink" href="#core.monitor.CachedFeedReaper.MODEL_CLASS" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <a class="reference internal" href="core.model.html#core.model.cachedfeed.CachedFeed" title="core.model.cachedfeed.CachedFeed"><code class="xref py py-class docutils literal notranslate"><span class="pre">CachedFeed</span></code></a></p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.monitor.CachedFeedReaper.TIMESTAMP_FIELD">
<span class="sig-name descname"><span class="pre">TIMESTAMP_FIELD</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'timestamp'</span></em><a class="headerlink" href="#core.monitor.CachedFeedReaper.TIMESTAMP_FIELD" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.monitor.CirculationEventLocationScrubber">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.monitor.</span></span><span class="sig-name descname"><span class="pre">CirculationEventLocationScrubber</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/monitor.html#CirculationEventLocationScrubber"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.monitor.CirculationEventLocationScrubber" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.monitor.ScrubberMonitor" title="core.monitor.ScrubberMonitor"><code class="xref py py-class docutils literal notranslate"><span class="pre">ScrubberMonitor</span></code></a></p>
<p>Scrub location information from old CirculationEvents.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="core.monitor.CirculationEventLocationScrubber.MAX_AGE">
<span class="sig-name descname"><span class="pre">MAX_AGE</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">365</span></em><a class="headerlink" href="#core.monitor.CirculationEventLocationScrubber.MAX_AGE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.monitor.CirculationEventLocationScrubber.MODEL_CLASS">
<span class="sig-name descname"><span class="pre">MODEL_CLASS</span></span><a class="headerlink" href="#core.monitor.CirculationEventLocationScrubber.MODEL_CLASS" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <a class="reference internal" href="core.model.html#core.model.circulationevent.CirculationEvent" title="core.model.circulationevent.CirculationEvent"><code class="xref py py-class docutils literal notranslate"><span class="pre">CirculationEvent</span></code></a></p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.monitor.CirculationEventLocationScrubber.SCRUB_FIELD">
<span class="sig-name descname"><span class="pre">SCRUB_FIELD</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'location'</span></em><a class="headerlink" href="#core.monitor.CirculationEventLocationScrubber.SCRUB_FIELD" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.monitor.CirculationEventLocationScrubber.TIMESTAMP_FIELD">
<span class="sig-name descname"><span class="pre">TIMESTAMP_FIELD</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'start'</span></em><a class="headerlink" href="#core.monitor.CirculationEventLocationScrubber.TIMESTAMP_FIELD" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.monitor.CollectionMonitor">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.monitor.</span></span><span class="sig-name descname"><span class="pre">CollectionMonitor</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">collection</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/monitor.html#CollectionMonitor"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.monitor.CollectionMonitor" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.monitor.Monitor" title="core.monitor.Monitor"><code class="xref py py-class docutils literal notranslate"><span class="pre">Monitor</span></code></a></p>
<p>A Monitor that does something for all Collections that come
from a certain provider.</p>
<p>This class is designed to be subclassed rather than instantiated
directly. Subclasses must define SERVICE_NAME and
PROTOCOL. Subclasses may define replacement values for
DEFAULT_START_TIME and DEFAULT_COUNTER.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="core.monitor.CollectionMonitor.PROTOCOL">
<span class="sig-name descname"><span class="pre">PROTOCOL</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#core.monitor.CollectionMonitor.PROTOCOL" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.monitor.CollectionMonitor.all">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">all</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">collections</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">constructor_kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/monitor.html#CollectionMonitor.all"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.monitor.CollectionMonitor.all" title="Permalink to this definition">¶</a></dt>
<dd><p>Yield a sequence of CollectionMonitor objects: one for every
Collection associated with cls.PROTOCOL.</p>
<p>If <cite>collections</cite> is specified, then there must be a Monitor
for each one and Monitors will be yielded in the same order
that the collections are specified. Otherwise, Monitors will
be yielded as follows…</p>
<p>Monitors that have no Timestamp will be yielded first. After
that, Monitors with older values for Timestamp.start will be
yielded before Monitors with newer values.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>_db</strong> – Database session object.</p></li>
<li><p><strong>collections</strong> (<em>List</em><em>[</em><a class="reference internal" href="core.model.html#core.model.collection.Collection" title="core.model.collection.Collection"><em>core.model.collection.Collection</em></a><em>]</em>) – An optional list of collections. If None,
we’ll process all collections.</p></li>
<li><p><strong>constructor_kwargs</strong> – These keyword arguments will be passed
into the CollectionMonitor constructor.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.monitor.CollectionMonitorLogger">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.monitor.</span></span><span class="sig-name descname"><span class="pre">CollectionMonitorLogger</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">logger</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">extra</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/monitor.html#CollectionMonitorLogger"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.monitor.CollectionMonitorLogger" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">LoggerAdapter</span></code></p>
<p>Prefix log messages with a collection, if one is present.</p>
<dl class="py method">
<dt class="sig sig-object py" id="core.monitor.CollectionMonitorLogger.process">
<span class="sig-name descname"><span class="pre">process</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">msg</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/monitor.html#CollectionMonitorLogger.process"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.monitor.CollectionMonitorLogger.process" title="Permalink to this definition">¶</a></dt>
<dd><p>Process the logging message and keyword arguments passed in to
a logging call to insert contextual information. You can either
manipulate the message itself, the keyword args or both. Return
the message and kwargs modified (or not) to suit your needs.</p>
<p>Normally, you’ll only need to override this one method in a
LoggerAdapter subclass for your specific needs.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.monitor.CollectionReaper">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.monitor.</span></span><span class="sig-name descname"><span class="pre">CollectionReaper</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/monitor.html#CollectionReaper"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.monitor.CollectionReaper" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.monitor.ReaperMonitor" title="core.monitor.ReaperMonitor"><code class="xref py py-class docutils literal notranslate"><span class="pre">ReaperMonitor</span></code></a></p>
<p>Remove collections that have been marked for deletion.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="core.monitor.CollectionReaper.MODEL_CLASS">
<span class="sig-name descname"><span class="pre">MODEL_CLASS</span></span><a class="headerlink" href="#core.monitor.CollectionReaper.MODEL_CLASS" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <a class="reference internal" href="core.model.html#core.model.collection.Collection" title="core.model.collection.Collection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Collection</span></code></a></p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.monitor.CollectionReaper.delete">
<span class="sig-name descname"><span class="pre">delete</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">collection</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/monitor.html#CollectionReaper.delete"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.monitor.CollectionReaper.delete" title="Permalink to this definition">¶</a></dt>
<dd><p>Delete a Collection from the database.</p>
<p>Database deletion of a Collection might take a really long
time, so we call a special method that will do the deletion
incrementally and can pick up where it left off if there’s a
failure.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="core.monitor.CollectionReaper.where_clause">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">where_clause</span></span><a class="headerlink" href="#core.monitor.CollectionReaper.where_clause" title="Permalink to this definition">¶</a></dt>
<dd><p>A SQLAlchemy clause that identifies the database rows to be reaped.</p>
</dd></dl>

</dd></dl>

<dl class="py exception">
<dt class="sig sig-object py" id="core.monitor.CoverageProvidersFailed">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.monitor.</span></span><span class="sig-name descname"><span class="pre">CoverageProvidersFailed</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">failed_providers</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/monitor.html#CoverageProvidersFailed"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.monitor.CoverageProvidersFailed" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">Exception</span></code></p>
<p>We tried to run CoverageProviders on a Work’s identifier,
but some of the providers failed.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.monitor.CredentialReaper">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.monitor.</span></span><span class="sig-name descname"><span class="pre">CredentialReaper</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/monitor.html#CredentialReaper"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.monitor.CredentialReaper" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.monitor.ReaperMonitor" title="core.monitor.ReaperMonitor"><code class="xref py py-class docutils literal notranslate"><span class="pre">ReaperMonitor</span></code></a></p>
<p>Remove Credentials that expired more than a day ago.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="core.monitor.CredentialReaper.MAX_AGE">
<span class="sig-name descname"><span class="pre">MAX_AGE</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">1</span></em><a class="headerlink" href="#core.monitor.CredentialReaper.MAX_AGE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.monitor.CredentialReaper.MODEL_CLASS">
<span class="sig-name descname"><span class="pre">MODEL_CLASS</span></span><a class="headerlink" href="#core.monitor.CredentialReaper.MODEL_CLASS" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <a class="reference internal" href="core.model.html#core.model.credential.Credential" title="core.model.credential.Credential"><code class="xref py py-class docutils literal notranslate"><span class="pre">Credential</span></code></a></p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.monitor.CredentialReaper.TIMESTAMP_FIELD">
<span class="sig-name descname"><span class="pre">TIMESTAMP_FIELD</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'expires'</span></em><a class="headerlink" href="#core.monitor.CredentialReaper.TIMESTAMP_FIELD" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.monitor.CustomListEntrySweepMonitor">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.monitor.</span></span><span class="sig-name descname"><span class="pre">CustomListEntrySweepMonitor</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">collection</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">batch_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/monitor.html#CustomListEntrySweepMonitor"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.monitor.CustomListEntrySweepMonitor" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.monitor.SweepMonitor" title="core.monitor.SweepMonitor"><code class="xref py py-class docutils literal notranslate"><span class="pre">SweepMonitor</span></code></a></p>
<p>A Monitor that does something to every CustomListEntry.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="core.monitor.CustomListEntrySweepMonitor.MODEL_CLASS">
<span class="sig-name descname"><span class="pre">MODEL_CLASS</span></span><a class="headerlink" href="#core.monitor.CustomListEntrySweepMonitor.MODEL_CLASS" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <a class="reference internal" href="core.model.html#core.model.customlist.CustomListEntry" title="core.model.customlist.CustomListEntry"><code class="xref py py-class docutils literal notranslate"><span class="pre">CustomListEntry</span></code></a></p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.monitor.CustomListEntrySweepMonitor.scope_to_collection">
<span class="sig-name descname"><span class="pre">scope_to_collection</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">qu</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">collection</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/monitor.html#CustomListEntrySweepMonitor.scope_to_collection"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.monitor.CustomListEntrySweepMonitor.scope_to_collection" title="Permalink to this definition">¶</a></dt>
<dd><p>Restrict the query to only find CustomListEntries whose
Work is in the given Collection.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.monitor.CustomListEntryWorkUpdateMonitor">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.monitor.</span></span><span class="sig-name descname"><span class="pre">CustomListEntryWorkUpdateMonitor</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">collection</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">batch_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/monitor.html#CustomListEntryWorkUpdateMonitor"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.monitor.CustomListEntryWorkUpdateMonitor" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.monitor.CustomListEntrySweepMonitor" title="core.monitor.CustomListEntrySweepMonitor"><code class="xref py py-class docutils literal notranslate"><span class="pre">CustomListEntrySweepMonitor</span></code></a></p>
<p>Set or reset the Work associated with each custom list entry.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="core.monitor.CustomListEntryWorkUpdateMonitor.DEFAULT_BATCH_SIZE">
<span class="sig-name descname"><span class="pre">DEFAULT_BATCH_SIZE</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">100</span></em><a class="headerlink" href="#core.monitor.CustomListEntryWorkUpdateMonitor.DEFAULT_BATCH_SIZE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.monitor.CustomListEntryWorkUpdateMonitor.SERVICE_NAME">
<span class="sig-name descname"><span class="pre">SERVICE_NAME</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'Update</span> <span class="pre">Works</span> <span class="pre">for</span> <span class="pre">custom</span> <span class="pre">list</span> <span class="pre">entries'</span></em><a class="headerlink" href="#core.monitor.CustomListEntryWorkUpdateMonitor.SERVICE_NAME" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.monitor.CustomListEntryWorkUpdateMonitor.process_item">
<span class="sig-name descname"><span class="pre">process_item</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">item</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/monitor.html#CustomListEntryWorkUpdateMonitor.process_item"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.monitor.CustomListEntryWorkUpdateMonitor.process_item" title="Permalink to this definition">¶</a></dt>
<dd><p>Do the work that needs to be done for a given item.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.monitor.EditionSweepMonitor">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.monitor.</span></span><span class="sig-name descname"><span class="pre">EditionSweepMonitor</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">collection</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">batch_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/monitor.html#EditionSweepMonitor"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.monitor.EditionSweepMonitor" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.monitor.SweepMonitor" title="core.monitor.SweepMonitor"><code class="xref py py-class docutils literal notranslate"><span class="pre">SweepMonitor</span></code></a></p>
<p>A Monitor that does something to every Edition.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="core.monitor.EditionSweepMonitor.MODEL_CLASS">
<span class="sig-name descname"><span class="pre">MODEL_CLASS</span></span><a class="headerlink" href="#core.monitor.EditionSweepMonitor.MODEL_CLASS" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <a class="reference internal" href="core.model.html#core.model.edition.Edition" title="core.model.edition.Edition"><code class="xref py py-class docutils literal notranslate"><span class="pre">Edition</span></code></a></p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.monitor.EditionSweepMonitor.scope_to_collection">
<span class="sig-name descname"><span class="pre">scope_to_collection</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">qu</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">collection</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/monitor.html#EditionSweepMonitor.scope_to_collection"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.monitor.EditionSweepMonitor.scope_to_collection" title="Permalink to this definition">¶</a></dt>
<dd><p>Restrict the query to only find Editions whose
primary Identifier is licensed to the given Collection.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.monitor.IdentifierSweepMonitor">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.monitor.</span></span><span class="sig-name descname"><span class="pre">IdentifierSweepMonitor</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">collection</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">batch_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/monitor.html#IdentifierSweepMonitor"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.monitor.IdentifierSweepMonitor" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.monitor.SweepMonitor" title="core.monitor.SweepMonitor"><code class="xref py py-class docutils literal notranslate"><span class="pre">SweepMonitor</span></code></a></p>
<p>A Monitor that does some work for every Identifier.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="core.monitor.IdentifierSweepMonitor.MODEL_CLASS">
<span class="sig-name descname"><span class="pre">MODEL_CLASS</span></span><a class="headerlink" href="#core.monitor.IdentifierSweepMonitor.MODEL_CLASS" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <a class="reference internal" href="core.model.html#core.model.identifier.Identifier" title="core.model.identifier.Identifier"><code class="xref py py-class docutils literal notranslate"><span class="pre">Identifier</span></code></a></p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.monitor.IdentifierSweepMonitor.scope_to_collection">
<span class="sig-name descname"><span class="pre">scope_to_collection</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">qu</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">collection</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/monitor.html#IdentifierSweepMonitor.scope_to_collection"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.monitor.IdentifierSweepMonitor.scope_to_collection" title="Permalink to this definition">¶</a></dt>
<dd><p>Only find Identifiers licensed through the given Collection.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.monitor.MakePresentationReadyMonitor">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.monitor.</span></span><span class="sig-name descname"><span class="pre">MakePresentationReadyMonitor</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">coverage_providers</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">collection</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/monitor.html#MakePresentationReadyMonitor"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.monitor.MakePresentationReadyMonitor" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.monitor.NotPresentationReadyWorkSweepMonitor" title="core.monitor.NotPresentationReadyWorkSweepMonitor"><code class="xref py py-class docutils literal notranslate"><span class="pre">NotPresentationReadyWorkSweepMonitor</span></code></a></p>
<p>A monitor that makes works presentation ready.</p>
<p>By default this works by passing the work’s active edition into
ensure_coverage() for each of a list of CoverageProviders. If all
the ensure_coverage() calls succeed, presentation of the work is
calculated and the work is marked presentation ready.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="core.monitor.MakePresentationReadyMonitor.SERVICE_NAME">
<span class="sig-name descname"><span class="pre">SERVICE_NAME</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'Make</span> <span class="pre">Works</span> <span class="pre">Presentation</span> <span class="pre">Ready'</span></em><a class="headerlink" href="#core.monitor.MakePresentationReadyMonitor.SERVICE_NAME" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.monitor.MakePresentationReadyMonitor.prepare">
<span class="sig-name descname"><span class="pre">prepare</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">work</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/monitor.html#MakePresentationReadyMonitor.prepare"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.monitor.MakePresentationReadyMonitor.prepare" title="Permalink to this definition">¶</a></dt>
<dd><p>Try to make a single Work presentation-ready.</p>
<dl class="field-list simple">
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#core.monitor.CoverageProvidersFailed" title="core.monitor.CoverageProvidersFailed"><strong>CoverageProvidersFailed</strong></a> – If we can’t make a Work
presentation-ready because one or more CoverageProviders
failed.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.monitor.MakePresentationReadyMonitor.process_item">
<span class="sig-name descname"><span class="pre">process_item</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">work</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/monitor.html#MakePresentationReadyMonitor.process_item"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.monitor.MakePresentationReadyMonitor.process_item" title="Permalink to this definition">¶</a></dt>
<dd><p>Do the work necessary to make one Work presentation-ready,
and handle exceptions.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.monitor.MakePresentationReadyMonitor.run">
<span class="sig-name descname"><span class="pre">run</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/monitor.html#MakePresentationReadyMonitor.run"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.monitor.MakePresentationReadyMonitor.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Before doing anything, consolidate works.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.monitor.MeasurementReaper">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.monitor.</span></span><span class="sig-name descname"><span class="pre">MeasurementReaper</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/monitor.html#MeasurementReaper"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.monitor.MeasurementReaper" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.monitor.ReaperMonitor" title="core.monitor.ReaperMonitor"><code class="xref py py-class docutils literal notranslate"><span class="pre">ReaperMonitor</span></code></a></p>
<p>Remove measurements that are not the most recent</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="core.monitor.MeasurementReaper.MODEL_CLASS">
<span class="sig-name descname"><span class="pre">MODEL_CLASS</span></span><a class="headerlink" href="#core.monitor.MeasurementReaper.MODEL_CLASS" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <a class="reference internal" href="core.model.html#core.model.measurement.Measurement" title="core.model.measurement.Measurement"><code class="xref py py-class docutils literal notranslate"><span class="pre">Measurement</span></code></a></p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.monitor.MeasurementReaper.run">
<span class="sig-name descname"><span class="pre">run</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/monitor.html#MeasurementReaper.run"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.monitor.MeasurementReaper.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Do all the work that has piled up since the
last time the Monitor ran to completion.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.monitor.MeasurementReaper.run_once">
<span class="sig-name descname"><span class="pre">run_once</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/monitor.html#MeasurementReaper.run_once"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.monitor.MeasurementReaper.run_once" title="Permalink to this definition">¶</a></dt>
<dd><p>Do the actual work of the Monitor.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>progress</strong> – A TimestampData representing the
work done by the Monitor up to this point.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A TimestampData representing how you want the
Monitor’s entry in the <cite>timestamps</cite> table to look like
from this point on.  NOTE: Modifying the incoming
<cite>progress</cite> and returning it is generally a bad idea,
because the incoming <cite>progress</cite> is full of old
data. Instead, return a new TimestampData containing data
for only the fields you want to set.</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="core.monitor.MeasurementReaper.where_clause">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">where_clause</span></span><a class="headerlink" href="#core.monitor.MeasurementReaper.where_clause" title="Permalink to this definition">¶</a></dt>
<dd><p>A SQLAlchemy clause that identifies the database rows to be reaped.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.monitor.Monitor">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.monitor.</span></span><span class="sig-name descname"><span class="pre">Monitor</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">collection</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/monitor.html#Monitor"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.monitor.Monitor" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>A Monitor is responsible for running some piece of code on a
regular basis. A Monitor has an associated Timestamp that tracks
the last time it successfully ran; it may use this information on
its next run to cover the intervening span of time.</p>
<p>A Monitor will run to completion and then stop. To repeatedly run
a Monitor, you’ll need to repeatedly invoke it from some external
source such as a cron job.</p>
<p>This class is designed to be subclassed rather than instantiated
directly. Subclasses must define SERVICE_NAME. Subclasses may
define replacement values for DEFAULT_START_TIME and
DEFAULT_COUNTER.</p>
<p>Although any Monitor may be associated with a Collection, it’s
most useful to subclass CollectionMonitor if you’re writing code
that needs to be run on every Collection of a certain type.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="core.monitor.Monitor.DEFAULT_COUNTER">
<span class="sig-name descname"><span class="pre">DEFAULT_COUNTER</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#core.monitor.Monitor.DEFAULT_COUNTER" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.monitor.Monitor.DEFAULT_START_TIME">
<span class="sig-name descname"><span class="pre">DEFAULT_START_TIME</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">datetime.timedelta(seconds=60)</span></em><a class="headerlink" href="#core.monitor.Monitor.DEFAULT_START_TIME" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.monitor.Monitor.NEVER">
<span class="sig-name descname"><span class="pre">NEVER</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">&lt;object</span> <span class="pre">object&gt;</span></em><a class="headerlink" href="#core.monitor.Monitor.NEVER" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.monitor.Monitor.ONE_MINUTE_AGO">
<span class="sig-name descname"><span class="pre">ONE_MINUTE_AGO</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">datetime.timedelta(seconds=60)</span></em><a class="headerlink" href="#core.monitor.Monitor.ONE_MINUTE_AGO" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.monitor.Monitor.ONE_YEAR_AGO">
<span class="sig-name descname"><span class="pre">ONE_YEAR_AGO</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">datetime.timedelta(days=365)</span></em><a class="headerlink" href="#core.monitor.Monitor.ONE_YEAR_AGO" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.monitor.Monitor.SERVICE_NAME">
<span class="sig-name descname"><span class="pre">SERVICE_NAME</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#core.monitor.Monitor.SERVICE_NAME" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.monitor.Monitor.cleanup">
<span class="sig-name descname"><span class="pre">cleanup</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/monitor.html#Monitor.cleanup"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.monitor.Monitor.cleanup" title="Permalink to this definition">¶</a></dt>
<dd><p>Do any work that needs to be done at the end, once the main work
has completed successfully.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="core.monitor.Monitor.collection">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">collection</span></span><a class="headerlink" href="#core.monitor.Monitor.collection" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve the Collection object associated with this
Monitor.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="core.monitor.Monitor.initial_start_time">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">initial_start_time</span></span><a class="headerlink" href="#core.monitor.Monitor.initial_start_time" title="Permalink to this definition">¶</a></dt>
<dd><p>The time that should be used as the ‘start time’ the first
time this Monitor is run.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="core.monitor.Monitor.log">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">log</span></span><a class="headerlink" href="#core.monitor.Monitor.log" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.monitor.Monitor.run">
<span class="sig-name descname"><span class="pre">run</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/monitor.html#Monitor.run"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.monitor.Monitor.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Do all the work that has piled up since the
last time the Monitor ran to completion.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.monitor.Monitor.run_once">
<span class="sig-name descname"><span class="pre">run_once</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">progress</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/monitor.html#Monitor.run_once"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.monitor.Monitor.run_once" title="Permalink to this definition">¶</a></dt>
<dd><p>Do the actual work of the Monitor.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>progress</strong> – A TimestampData representing the
work done by the Monitor up to this point.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A TimestampData representing how you want the
Monitor’s entry in the <cite>timestamps</cite> table to look like
from this point on.  NOTE: Modifying the incoming
<cite>progress</cite> and returning it is generally a bad idea,
because the incoming <cite>progress</cite> is full of old
data. Instead, return a new TimestampData containing data
for only the fields you want to set.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.monitor.Monitor.timestamp">
<span class="sig-name descname"><span class="pre">timestamp</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/monitor.html#Monitor.timestamp"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.monitor.Monitor.timestamp" title="Permalink to this definition">¶</a></dt>
<dd><p>Find or create a Timestamp for this Monitor.</p>
<p>This does not use TimestampData because it relies on checking
whether a Timestamp already exists in the database.</p>
<p>A new timestamp will have .finish set to None, since the first
run is presumably in progress.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.monitor.NotPresentationReadyWorkSweepMonitor">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.monitor.</span></span><span class="sig-name descname"><span class="pre">NotPresentationReadyWorkSweepMonitor</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">collection</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">batch_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/monitor.html#NotPresentationReadyWorkSweepMonitor"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.monitor.NotPresentationReadyWorkSweepMonitor" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.monitor.WorkSweepMonitor" title="core.monitor.WorkSweepMonitor"><code class="xref py py-class docutils literal notranslate"><span class="pre">WorkSweepMonitor</span></code></a></p>
<p>A Monitor that does something to every Work that is not
presentation-ready.</p>
<dl class="py method">
<dt class="sig sig-object py" id="core.monitor.NotPresentationReadyWorkSweepMonitor.item_query">
<span class="sig-name descname"><span class="pre">item_query</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/monitor.html#NotPresentationReadyWorkSweepMonitor.item_query"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.monitor.NotPresentationReadyWorkSweepMonitor.item_query" title="Permalink to this definition">¶</a></dt>
<dd><p>Find the items that need to be processed in the sweep.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>A query object.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.monitor.OPDSEntryCacheMonitor">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.monitor.</span></span><span class="sig-name descname"><span class="pre">OPDSEntryCacheMonitor</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">collection</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">batch_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/monitor.html#OPDSEntryCacheMonitor"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.monitor.OPDSEntryCacheMonitor" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.monitor.PresentationReadyWorkSweepMonitor" title="core.monitor.PresentationReadyWorkSweepMonitor"><code class="xref py py-class docutils literal notranslate"><span class="pre">PresentationReadyWorkSweepMonitor</span></code></a></p>
<p>A Monitor that recalculates the OPDS entries for every
presentation-ready Work.</p>
<p>This is different from the OPDSEntryWorkCoverageProvider,
which only processes works that are missing a WorkCoverageRecord
with the ‘generate-opds’ operation.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="core.monitor.OPDSEntryCacheMonitor.SERVICE_NAME">
<span class="sig-name descname"><span class="pre">SERVICE_NAME</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'ODPS</span> <span class="pre">Entry</span> <span class="pre">Cache</span> <span class="pre">Monitor'</span></em><a class="headerlink" href="#core.monitor.OPDSEntryCacheMonitor.SERVICE_NAME" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.monitor.OPDSEntryCacheMonitor.process_item">
<span class="sig-name descname"><span class="pre">process_item</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">work</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/monitor.html#OPDSEntryCacheMonitor.process_item"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.monitor.OPDSEntryCacheMonitor.process_item" title="Permalink to this definition">¶</a></dt>
<dd><p>Do the work that needs to be done for a given item.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.monitor.PatronNeighborhoodScrubber">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.monitor.</span></span><span class="sig-name descname"><span class="pre">PatronNeighborhoodScrubber</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/monitor.html#PatronNeighborhoodScrubber"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.monitor.PatronNeighborhoodScrubber" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.monitor.ScrubberMonitor" title="core.monitor.ScrubberMonitor"><code class="xref py py-class docutils literal notranslate"><span class="pre">ScrubberMonitor</span></code></a></p>
<p>Scrub cached neighborhood information from patrons who haven’t been
seen in a while.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="core.monitor.PatronNeighborhoodScrubber.MAX_AGE">
<span class="sig-name descname"><span class="pre">MAX_AGE</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">datetime.timedelta(seconds=43200)</span></em><a class="headerlink" href="#core.monitor.PatronNeighborhoodScrubber.MAX_AGE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.monitor.PatronNeighborhoodScrubber.MODEL_CLASS">
<span class="sig-name descname"><span class="pre">MODEL_CLASS</span></span><a class="headerlink" href="#core.monitor.PatronNeighborhoodScrubber.MODEL_CLASS" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <a class="reference internal" href="core.model.html#core.model.patron.Patron" title="core.model.patron.Patron"><code class="xref py py-class docutils literal notranslate"><span class="pre">Patron</span></code></a></p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.monitor.PatronNeighborhoodScrubber.SCRUB_FIELD">
<span class="sig-name descname"><span class="pre">SCRUB_FIELD</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'cached_neighborhood'</span></em><a class="headerlink" href="#core.monitor.PatronNeighborhoodScrubber.SCRUB_FIELD" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.monitor.PatronNeighborhoodScrubber.TIMESTAMP_FIELD">
<span class="sig-name descname"><span class="pre">TIMESTAMP_FIELD</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'last_external_sync'</span></em><a class="headerlink" href="#core.monitor.PatronNeighborhoodScrubber.TIMESTAMP_FIELD" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.monitor.PatronRecordReaper">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.monitor.</span></span><span class="sig-name descname"><span class="pre">PatronRecordReaper</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/monitor.html#PatronRecordReaper"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.monitor.PatronRecordReaper" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.monitor.ReaperMonitor" title="core.monitor.ReaperMonitor"><code class="xref py py-class docutils literal notranslate"><span class="pre">ReaperMonitor</span></code></a></p>
<p>Remove patron records that expired more than 60 days ago</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="core.monitor.PatronRecordReaper.MAX_AGE">
<span class="sig-name descname"><span class="pre">MAX_AGE</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">60</span></em><a class="headerlink" href="#core.monitor.PatronRecordReaper.MAX_AGE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.monitor.PatronRecordReaper.MODEL_CLASS">
<span class="sig-name descname"><span class="pre">MODEL_CLASS</span></span><a class="headerlink" href="#core.monitor.PatronRecordReaper.MODEL_CLASS" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <a class="reference internal" href="core.model.html#core.model.patron.Patron" title="core.model.patron.Patron"><code class="xref py py-class docutils literal notranslate"><span class="pre">Patron</span></code></a></p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.monitor.PatronRecordReaper.TIMESTAMP_FIELD">
<span class="sig-name descname"><span class="pre">TIMESTAMP_FIELD</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'authorization_expires'</span></em><a class="headerlink" href="#core.monitor.PatronRecordReaper.TIMESTAMP_FIELD" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.monitor.PermanentWorkIDRefreshMonitor">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.monitor.</span></span><span class="sig-name descname"><span class="pre">PermanentWorkIDRefreshMonitor</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">collection</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">batch_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/monitor.html#PermanentWorkIDRefreshMonitor"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.monitor.PermanentWorkIDRefreshMonitor" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.monitor.EditionSweepMonitor" title="core.monitor.EditionSweepMonitor"><code class="xref py py-class docutils literal notranslate"><span class="pre">EditionSweepMonitor</span></code></a></p>
<p>A monitor that calculates or recalculates the permanent work ID for
every edition.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="core.monitor.PermanentWorkIDRefreshMonitor.SERVICE_NAME">
<span class="sig-name descname"><span class="pre">SERVICE_NAME</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'Permanent</span> <span class="pre">work</span> <span class="pre">ID</span> <span class="pre">refresh'</span></em><a class="headerlink" href="#core.monitor.PermanentWorkIDRefreshMonitor.SERVICE_NAME" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.monitor.PermanentWorkIDRefreshMonitor.process_item">
<span class="sig-name descname"><span class="pre">process_item</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">edition</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/monitor.html#PermanentWorkIDRefreshMonitor.process_item"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.monitor.PermanentWorkIDRefreshMonitor.process_item" title="Permalink to this definition">¶</a></dt>
<dd><p>Do the work that needs to be done for a given item.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.monitor.PresentationReadyWorkSweepMonitor">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.monitor.</span></span><span class="sig-name descname"><span class="pre">PresentationReadyWorkSweepMonitor</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">collection</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">batch_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/monitor.html#PresentationReadyWorkSweepMonitor"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.monitor.PresentationReadyWorkSweepMonitor" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.monitor.WorkSweepMonitor" title="core.monitor.WorkSweepMonitor"><code class="xref py py-class docutils literal notranslate"><span class="pre">WorkSweepMonitor</span></code></a></p>
<p>A Monitor that does something to every presentation-ready Work.</p>
<dl class="py method">
<dt class="sig sig-object py" id="core.monitor.PresentationReadyWorkSweepMonitor.item_query">
<span class="sig-name descname"><span class="pre">item_query</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/monitor.html#PresentationReadyWorkSweepMonitor.item_query"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.monitor.PresentationReadyWorkSweepMonitor.item_query" title="Permalink to this definition">¶</a></dt>
<dd><p>Find the items that need to be processed in the sweep.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>A query object.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.monitor.ReaperMonitor">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.monitor.</span></span><span class="sig-name descname"><span class="pre">ReaperMonitor</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/monitor.html#ReaperMonitor"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.monitor.ReaperMonitor" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.monitor.Monitor" title="core.monitor.Monitor"><code class="xref py py-class docutils literal notranslate"><span class="pre">Monitor</span></code></a></p>
<p>A Monitor that deletes database rows that have expired but
have no other process to delete them.</p>
<p>A subclass of ReaperMonitor MUST define values for the following
constants:
* MODEL_CLASS - The model class this monitor is reaping, e.g. Credential.
* TIMESTAMP_FIELD - Within the model class, the DateTime field to be
used when deciding which rows to deleting,
e.g. ‘expires’. The reaper will be more efficient if there’s
an index on this field.
* MAX_AGE - A datetime.timedelta or number of days representing
the time that must pass before an item can be safely deleted.</p>
<p>A subclass of ReaperMonitor MAY define values for the following constants:
* BATCH_SIZE - The number of rows to fetch for deletion in a single
batch. The default is 1000.</p>
<p>If your model class has fields that might contain a lot of data
and aren’t important to the reaping process, put their field names
into a list called LARGE_FIELDS and the Reaper will avoid fetching
that information, improving performance.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="core.monitor.ReaperMonitor.BATCH_SIZE">
<span class="sig-name descname"><span class="pre">BATCH_SIZE</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">1000</span></em><a class="headerlink" href="#core.monitor.ReaperMonitor.BATCH_SIZE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.monitor.ReaperMonitor.MAX_AGE">
<span class="sig-name descname"><span class="pre">MAX_AGE</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#core.monitor.ReaperMonitor.MAX_AGE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.monitor.ReaperMonitor.MODEL_CLASS">
<span class="sig-name descname"><span class="pre">MODEL_CLASS</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#core.monitor.ReaperMonitor.MODEL_CLASS" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.monitor.ReaperMonitor.REGISTRY">
<span class="sig-name descname"><span class="pre">REGISTRY</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">[&lt;class</span> <span class="pre">'core.monitor.CachedFeedReaper'&gt;,</span> <span class="pre">&lt;class</span> <span class="pre">'core.monitor.CredentialReaper'&gt;,</span> <span class="pre">&lt;class</span> <span class="pre">'core.monitor.WorkReaper'&gt;,</span> <span class="pre">&lt;class</span> <span class="pre">'core.monitor.CollectionReaper'&gt;,</span> <span class="pre">&lt;class</span> <span class="pre">'core.monitor.MeasurementReaper'&gt;,</span> <span class="pre">&lt;class</span> <span class="pre">'core.monitor.CirculationEventLocationScrubber'&gt;,</span> <span class="pre">&lt;class</span> <span class="pre">'core.monitor.PatronNeighborhoodScrubber'&gt;,</span> <span class="pre">&lt;class</span> <span class="pre">'api.monitor.LoanReaper'&gt;,</span> <span class="pre">&lt;class</span> <span class="pre">'api.monitor.HoldReaper'&gt;,</span> <span class="pre">&lt;class</span> <span class="pre">'api.monitor.IdlingAnnotationReaper'&gt;]</span></em><a class="headerlink" href="#core.monitor.ReaperMonitor.REGISTRY" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.monitor.ReaperMonitor.TIMESTAMP_FIELD">
<span class="sig-name descname"><span class="pre">TIMESTAMP_FIELD</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#core.monitor.ReaperMonitor.TIMESTAMP_FIELD" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="core.monitor.ReaperMonitor.cutoff">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">cutoff</span></span><a class="headerlink" href="#core.monitor.ReaperMonitor.cutoff" title="Permalink to this definition">¶</a></dt>
<dd><p>Items with a timestamp earlier than this time will be reaped.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.monitor.ReaperMonitor.delete">
<span class="sig-name descname"><span class="pre">delete</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">row</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/monitor.html#ReaperMonitor.delete"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.monitor.ReaperMonitor.delete" title="Permalink to this definition">¶</a></dt>
<dd><p>Delete a row from the database.</p>
<p>CAUTION: If you override this method such that it doesn’t
actually delete the database row, then run_once() may enter an
infinite loop.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.monitor.ReaperMonitor.query">
<span class="sig-name descname"><span class="pre">query</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/monitor.html#ReaperMonitor.query"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.monitor.ReaperMonitor.query" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.monitor.ReaperMonitor.run_once">
<span class="sig-name descname"><span class="pre">run_once</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/monitor.html#ReaperMonitor.run_once"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.monitor.ReaperMonitor.run_once" title="Permalink to this definition">¶</a></dt>
<dd><p>Do the actual work of the Monitor.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>progress</strong> – A TimestampData representing the
work done by the Monitor up to this point.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A TimestampData representing how you want the
Monitor’s entry in the <cite>timestamps</cite> table to look like
from this point on.  NOTE: Modifying the incoming
<cite>progress</cite> and returning it is generally a bad idea,
because the incoming <cite>progress</cite> is full of old
data. Instead, return a new TimestampData containing data
for only the fields you want to set.</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="core.monitor.ReaperMonitor.timestamp_field">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">timestamp_field</span></span><a class="headerlink" href="#core.monitor.ReaperMonitor.timestamp_field" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="core.monitor.ReaperMonitor.where_clause">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">where_clause</span></span><a class="headerlink" href="#core.monitor.ReaperMonitor.where_clause" title="Permalink to this definition">¶</a></dt>
<dd><p>A SQLAlchemy clause that identifies the database rows to be reaped.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.monitor.ScrubberMonitor">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.monitor.</span></span><span class="sig-name descname"><span class="pre">ScrubberMonitor</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/monitor.html#ScrubberMonitor"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.monitor.ScrubberMonitor" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.monitor.ReaperMonitor" title="core.monitor.ReaperMonitor"><code class="xref py py-class docutils literal notranslate"><span class="pre">ReaperMonitor</span></code></a></p>
<p>Scrub information from the database.</p>
<p>Unlike the other ReaperMonitors, this class doesn’t delete rows
from the database – it only clears out specific data fields.</p>
<p>In addition to the constants required for ReaperMonitor, a
subclass of ScrubberMonitor MUST define a value for the following
constant:</p>
<ul class="simple">
<li><p>SCRUB_FIELD - The field whose value will be set to None when a row
is scrubbed.</p></li>
</ul>
<dl class="py method">
<dt class="sig sig-object py" id="core.monitor.ScrubberMonitor.run_once">
<span class="sig-name descname"><span class="pre">run_once</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/monitor.html#ScrubberMonitor.run_once"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.monitor.ScrubberMonitor.run_once" title="Permalink to this definition">¶</a></dt>
<dd><p>Find all rows that need to be scrubbed, and scrub them.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="core.monitor.ScrubberMonitor.scrub_field">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">scrub_field</span></span><a class="headerlink" href="#core.monitor.ScrubberMonitor.scrub_field" title="Permalink to this definition">¶</a></dt>
<dd><p>Find the SQLAlchemy representation of the model field to be
scrubbed.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="core.monitor.ScrubberMonitor.where_clause">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">where_clause</span></span><a class="headerlink" href="#core.monitor.ScrubberMonitor.where_clause" title="Permalink to this definition">¶</a></dt>
<dd><p>Find rows that are older than MAX_AGE _and_ which have a non-null
SCRUB_FIELD. If the field is already null, there’s no need to
scrub it.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.monitor.SubjectSweepMonitor">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.monitor.</span></span><span class="sig-name descname"><span class="pre">SubjectSweepMonitor</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">subject_type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filter_string</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/monitor.html#SubjectSweepMonitor"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.monitor.SubjectSweepMonitor" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.monitor.SweepMonitor" title="core.monitor.SweepMonitor"><code class="xref py py-class docutils literal notranslate"><span class="pre">SweepMonitor</span></code></a></p>
<p>A Monitor that does some work for every Subject.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="core.monitor.SubjectSweepMonitor.DEFAULT_BATCH_SIZE">
<span class="sig-name descname"><span class="pre">DEFAULT_BATCH_SIZE</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">500</span></em><a class="headerlink" href="#core.monitor.SubjectSweepMonitor.DEFAULT_BATCH_SIZE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.monitor.SubjectSweepMonitor.MODEL_CLASS">
<span class="sig-name descname"><span class="pre">MODEL_CLASS</span></span><a class="headerlink" href="#core.monitor.SubjectSweepMonitor.MODEL_CLASS" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <a class="reference internal" href="core.model.html#core.model.classification.Subject" title="core.model.classification.Subject"><code class="xref py py-class docutils literal notranslate"><span class="pre">Subject</span></code></a></p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.monitor.SubjectSweepMonitor.item_query">
<span class="sig-name descname"><span class="pre">item_query</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/monitor.html#SubjectSweepMonitor.item_query"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.monitor.SubjectSweepMonitor.item_query" title="Permalink to this definition">¶</a></dt>
<dd><p>Find only Subjects that match the given filters.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.monitor.SubjectSweepMonitor.scope_to_collection">
<span class="sig-name descname"><span class="pre">scope_to_collection</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">qu</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">collection</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/monitor.html#SubjectSweepMonitor.scope_to_collection"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.monitor.SubjectSweepMonitor.scope_to_collection" title="Permalink to this definition">¶</a></dt>
<dd><p>Refuse to scope this query to a Collection.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.monitor.SweepMonitor">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.monitor.</span></span><span class="sig-name descname"><span class="pre">SweepMonitor</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">collection</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">batch_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/monitor.html#SweepMonitor"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.monitor.SweepMonitor" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.monitor.CollectionMonitor" title="core.monitor.CollectionMonitor"><code class="xref py py-class docutils literal notranslate"><span class="pre">CollectionMonitor</span></code></a></p>
<p>A monitor that does some work for every item in a database table,
then stops.</p>
<p>Progress through the table is stored in the Timestamp, so that if
the Monitor crashes, the next time the Monitor is run, it starts
at the item that caused the crash, rather than starting from the
beginning of the table.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="core.monitor.SweepMonitor.COMPLETION_LOG_LEVEL">
<span class="sig-name descname"><span class="pre">COMPLETION_LOG_LEVEL</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">20</span></em><a class="headerlink" href="#core.monitor.SweepMonitor.COMPLETION_LOG_LEVEL" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.monitor.SweepMonitor.DEFAULT_BATCH_SIZE">
<span class="sig-name descname"><span class="pre">DEFAULT_BATCH_SIZE</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">100</span></em><a class="headerlink" href="#core.monitor.SweepMonitor.DEFAULT_BATCH_SIZE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.monitor.SweepMonitor.DEFAULT_COUNTER">
<span class="sig-name descname"><span class="pre">DEFAULT_COUNTER</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">0</span></em><a class="headerlink" href="#core.monitor.SweepMonitor.DEFAULT_COUNTER" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.monitor.SweepMonitor.MODEL_CLASS">
<span class="sig-name descname"><span class="pre">MODEL_CLASS</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#core.monitor.SweepMonitor.MODEL_CLASS" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.monitor.SweepMonitor.fetch_batch">
<span class="sig-name descname"><span class="pre">fetch_batch</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">offset</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/monitor.html#SweepMonitor.fetch_batch"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.monitor.SweepMonitor.fetch_batch" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve one batch of work from the database.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.monitor.SweepMonitor.item_query">
<span class="sig-name descname"><span class="pre">item_query</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/monitor.html#SweepMonitor.item_query"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.monitor.SweepMonitor.item_query" title="Permalink to this definition">¶</a></dt>
<dd><p>Find the items that need to be processed in the sweep.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>A query object.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.monitor.SweepMonitor.process_batch">
<span class="sig-name descname"><span class="pre">process_batch</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">offset</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/monitor.html#SweepMonitor.process_batch"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.monitor.SweepMonitor.process_batch" title="Permalink to this definition">¶</a></dt>
<dd><p>Process one batch of work.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.monitor.SweepMonitor.process_item">
<span class="sig-name descname"><span class="pre">process_item</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">item</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/monitor.html#SweepMonitor.process_item"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.monitor.SweepMonitor.process_item" title="Permalink to this definition">¶</a></dt>
<dd><p>Do the work that needs to be done for a given item.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.monitor.SweepMonitor.process_items">
<span class="sig-name descname"><span class="pre">process_items</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">items</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/monitor.html#SweepMonitor.process_items"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.monitor.SweepMonitor.process_items" title="Permalink to this definition">¶</a></dt>
<dd><p>Process a list of items.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.monitor.SweepMonitor.run_once">
<span class="sig-name descname"><span class="pre">run_once</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">ignore</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/monitor.html#SweepMonitor.run_once"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.monitor.SweepMonitor.run_once" title="Permalink to this definition">¶</a></dt>
<dd><p>Do the actual work of the Monitor.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>progress</strong> – A TimestampData representing the
work done by the Monitor up to this point.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A TimestampData representing how you want the
Monitor’s entry in the <cite>timestamps</cite> table to look like
from this point on.  NOTE: Modifying the incoming
<cite>progress</cite> and returning it is generally a bad idea,
because the incoming <cite>progress</cite> is full of old
data. Instead, return a new TimestampData containing data
for only the fields you want to set.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.monitor.SweepMonitor.scope_to_collection">
<span class="sig-name descname"><span class="pre">scope_to_collection</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">qu</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">collection</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/monitor.html#SweepMonitor.scope_to_collection"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.monitor.SweepMonitor.scope_to_collection" title="Permalink to this definition">¶</a></dt>
<dd><p>Restrict the given query so that it only finds items
associated with the given collection.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>qu</strong> – A query object.</p></li>
<li><p><strong>collection</strong> – A Collection object, presumed to not be None.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.monitor.TimelineMonitor">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.monitor.</span></span><span class="sig-name descname"><span class="pre">TimelineMonitor</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">collection</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/monitor.html#TimelineMonitor"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.monitor.TimelineMonitor" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.monitor.Monitor" title="core.monitor.Monitor"><code class="xref py py-class docutils literal notranslate"><span class="pre">Monitor</span></code></a></p>
<p>A monitor that needs to process everything that happened between
two specific times.</p>
<p>This Monitor uses <cite>Timestamp.start</cite> and <cite>Timestamp.finish</cite> to describe
the span of time covered in the most recent run, not the time it
actually took to run.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="core.monitor.TimelineMonitor.OVERLAP">
<span class="sig-name descname"><span class="pre">OVERLAP</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">datetime.timedelta(seconds=300)</span></em><a class="headerlink" href="#core.monitor.TimelineMonitor.OVERLAP" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.monitor.TimelineMonitor.catch_up_from">
<span class="sig-name descname"><span class="pre">catch_up_from</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">start</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cutoff</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">progress</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/monitor.html#TimelineMonitor.catch_up_from"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.monitor.TimelineMonitor.catch_up_from" title="Permalink to this definition">¶</a></dt>
<dd><p>Make sure all events between <cite>start</cite> and <cite>cutoff</cite> are covered.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>start</strong> – Start looking for events that happened at this
time.</p></li>
<li><p><strong>cutoff</strong> – You’re not responsible for events that happened
after this time.</p></li>
<li><p><strong>progress</strong> – A TimestampData representing the progress so
far. Unlike with run_once(), you are encouraged to can
modify this in place, for instance to set .achievements.
However, you cannot change .start and .finish – any
changes will be overwritten by run_once().</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.monitor.TimelineMonitor.run_once">
<span class="sig-name descname"><span class="pre">run_once</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">progress</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/monitor.html#TimelineMonitor.run_once"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.monitor.TimelineMonitor.run_once" title="Permalink to this definition">¶</a></dt>
<dd><p>Do the actual work of the Monitor.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>progress</strong> – A TimestampData representing the
work done by the Monitor up to this point.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A TimestampData representing how you want the
Monitor’s entry in the <cite>timestamps</cite> table to look like
from this point on.  NOTE: Modifying the incoming
<cite>progress</cite> and returning it is generally a bad idea,
because the incoming <cite>progress</cite> is full of old
data. Instead, return a new TimestampData containing data
for only the fields you want to set.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.monitor.TimelineMonitor.slice_timespan">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">slice_timespan</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">start</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cutoff</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">increment</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/monitor.html#TimelineMonitor.slice_timespan"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.monitor.TimelineMonitor.slice_timespan" title="Permalink to this definition">¶</a></dt>
<dd><p>Slice a span of time into segments no large than [increment].</p>
<p>This lets you divide up a task like “gather the entire
circulation history for a collection” into chunks of one day.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>start</strong> – A datetime.</p></li>
<li><p><strong>cutoff</strong> – A datetime.</p></li>
<li><p><strong>increment</strong> – A timedelta.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.monitor.WorkReaper">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.monitor.</span></span><span class="sig-name descname"><span class="pre">WorkReaper</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/monitor.html#WorkReaper"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.monitor.WorkReaper" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.monitor.ReaperMonitor" title="core.monitor.ReaperMonitor"><code class="xref py py-class docutils literal notranslate"><span class="pre">ReaperMonitor</span></code></a></p>
<p>Remove Works that have no associated LicensePools.</p>
<p>Unlike other reapers, no timestamp is relevant. As soon as a Work
loses its last LicensePool it can be removed.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="core.monitor.WorkReaper.MODEL_CLASS">
<span class="sig-name descname"><span class="pre">MODEL_CLASS</span></span><a class="headerlink" href="#core.monitor.WorkReaper.MODEL_CLASS" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <a class="reference internal" href="core.model.html#core.model.work.Work" title="core.model.work.Work"><code class="xref py py-class docutils literal notranslate"><span class="pre">Work</span></code></a></p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.monitor.WorkReaper.delete">
<span class="sig-name descname"><span class="pre">delete</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">work</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/monitor.html#WorkReaper.delete"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.monitor.WorkReaper.delete" title="Permalink to this definition">¶</a></dt>
<dd><p>Delete work from elasticsearch and database.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.monitor.WorkReaper.query">
<span class="sig-name descname"><span class="pre">query</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/monitor.html#WorkReaper.query"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.monitor.WorkReaper.query" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.monitor.WorkSweepMonitor">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.monitor.</span></span><span class="sig-name descname"><span class="pre">WorkSweepMonitor</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">collection</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">batch_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/monitor.html#WorkSweepMonitor"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.monitor.WorkSweepMonitor" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.monitor.SweepMonitor" title="core.monitor.SweepMonitor"><code class="xref py py-class docutils literal notranslate"><span class="pre">SweepMonitor</span></code></a></p>
<p>A Monitor that does something to every Work.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="core.monitor.WorkSweepMonitor.MODEL_CLASS">
<span class="sig-name descname"><span class="pre">MODEL_CLASS</span></span><a class="headerlink" href="#core.monitor.WorkSweepMonitor.MODEL_CLASS" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <a class="reference internal" href="core.model.html#core.model.work.Work" title="core.model.work.Work"><code class="xref py py-class docutils literal notranslate"><span class="pre">Work</span></code></a></p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.monitor.WorkSweepMonitor.scope_to_collection">
<span class="sig-name descname"><span class="pre">scope_to_collection</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">qu</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">collection</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/monitor.html#WorkSweepMonitor.scope_to_collection"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.monitor.WorkSweepMonitor.scope_to_collection" title="Permalink to this definition">¶</a></dt>
<dd><p>Restrict the query to only find Works found in the given
Collection.</p>
</dd></dl>

</dd></dl>

</section>
<section id="module-core.opds">
<span id="core-opds-module"></span><h2>core.opds module<a class="headerlink" href="#module-core.opds" title="Permalink to this heading">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="core.opds.AcquisitionFeed">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.opds.</span></span><span class="sig-name descname"><span class="pre">AcquisitionFeed</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">title</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">url</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">works</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">annotator</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">precomposed_entries</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[]</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds.html#AcquisitionFeed"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.opds.AcquisitionFeed" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="core.util.html#core.util.opds_writer.OPDSFeed" title="core.util.opds_writer.OPDSFeed"><code class="xref py py-class docutils literal notranslate"><span class="pre">OPDSFeed</span></code></a></p>
<dl class="py attribute">
<dt class="sig sig-object py" id="core.opds.AcquisitionFeed.CURRENT_ENTRYPOINT_ATTRIBUTE">
<span class="sig-name descname"><span class="pre">CURRENT_ENTRYPOINT_ATTRIBUTE</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'{http://librarysimplified.org/terms/}entryPoint'</span></em><a class="headerlink" href="#core.opds.AcquisitionFeed.CURRENT_ENTRYPOINT_ATTRIBUTE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.opds.AcquisitionFeed.FACET_REL">
<span class="sig-name descname"><span class="pre">FACET_REL</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'http://opds-spec.org/facet'</span></em><a class="headerlink" href="#core.opds.AcquisitionFeed.FACET_REL" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.opds.AcquisitionFeed.acquisition_link">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">acquisition_link</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">rel</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">href</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">types</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">active_loan</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds.html#AcquisitionFeed.acquisition_link"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.opds.AcquisitionFeed.acquisition_link" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.opds.AcquisitionFeed.add_breadcrumb_links">
<span class="sig-name descname"><span class="pre">add_breadcrumb_links</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">lane</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">entrypoint</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds.html#AcquisitionFeed.add_breadcrumb_links"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.opds.AcquisitionFeed.add_breadcrumb_links" title="Permalink to this definition">¶</a></dt>
<dd><p>Add information necessary to find your current place in the
site’s navigation.</p>
<p>A link with rel=”start” points to the start of the site</p>
<p>A &lt;simplified:entrypoint&gt; section describes the current entry point.</p>
<p>A &lt;simplified:breadcrumbs&gt; section contains a sequence of
breadcrumb links.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.opds.AcquisitionFeed.add_breadcrumbs">
<span class="sig-name descname"><span class="pre">add_breadcrumbs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">lane</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">include_lane</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">entrypoint</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds.html#AcquisitionFeed.add_breadcrumbs"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.opds.AcquisitionFeed.add_breadcrumbs" title="Permalink to this definition">¶</a></dt>
<dd><p>Add list of ancestor links in a breadcrumbs element.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>lane</strong> – Add breadcrumbs from up to this lane.</p></li>
<li><p><strong>include_lane</strong> – Include <cite>lane</cite> itself in the breadcrumbs.</p></li>
<li><p><strong>entrypoint</strong> – The currently selected entrypoint, if any.</p></li>
</ul>
</dd>
</dl>
<p>TODO: The switchover from “no entry point” to “entry point” needs
its own breadcrumb link.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.opds.AcquisitionFeed.add_entry">
<span class="sig-name descname"><span class="pre">add_entry</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">work</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds.html#AcquisitionFeed.add_entry"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.opds.AcquisitionFeed.add_entry" title="Permalink to this definition">¶</a></dt>
<dd><p>Attempt to create an OPDS &lt;entry&gt;. If successful, append it to
the feed.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.opds.AcquisitionFeed.add_entrypoint_links">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">add_entrypoint_links</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">feed</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">url_generator</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">entrypoints</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">selected_entrypoint</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">group_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'Formats'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds.html#AcquisitionFeed.add_entrypoint_links"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.opds.AcquisitionFeed.add_entrypoint_links" title="Permalink to this definition">¶</a></dt>
<dd><p>Add links to a feed forming an OPDS facet group for a set of
EntryPoints.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>feed</strong> – A lxml Tag object.</p></li>
<li><p><strong>url_generator</strong> – A callable that returns the entry point
URL when passed an EntryPoint.</p></li>
<li><p><strong>entrypoints</strong> – A list of all EntryPoints in the facet group.</p></li>
<li><p><strong>selected_entrypoint</strong> – The current EntryPoint, if selected.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.opds.AcquisitionFeed.as_error_response">
<span class="sig-name descname"><span class="pre">as_error_response</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds.html#AcquisitionFeed.as_error_response"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.opds.AcquisitionFeed.as_error_response" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert this feed into an OPDSFEedResponse that should be treated
by intermediaries as an error – that is, treated as private
and not cached.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.opds.AcquisitionFeed.as_response">
<span class="sig-name descname"><span class="pre">as_response</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds.html#AcquisitionFeed.as_response"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.opds.AcquisitionFeed.as_response" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert this feed into an OPDSFEedResponse.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.opds.AcquisitionFeed.create_entry">
<span class="sig-name descname"><span class="pre">create_entry</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">work</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">even_if_no_license_pool</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">force_create</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">use_cache</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds.html#AcquisitionFeed.create_entry"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.opds.AcquisitionFeed.create_entry" title="Permalink to this definition">¶</a></dt>
<dd><p>Turn a work into an entry for an acquisition feed.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.opds.AcquisitionFeed.error_message">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">error_message</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">identifier</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">error_status</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">error_message</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds.html#AcquisitionFeed.error_message"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.opds.AcquisitionFeed.error_message" title="Permalink to this definition">¶</a></dt>
<dd><p>Turn an error result into an OPDSMessage suitable for
adding to a feed.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.opds.AcquisitionFeed.facet_link">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">facet_link</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">href</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">title</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">facet_group_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">is_active</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds.html#AcquisitionFeed.facet_link"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.opds.AcquisitionFeed.facet_link" title="Permalink to this definition">¶</a></dt>
<dd><p>Build a set of attributes for a facet link.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>href</strong> – Destination of the link.</p></li>
<li><p><strong>title</strong> – Human-readable description of the facet.</p></li>
<li><p><strong>facet_group_name</strong> – The facet group to which the facet belongs,
e.g. “Sort By”.</p></li>
<li><p><strong>is_active</strong> – True if this is the client’s currently
selected facet.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A dictionary of attributes, suitable for passing as
keyword arguments into OPDSFeed.add_link_to_feed.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.opds.AcquisitionFeed.facet_links">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">facet_links</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">annotator</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">facets</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds.html#AcquisitionFeed.facet_links"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.opds.AcquisitionFeed.facet_links" title="Permalink to this definition">¶</a></dt>
<dd><p>Create links for this feed’s navigational facet groups.</p>
<p>This does not create links for the entry point facet group,
because those links should only be present in certain
circumstances, and this method doesn’t know if those
circumstances apply. You need to decide whether to call
add_entrypoint_links in addition to calling this method.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.opds.AcquisitionFeed.format_types">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">format_types</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">delivery_mechanism</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds.html#AcquisitionFeed.format_types"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.opds.AcquisitionFeed.format_types" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate a set of types suitable for passing into
acquisition_link().</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.opds.AcquisitionFeed.from_query">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">from_query</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">query</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_db</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">feed_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">url</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pagination</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">url_fn</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">annotator</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds.html#AcquisitionFeed.from_query"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.opds.AcquisitionFeed.from_query" title="Permalink to this definition">¶</a></dt>
<dd><p>Build  a feed representing one page of a given list. Currently used for
creating an OPDS feed for a custom list and not cached.</p>
<p>TODO: This is used by the circulation manager admin interface.
Investigate changing the code that uses this to use the search
index – this is inefficient and creates an alternate code path
that may harbor bugs.</p>
<p>TODO: This cannot currently return OPDSFeedResponse because the
admin interface modifies the feed after it’s generated.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.opds.AcquisitionFeed.groups">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">groups</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">title</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">url</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">worklist</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">annotator</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pagination</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">facets</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_age</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">search_engine</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">search_debug</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">response_kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds.html#AcquisitionFeed.groups"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.opds.AcquisitionFeed.groups" title="Permalink to this definition">¶</a></dt>
<dd><p>The acquisition feed for ‘featured’ items from a given lane’s
sublanes, organized into per-lane groups.</p>
<p>NOTE: If the lane has no sublanes, a grouped feed will
probably be unsatisfying. Call page() instead with an
appropriate Facets object.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>pagination</strong> – A Pagination object. No single child of this lane
will contain more than <cite>pagination.size</cite> items.</p></li>
<li><p><strong>facets</strong> – A GroupsFacet object.</p></li>
<li><p><strong>response_kwargs</strong> – Extra keyword arguments to pass into
the OPDSFeedResponse constructor.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>An OPDSFeedResponse containing the feed.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.opds.AcquisitionFeed.indirect_acquisition">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">indirect_acquisition</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">indirect_types</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds.html#AcquisitionFeed.indirect_acquisition"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.opds.AcquisitionFeed.indirect_acquisition" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.opds.AcquisitionFeed.license_tags">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">license_tags</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">license_pool</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">loan</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hold</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds.html#AcquisitionFeed.license_tags"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.opds.AcquisitionFeed.license_tags" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.opds.AcquisitionFeed.link">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">link</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">rel</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">href</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">type</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds.html#AcquisitionFeed.link"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.opds.AcquisitionFeed.link" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.opds.AcquisitionFeed.minimal_opds_entry">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">minimal_opds_entry</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">identifier</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cover</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">description</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">quality</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">most_recent_update</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds.html#AcquisitionFeed.minimal_opds_entry"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.opds.AcquisitionFeed.minimal_opds_entry" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.opds.AcquisitionFeed.page">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">page</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">title</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">url</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">worklist</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">annotator</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">facets</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pagination</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_age</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">search_engine</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">search_debug</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">response_kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds.html#AcquisitionFeed.page"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.opds.AcquisitionFeed.page" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a feed representing one page of works from a given lane.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>response_kwargs</strong> – Extra keyword arguments to pass into
the OPDSFeedResponse constructor.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>An OPDSFeedResponse containing the feed.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.opds.AcquisitionFeed.search">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">search</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">title</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">url</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lane</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">search_engine</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">query</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pagination</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">facets</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">annotator</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">response_kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds.html#AcquisitionFeed.search"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.opds.AcquisitionFeed.search" title="Permalink to this definition">¶</a></dt>
<dd><p>Run a search against the given search engine and return
the results as a Flask Response.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>_db</strong> – A database connection</p></li>
<li><p><strong>title</strong> – The title of the resulting OPDS feed.</p></li>
<li><p><strong>url</strong> – The URL from which the feed will be served.</p></li>
<li><p><strong>search_engine</strong> – An ExternalSearchIndex.</p></li>
<li><p><strong>query</strong> – The search query</p></li>
<li><p><strong>pagination</strong> – A Pagination</p></li>
<li><p><strong>facets</strong> – A Facets</p></li>
<li><p><strong>annotator</strong> – An Annotator</p></li>
<li><p><strong>response_kwargs</strong> – Keyword arguments to pass into the OPDSFeedResponse
constructor.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>An ODPSFeedResponse</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.opds.AcquisitionFeed.show_current_entrypoint">
<span class="sig-name descname"><span class="pre">show_current_entrypoint</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">entrypoint</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds.html#AcquisitionFeed.show_current_entrypoint"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.opds.AcquisitionFeed.show_current_entrypoint" title="Permalink to this definition">¶</a></dt>
<dd><p>Annotate this given feed with a simplified:entryPoint
attribute pointing to the current entrypoint’s TYPE_URI.</p>
<p>This gives clients an overall picture of the type of works in
the feed, and a way to distinguish between one EntryPoint
and another.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>entrypoint</strong> – An EntryPoint.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.opds.AcquisitionFeed.single_entry">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">single_entry</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">work</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">annotator</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">force_create</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">raw</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">use_cache</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">response_kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds.html#AcquisitionFeed.single_entry"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.opds.AcquisitionFeed.single_entry" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a single-entry OPDS document for one specific work.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>_db</strong> – A database connection.</p></li>
<li><p><strong>work</strong> – A Work</p></li>
<li><p><strong>work</strong> – An Annotator</p></li>
<li><p><strong>force_create</strong> – Create the OPDS entry from scratch even
if there’s already a cached one.</p></li>
<li><p><strong>raw</strong> – If this is False (the default), a Flask Response will be returned,
ready to be sent over the network. Otherwise an object representing
the underlying OPDS entry will be returned.</p></li>
<li><p><strong>use_cache</strong> – Boolean value determining whether the OPDS cache shall be used.</p></li>
<li><p><strong>response_kwargs</strong> – These keyword arguments will be passed into the Response
constructor, if it is invoked.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A Response, if <cite>raw</cite> is false. Otherwise, an OPDSMessage
or an etree._Element – whatever was returned by
OPDSFeed.create_entry.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.opds.Annotator">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.opds.</span></span><span class="sig-name descname"><span class="pre">Annotator</span></span><a class="reference internal" href="_modules/core/opds.html#Annotator"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.opds.Annotator" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>The Annotator knows how to present an OPDS feed in a specific
application context.</p>
<dl class="py method">
<dt class="sig sig-object py" id="core.opds.Annotator.active_licensepool_for">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">active_licensepool_for</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">work</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds.html#Annotator.active_licensepool_for"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.opds.Annotator.active_licensepool_for" title="Permalink to this definition">¶</a></dt>
<dd><p>Which license pool would be/has been used to issue a license for
this work?</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.opds.Annotator.annotate_feed">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">annotate_feed</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">feed</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lane</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">list</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds.html#Annotator.annotate_feed"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.opds.Annotator.annotate_feed" title="Permalink to this definition">¶</a></dt>
<dd><p>Make any custom modifications necessary to integrate this
OPDS feed into the application’s workflow.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.opds.Annotator.annotate_work_entry">
<span class="sig-name descname"><span class="pre">annotate_work_entry</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">work</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">active_license_pool</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">edition</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">identifier</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">feed</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">entry</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">updated</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds.html#Annotator.annotate_work_entry"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.opds.Annotator.annotate_work_entry" title="Permalink to this definition">¶</a></dt>
<dd><p>Make any custom modifications necessary to integrate this
OPDS entry into the application’s workflow.</p>
<dl class="field-list simple">
<dt class="field-odd">Work<span class="colon">:</span></dt>
<dd class="field-odd"><p>The Work whose OPDS entry is being annotated.</p>
</dd>
<dt class="field-even">Active_license_pool<span class="colon">:</span></dt>
<dd class="field-even"><p>Of all the LicensePools associated with this
Work, the client has expressed interest in this one.</p>
</dd>
<dt class="field-odd">Edition<span class="colon">:</span></dt>
<dd class="field-odd"><p>The Edition to use when associating bibliographic
metadata with this entry. You will probably not need to use
this, because bibliographic metadata was associated with
the entry when it was created.</p>
</dd>
<dt class="field-even">Identifier<span class="colon">:</span></dt>
<dd class="field-even"><p>Of all the Identifiers associated with this
Work, the client has expressed interest in this one.</p>
</dd>
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>feed</strong> – An OPDSFeed – the feed in which this entry will be
situated.</p></li>
<li><p><strong>entry</strong> – An lxml Element object, the entry that will be added
to the feed.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.opds.Annotator.authors">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">authors</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">work</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">edition</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds.html#Annotator.authors"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.opds.Annotator.authors" title="Permalink to this definition">¶</a></dt>
<dd><p>Create one or more &lt;author&gt; and &lt;contributor&gt; tags for the given
Work.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>work</strong> – The Work under consideration.</p></li>
<li><p><strong>edition</strong> – The Edition to use as a reference
for bibliographic information, including the list of
Contributions.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.opds.Annotator.categories">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">categories</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">work</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds.html#Annotator.categories"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.opds.Annotator.categories" title="Permalink to this definition">¶</a></dt>
<dd><p>Return all relevant classifications of this work.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>A dictionary mapping ‘scheme’ URLs to dictionaries of
attribute-value pairs.</p>
</dd>
</dl>
<p>Notable attributes: ‘term’, ‘label’, ‘<a class="reference external" href="http://schema.org/ratingValue">http://schema.org/ratingValue</a>’</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.opds.Annotator.content">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">content</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">work</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds.html#Annotator.content"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.opds.Annotator.content" title="Permalink to this definition">¶</a></dt>
<dd><p>Return an HTML summary of this work.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.opds.Annotator.contributor_tag">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">contributor_tag</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">contribution</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">state</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds.html#Annotator.contributor_tag"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.opds.Annotator.contributor_tag" title="Permalink to this definition">¶</a></dt>
<dd><p>Build an &lt;author&gt; or &lt;contributor&gt; tag for a Contribution.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>contribution</strong> – A Contribution.</p></li>
<li><p><strong>state</strong> – A defaultdict of sets, which may be used to keep
track of what happened during previous calls to
contributor_tag for a given Work.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A Tag, or None if creating a Tag for this Contribution
would be redundant or of low value.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.opds.Annotator.cover_links">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">cover_links</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">work</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds.html#Annotator.cover_links"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.opds.Annotator.cover_links" title="Permalink to this definition">¶</a></dt>
<dd><p>Return all links to be used as cover links for this work.</p>
<p>In a distribution application, each work will have only one
link. In a content server-type application, each work may have
a large number of links.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>A 2-tuple (thumbnail_links, full_links)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.opds.Annotator.default_lane_url">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">default_lane_url</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds.html#Annotator.default_lane_url"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.opds.Annotator.default_lane_url" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.opds.Annotator.facet_url">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">facet_url</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">facets</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">facet</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds.html#Annotator.facet_url"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.opds.Annotator.facet_url" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.opds.Annotator.featured_feed_url">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">featured_feed_url</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">lane</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">order</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">facets</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds.html#Annotator.featured_feed_url"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.opds.Annotator.featured_feed_url" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.opds.Annotator.feed_url">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">feed_url</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">lane</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">facets</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pagination</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds.html#Annotator.feed_url"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.opds.Annotator.feed_url" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.opds.Annotator.group_uri">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">group_uri</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">work</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">license_pool</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">identifier</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds.html#Annotator.group_uri"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.opds.Annotator.group_uri" title="Permalink to this definition">¶</a></dt>
<dd><p>The URI to be associated with this Work when making it part of
a grouped feed.</p>
<p>By default, this does nothing. See circulation/LibraryAnnotator
for a subclass that does something.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>A 2-tuple (URI, title)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.opds.Annotator.groups_url">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">groups_url</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">lane</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">facets</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds.html#Annotator.groups_url"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.opds.Annotator.groups_url" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.opds.Annotator.is_work_entry_solo">
<span class="sig-name descname"><span class="pre">is_work_entry_solo</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">work</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds.html#Annotator.is_work_entry_solo"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.opds.Annotator.is_work_entry_solo" title="Permalink to this definition">¶</a></dt>
<dd><dl class="simple">
<dt>Return a boolean value indicating whether the work’s OPDS catalog entry is served by itself,</dt><dd><p>rather than as a part of the feed.</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>work</strong> (<a class="reference internal" href="core.model.html#core.model.work.Work" title="core.model.work.Work"><em>core.model.work.Work</em></a>) – Work object</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Boolean value indicating whether the work’s OPDS catalog entry is served by itself,
rather than as a part of the feed</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.opds.Annotator.lane_id">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">lane_id</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">lane</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds.html#Annotator.lane_id"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.opds.Annotator.lane_id" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.opds.Annotator.lane_url">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">lane_url</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">lane</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">facets</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds.html#Annotator.lane_url"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.opds.Annotator.lane_url" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.opds.Annotator.navigation_url">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">navigation_url</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">lane</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds.html#Annotator.navigation_url"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.opds.Annotator.navigation_url" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.opds.Annotator.opds_cache_field">
<span class="sig-name descname"><span class="pre">opds_cache_field</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'simple_opds_entry'</span></em><a class="headerlink" href="#core.opds.Annotator.opds_cache_field" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.opds.Annotator.permalink_for">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">permalink_for</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">work</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">license_pool</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">identifier</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds.html#Annotator.permalink_for"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.opds.Annotator.permalink_for" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate a permanent link a client can follow for information about
this entry, and only this entry.</p>
<p>Note that permalink is distinct from the Atom &lt;id&gt;,
which is always the identifier’s URN.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>A 2-tuple (URL, media type). If a single value is
returned, the media type will be presumed to be that of an
OPDS entry.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.opds.Annotator.rating_tag">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">rating_tag</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">type_uri</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds.html#Annotator.rating_tag"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.opds.Annotator.rating_tag" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate a schema:Rating tag for the given type and value.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.opds.Annotator.search_url">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">search_url</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">lane</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">query</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pagination</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">facets</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds.html#Annotator.search_url"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.opds.Annotator.search_url" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.opds.Annotator.series">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">series</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">series_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">series_position</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds.html#Annotator.series"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.opds.Annotator.series" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate a schema:Series tag for the given name and position.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.opds.Annotator.sort_works_for_groups_feed">
<span class="sig-name descname"><span class="pre">sort_works_for_groups_feed</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">works</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds.html#Annotator.sort_works_for_groups_feed"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.opds.Annotator.sort_works_for_groups_feed" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.opds.Annotator.work_id">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">work_id</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">work</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds.html#Annotator.work_id"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.opds.Annotator.work_id" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.opds.LookupAcquisitionFeed">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.opds.</span></span><span class="sig-name descname"><span class="pre">LookupAcquisitionFeed</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">title</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">url</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">works</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">annotator</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">precomposed_entries</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[]</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds.html#LookupAcquisitionFeed"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.opds.LookupAcquisitionFeed" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.opds.AcquisitionFeed" title="core.opds.AcquisitionFeed"><code class="xref py py-class docutils literal notranslate"><span class="pre">AcquisitionFeed</span></code></a></p>
<p>Used when the user has requested a lookup of a specific identifier,
which may be different from the identifier used by the Work’s
default LicensePool.</p>
<dl class="py method">
<dt class="sig sig-object py" id="core.opds.LookupAcquisitionFeed.create_entry">
<span class="sig-name descname"><span class="pre">create_entry</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">work</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds.html#LookupAcquisitionFeed.create_entry"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.opds.LookupAcquisitionFeed.create_entry" title="Permalink to this definition">¶</a></dt>
<dd><p>Turn an Identifier and a Work into an entry for an acquisition
feed.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.opds.NavigationFacets">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.opds.</span></span><span class="sig-name descname"><span class="pre">NavigationFacets</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">minimum_featured_quality</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">entrypoint</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">random_seed</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds.html#NavigationFacets"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.opds.NavigationFacets" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.lane.FeaturedFacets" title="core.lane.FeaturedFacets"><code class="xref py py-class docutils literal notranslate"><span class="pre">FeaturedFacets</span></code></a></p>
<dl class="py attribute">
<dt class="sig sig-object py" id="core.opds.NavigationFacets.CACHED_FEED_TYPE">
<span class="sig-name descname"><span class="pre">CACHED_FEED_TYPE</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'navigation'</span></em><a class="headerlink" href="#core.opds.NavigationFacets.CACHED_FEED_TYPE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.opds.NavigationFeed">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.opds.</span></span><span class="sig-name descname"><span class="pre">NavigationFeed</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">title</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">url</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds.html#NavigationFeed"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.opds.NavigationFeed" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="core.util.html#core.util.opds_writer.OPDSFeed" title="core.util.opds_writer.OPDSFeed"><code class="xref py py-class docutils literal notranslate"><span class="pre">OPDSFeed</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="core.opds.NavigationFeed.add_entry">
<span class="sig-name descname"><span class="pre">add_entry</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">url</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">title</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'application/atom+xml;profile=opds-catalog;kind=navigation'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds.html#NavigationFeed.add_entry"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.opds.NavigationFeed.add_entry" title="Permalink to this definition">¶</a></dt>
<dd><p>Create an OPDS navigation entry for a URL.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.opds.NavigationFeed.navigation">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">navigation</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">title</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">url</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">worklist</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">annotator</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">facets</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_age</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">response_kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds.html#NavigationFeed.navigation"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.opds.NavigationFeed.navigation" title="Permalink to this definition">¶</a></dt>
<dd><p>The navigation feed with links to a given lane’s sublanes.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>response_kwargs</strong> – Extra keyword arguments to pass into
the OPDSFeedResponse constructor.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A Response</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.opds.TestAnnotator">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.opds.</span></span><span class="sig-name descname"><span class="pre">TestAnnotator</span></span><a class="reference internal" href="_modules/core/opds.html#TestAnnotator"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.opds.TestAnnotator" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.opds.Annotator" title="core.opds.Annotator"><code class="xref py py-class docutils literal notranslate"><span class="pre">Annotator</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="core.opds.TestAnnotator.default_lane_url">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">default_lane_url</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds.html#TestAnnotator.default_lane_url"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.opds.TestAnnotator.default_lane_url" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.opds.TestAnnotator.facet_url">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">facet_url</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">facets</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds.html#TestAnnotator.facet_url"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.opds.TestAnnotator.facet_url" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.opds.TestAnnotator.feed_url">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">feed_url</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">lane</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">facets</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pagination</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds.html#TestAnnotator.feed_url"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.opds.TestAnnotator.feed_url" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.opds.TestAnnotator.groups_url">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">groups_url</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">lane</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">facets</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds.html#TestAnnotator.groups_url"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.opds.TestAnnotator.groups_url" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.opds.TestAnnotator.lane_url">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">lane_url</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">lane</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds.html#TestAnnotator.lane_url"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.opds.TestAnnotator.lane_url" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.opds.TestAnnotator.navigation_url">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">navigation_url</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">lane</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds.html#TestAnnotator.navigation_url"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.opds.TestAnnotator.navigation_url" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.opds.TestAnnotator.search_url">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">search_url</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">lane</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">query</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pagination</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">facets</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds.html#TestAnnotator.search_url"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.opds.TestAnnotator.search_url" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.opds.TestAnnotator.top_level_title">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">top_level_title</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds.html#TestAnnotator.top_level_title"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.opds.TestAnnotator.top_level_title" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.opds.TestAnnotatorWithGroup">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.opds.</span></span><span class="sig-name descname"><span class="pre">TestAnnotatorWithGroup</span></span><a class="reference internal" href="_modules/core/opds.html#TestAnnotatorWithGroup"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.opds.TestAnnotatorWithGroup" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.opds.TestAnnotator" title="core.opds.TestAnnotator"><code class="xref py py-class docutils literal notranslate"><span class="pre">TestAnnotator</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="core.opds.TestAnnotatorWithGroup.group_uri">
<span class="sig-name descname"><span class="pre">group_uri</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">work</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">license_pool</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">identifier</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds.html#TestAnnotatorWithGroup.group_uri"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.opds.TestAnnotatorWithGroup.group_uri" title="Permalink to this definition">¶</a></dt>
<dd><p>The URI to be associated with this Work when making it part of
a grouped feed.</p>
<p>By default, this does nothing. See circulation/LibraryAnnotator
for a subclass that does something.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>A 2-tuple (URI, title)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.opds.TestAnnotatorWithGroup.group_uri_for_lane">
<span class="sig-name descname"><span class="pre">group_uri_for_lane</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">lane</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds.html#TestAnnotatorWithGroup.group_uri_for_lane"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.opds.TestAnnotatorWithGroup.group_uri_for_lane" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.opds.TestAnnotatorWithGroup.top_level_title">
<span class="sig-name descname"><span class="pre">top_level_title</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds.html#TestAnnotatorWithGroup.top_level_title"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.opds.TestAnnotatorWithGroup.top_level_title" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.opds.TestUnfulfillableAnnotator">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.opds.</span></span><span class="sig-name descname"><span class="pre">TestUnfulfillableAnnotator</span></span><a class="reference internal" href="_modules/core/opds.html#TestUnfulfillableAnnotator"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.opds.TestUnfulfillableAnnotator" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.opds.TestAnnotator" title="core.opds.TestAnnotator"><code class="xref py py-class docutils literal notranslate"><span class="pre">TestAnnotator</span></code></a></p>
<p>Raise an UnfulfillableWork exception when asked to annotate an entry.</p>
<dl class="py method">
<dt class="sig sig-object py" id="core.opds.TestUnfulfillableAnnotator.annotate_work_entry">
<span class="sig-name descname"><span class="pre">annotate_work_entry</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds.html#TestUnfulfillableAnnotator.annotate_work_entry"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.opds.TestUnfulfillableAnnotator.annotate_work_entry" title="Permalink to this definition">¶</a></dt>
<dd><p>Make any custom modifications necessary to integrate this
OPDS entry into the application’s workflow.</p>
<dl class="field-list simple">
<dt class="field-odd">Work<span class="colon">:</span></dt>
<dd class="field-odd"><p>The Work whose OPDS entry is being annotated.</p>
</dd>
<dt class="field-even">Active_license_pool<span class="colon">:</span></dt>
<dd class="field-even"><p>Of all the LicensePools associated with this
Work, the client has expressed interest in this one.</p>
</dd>
<dt class="field-odd">Edition<span class="colon">:</span></dt>
<dd class="field-odd"><p>The Edition to use when associating bibliographic
metadata with this entry. You will probably not need to use
this, because bibliographic metadata was associated with
the entry when it was created.</p>
</dd>
<dt class="field-even">Identifier<span class="colon">:</span></dt>
<dd class="field-even"><p>Of all the Identifiers associated with this
Work, the client has expressed interest in this one.</p>
</dd>
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>feed</strong> – An OPDSFeed – the feed in which this entry will be
situated.</p></li>
<li><p><strong>entry</strong> – An lxml Element object, the entry that will be added
to the feed.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py exception">
<dt class="sig sig-object py" id="core.opds.UnfulfillableWork">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.opds.</span></span><span class="sig-name descname"><span class="pre">UnfulfillableWork</span></span><a class="reference internal" href="_modules/core/opds.html#UnfulfillableWork"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.opds.UnfulfillableWork" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">Exception</span></code></p>
<p>Raise this exception when it turns out a Work currently cannot be
fulfilled through any means, <em>and</em> this is a problem sufficient to
cancel the creation of an &lt;entry&gt; for the Work.</p>
<p>For commercial works, this might be because the collection
contains no licenses. For open-access works, it might be because
none of the delivery mechanisms could be mirrored.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.opds.VerboseAnnotator">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.opds.</span></span><span class="sig-name descname"><span class="pre">VerboseAnnotator</span></span><a class="reference internal" href="_modules/core/opds.html#VerboseAnnotator"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.opds.VerboseAnnotator" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.opds.Annotator" title="core.opds.Annotator"><code class="xref py py-class docutils literal notranslate"><span class="pre">Annotator</span></code></a></p>
<p>The default Annotator for machine-to-machine integration.</p>
<p>This Annotator describes all categories and authors for the book
in great detail.</p>
<dl class="py method">
<dt class="sig sig-object py" id="core.opds.VerboseAnnotator.add_ratings">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">add_ratings</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">work</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">entry</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds.html#VerboseAnnotator.add_ratings"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.opds.VerboseAnnotator.add_ratings" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a quality rating to the work.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.opds.VerboseAnnotator.annotate_work_entry">
<span class="sig-name descname"><span class="pre">annotate_work_entry</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">work</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">active_license_pool</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">edition</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">identifier</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">feed</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">entry</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds.html#VerboseAnnotator.annotate_work_entry"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.opds.VerboseAnnotator.annotate_work_entry" title="Permalink to this definition">¶</a></dt>
<dd><p>Make any custom modifications necessary to integrate this
OPDS entry into the application’s workflow.</p>
<dl class="field-list simple">
<dt class="field-odd">Work<span class="colon">:</span></dt>
<dd class="field-odd"><p>The Work whose OPDS entry is being annotated.</p>
</dd>
<dt class="field-even">Active_license_pool<span class="colon">:</span></dt>
<dd class="field-even"><p>Of all the LicensePools associated with this
Work, the client has expressed interest in this one.</p>
</dd>
<dt class="field-odd">Edition<span class="colon">:</span></dt>
<dd class="field-odd"><p>The Edition to use when associating bibliographic
metadata with this entry. You will probably not need to use
this, because bibliographic metadata was associated with
the entry when it was created.</p>
</dd>
<dt class="field-even">Identifier<span class="colon">:</span></dt>
<dd class="field-even"><p>Of all the Identifiers associated with this
Work, the client has expressed interest in this one.</p>
</dd>
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>feed</strong> – An OPDSFeed – the feed in which this entry will be
situated.</p></li>
<li><p><strong>entry</strong> – An lxml Element object, the entry that will be added
to the feed.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.opds.VerboseAnnotator.authors">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">authors</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">work</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">edition</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds.html#VerboseAnnotator.authors"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.opds.VerboseAnnotator.authors" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a detailed &lt;author&gt; tag for each author.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.opds.VerboseAnnotator.categories">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">categories</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">work</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">policy</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds.html#VerboseAnnotator.categories"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.opds.VerboseAnnotator.categories" title="Permalink to this definition">¶</a></dt>
<dd><p>Send out _all_ categories for the work.</p>
<p>(So long as the category type has a URI associated with it in
Subject.uri_lookup.)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>policy</strong> – A PresentationCalculationPolicy to
use when deciding how deep to go when finding equivalent
identifiers for the work.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.opds.VerboseAnnotator.detailed_author">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">detailed_author</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">contributor</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds.html#VerboseAnnotator.detailed_author"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.opds.VerboseAnnotator.detailed_author" title="Permalink to this definition">¶</a></dt>
<dd><p>Turn a Contributor into a detailed &lt;author&gt; tag.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.opds.VerboseAnnotator.opds_cache_field">
<span class="sig-name descname"><span class="pre">opds_cache_field</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'verbose_opds_entry'</span></em><a class="headerlink" href="#core.opds.VerboseAnnotator.opds_cache_field" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</section>
<section id="module-core.opds2_import">
<span id="core-opds2-import-module"></span><h2>core.opds2_import module<a class="headerlink" href="#module-core.opds2_import" title="Permalink to this heading">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="core.opds2_import.OPDS2ImportMonitor">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.opds2_import.</span></span><span class="sig-name descname"><span class="pre">OPDS2ImportMonitor</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">collection</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">import_class</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">force_reimport</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">import_class_kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds2_import.html#OPDS2ImportMonitor"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.opds2_import.OPDS2ImportMonitor" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.opds_import.OPDSImportMonitor" title="core.opds_import.OPDSImportMonitor"><code class="xref py py-class docutils literal notranslate"><span class="pre">OPDSImportMonitor</span></code></a></p>
<dl class="py attribute">
<dt class="sig sig-object py" id="core.opds2_import.OPDS2ImportMonitor.MEDIA_TYPE">
<span class="sig-name descname"><span class="pre">MEDIA_TYPE</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">('application/opds+json',</span> <span class="pre">'application/json')</span></em><a class="headerlink" href="#core.opds2_import.OPDS2ImportMonitor.MEDIA_TYPE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.opds2_import.OPDS2ImportMonitor.PROTOCOL">
<span class="sig-name descname"><span class="pre">PROTOCOL</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'OPDS</span> <span class="pre">2.0</span> <span class="pre">Import'</span></em><a class="headerlink" href="#core.opds2_import.OPDS2ImportMonitor.PROTOCOL" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.opds2_import.OPDS2Importer">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.opds2_import.</span></span><span class="sig-name descname"><span class="pre">OPDS2Importer</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">db</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">collection</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data_source_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">identifier_mapping</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">http_get</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">metadata_client</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">content_modifier</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">map_from_collection</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mirrors</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds2_import.html#OPDS2Importer"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.opds2_import.OPDS2Importer" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.opds_import.OPDSImporter" title="core.opds_import.OPDSImporter"><code class="xref py py-class docutils literal notranslate"><span class="pre">OPDSImporter</span></code></a></p>
<p>Imports editions and license pools from an OPDS 2.0 feed.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="core.opds2_import.OPDS2Importer.DESCRIPTION">
<span class="sig-name descname"><span class="pre">DESCRIPTION</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">l'Import</span> <span class="pre">books</span> <span class="pre">from</span> <span class="pre">a</span> <span class="pre">publicly-accessible</span> <span class="pre">OPDS</span> <span class="pre">2.0</span> <span class="pre">feed.'</span></em><a class="headerlink" href="#core.opds2_import.OPDS2Importer.DESCRIPTION" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.opds2_import.OPDS2Importer.NAME">
<span class="sig-name descname"><span class="pre">NAME</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'OPDS</span> <span class="pre">2.0</span> <span class="pre">Import'</span></em><a class="headerlink" href="#core.opds2_import.OPDS2Importer.NAME" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.opds2_import.OPDS2Importer.NEXT_LINK_RELATION">
<span class="sig-name descname"><span class="pre">NEXT_LINK_RELATION</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'next'</span></em><a class="headerlink" href="#core.opds2_import.OPDS2Importer.NEXT_LINK_RELATION" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.opds2_import.OPDS2Importer.extract_feed_data">
<span class="sig-name descname"><span class="pre">extract_feed_data</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">feed</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">feed_url</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds2_import.html#OPDS2Importer.extract_feed_data"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.opds2_import.OPDS2Importer.extract_feed_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Turn an OPDS 2.0 feed into lists of Metadata and CirculationData objects.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>feed</strong> (<em>Union</em><em>[</em><em>str</em><em>, </em><em>opds2_ast.OPDS2Feed</em><em>]</em>) – OPDS 2.0 feed</p></li>
<li><p><strong>feed_url</strong> (<em>Optional</em><em>[</em><em>str</em><em>]</em><em>f</em>) – Feed URL used to resolve relative links</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.opds2_import.OPDS2Importer.extract_last_update_dates">
<span class="sig-name descname"><span class="pre">extract_last_update_dates</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">feed</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds2_import.html#OPDS2Importer.extract_last_update_dates"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.opds2_import.OPDS2Importer.extract_last_update_dates" title="Permalink to this definition">¶</a></dt>
<dd><p>Extract last update date of the feed.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>feed</strong> (<em>Union</em><em>[</em><em>str</em><em>, </em><em>opds2_ast.OPDS2Feed</em><em>]</em>) – OPDS 2.0 feed</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A list of 2-tuples containing publication’s identifiers and their last modified dates</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>List[Tuple[str, datetime.datetime]]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.opds2_import.OPDS2Importer.extract_next_links">
<span class="sig-name descname"><span class="pre">extract_next_links</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">feed</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds2_import.html#OPDS2Importer.extract_next_links"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.opds2_import.OPDS2Importer.extract_next_links" title="Permalink to this definition">¶</a></dt>
<dd><p>Extracts “next” links from the feed.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>feed</strong> (<em>Union</em><em>[</em><em>str</em><em>, </em><em>opds2_ast.OPDS2Feed</em><em>]</em>) – OPDS 2.0 feed</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>List of “next” links</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>List[str]</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="core.opds2_import.parse_feed">
<span class="sig-prename descclassname"><span class="pre">core.opds2_import.</span></span><span class="sig-name descname"><span class="pre">parse_feed</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">feed</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">silent</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds2_import.html#parse_feed"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.opds2_import.parse_feed" title="Permalink to this definition">¶</a></dt>
<dd><p>Parses the feed into OPDS2Feed object.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>feed</strong> (<em>Union</em><em>[</em><em>str</em><em>, </em><em>opds2_ast.OPDS2Feed</em><em>]</em>) – OPDS 2.0 feed</p></li>
<li><p><strong>silent</strong> (<em>bool</em>) – Boolean value indicating whether to raise</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Parsed OPDS 2.0 feed</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>opds2_ast.OPDS2Feed</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-core.opds_import">
<span id="core-opds-import-module"></span><h2>core.opds_import module<a class="headerlink" href="#module-core.opds_import" title="Permalink to this heading">¶</a></h2>
<dl class="py exception">
<dt class="sig sig-object py" id="core.opds_import.AccessNotAuthenticated">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.opds_import.</span></span><span class="sig-name descname"><span class="pre">AccessNotAuthenticated</span></span><a class="reference internal" href="_modules/core/opds_import.html#AccessNotAuthenticated"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.opds_import.AccessNotAuthenticated" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">Exception</span></code></p>
<p>No authentication is configured for this service</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.opds_import.MetadataWranglerOPDSLookup">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.opds_import.</span></span><span class="sig-name descname"><span class="pre">MetadataWranglerOPDSLookup</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">url</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shared_secret</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">collection</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds_import.html#MetadataWranglerOPDSLookup"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.opds_import.MetadataWranglerOPDSLookup" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.opds_import.SimplifiedOPDSLookup" title="core.opds_import.SimplifiedOPDSLookup"><code class="xref py py-class docutils literal notranslate"><span class="pre">SimplifiedOPDSLookup</span></code></a>, <a class="reference internal" href="#core.selftest.HasSelfTests" title="core.selftest.HasSelfTests"><code class="xref py py-class docutils literal notranslate"><span class="pre">HasSelfTests</span></code></a></p>
<dl class="py attribute">
<dt class="sig sig-object py" id="core.opds_import.MetadataWranglerOPDSLookup.ADD_ENDPOINT">
<span class="sig-name descname"><span class="pre">ADD_ENDPOINT</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'add'</span></em><a class="headerlink" href="#core.opds_import.MetadataWranglerOPDSLookup.ADD_ENDPOINT" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.opds_import.MetadataWranglerOPDSLookup.ADD_WITH_METADATA_ENDPOINT">
<span class="sig-name descname"><span class="pre">ADD_WITH_METADATA_ENDPOINT</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'add_with_metadata'</span></em><a class="headerlink" href="#core.opds_import.MetadataWranglerOPDSLookup.ADD_WITH_METADATA_ENDPOINT" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.opds_import.MetadataWranglerOPDSLookup.CANONICALIZE_ENDPOINT">
<span class="sig-name descname"><span class="pre">CANONICALIZE_ENDPOINT</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'canonical-author-name'</span></em><a class="headerlink" href="#core.opds_import.MetadataWranglerOPDSLookup.CANONICALIZE_ENDPOINT" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.opds_import.MetadataWranglerOPDSLookup.CARDINALITY">
<span class="sig-name descname"><span class="pre">CARDINALITY</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">1</span></em><a class="headerlink" href="#core.opds_import.MetadataWranglerOPDSLookup.CARDINALITY" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.opds_import.MetadataWranglerOPDSLookup.METADATA_NEEDED_ENDPOINT">
<span class="sig-name descname"><span class="pre">METADATA_NEEDED_ENDPOINT</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'metadata_needed'</span></em><a class="headerlink" href="#core.opds_import.MetadataWranglerOPDSLookup.METADATA_NEEDED_ENDPOINT" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.opds_import.MetadataWranglerOPDSLookup.NAME">
<span class="sig-name descname"><span class="pre">NAME</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">l'Library</span> <span class="pre">Simplified</span> <span class="pre">Metadata</span> <span class="pre">Wrangler'</span></em><a class="headerlink" href="#core.opds_import.MetadataWranglerOPDSLookup.NAME" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.opds_import.MetadataWranglerOPDSLookup.PROTOCOL">
<span class="sig-name descname"><span class="pre">PROTOCOL</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'Metadata</span> <span class="pre">Wrangler'</span></em><a class="headerlink" href="#core.opds_import.MetadataWranglerOPDSLookup.PROTOCOL" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.opds_import.MetadataWranglerOPDSLookup.REMOVE_ENDPOINT">
<span class="sig-name descname"><span class="pre">REMOVE_ENDPOINT</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'remove'</span></em><a class="headerlink" href="#core.opds_import.MetadataWranglerOPDSLookup.REMOVE_ENDPOINT" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.opds_import.MetadataWranglerOPDSLookup.SETTINGS">
<span class="sig-name descname"><span class="pre">SETTINGS</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">[{'key':</span> <span class="pre">'url',</span> <span class="pre">'label':</span> <span class="pre">l'URL',</span> <span class="pre">'default':</span> <span class="pre">'http://metadata.librarysimplified.org/',</span> <span class="pre">'required':</span> <span class="pre">True,</span> <span class="pre">'format':</span> <span class="pre">'url'}]</span></em><a class="headerlink" href="#core.opds_import.MetadataWranglerOPDSLookup.SETTINGS" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.opds_import.MetadataWranglerOPDSLookup.SITEWIDE">
<span class="sig-name descname"><span class="pre">SITEWIDE</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">True</span></em><a class="headerlink" href="#core.opds_import.MetadataWranglerOPDSLookup.SITEWIDE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.opds_import.MetadataWranglerOPDSLookup.UPDATES_ENDPOINT">
<span class="sig-name descname"><span class="pre">UPDATES_ENDPOINT</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'updates'</span></em><a class="headerlink" href="#core.opds_import.MetadataWranglerOPDSLookup.UPDATES_ENDPOINT" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.opds_import.MetadataWranglerOPDSLookup.add">
<span class="sig-name descname"><span class="pre">add</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">identifiers</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds_import.html#MetadataWranglerOPDSLookup.add"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.opds_import.MetadataWranglerOPDSLookup.add" title="Permalink to this definition">¶</a></dt>
<dd><p>Add items to an authenticated Metadata Wrangler Collection</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.opds_import.MetadataWranglerOPDSLookup.add_args">
<span class="sig-name descname"><span class="pre">add_args</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">url</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">arg_string</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds_import.html#MetadataWranglerOPDSLookup.add_args"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.opds_import.MetadataWranglerOPDSLookup.add_args" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.opds_import.MetadataWranglerOPDSLookup.add_with_metadata">
<span class="sig-name descname"><span class="pre">add_with_metadata</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">feed</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds_import.html#MetadataWranglerOPDSLookup.add_with_metadata"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.opds_import.MetadataWranglerOPDSLookup.add_with_metadata" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a feed of items with metadata to an authenticated Metadata Wrangler Collection.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="core.opds_import.MetadataWranglerOPDSLookup.authenticated">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">authenticated</span></span><a class="headerlink" href="#core.opds_import.MetadataWranglerOPDSLookup.authenticated" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="core.opds_import.MetadataWranglerOPDSLookup.authorization">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">authorization</span></span><a class="headerlink" href="#core.opds_import.MetadataWranglerOPDSLookup.authorization" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.opds_import.MetadataWranglerOPDSLookup.canonicalize_author_name">
<span class="sig-name descname"><span class="pre">canonicalize_author_name</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">identifier</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">working_display_name</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds_import.html#MetadataWranglerOPDSLookup.canonicalize_author_name"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.opds_import.MetadataWranglerOPDSLookup.canonicalize_author_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Attempt to find the canonical name for the author of a book.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>identifier</strong> – an ISBN-type Identifier.</p></li>
<li><p><strong>working_display_name</strong> – The display name of the author
(i.e. the name format human being used as opposed to the name
that goes into library records).</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.opds_import.MetadataWranglerOPDSLookup.external_integration">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">external_integration</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds_import.html#MetadataWranglerOPDSLookup.external_integration"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.opds_import.MetadataWranglerOPDSLookup.external_integration" title="Permalink to this definition">¶</a></dt>
<dd><p>Locate the ExternalIntegration associated with this object.
The status of the self-tests will be stored as a ConfigurationSetting
on this ExternalIntegration.</p>
<p>By default, there is no way to get from an object to its
ExternalIntegration, and self-test status will not be stored.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.opds_import.MetadataWranglerOPDSLookup.from_config">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">from_config</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">collection</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds_import.html#MetadataWranglerOPDSLookup.from_config"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.opds_import.MetadataWranglerOPDSLookup.from_config" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.opds_import.MetadataWranglerOPDSLookup.get_collection_url">
<span class="sig-name descname"><span class="pre">get_collection_url</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">endpoint</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds_import.html#MetadataWranglerOPDSLookup.get_collection_url"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.opds_import.MetadataWranglerOPDSLookup.get_collection_url" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="core.opds_import.MetadataWranglerOPDSLookup.lookup_endpoint">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">lookup_endpoint</span></span><a class="headerlink" href="#core.opds_import.MetadataWranglerOPDSLookup.lookup_endpoint" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.opds_import.MetadataWranglerOPDSLookup.metadata_needed">
<span class="sig-name descname"><span class="pre">metadata_needed</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds_import.html#MetadataWranglerOPDSLookup.metadata_needed"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.opds_import.MetadataWranglerOPDSLookup.metadata_needed" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a feed of items that need additional metadata to be processed
by the Metadata Wrangler.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.opds_import.MetadataWranglerOPDSLookup.remove">
<span class="sig-name descname"><span class="pre">remove</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">identifiers</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds_import.html#MetadataWranglerOPDSLookup.remove"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.opds_import.MetadataWranglerOPDSLookup.remove" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove items from an authenticated Metadata Wrangler Collection</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.opds_import.MetadataWranglerOPDSLookup.updates">
<span class="sig-name descname"><span class="pre">updates</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">last_update_time</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds_import.html#MetadataWranglerOPDSLookup.updates"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.opds_import.MetadataWranglerOPDSLookup.updates" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve updated items from an authenticated Metadata
Wrangler Collection</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>last_update_time</strong> – DateTime representing the last time
an update was fetched. May be None.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.opds_import.MockMetadataWranglerOPDSLookup">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.opds_import.</span></span><span class="sig-name descname"><span class="pre">MockMetadataWranglerOPDSLookup</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds_import.html#MockMetadataWranglerOPDSLookup"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.opds_import.MockMetadataWranglerOPDSLookup" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.opds_import.MockSimplifiedOPDSLookup" title="core.opds_import.MockSimplifiedOPDSLookup"><code class="xref py py-class docutils literal notranslate"><span class="pre">MockSimplifiedOPDSLookup</span></code></a>, <a class="reference internal" href="#core.opds_import.MetadataWranglerOPDSLookup" title="core.opds_import.MetadataWranglerOPDSLookup"><code class="xref py py-class docutils literal notranslate"><span class="pre">MetadataWranglerOPDSLookup</span></code></a></p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.opds_import.MockSimplifiedOPDSLookup">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.opds_import.</span></span><span class="sig-name descname"><span class="pre">MockSimplifiedOPDSLookup</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds_import.html#MockSimplifiedOPDSLookup"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.opds_import.MockSimplifiedOPDSLookup" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.opds_import.SimplifiedOPDSLookup" title="core.opds_import.SimplifiedOPDSLookup"><code class="xref py py-class docutils literal notranslate"><span class="pre">SimplifiedOPDSLookup</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="core.opds_import.MockSimplifiedOPDSLookup.queue_response">
<span class="sig-name descname"><span class="pre">queue_response</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">status_code</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">headers</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">{}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">content</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds_import.html#MockSimplifiedOPDSLookup.queue_response"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.opds_import.MockSimplifiedOPDSLookup.queue_response" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.opds_import.OPDSImportMonitor">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.opds_import.</span></span><span class="sig-name descname"><span class="pre">OPDSImportMonitor</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">collection</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">import_class</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">force_reimport</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">import_class_kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds_import.html#OPDSImportMonitor"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.opds_import.OPDSImportMonitor" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.monitor.CollectionMonitor" title="core.monitor.CollectionMonitor"><code class="xref py py-class docutils literal notranslate"><span class="pre">CollectionMonitor</span></code></a>, <a class="reference internal" href="#core.selftest.HasSelfTests" title="core.selftest.HasSelfTests"><code class="xref py py-class docutils literal notranslate"><span class="pre">HasSelfTests</span></code></a></p>
<p>Periodically monitor a Collection’s OPDS archive feed and import
every title it mentions.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="core.opds_import.OPDSImportMonitor.DEFAULT_START_TIME">
<span class="sig-name descname"><span class="pre">DEFAULT_START_TIME</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">&lt;object</span> <span class="pre">object&gt;</span></em><a class="headerlink" href="#core.opds_import.OPDSImportMonitor.DEFAULT_START_TIME" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.opds_import.OPDSImportMonitor.PROTOCOL">
<span class="sig-name descname"><span class="pre">PROTOCOL</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'OPDS</span> <span class="pre">Import'</span></em><a class="headerlink" href="#core.opds_import.OPDSImportMonitor.PROTOCOL" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.opds_import.OPDSImportMonitor.SERVICE_NAME">
<span class="sig-name descname"><span class="pre">SERVICE_NAME</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'OPDS</span> <span class="pre">Import</span> <span class="pre">Monitor'</span></em><a class="headerlink" href="#core.opds_import.OPDSImportMonitor.SERVICE_NAME" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.opds_import.OPDSImportMonitor.data_source">
<span class="sig-name descname"><span class="pre">data_source</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">collection</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds_import.html#OPDSImportMonitor.data_source"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.opds_import.OPDSImportMonitor.data_source" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the data source name for the given collection.</p>
<p>By default, this URL is stored as a setting on the collection, but
subclasses may hard-code it.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.opds_import.OPDSImportMonitor.external_integration">
<span class="sig-name descname"><span class="pre">external_integration</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds_import.html#OPDSImportMonitor.external_integration"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.opds_import.OPDSImportMonitor.external_integration" title="Permalink to this definition">¶</a></dt>
<dd><p>Locate the ExternalIntegration associated with this object.
The status of the self-tests will be stored as a ConfigurationSetting
on this ExternalIntegration.</p>
<p>By default, there is no way to get from an object to its
ExternalIntegration, and self-test status will not be stored.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.opds_import.OPDSImportMonitor.feed_contains_new_data">
<span class="sig-name descname"><span class="pre">feed_contains_new_data</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">feed</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds_import.html#OPDSImportMonitor.feed_contains_new_data"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.opds_import.OPDSImportMonitor.feed_contains_new_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Does the given feed contain any entries that haven’t been imported
yet?</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.opds_import.OPDSImportMonitor.follow_one_link">
<span class="sig-name descname"><span class="pre">follow_one_link</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">url</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">do_get</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds_import.html#OPDSImportMonitor.follow_one_link"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.opds_import.OPDSImportMonitor.follow_one_link" title="Permalink to this definition">¶</a></dt>
<dd><p>Download a representation of a URL and extract the useful
information.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>A 2-tuple (next_links, feed). <cite>next_links</cite> is a list of
additional links that need to be followed. <cite>feed</cite> is the content
that needs to be imported.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.opds_import.OPDSImportMonitor.identifier_needs_import">
<span class="sig-name descname"><span class="pre">identifier_needs_import</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">identifier</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">last_updated_remote</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds_import.html#OPDSImportMonitor.identifier_needs_import"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.opds_import.OPDSImportMonitor.identifier_needs_import" title="Permalink to this definition">¶</a></dt>
<dd><p>Does the remote side have new information about this Identifier?</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>identifier</strong> – An Identifier.</p></li>
<li><p><strong>last_update_remote</strong> – The last time the remote side updated
the OPDS entry for this Identifier.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.opds_import.OPDSImportMonitor.import_one_feed">
<span class="sig-name descname"><span class="pre">import_one_feed</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">feed</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds_import.html#OPDSImportMonitor.import_one_feed"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.opds_import.OPDSImportMonitor.import_one_feed" title="Permalink to this definition">¶</a></dt>
<dd><p>Import every book mentioned in an OPDS feed.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.opds_import.OPDSImportMonitor.opds_url">
<span class="sig-name descname"><span class="pre">opds_url</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">collection</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds_import.html#OPDSImportMonitor.opds_url"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.opds_import.OPDSImportMonitor.opds_url" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the OPDS import URL for the given collection.</p>
<p>By default, this URL is stored as the external account ID, but
subclasses may override this.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.opds_import.OPDSImportMonitor.run_once">
<span class="sig-name descname"><span class="pre">run_once</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">progress_ignore</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds_import.html#OPDSImportMonitor.run_once"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.opds_import.OPDSImportMonitor.run_once" title="Permalink to this definition">¶</a></dt>
<dd><p>Do the actual work of the Monitor.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>progress</strong> – A TimestampData representing the
work done by the Monitor up to this point.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A TimestampData representing how you want the
Monitor’s entry in the <cite>timestamps</cite> table to look like
from this point on.  NOTE: Modifying the incoming
<cite>progress</cite> and returning it is generally a bad idea,
because the incoming <cite>progress</cite> is full of old
data. Instead, return a new TimestampData containing data
for only the fields you want to set.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.opds_import.OPDSImporter">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.opds_import.</span></span><span class="sig-name descname"><span class="pre">OPDSImporter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">collection</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data_source_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">identifier_mapping</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">http_get</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">metadata_client</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">content_modifier</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">map_from_collection</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mirrors</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds_import.html#OPDSImporter"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.opds_import.OPDSImporter" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Imports editions and license pools from an OPDS feed.
Creates Edition, LicensePool and Work rows in the database, if those
don’t already exist.</p>
<p>Should be used when a circulation server asks for data from
our internal content server, and also when our content server asks for data
from external content servers.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="core.opds_import.OPDSImporter.BASE_SETTINGS">
<span class="sig-name descname"><span class="pre">BASE_SETTINGS</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">[{'key':</span> <span class="pre">'external_account_id',</span> <span class="pre">'label':</span> <span class="pre">l'URL',</span> <span class="pre">'required':</span> <span class="pre">True,</span> <span class="pre">'format':</span> <span class="pre">'url'},</span> <span class="pre">{'key':</span> <span class="pre">'data_source',</span> <span class="pre">'label':</span> <span class="pre">l'Data</span> <span class="pre">source</span> <span class="pre">name',</span> <span class="pre">'required':</span> <span class="pre">True},</span> <span class="pre">{'key':</span> <span class="pre">'default_audience',</span> <span class="pre">'label':</span> <span class="pre">l'Default</span> <span class="pre">audience',</span> <span class="pre">'description':</span> <span class="pre">l'If</span> <span class="pre">the</span> <span class="pre">vendor</span> <span class="pre">does</span> <span class="pre">not</span> <span class="pre">specify</span> <span class="pre">the</span> <span class="pre">target</span> <span class="pre">audience</span> <span class="pre">for</span> <span class="pre">their</span> <span class="pre">books,</span> <span class="pre">assume</span> <span class="pre">the</span> <span class="pre">books</span> <span class="pre">have</span> <span class="pre">this</span> <span class="pre">target</span> <span class="pre">audience.',</span> <span class="pre">'type':</span> <span class="pre">'select',</span> <span class="pre">'format':</span> <span class="pre">'narrow',</span> <span class="pre">'options':</span> <span class="pre">[{'key':</span> <span class="pre">'',</span> <span class="pre">'label':</span> <span class="pre">l'No</span> <span class="pre">default</span> <span class="pre">audience'},</span> <span class="pre">{'key':</span> <span class="pre">'Adult',</span> <span class="pre">'label':</span> <span class="pre">'Adult'},</span> <span class="pre">{'key':</span> <span class="pre">'Adults</span> <span class="pre">Only',</span> <span class="pre">'label':</span> <span class="pre">'Adults</span> <span class="pre">Only'},</span> <span class="pre">{'key':</span> <span class="pre">'All</span> <span class="pre">Ages',</span> <span class="pre">'label':</span> <span class="pre">'All</span> <span class="pre">Ages'},</span> <span class="pre">{'key':</span> <span class="pre">'Children',</span> <span class="pre">'label':</span> <span class="pre">'Children'},</span> <span class="pre">{'key':</span> <span class="pre">'Research',</span> <span class="pre">'label':</span> <span class="pre">'Research'},</span> <span class="pre">{'key':</span> <span class="pre">'Young</span> <span class="pre">Adult',</span> <span class="pre">'label':</span> <span class="pre">'Young</span> <span class="pre">Adult'}],</span> <span class="pre">'default':</span> <span class="pre">'',</span> <span class="pre">'required':</span> <span class="pre">False,</span> <span class="pre">'readOnly':</span> <span class="pre">True}]</span></em><a class="headerlink" href="#core.opds_import.OPDSImporter.BASE_SETTINGS" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.opds_import.OPDSImporter.COULD_NOT_CREATE_LICENSE_POOL">
<span class="sig-name descname"><span class="pre">COULD_NOT_CREATE_LICENSE_POOL</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'No</span> <span class="pre">existing</span> <span class="pre">license</span> <span class="pre">pool</span> <span class="pre">for</span> <span class="pre">this</span> <span class="pre">identifier</span> <span class="pre">and</span> <span class="pre">no</span> <span class="pre">way</span> <span class="pre">of</span> <span class="pre">creating</span> <span class="pre">one.'</span></em><a class="headerlink" href="#core.opds_import.OPDSImporter.COULD_NOT_CREATE_LICENSE_POOL" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.opds_import.OPDSImporter.DESCRIPTION">
<span class="sig-name descname"><span class="pre">DESCRIPTION</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">l'Import</span> <span class="pre">books</span> <span class="pre">from</span> <span class="pre">a</span> <span class="pre">publicly-accessible</span> <span class="pre">OPDS</span> <span class="pre">feed.'</span></em><a class="headerlink" href="#core.opds_import.OPDSImporter.DESCRIPTION" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.opds_import.OPDSImporter.NAME">
<span class="sig-name descname"><span class="pre">NAME</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'OPDS</span> <span class="pre">Import'</span></em><a class="headerlink" href="#core.opds_import.OPDSImporter.NAME" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.opds_import.OPDSImporter.NO_DEFAULT_AUDIENCE">
<span class="sig-name descname"><span class="pre">NO_DEFAULT_AUDIENCE</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">''</span></em><a class="headerlink" href="#core.opds_import.OPDSImporter.NO_DEFAULT_AUDIENCE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.opds_import.OPDSImporter.PARSER_CLASS">
<span class="sig-name descname"><span class="pre">PARSER_CLASS</span></span><a class="headerlink" href="#core.opds_import.OPDSImporter.PARSER_CLASS" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <a class="reference internal" href="#core.opds_import.OPDSXMLParser" title="core.opds_import.OPDSXMLParser"><code class="xref py py-class docutils literal notranslate"><span class="pre">OPDSXMLParser</span></code></a></p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.opds_import.OPDSImporter.SETTINGS">
<span class="sig-name descname"><span class="pre">SETTINGS</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">[{'key':</span> <span class="pre">'external_account_id',</span> <span class="pre">'label':</span> <span class="pre">l'URL',</span> <span class="pre">'required':</span> <span class="pre">True,</span> <span class="pre">'format':</span> <span class="pre">'url'},</span> <span class="pre">{'key':</span> <span class="pre">'data_source',</span> <span class="pre">'label':</span> <span class="pre">l'Data</span> <span class="pre">source</span> <span class="pre">name',</span> <span class="pre">'required':</span> <span class="pre">True},</span> <span class="pre">{'key':</span> <span class="pre">'default_audience',</span> <span class="pre">'label':</span> <span class="pre">l'Default</span> <span class="pre">audience',</span> <span class="pre">'description':</span> <span class="pre">l'If</span> <span class="pre">the</span> <span class="pre">vendor</span> <span class="pre">does</span> <span class="pre">not</span> <span class="pre">specify</span> <span class="pre">the</span> <span class="pre">target</span> <span class="pre">audience</span> <span class="pre">for</span> <span class="pre">their</span> <span class="pre">books,</span> <span class="pre">assume</span> <span class="pre">the</span> <span class="pre">books</span> <span class="pre">have</span> <span class="pre">this</span> <span class="pre">target</span> <span class="pre">audience.',</span> <span class="pre">'type':</span> <span class="pre">'select',</span> <span class="pre">'format':</span> <span class="pre">'narrow',</span> <span class="pre">'options':</span> <span class="pre">[{'key':</span> <span class="pre">'',</span> <span class="pre">'label':</span> <span class="pre">l'No</span> <span class="pre">default</span> <span class="pre">audience'},</span> <span class="pre">{'key':</span> <span class="pre">'Adult',</span> <span class="pre">'label':</span> <span class="pre">'Adult'},</span> <span class="pre">{'key':</span> <span class="pre">'Adults</span> <span class="pre">Only',</span> <span class="pre">'label':</span> <span class="pre">'Adults</span> <span class="pre">Only'},</span> <span class="pre">{'key':</span> <span class="pre">'All</span> <span class="pre">Ages',</span> <span class="pre">'label':</span> <span class="pre">'All</span> <span class="pre">Ages'},</span> <span class="pre">{'key':</span> <span class="pre">'Children',</span> <span class="pre">'label':</span> <span class="pre">'Children'},</span> <span class="pre">{'key':</span> <span class="pre">'Research',</span> <span class="pre">'label':</span> <span class="pre">'Research'},</span> <span class="pre">{'key':</span> <span class="pre">'Young</span> <span class="pre">Adult',</span> <span class="pre">'label':</span> <span class="pre">'Young</span> <span class="pre">Adult'}],</span> <span class="pre">'default':</span> <span class="pre">'',</span> <span class="pre">'required':</span> <span class="pre">False,</span> <span class="pre">'readOnly':</span> <span class="pre">True},</span> <span class="pre">{'key':</span> <span class="pre">'username',</span> <span class="pre">'label':</span> <span class="pre">l'Username',</span> <span class="pre">'description':</span> <span class="pre">l'If</span> <span class="pre">HTTP</span> <span class="pre">Basic</span> <span class="pre">authentication</span> <span class="pre">is</span> <span class="pre">required</span> <span class="pre">to</span> <span class="pre">access</span> <span class="pre">the</span> <span class="pre">OPDS</span> <span class="pre">feed</span> <span class="pre">(it</span> <span class="pre">usually</span> <span class="pre">isn't),</span> <span class="pre">enter</span> <span class="pre">the</span> <span class="pre">username</span> <span class="pre">here.'},</span> <span class="pre">{'key':</span> <span class="pre">'password',</span> <span class="pre">'label':</span> <span class="pre">l'Password',</span> <span class="pre">'description':</span> <span class="pre">l'If</span> <span class="pre">HTTP</span> <span class="pre">Basic</span> <span class="pre">authentication</span> <span class="pre">is</span> <span class="pre">required</span> <span class="pre">to</span> <span class="pre">access</span> <span class="pre">the</span> <span class="pre">OPDS</span> <span class="pre">feed</span> <span class="pre">(it</span> <span class="pre">usually</span> <span class="pre">isn't),</span> <span class="pre">enter</span> <span class="pre">the</span> <span class="pre">password</span> <span class="pre">here.'},</span> <span class="pre">{'key':</span> <span class="pre">'custom_accept_header',</span> <span class="pre">'label':</span> <span class="pre">l'Custom</span> <span class="pre">accept</span> <span class="pre">header',</span> <span class="pre">'required':</span> <span class="pre">False,</span> <span class="pre">'description':</span> <span class="pre">l'Some</span> <span class="pre">servers</span> <span class="pre">expect</span> <span class="pre">an</span> <span class="pre">accept</span> <span class="pre">header</span> <span class="pre">to</span> <span class="pre">decide</span> <span class="pre">which</span> <span class="pre">file</span> <span class="pre">to</span> <span class="pre">send.</span> <span class="pre">You</span> <span class="pre">can</span> <span class="pre">use</span> <span class="pre">*/*</span> <span class="pre">if</span> <span class="pre">the</span> <span class="pre">server</span> <span class="pre">doesn't</span> <span class="pre">expect</span> <span class="pre">anything.',</span> <span class="pre">'default':</span> <span class="pre">'application/atom+xml;profile=opds-catalog;kind=acquisition,application/atom+xml;q=0.9,application/xml;q=0.8,*/*;q=0.1'},</span> <span class="pre">{'key':</span> <span class="pre">'primary_identifier_source',</span> <span class="pre">'label':</span> <span class="pre">l'Identifer',</span> <span class="pre">'required':</span> <span class="pre">False,</span> <span class="pre">'description':</span> <span class="pre">l'Which</span> <span class="pre">book</span> <span class="pre">identifier</span> <span class="pre">to</span> <span class="pre">use</span> <span class="pre">as</span> <span class="pre">ID.',</span> <span class="pre">'type':</span> <span class="pre">'select',</span> <span class="pre">'options':</span> <span class="pre">[{'key':</span> <span class="pre">'',</span> <span class="pre">'label':</span> <span class="pre">l'(Default)</span> <span class="pre">Use</span> <span class="pre">&lt;id&gt;'},</span> <span class="pre">{'key':</span> <span class="pre">'first_dcterms_identifier',</span> <span class="pre">'label':</span> <span class="pre">l'Use</span> <span class="pre">&lt;dcterms:identifier&gt;</span> <span class="pre">first,</span> <span class="pre">if</span> <span class="pre">not</span> <span class="pre">exist</span> <span class="pre">use</span> <span class="pre">&lt;id&gt;'}]}]</span></em><a class="headerlink" href="#core.opds_import.OPDSImporter.SETTINGS" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.opds_import.OPDSImporter.SUCCESS_STATUS_CODES">
<span class="sig-name descname"><span class="pre">SUCCESS_STATUS_CODES</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#core.opds_import.OPDSImporter.SUCCESS_STATUS_CODES" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.opds_import.OPDSImporter.assert_importable_content">
<span class="sig-name descname"><span class="pre">assert_importable_content</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">feed</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">feed_url</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_get_attempts</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">5</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds_import.html#OPDSImporter.assert_importable_content"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.opds_import.OPDSImporter.assert_importable_content" title="Permalink to this definition">¶</a></dt>
<dd><p>Raise an exception if the given feed contains nothing that can,
even theoretically, be turned into a LicensePool.</p>
<p>By default, this means the feed must link to open-access content
that can actually be retrieved.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.opds_import.OPDSImporter.build_identifier_mapping">
<span class="sig-name descname"><span class="pre">build_identifier_mapping</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">external_urns</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds_import.html#OPDSImporter.build_identifier_mapping"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.opds_import.OPDSImporter.build_identifier_mapping" title="Permalink to this definition">¶</a></dt>
<dd><p>Uses the given Collection and a list of URNs to reverse
engineer an identifier mapping.</p>
<p>NOTE: It would be better if .identifier_mapping weren’t
instance data, since a single OPDSImporter might import
multiple pages of a feed. However, the code as written should
work.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="core.opds_import.OPDSImporter.collection">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">collection</span></span><a class="headerlink" href="#core.opds_import.OPDSImporter.collection" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns an associated Collection object</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Associated Collection object</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>Optional[<a class="reference internal" href="core.model.html#core.model.collection.Collection" title="core.model.collection.Collection">core.model.collection.Collection</a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.opds_import.OPDSImporter.combine">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">combine</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">d1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">d2</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds_import.html#OPDSImporter.combine"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.opds_import.OPDSImporter.combine" title="Permalink to this definition">¶</a></dt>
<dd><p>Combine two dictionaries that can be used as keyword arguments to
the Metadata constructor.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.opds_import.OPDSImporter.consolidate_links">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">consolidate_links</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">links</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds_import.html#OPDSImporter.consolidate_links"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.opds_import.OPDSImporter.consolidate_links" title="Permalink to this definition">¶</a></dt>
<dd><p>Try to match up links with their thumbnails.</p>
<p>If link n is an image and link n+1 is a thumbnail, then the
thumbnail is assumed to be the thumbnail of the image.</p>
<p>Similarly if link n is a thumbnail and link n+1 is an image.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.opds_import.OPDSImporter.coveragefailure_from_message">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">coveragefailure_from_message</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data_source</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">message</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds_import.html#OPDSImporter.coveragefailure_from_message"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.opds_import.OPDSImporter.coveragefailure_from_message" title="Permalink to this definition">¶</a></dt>
<dd><p>Turn a &lt;simplified:message&gt; tag into a CoverageFailure.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.opds_import.OPDSImporter.coveragefailures_from_messages">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">coveragefailures_from_messages</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data_source</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">parser</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">feed_tag</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds_import.html#OPDSImporter.coveragefailures_from_messages"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.opds_import.OPDSImporter.coveragefailures_from_messages" title="Permalink to this definition">¶</a></dt>
<dd><p>Extract CoverageFailure objects from a parsed OPDS document. This
allows us to determine the fate of books which could not
become &lt;entry&gt; tags.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.opds_import.OPDSImporter.data_detail_for_feedparser_entry">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">data_detail_for_feedparser_entry</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">entry</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data_source</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds_import.html#OPDSImporter.data_detail_for_feedparser_entry"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.opds_import.OPDSImporter.data_detail_for_feedparser_entry" title="Permalink to this definition">¶</a></dt>
<dd><p>Turn an entry dictionary created by feedparser into dictionaries of data
that can be used as keyword arguments to the Metadata and CirculationData constructors.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>A 3-tuple (identifier, kwargs for Metadata constructor, failure)</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="core.opds_import.OPDSImporter.data_source">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">data_source</span></span><a class="headerlink" href="#core.opds_import.OPDSImporter.data_source" title="Permalink to this definition">¶</a></dt>
<dd><p>Look up or create a DataSource object representing the
source of this OPDS feed.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.opds_import.OPDSImporter.detail_for_elementtree_entry">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">detail_for_elementtree_entry</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">parser</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">entry_tag</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data_source</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">feed_url</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">do_get</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds_import.html#OPDSImporter.detail_for_elementtree_entry"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.opds_import.OPDSImporter.detail_for_elementtree_entry" title="Permalink to this definition">¶</a></dt>
<dd><p>Turn an &lt;atom:entry&gt; tag into a dictionary of metadata that can be
used as keyword arguments to the Metadata contructor.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>A 2-tuple (identifier, kwargs)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.opds_import.OPDSImporter.extract_contributor">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">extract_contributor</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">parser</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">author_tag</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds_import.html#OPDSImporter.extract_contributor"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.opds_import.OPDSImporter.extract_contributor" title="Permalink to this definition">¶</a></dt>
<dd><p>Turn an &lt;atom:author&gt; tag into a ContributorData object.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.opds_import.OPDSImporter.extract_data_from_feedparser">
<span class="sig-name descname"><span class="pre">extract_data_from_feedparser</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">feed</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data_source</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds_import.html#OPDSImporter.extract_data_from_feedparser"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.opds_import.OPDSImporter.extract_data_from_feedparser" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.opds_import.OPDSImporter.extract_feed_data">
<span class="sig-name descname"><span class="pre">extract_feed_data</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">feed</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">feed_url</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds_import.html#OPDSImporter.extract_feed_data"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.opds_import.OPDSImporter.extract_feed_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Turn an OPDS feed into lists of Metadata and CirculationData objects,
with associated messages and next_links.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.opds_import.OPDSImporter.extract_identifier">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">extract_identifier</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">identifier_tag</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds_import.html#OPDSImporter.extract_identifier"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.opds_import.OPDSImporter.extract_identifier" title="Permalink to this definition">¶</a></dt>
<dd><p>Turn a &lt;dcterms:identifier&gt; tag into an IdentifierData object.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.opds_import.OPDSImporter.extract_last_update_dates">
<span class="sig-name descname"><span class="pre">extract_last_update_dates</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">feed</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds_import.html#OPDSImporter.extract_last_update_dates"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.opds_import.OPDSImporter.extract_last_update_dates" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.opds_import.OPDSImporter.extract_link">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">extract_link</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">link_tag</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">feed_url</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">entry_rights_uri</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds_import.html#OPDSImporter.extract_link"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.opds_import.OPDSImporter.extract_link" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert a &lt;link&gt; tag into a LinkData object.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>feed_url</strong> – The URL to the enclosing feed, for use in resolving
relative links.</p></li>
<li><p><strong>entry_rights_uri</strong> – A URI describing the rights advertised
in the entry. Unless this specific link says otherwise, we
will assume that the representation on the other end of the link
if made available on these terms.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.opds_import.OPDSImporter.extract_measurement">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">extract_measurement</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">rating_tag</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds_import.html#OPDSImporter.extract_measurement"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.opds_import.OPDSImporter.extract_measurement" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.opds_import.OPDSImporter.extract_medium">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">extract_medium</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">entry_tag</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">default</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'Book'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds_import.html#OPDSImporter.extract_medium"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.opds_import.OPDSImporter.extract_medium" title="Permalink to this definition">¶</a></dt>
<dd><p>Derive a value for Edition.medium from schema:additionalType or
from a &lt;dcterms:format&gt; subtag.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>entry_tag</strong> – A &lt;atom:entry&gt; tag.</p></li>
<li><p><strong>default</strong> – The value to use if nothing is found.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.opds_import.OPDSImporter.extract_messages">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">extract_messages</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">parser</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">feed_tag</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds_import.html#OPDSImporter.extract_messages"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.opds_import.OPDSImporter.extract_messages" title="Permalink to this definition">¶</a></dt>
<dd><p>Extract &lt;simplified:message&gt; tags from an OPDS feed and convert
them into OPDSMessage objects.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.opds_import.OPDSImporter.extract_metadata_from_elementtree">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">extract_metadata_from_elementtree</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">feed</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data_source</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">feed_url</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">do_get</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds_import.html#OPDSImporter.extract_metadata_from_elementtree"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.opds_import.OPDSImporter.extract_metadata_from_elementtree" title="Permalink to this definition">¶</a></dt>
<dd><p>Parse the OPDS as XML and extract all author and subject
information, as well as ratings and medium.</p>
<p>All the stuff that Feedparser can’t handle so we have to use lxml.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>a dictionary mapping IDs to dictionaries. The inner
dictionary can be used as keyword arguments to the Metadata
constructor.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.opds_import.OPDSImporter.extract_next_links">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">extract_next_links</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">feed</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds_import.html#OPDSImporter.extract_next_links"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.opds_import.OPDSImporter.extract_next_links" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.opds_import.OPDSImporter.extract_series">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">extract_series</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">series_tag</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds_import.html#OPDSImporter.extract_series"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.opds_import.OPDSImporter.extract_series" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.opds_import.OPDSImporter.extract_subject">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">extract_subject</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">parser</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">category_tag</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds_import.html#OPDSImporter.extract_subject"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.opds_import.OPDSImporter.extract_subject" title="Permalink to this definition">¶</a></dt>
<dd><p>Turn an &lt;atom:category&gt; tag into a SubjectData object.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.opds_import.OPDSImporter.get_medium_from_links">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">get_medium_from_links</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">links</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds_import.html#OPDSImporter.get_medium_from_links"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.opds_import.OPDSImporter.get_medium_from_links" title="Permalink to this definition">¶</a></dt>
<dd><p>Get medium if derivable from information in an acquisition link.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.opds_import.OPDSImporter.handle_failure">
<span class="sig-name descname"><span class="pre">handle_failure</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">urn</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">failure</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds_import.html#OPDSImporter.handle_failure"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.opds_import.OPDSImporter.handle_failure" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert a URN and a failure message that came in through
an OPDS feed into an Identifier and a CoverageFailure object.</p>
<p>The Identifier may not be the one designated by <cite>urn</cite> (if it’s
found in self.identifier_mapping) and the ‘failure’ may turn out not
to be a CoverageFailure at all – if it’s an Identifier, that means
that what a normal OPDSImporter would consider ‘failure’ is
considered success.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.opds_import.OPDSImporter.import_edition_from_metadata">
<span class="sig-name descname"><span class="pre">import_edition_from_metadata</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">metadata</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds_import.html#OPDSImporter.import_edition_from_metadata"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.opds_import.OPDSImporter.import_edition_from_metadata" title="Permalink to this definition">¶</a></dt>
<dd><p>For the passed-in Metadata object, see if can find or create an Edition
in the database. Also create a LicensePool if the Metadata has
CirculationData in it.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.opds_import.OPDSImporter.import_from_feed">
<span class="sig-name descname"><span class="pre">import_from_feed</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">feed</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">feed_url</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds_import.html#OPDSImporter.import_from_feed"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.opds_import.OPDSImporter.import_from_feed" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.opds_import.OPDSImporter.last_update_date_for_feedparser_entry">
<span class="sig-name descname"><span class="pre">last_update_date_for_feedparser_entry</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">entry</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds_import.html#OPDSImporter.last_update_date_for_feedparser_entry"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.opds_import.OPDSImporter.last_update_date_for_feedparser_entry" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.opds_import.OPDSImporter.make_link_data">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">make_link_data</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">rel</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">href</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">media_type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rights_uri</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">content</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds_import.html#OPDSImporter.make_link_data"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.opds_import.OPDSImporter.make_link_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Hook method for creating a LinkData object.</p>
<p>Intended to be overridden in subclasses.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.opds_import.OPDSImporter.rights_uri">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">rights_uri</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">rights_string</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds_import.html#OPDSImporter.rights_uri"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.opds_import.OPDSImporter.rights_uri" title="Permalink to this definition">¶</a></dt>
<dd><p>Determine the URI that best encapsulates the rights status of
the downloads associated with this book.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.opds_import.OPDSImporter.rights_uri_from_entry_tag">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">rights_uri_from_entry_tag</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">entry</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds_import.html#OPDSImporter.rights_uri_from_entry_tag"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.opds_import.OPDSImporter.rights_uri_from_entry_tag" title="Permalink to this definition">¶</a></dt>
<dd><p>Extract a rights string from an lxml &lt;entry&gt; tag.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>A rights URI.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.opds_import.OPDSImporter.rights_uri_from_feedparser_entry">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">rights_uri_from_feedparser_entry</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">entry</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds_import.html#OPDSImporter.rights_uri_from_feedparser_entry"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.opds_import.OPDSImporter.rights_uri_from_feedparser_entry" title="Permalink to this definition">¶</a></dt>
<dd><p>Extract a rights URI from a parsed feedparser entry.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>A rights URI.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.opds_import.OPDSImporter.update_work_for_edition">
<span class="sig-name descname"><span class="pre">update_work_for_edition</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">edition</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds_import.html#OPDSImporter.update_work_for_edition"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.opds_import.OPDSImporter.update_work_for_edition" title="Permalink to this definition">¶</a></dt>
<dd><p>If possible, ensure that there is a presentation-ready Work for the
given edition’s primary identifier.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.opds_import.OPDSXMLParser">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.opds_import.</span></span><span class="sig-name descname"><span class="pre">OPDSXMLParser</span></span><a class="reference internal" href="_modules/core/opds_import.html#OPDSXMLParser"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.opds_import.OPDSXMLParser" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="core.util.html#core.util.xmlparser.XMLParser" title="core.util.xmlparser.XMLParser"><code class="xref py py-class docutils literal notranslate"><span class="pre">XMLParser</span></code></a></p>
<dl class="py attribute">
<dt class="sig sig-object py" id="core.opds_import.OPDSXMLParser.NAMESPACES">
<span class="sig-name descname"><span class="pre">NAMESPACES</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">{'app':</span> <span class="pre">'http://www.w3.org/2007/app',</span> <span class="pre">'atom':</span> <span class="pre">'http://www.w3.org/2005/Atom',</span> <span class="pre">'dc':</span> <span class="pre">'http://purl.org/dc/elements/1.1/',</span> <span class="pre">'dcterms':</span> <span class="pre">'http://purl.org/dc/terms/',</span> <span class="pre">'drm':</span> <span class="pre">'http://librarysimplified.org/terms/drm',</span> <span class="pre">'opds':</span> <span class="pre">'http://opds-spec.org/2010/catalog',</span> <span class="pre">'schema':</span> <span class="pre">'http://schema.org/',</span> <span class="pre">'simplified':</span> <span class="pre">'http://librarysimplified.org/terms/'}</span></em><a class="headerlink" href="#core.opds_import.OPDSXMLParser.NAMESPACES" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.opds_import.SimplifiedOPDSLookup">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.opds_import.</span></span><span class="sig-name descname"><span class="pre">SimplifiedOPDSLookup</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">base_url</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds_import.html#SimplifiedOPDSLookup"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.opds_import.SimplifiedOPDSLookup" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Tiny integration class for the Simplified ‘lookup’ protocol.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="core.opds_import.SimplifiedOPDSLookup.LOOKUP_ENDPOINT">
<span class="sig-name descname"><span class="pre">LOOKUP_ENDPOINT</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'lookup'</span></em><a class="headerlink" href="#core.opds_import.SimplifiedOPDSLookup.LOOKUP_ENDPOINT" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.opds_import.SimplifiedOPDSLookup.check_content_type">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">check_content_type</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">response</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds_import.html#SimplifiedOPDSLookup.check_content_type"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.opds_import.SimplifiedOPDSLookup.check_content_type" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.opds_import.SimplifiedOPDSLookup.from_protocol">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">from_protocol</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">protocol</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">goal</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'licenses'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">library</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds_import.html#SimplifiedOPDSLookup.from_protocol"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.opds_import.SimplifiedOPDSLookup.from_protocol" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.opds_import.SimplifiedOPDSLookup.lookup">
<span class="sig-name descname"><span class="pre">lookup</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">identifiers</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds_import.html#SimplifiedOPDSLookup.lookup"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.opds_import.SimplifiedOPDSLookup.lookup" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve an OPDS feed with metadata for the given identifiers.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="core.opds_import.SimplifiedOPDSLookup.lookup_endpoint">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">lookup_endpoint</span></span><a class="headerlink" href="#core.opds_import.SimplifiedOPDSLookup.lookup_endpoint" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.opds_import.SimplifiedOPDSLookup.urn_args">
<span class="sig-name descname"><span class="pre">urn_args</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">identifiers</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds_import.html#SimplifiedOPDSLookup.urn_args"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.opds_import.SimplifiedOPDSLookup.urn_args" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="core.opds_import.parse_identifier">
<span class="sig-prename descclassname"><span class="pre">core.opds_import.</span></span><span class="sig-name descname"><span class="pre">parse_identifier</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">db</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">identifier</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds_import.html#parse_identifier"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.opds_import.parse_identifier" title="Permalink to this definition">¶</a></dt>
<dd><p>Parse the identifier and return an Identifier object representing it.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>db</strong> (<em>sqlalchemy.orm.session.Session</em>) – Database session</p></li>
<li><p><strong>identifier</strong> (<em>str</em>) – String containing the identifier</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Identifier object</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="core.model.html#core.model.identifier.Identifier" title="core.model.identifier.Identifier">core.model.identifier.Identifier</a></p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-core.opensearch">
<span id="core-opensearch-module"></span><h2>core.opensearch module<a class="headerlink" href="#module-core.opensearch" title="Permalink to this heading">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="core.opensearch.OpenSearchDocument">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.opensearch.</span></span><span class="sig-name descname"><span class="pre">OpenSearchDocument</span></span><a class="reference internal" href="_modules/core/opensearch.html#OpenSearchDocument"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.opensearch.OpenSearchDocument" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Generates OpenSearch documents.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="core.opensearch.OpenSearchDocument.TEMPLATE">
<span class="sig-name descname"><span class="pre">TEMPLATE</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'&lt;?xml</span> <span class="pre">version=&quot;1.0&quot;</span> <span class="pre">encoding=&quot;UTF-8&quot;?&gt;\n</span> <span class="pre">&lt;OpenSearchDescription</span> <span class="pre">xmlns=&quot;http://a9.com/-/spec/opensearch/1.1/&quot;&gt;\n</span>&#160;&#160; <span class="pre">&lt;ShortName&gt;%(name)s&lt;/ShortName&gt;\n</span>&#160;&#160; <span class="pre">&lt;Description&gt;%(description)s&lt;/Description&gt;\n</span>&#160;&#160; <span class="pre">&lt;Tags&gt;%(tags)s&lt;/Tags&gt;\n</span>&#160;&#160; <span class="pre">&lt;Url</span> <span class="pre">type=&quot;application/atom+xml;profile=opds-catalog&quot;</span> <span class="pre">template=&quot;%(url_template)s&quot;/&gt;\n</span> <span class="pre">&lt;/OpenSearchDescription&gt;'</span></em><a class="headerlink" href="#core.opensearch.OpenSearchDocument.TEMPLATE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.opensearch.OpenSearchDocument.escape_entities">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">escape_entities</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">info</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opensearch.html#OpenSearchDocument.escape_entities"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.opensearch.OpenSearchDocument.escape_entities" title="Permalink to this definition">¶</a></dt>
<dd><p>Escape ampersands in the given dictionary’s values.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.opensearch.OpenSearchDocument.for_lane">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">for_lane</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">lane</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">base_url</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opensearch.html#OpenSearchDocument.for_lane"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.opensearch.OpenSearchDocument.for_lane" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.opensearch.OpenSearchDocument.search_info">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">search_info</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">lane</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opensearch.html#OpenSearchDocument.search_info"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.opensearch.OpenSearchDocument.search_info" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.opensearch.OpenSearchDocument.url_template">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">url_template</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">base_url</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opensearch.html#OpenSearchDocument.url_template"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.opensearch.OpenSearchDocument.url_template" title="Permalink to this definition">¶</a></dt>
<dd><p>Turn a base URL into an OpenSearch URL template.</p>
</dd></dl>

</dd></dl>

</section>
<section id="module-core.overdrive">
<span id="core-overdrive-module"></span><h2>core.overdrive module<a class="headerlink" href="#module-core.overdrive" title="Permalink to this heading">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="core.overdrive.MockOverdriveAPI">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.overdrive.</span></span><span class="sig-name descname"><span class="pre">MockOverdriveAPI</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">collection</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/overdrive.html#MockOverdriveAPI"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.overdrive.MockOverdriveAPI" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.overdrive.OverdriveAPI" title="core.overdrive.OverdriveAPI"><code class="xref py py-class docutils literal notranslate"><span class="pre">OverdriveAPI</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="core.overdrive.MockOverdriveAPI.mock_access_token_response">
<span class="sig-name descname"><span class="pre">mock_access_token_response</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">credential</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/overdrive.html#MockOverdriveAPI.mock_access_token_response"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.overdrive.MockOverdriveAPI.mock_access_token_response" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.overdrive.MockOverdriveAPI.mock_collection">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">mock_collection</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">library</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'Test</span> <span class="pre">Overdrive</span> <span class="pre">Collection'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">client_key</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'a'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">client_secret</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'b'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">library_id</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'c'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">website_id</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'d'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ils_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'e'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/overdrive.html#MockOverdriveAPI.mock_collection"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.overdrive.MockOverdriveAPI.mock_collection" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a mock Overdrive collection for use in tests.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.overdrive.MockOverdriveAPI.mock_collection_token">
<span class="sig-name descname"><span class="pre">mock_collection_token</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">token</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/overdrive.html#MockOverdriveAPI.mock_collection_token"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.overdrive.MockOverdriveAPI.mock_collection_token" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.overdrive.MockOverdriveAPI.queue_collection_token">
<span class="sig-name descname"><span class="pre">queue_collection_token</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/overdrive.html#MockOverdriveAPI.queue_collection_token"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.overdrive.MockOverdriveAPI.queue_collection_token" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.overdrive.MockOverdriveAPI.queue_response">
<span class="sig-name descname"><span class="pre">queue_response</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">status_code</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">headers</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">{}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">content</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/overdrive.html#MockOverdriveAPI.queue_response"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.overdrive.MockOverdriveAPI.queue_response" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.overdrive.MockOverdriveAPI.token_post">
<span class="sig-name descname"><span class="pre">token_post</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">url</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">payload</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">headers</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">{}</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/overdrive.html#MockOverdriveAPI.token_post"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.overdrive.MockOverdriveAPI.token_post" title="Permalink to this definition">¶</a></dt>
<dd><p>Mock the request for an OAuth token.</p>
<p>We mock the method by looking at the access_token_response
property, rather than inserting a mock response in the queue,
because only the first MockOverdriveAPI instantiation in a
given test actually makes this call. By mocking the response
to this method separately we remove the need to figure out
whether to queue a response in a given test.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.overdrive.OverdriveAPI">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.overdrive.</span></span><span class="sig-name descname"><span class="pre">OverdriveAPI</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">collection</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/overdrive.html#OverdriveAPI"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.overdrive.OverdriveAPI" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<dl class="py attribute">
<dt class="sig sig-object py" id="core.overdrive.OverdriveAPI.ADVANTAGE_LIBRARY_ENDPOINT">
<span class="sig-name descname"><span class="pre">ADVANTAGE_LIBRARY_ENDPOINT</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'%(host)s/v1/libraries/%(parent_library_id)s/advantageAccounts/%(library_id)s'</span></em><a class="headerlink" href="#core.overdrive.OverdriveAPI.ADVANTAGE_LIBRARY_ENDPOINT" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.overdrive.OverdriveAPI.ALL_PRODUCTS_ENDPOINT">
<span class="sig-name descname"><span class="pre">ALL_PRODUCTS_ENDPOINT</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'%(host)s/v1/collections/%(collection_token)s/products?sort=%(sort)s'</span></em><a class="headerlink" href="#core.overdrive.OverdriveAPI.ALL_PRODUCTS_ENDPOINT" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.overdrive.OverdriveAPI.AVAILABILITY_ENDPOINT">
<span class="sig-name descname"><span class="pre">AVAILABILITY_ENDPOINT</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'%(host)s/v2/collections/%(collection_token)s/products/%(product_id)s/availability'</span></em><a class="headerlink" href="#core.overdrive.OverdriveAPI.AVAILABILITY_ENDPOINT" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.overdrive.OverdriveAPI.CHECKOUTS_ENDPOINT">
<span class="sig-name descname"><span class="pre">CHECKOUTS_ENDPOINT</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'%(patron_host)s/v1/patrons/me/checkouts'</span></em><a class="headerlink" href="#core.overdrive.OverdriveAPI.CHECKOUTS_ENDPOINT" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.overdrive.OverdriveAPI.CHECKOUT_ENDPOINT">
<span class="sig-name descname"><span class="pre">CHECKOUT_ENDPOINT</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'%(patron_host)s/v1/patrons/me/checkouts/%(overdrive_id)s'</span></em><a class="headerlink" href="#core.overdrive.OverdriveAPI.CHECKOUT_ENDPOINT" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.overdrive.OverdriveAPI.DEFAULT_READABLE_FORMATS">
<span class="sig-name descname"><span class="pre">DEFAULT_READABLE_FORMATS</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">{'audiobook-overdrive',</span> <span class="pre">'ebook-epub-adobe',</span> <span class="pre">'ebook-epub-open',</span> <span class="pre">'ebook-pdf-open'}</span></em><a class="headerlink" href="#core.overdrive.OverdriveAPI.DEFAULT_READABLE_FORMATS" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.overdrive.OverdriveAPI.EVENTS_ENDPOINT">
<span class="sig-name descname"><span class="pre">EVENTS_ENDPOINT</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'%(host)s/v1/collections/%(collection_token)s/products?lastUpdateTime=%(lastupdatetime)s&amp;sort=%(sort)s&amp;limit=%(limit)s'</span></em><a class="headerlink" href="#core.overdrive.OverdriveAPI.EVENTS_ENDPOINT" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.overdrive.OverdriveAPI.EVENT_DELAY">
<span class="sig-name descname"><span class="pre">EVENT_DELAY</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">datetime.timedelta(seconds=7200)</span></em><a class="headerlink" href="#core.overdrive.OverdriveAPI.EVENT_DELAY" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.overdrive.OverdriveAPI.EVENT_SOURCE">
<span class="sig-name descname"><span class="pre">EVENT_SOURCE</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'Overdrive'</span></em><a class="headerlink" href="#core.overdrive.OverdriveAPI.EVENT_SOURCE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.overdrive.OverdriveAPI.FORMATS">
<span class="sig-name descname"><span class="pre">FORMATS</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">['ebook-epub-open',</span> <span class="pre">'ebook-epub-adobe',</span> <span class="pre">'ebook-pdf-adobe',</span> <span class="pre">'ebook-pdf-open',</span> <span class="pre">'audiobook-overdrive']</span></em><a class="headerlink" href="#core.overdrive.OverdriveAPI.FORMATS" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.overdrive.OverdriveAPI.FORMATS_ENDPOINT">
<span class="sig-name descname"><span class="pre">FORMATS_ENDPOINT</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'%(patron_host)s/v1/patrons/me/checkouts/%(overdrive_id)s/formats'</span></em><a class="headerlink" href="#core.overdrive.OverdriveAPI.FORMATS_ENDPOINT" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.overdrive.OverdriveAPI.HOLDS_ENDPOINT">
<span class="sig-name descname"><span class="pre">HOLDS_ENDPOINT</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'%(patron_host)s/v1/patrons/me/holds'</span></em><a class="headerlink" href="#core.overdrive.OverdriveAPI.HOLDS_ENDPOINT" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.overdrive.OverdriveAPI.HOLD_ENDPOINT">
<span class="sig-name descname"><span class="pre">HOLD_ENDPOINT</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'%(patron_host)s/v1/patrons/me/holds/%(product_id)s'</span></em><a class="headerlink" href="#core.overdrive.OverdriveAPI.HOLD_ENDPOINT" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.overdrive.OverdriveAPI.HOSTS">
<span class="sig-name descname"><span class="pre">HOSTS</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">{'production':</span> <span class="pre">{'host':</span> <span class="pre">'https://api.overdrive.com',</span> <span class="pre">'oauth_host':</span> <span class="pre">'https://oauth.overdrive.com',</span> <span class="pre">'oauth_patron_host':</span> <span class="pre">'https://oauth-patron.overdrive.com',</span> <span class="pre">'patron_host':</span> <span class="pre">'https://patron.api.overdrive.com'},</span> <span class="pre">'testing':</span> <span class="pre">{'host':</span> <span class="pre">'https://integration.api.overdrive.com',</span> <span class="pre">'oauth_host':</span> <span class="pre">'https://oauth.overdrive.com',</span> <span class="pre">'oauth_patron_host':</span> <span class="pre">'https://oauth-patron.overdrive.com',</span> <span class="pre">'patron_host':</span> <span class="pre">'https://integration-patron.api.overdrive.com'}}</span></em><a class="headerlink" href="#core.overdrive.OverdriveAPI.HOSTS" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.overdrive.OverdriveAPI.ILS_NAME_DEFAULT">
<span class="sig-name descname"><span class="pre">ILS_NAME_DEFAULT</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'default'</span></em><a class="headerlink" href="#core.overdrive.OverdriveAPI.ILS_NAME_DEFAULT" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.overdrive.OverdriveAPI.ILS_NAME_KEY">
<span class="sig-name descname"><span class="pre">ILS_NAME_KEY</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'ils_name'</span></em><a class="headerlink" href="#core.overdrive.OverdriveAPI.ILS_NAME_KEY" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.overdrive.OverdriveAPI.INCOMPATIBLE_PLATFORM_FORMATS">
<span class="sig-name descname"><span class="pre">INCOMPATIBLE_PLATFORM_FORMATS</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">{'ebook-kindle'}</span></em><a class="headerlink" href="#core.overdrive.OverdriveAPI.INCOMPATIBLE_PLATFORM_FORMATS" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.overdrive.OverdriveAPI.LIBRARY_ENDPOINT">
<span class="sig-name descname"><span class="pre">LIBRARY_ENDPOINT</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'%(host)s/v1/libraries/%(library_id)s'</span></em><a class="headerlink" href="#core.overdrive.OverdriveAPI.LIBRARY_ENDPOINT" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.overdrive.OverdriveAPI.MAX_CREDENTIAL_AGE">
<span class="sig-name descname"><span class="pre">MAX_CREDENTIAL_AGE</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">3000</span></em><a class="headerlink" href="#core.overdrive.OverdriveAPI.MAX_CREDENTIAL_AGE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.overdrive.OverdriveAPI.METADATA_ENDPOINT">
<span class="sig-name descname"><span class="pre">METADATA_ENDPOINT</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'%(host)s/v1/collections/%(collection_token)s/products/%(item_id)s/metadata'</span></em><a class="headerlink" href="#core.overdrive.OverdriveAPI.METADATA_ENDPOINT" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.overdrive.OverdriveAPI.ME_ENDPOINT">
<span class="sig-name descname"><span class="pre">ME_ENDPOINT</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'%(patron_host)s/v1/patrons/me'</span></em><a class="headerlink" href="#core.overdrive.OverdriveAPI.ME_ENDPOINT" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.overdrive.OverdriveAPI.OVERDRIVE_READ_FORMAT">
<span class="sig-name descname"><span class="pre">OVERDRIVE_READ_FORMAT</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'ebook-overdrive'</span></em><a class="headerlink" href="#core.overdrive.OverdriveAPI.OVERDRIVE_READ_FORMAT" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.overdrive.OverdriveAPI.PAGE_SIZE_LIMIT">
<span class="sig-name descname"><span class="pre">PAGE_SIZE_LIMIT</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">300</span></em><a class="headerlink" href="#core.overdrive.OverdriveAPI.PAGE_SIZE_LIMIT" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.overdrive.OverdriveAPI.PATRON_INFORMATION_ENDPOINT">
<span class="sig-name descname"><span class="pre">PATRON_INFORMATION_ENDPOINT</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'%(patron_host)s/v1/patrons/me'</span></em><a class="headerlink" href="#core.overdrive.OverdriveAPI.PATRON_INFORMATION_ENDPOINT" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.overdrive.OverdriveAPI.PATRON_TOKEN_ENDPOINT">
<span class="sig-name descname"><span class="pre">PATRON_TOKEN_ENDPOINT</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'%(oauth_patron_host)s/patrontoken'</span></em><a class="headerlink" href="#core.overdrive.OverdriveAPI.PATRON_TOKEN_ENDPOINT" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.overdrive.OverdriveAPI.PRODUCTION_SERVERS">
<span class="sig-name descname"><span class="pre">PRODUCTION_SERVERS</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'production'</span></em><a class="headerlink" href="#core.overdrive.OverdriveAPI.PRODUCTION_SERVERS" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.overdrive.OverdriveAPI.SERVER_NICKNAME">
<span class="sig-name descname"><span class="pre">SERVER_NICKNAME</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'server_nickname'</span></em><a class="headerlink" href="#core.overdrive.OverdriveAPI.SERVER_NICKNAME" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.overdrive.OverdriveAPI.TESTING_SERVERS">
<span class="sig-name descname"><span class="pre">TESTING_SERVERS</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'testing'</span></em><a class="headerlink" href="#core.overdrive.OverdriveAPI.TESTING_SERVERS" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.overdrive.OverdriveAPI.TIME_FORMAT">
<span class="sig-name descname"><span class="pre">TIME_FORMAT</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'%Y-%m-%dT%H:%M:%SZ'</span></em><a class="headerlink" href="#core.overdrive.OverdriveAPI.TIME_FORMAT" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.overdrive.OverdriveAPI.TOKEN_ENDPOINT">
<span class="sig-name descname"><span class="pre">TOKEN_ENDPOINT</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'%(oauth_host)s/token'</span></em><a class="headerlink" href="#core.overdrive.OverdriveAPI.TOKEN_ENDPOINT" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.overdrive.OverdriveAPI.WEBSITE_ID">
<span class="sig-name descname"><span class="pre">WEBSITE_ID</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'website_id'</span></em><a class="headerlink" href="#core.overdrive.OverdriveAPI.WEBSITE_ID" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="core.overdrive.OverdriveAPI.advantage_library_id">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">advantage_library_id</span></span><a class="headerlink" href="#core.overdrive.OverdriveAPI.advantage_library_id" title="Permalink to this definition">¶</a></dt>
<dd><p>The library ID for this library, as we should look for it in
certain API documents served by Overdrive.</p>
<p>For ordinary collections, and for consortial collections
shared among libraries, this will be -1.</p>
<p>For Overdrive Advantage accounts, this will be the numeric
value of the Overdrive library ID.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.overdrive.OverdriveAPI.all_ids">
<span class="sig-name descname"><span class="pre">all_ids</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/overdrive.html#OverdriveAPI.all_ids"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.overdrive.OverdriveAPI.all_ids" title="Permalink to this definition">¶</a></dt>
<dd><p>Get IDs for every book in the system, with the most recently added
ones at the front.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.overdrive.OverdriveAPI.check_creds">
<span class="sig-name descname"><span class="pre">check_creds</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">force_refresh</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/overdrive.html#OverdriveAPI.check_creds"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.overdrive.OverdriveAPI.check_creds" title="Permalink to this definition">¶</a></dt>
<dd><p>If the Bearer Token has expired, update it.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="core.overdrive.OverdriveAPI.collection">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">collection</span></span><a class="headerlink" href="#core.overdrive.OverdriveAPI.collection" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="core.overdrive.OverdriveAPI.collection_token">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">collection_token</span></span><a class="headerlink" href="#core.overdrive.OverdriveAPI.collection_token" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the token representing this particular Overdrive collection.</p>
<p>As a side effect, this will verify that the Overdrive
credentials are working.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.overdrive.OverdriveAPI.credential_object">
<span class="sig-name descname"><span class="pre">credential_object</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">refresh</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/overdrive.html#OverdriveAPI.credential_object"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.overdrive.OverdriveAPI.credential_object" title="Permalink to this definition">¶</a></dt>
<dd><p>Look up the Credential object that allows us to use
the Overdrive API.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.overdrive.OverdriveAPI.endpoint">
<span class="sig-name descname"><span class="pre">endpoint</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">url</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/overdrive.html#OverdriveAPI.endpoint"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.overdrive.OverdriveAPI.endpoint" title="Permalink to this definition">¶</a></dt>
<dd><p>Create the URL to an Overdrive API endpoint.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>url</strong> – A template for the URL.</p></li>
<li><p><strong>kwargs</strong> – Arguments to be interpolated into the template.
The server hostname will be interpolated automatically; you
don’t have to pass it in.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.overdrive.OverdriveAPI.get">
<span class="sig-name descname"><span class="pre">get</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">url</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">extra_headers</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">exception_on_401</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/overdrive.html#OverdriveAPI.get"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.overdrive.OverdriveAPI.get" title="Permalink to this definition">¶</a></dt>
<dd><p>Make an HTTP GET request using the active Bearer Token.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.overdrive.OverdriveAPI.get_advantage_accounts">
<span class="sig-name descname"><span class="pre">get_advantage_accounts</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/overdrive.html#OverdriveAPI.get_advantage_accounts"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.overdrive.OverdriveAPI.get_advantage_accounts" title="Permalink to this definition">¶</a></dt>
<dd><p>Find all the Overdrive Advantage accounts managed by this library.</p>
<dl class="field-list simple">
<dt class="field-odd">Yield<span class="colon">:</span></dt>
<dd class="field-odd"><p>A sequence of OverdriveAdvantageAccount objects.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.overdrive.OverdriveAPI.get_library">
<span class="sig-name descname"><span class="pre">get_library</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/overdrive.html#OverdriveAPI.get_library"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.overdrive.OverdriveAPI.get_library" title="Permalink to this definition">¶</a></dt>
<dd><p>Get basic information about the collection, including
a link to the titles in the collection.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.overdrive.OverdriveAPI.host">
<span class="sig-name descname"><span class="pre">host</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">{'host':</span> <span class="pre">'https://integration.api.overdrive.com',</span> <span class="pre">'oauth_host':</span> <span class="pre">'https://oauth.overdrive.com',</span> <span class="pre">'oauth_patron_host':</span> <span class="pre">'https://oauth-patron.overdrive.com',</span> <span class="pre">'patron_host':</span> <span class="pre">'https://integration-patron.api.overdrive.com'}</span></em><a class="headerlink" href="#core.overdrive.OverdriveAPI.host" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.overdrive.OverdriveAPI.ils_name">
<span class="sig-name descname"><span class="pre">ils_name</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">library</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/overdrive.html#OverdriveAPI.ils_name"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.overdrive.OverdriveAPI.ils_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Determine the ILS name to use for the given Library.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.overdrive.OverdriveAPI.ils_name_setting">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">ils_name_setting</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">collection</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">library</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/overdrive.html#OverdriveAPI.ils_name_setting"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.overdrive.OverdriveAPI.ils_name_setting" title="Permalink to this definition">¶</a></dt>
<dd><p>Find the ConfigurationSetting controlling the ILS name
for the given collection and library.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.overdrive.OverdriveAPI.lock">
<span class="sig-name descname"><span class="pre">lock</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">&lt;unlocked</span> <span class="pre">_thread.RLock</span> <span class="pre">object</span> <span class="pre">owner=0</span> <span class="pre">count=0&gt;</span></em><a class="headerlink" href="#core.overdrive.OverdriveAPI.lock" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.overdrive.OverdriveAPI.log">
<span class="sig-name descname"><span class="pre">log</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">&lt;Logger</span> <span class="pre">Overdrive</span> <span class="pre">API</span> <span class="pre">(WARNING)&gt;</span></em><a class="headerlink" href="#core.overdrive.OverdriveAPI.log" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.overdrive.OverdriveAPI.make_link_safe">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">make_link_safe</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">url</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/overdrive.html#OverdriveAPI.make_link_safe"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.overdrive.OverdriveAPI.make_link_safe" title="Permalink to this definition">¶</a></dt>
<dd><p>Turn a server-provided link into a link the server will accept!</p>
<p>The {} part is completely obnoxious and I have complained about it to
Overdrive.</p>
<p>The availability part is to make sure we always use v2 of the
availability API, even if Overdrive sent us a link to v1.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.overdrive.OverdriveAPI.metadata_lookup">
<span class="sig-name descname"><span class="pre">metadata_lookup</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">identifier</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/overdrive.html#OverdriveAPI.metadata_lookup"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.overdrive.OverdriveAPI.metadata_lookup" title="Permalink to this definition">¶</a></dt>
<dd><p>Look up metadata for an Overdrive identifier.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.overdrive.OverdriveAPI.metadata_lookup_obj">
<span class="sig-name descname"><span class="pre">metadata_lookup_obj</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">identifier</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/overdrive.html#OverdriveAPI.metadata_lookup_obj"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.overdrive.OverdriveAPI.metadata_lookup_obj" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.overdrive.OverdriveAPI.recently_changed_ids">
<span class="sig-name descname"><span class="pre">recently_changed_ids</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">start</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cutoff</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/overdrive.html#OverdriveAPI.recently_changed_ids"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.overdrive.OverdriveAPI.recently_changed_ids" title="Permalink to this definition">¶</a></dt>
<dd><p>Get IDs of books whose status has changed between the start time
and now.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.overdrive.OverdriveAPI.refresh_creds">
<span class="sig-name descname"><span class="pre">refresh_creds</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">credential</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/overdrive.html#OverdriveAPI.refresh_creds"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.overdrive.OverdriveAPI.refresh_creds" title="Permalink to this definition">¶</a></dt>
<dd><p>Fetch a new Bearer Token and update the given Credential object.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="core.overdrive.OverdriveAPI.source">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">source</span></span><a class="headerlink" href="#core.overdrive.OverdriveAPI.source" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="core.overdrive.OverdriveAPI.token">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">token</span></span><a class="headerlink" href="#core.overdrive.OverdriveAPI.token" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="core.overdrive.OverdriveAPI.token_authorization_header">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">token_authorization_header</span></span><a class="headerlink" href="#core.overdrive.OverdriveAPI.token_authorization_header" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.overdrive.OverdriveAPI.token_post">
<span class="sig-name descname"><span class="pre">token_post</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">url</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">payload</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">headers</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">{}</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/overdrive.html#OverdriveAPI.token_post"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.overdrive.OverdriveAPI.token_post" title="Permalink to this definition">¶</a></dt>
<dd><p>Make an HTTP POST request for purposes of getting an OAuth token.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.overdrive.OverdriveAdvantageAccount">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.overdrive.</span></span><span class="sig-name descname"><span class="pre">OverdriveAdvantageAccount</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">parent_library_id</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">library_id</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/overdrive.html#OverdriveAdvantageAccount"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.overdrive.OverdriveAdvantageAccount" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Holder and parser for data associated with Overdrive Advantage.</p>
<dl class="py method">
<dt class="sig sig-object py" id="core.overdrive.OverdriveAdvantageAccount.from_representation">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">from_representation</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">content</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/overdrive.html#OverdriveAdvantageAccount.from_representation"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.overdrive.OverdriveAdvantageAccount.from_representation" title="Permalink to this definition">¶</a></dt>
<dd><p>Turn the representation of an advantageAccounts link into a list of
OverdriveAdvantageAccount objects.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>content</strong> – The data obtained by following an advantageAccounts
link.</p>
</dd>
<dt class="field-even">Yield<span class="colon">:</span></dt>
<dd class="field-even"><p>A sequence of OverdriveAdvantageAccount objects.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.overdrive.OverdriveAdvantageAccount.to_collection">
<span class="sig-name descname"><span class="pre">to_collection</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/overdrive.html#OverdriveAdvantageAccount.to_collection"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.overdrive.OverdriveAdvantageAccount.to_collection" title="Permalink to this definition">¶</a></dt>
<dd><p>Find or create a Collection object for this Overdrive Advantage
account.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>a 2-tuple of Collections (primary Overdrive
collection, Overdrive Advantage collection)</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.overdrive.OverdriveBibliographicCoverageProvider">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.overdrive.</span></span><span class="sig-name descname"><span class="pre">OverdriveBibliographicCoverageProvider</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">collection</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">api_class=&lt;class</span> <span class="pre">'core.overdrive.OverdriveAPI'&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">**kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/overdrive.html#OverdriveBibliographicCoverageProvider"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.overdrive.OverdriveBibliographicCoverageProvider" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.coverage.BibliographicCoverageProvider" title="core.coverage.BibliographicCoverageProvider"><code class="xref py py-class docutils literal notranslate"><span class="pre">BibliographicCoverageProvider</span></code></a></p>
<p>Fill in bibliographic metadata for Overdrive records.</p>
<p>This will occasionally fill in some availability information for a
single Collection, but we rely on Monitors to keep availability
information up to date for all Collections.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="core.overdrive.OverdriveBibliographicCoverageProvider.DATA_SOURCE_NAME">
<span class="sig-name descname"><span class="pre">DATA_SOURCE_NAME</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'Overdrive'</span></em><a class="headerlink" href="#core.overdrive.OverdriveBibliographicCoverageProvider.DATA_SOURCE_NAME" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.overdrive.OverdriveBibliographicCoverageProvider.INPUT_IDENTIFIER_TYPES">
<span class="sig-name descname"><span class="pre">INPUT_IDENTIFIER_TYPES</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'Overdrive</span> <span class="pre">ID'</span></em><a class="headerlink" href="#core.overdrive.OverdriveBibliographicCoverageProvider.INPUT_IDENTIFIER_TYPES" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.overdrive.OverdriveBibliographicCoverageProvider.PROTOCOL">
<span class="sig-name descname"><span class="pre">PROTOCOL</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'Overdrive'</span></em><a class="headerlink" href="#core.overdrive.OverdriveBibliographicCoverageProvider.PROTOCOL" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.overdrive.OverdriveBibliographicCoverageProvider.SERVICE_NAME">
<span class="sig-name descname"><span class="pre">SERVICE_NAME</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'Overdrive</span> <span class="pre">Bibliographic</span> <span class="pre">Coverage</span> <span class="pre">Provider'</span></em><a class="headerlink" href="#core.overdrive.OverdriveBibliographicCoverageProvider.SERVICE_NAME" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.overdrive.OverdriveBibliographicCoverageProvider.metadata_pre_hook">
<span class="sig-name descname"><span class="pre">metadata_pre_hook</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">metadata</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/overdrive.html#OverdriveBibliographicCoverageProvider.metadata_pre_hook"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.overdrive.OverdriveBibliographicCoverageProvider.metadata_pre_hook" title="Permalink to this definition">¶</a></dt>
<dd><p>A hook method that allows subclasses to modify a Metadata
object derived from Overdrive before it’s applied.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.overdrive.OverdriveBibliographicCoverageProvider.process_item">
<span class="sig-name descname"><span class="pre">process_item</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">identifier</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/overdrive.html#OverdriveBibliographicCoverageProvider.process_item"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.overdrive.OverdriveBibliographicCoverageProvider.process_item" title="Permalink to this definition">¶</a></dt>
<dd><p>Do the work necessary to give coverage to one specific item.</p>
<p>Since this is where the actual work happens, this is not
implemented in IdentifierCoverageProvider or
WorkCoverageProvider, and must be handled in a subclass.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.overdrive.OverdriveRepresentationExtractor">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.overdrive.</span></span><span class="sig-name descname"><span class="pre">OverdriveRepresentationExtractor</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">api</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/overdrive.html#OverdriveRepresentationExtractor"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.overdrive.OverdriveRepresentationExtractor" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Extract useful information from Overdrive’s JSON representations.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="core.overdrive.OverdriveRepresentationExtractor.DATE_FORMAT">
<span class="sig-name descname"><span class="pre">DATE_FORMAT</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'%Y-%m-%d'</span></em><a class="headerlink" href="#core.overdrive.OverdriveRepresentationExtractor.DATE_FORMAT" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.overdrive.OverdriveRepresentationExtractor.availability_link_list">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">availability_link_list</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">book_list</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/overdrive.html#OverdriveRepresentationExtractor.availability_link_list"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.overdrive.OverdriveRepresentationExtractor.availability_link_list" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>A list of dictionaries with keys <cite>id</cite>, <cite>title</cite>, <cite>availability_link</cite>.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.overdrive.OverdriveRepresentationExtractor.book_info_to_circulation">
<span class="sig-name descname"><span class="pre">book_info_to_circulation</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">book</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/overdrive.html#OverdriveRepresentationExtractor.book_info_to_circulation"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.overdrive.OverdriveRepresentationExtractor.book_info_to_circulation" title="Permalink to this definition">¶</a></dt>
<dd><p>Note:  The json data passed into this method is from a different file/stream
from the json data that goes into the book_info_to_metadata() method.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.overdrive.OverdriveRepresentationExtractor.book_info_to_metadata">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">book_info_to_metadata</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">book</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">include_bibliographic</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">include_formats</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/overdrive.html#OverdriveRepresentationExtractor.book_info_to_metadata"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.overdrive.OverdriveRepresentationExtractor.book_info_to_metadata" title="Permalink to this definition">¶</a></dt>
<dd><p>Turn Overdrive’s JSON representation of a book into a Metadata
object.</p>
<p>Note:  The json data passed into this method is from a different file/stream
from the json data that goes into the book_info_to_circulation() method.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.overdrive.OverdriveRepresentationExtractor.format_data_for_overdrive_format">
<span class="sig-name descname"><span class="pre">format_data_for_overdrive_format</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">{'audiobook-mp3':</span> <span class="pre">('application/x-od-media',</span> <span class="pre">'Overdrive</span> <span class="pre">DRM'),</span> <span class="pre">'audiobook-overdrive':</span> <span class="pre">[('application/vnd.overdrive.circulation.api+json;profile=audiobook',</span> <span class="pre">'Libby</span> <span class="pre">DRM'),</span> <span class="pre">('Streaming</span> <span class="pre">Audio',</span> <span class="pre">'Streaming')],</span> <span class="pre">'ebook-epub-adobe':</span> <span class="pre">('application/epub+zip',</span> <span class="pre">'application/vnd.adobe.adept+xml'),</span> <span class="pre">'ebook-epub-open':</span> <span class="pre">('application/epub+zip',</span> <span class="pre">None),</span> <span class="pre">'ebook-kindle':</span> <span class="pre">('Kindle</span> <span class="pre">via</span> <span class="pre">Amazon',</span> <span class="pre">'Kindle</span> <span class="pre">DRM'),</span> <span class="pre">'ebook-overdrive':</span> <span class="pre">[('application/vnd.overdrive.circulation.api+json;profile=ebook',</span> <span class="pre">'Libby</span> <span class="pre">DRM'),</span> <span class="pre">('Streaming</span> <span class="pre">Text',</span> <span class="pre">'Streaming')],</span> <span class="pre">'ebook-pdf-adobe':</span> <span class="pre">('application/pdf',</span> <span class="pre">'application/vnd.adobe.adept+xml'),</span> <span class="pre">'ebook-pdf-open':</span> <span class="pre">('application/pdf',</span> <span class="pre">None),</span> <span class="pre">'music-mp3':</span> <span class="pre">('application/x-od-media',</span> <span class="pre">'Overdrive</span> <span class="pre">DRM'),</span> <span class="pre">'periodicals-nook':</span> <span class="pre">('Nook</span> <span class="pre">via</span> <span class="pre">B&amp;N',</span> <span class="pre">'Nook</span> <span class="pre">DRM'),</span> <span class="pre">'video-streaming':</span> <span class="pre">('Streaming</span> <span class="pre">Video',</span> <span class="pre">'Streaming')}</span></em><a class="headerlink" href="#core.overdrive.OverdriveRepresentationExtractor.format_data_for_overdrive_format" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.overdrive.OverdriveRepresentationExtractor.ignorable_overdrive_formats">
<span class="sig-name descname"><span class="pre">ignorable_overdrive_formats</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">{}</span></em><a class="headerlink" href="#core.overdrive.OverdriveRepresentationExtractor.ignorable_overdrive_formats" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.overdrive.OverdriveRepresentationExtractor.image_link_to_linkdata">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">image_link_to_linkdata</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">link</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rel</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/overdrive.html#OverdriveRepresentationExtractor.image_link_to_linkdata"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.overdrive.OverdriveRepresentationExtractor.image_link_to_linkdata" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.overdrive.OverdriveRepresentationExtractor.internal_formats">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">internal_formats</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">overdrive_format</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/overdrive.html#OverdriveRepresentationExtractor.internal_formats"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.overdrive.OverdriveRepresentationExtractor.internal_formats" title="Permalink to this definition">¶</a></dt>
<dd><p>Yield all internal formats for the given Overdrive format.</p>
<p>Some Overdrive formats become multiple internal formats.</p>
<dl class="field-list simple">
<dt class="field-odd">Yield<span class="colon">:</span></dt>
<dd class="field-odd"><p>A sequence of (content type, DRM system) 2-tuples</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.overdrive.OverdriveRepresentationExtractor.link">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">link</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">page</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rel</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/overdrive.html#OverdriveRepresentationExtractor.link"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.overdrive.OverdriveRepresentationExtractor.link" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.overdrive.OverdriveRepresentationExtractor.log">
<span class="sig-name descname"><span class="pre">log</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">&lt;Logger</span> <span class="pre">Overdrive</span> <span class="pre">representation</span> <span class="pre">extractor</span> <span class="pre">(WARNING)&gt;</span></em><a class="headerlink" href="#core.overdrive.OverdriveRepresentationExtractor.log" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.overdrive.OverdriveRepresentationExtractor.overdrive_medium_to_simplified_medium">
<span class="sig-name descname"><span class="pre">overdrive_medium_to_simplified_medium</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">{'Audiobook':</span> <span class="pre">'Audio',</span> <span class="pre">'Music':</span> <span class="pre">'Music',</span> <span class="pre">'Periodicals':</span> <span class="pre">'Periodical',</span> <span class="pre">'Video':</span> <span class="pre">'Video',</span> <span class="pre">'eBook':</span> <span class="pre">'Book'}</span></em><a class="headerlink" href="#core.overdrive.OverdriveRepresentationExtractor.overdrive_medium_to_simplified_medium" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.overdrive.OverdriveRepresentationExtractor.overdrive_role_to_simplified_role">
<span class="sig-name descname"><span class="pre">overdrive_role_to_simplified_role</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">{'actor':</span> <span class="pre">'Actor',</span> <span class="pre">'adapter':</span> <span class="pre">'Adapter',</span> <span class="pre">'artist':</span> <span class="pre">'Artist',</span> <span class="pre">'associated</span> <span class="pre">name':</span> <span class="pre">'Associated</span> <span class="pre">name',</span> <span class="pre">'author':</span> <span class="pre">'Author',</span> <span class="pre">'author</span> <span class="pre">of</span> <span class="pre">afterword':</span> <span class="pre">'Afterword</span> <span class="pre">Author',</span> <span class="pre">'author</span> <span class="pre">of</span> <span class="pre">foreword':</span> <span class="pre">'Foreword</span> <span class="pre">Author',</span> <span class="pre">'author</span> <span class="pre">of</span> <span class="pre">introduction':</span> <span class="pre">'Introduction</span> <span class="pre">Author',</span> <span class="pre">'book</span> <span class="pre">producer':</span> <span class="pre">'Producer',</span> <span class="pre">'cast</span> <span class="pre">member':</span> <span class="pre">'Actor',</span> <span class="pre">'collaborator':</span> <span class="pre">'Collaborator',</span> <span class="pre">'colophon':</span> <span class="pre">'Colophon</span> <span class="pre">Author',</span> <span class="pre">'compiler':</span> <span class="pre">'Compiler',</span> <span class="pre">'composer':</span> <span class="pre">'Composer',</span> <span class="pre">'contributor':</span> <span class="pre">'Contributor',</span> <span class="pre">'copyright</span> <span class="pre">holder':</span> <span class="pre">'Copyright</span> <span class="pre">holder',</span> <span class="pre">'designer':</span> <span class="pre">'Designer',</span> <span class="pre">'director':</span> <span class="pre">'Director',</span> <span class="pre">'editor':</span> <span class="pre">'Editor',</span> <span class="pre">'engineer':</span> <span class="pre">'Engineer',</span> <span class="pre">'etc.':</span> <span class="pre">'Unknown',</span> <span class="pre">'executive</span> <span class="pre">producer':</span> <span class="pre">'Executive</span> <span class="pre">Producer',</span> <span class="pre">'illustrator':</span> <span class="pre">'Illustrator',</span> <span class="pre">'lyricist':</span> <span class="pre">'Lyricist',</span> <span class="pre">'musician':</span> <span class="pre">'Musician',</span> <span class="pre">'narrator':</span> <span class="pre">'Narrator',</span> <span class="pre">'other':</span> <span class="pre">'Unknown',</span> <span class="pre">'performer':</span> <span class="pre">'Performer',</span> <span class="pre">'photographer':</span> <span class="pre">'Photographer',</span> <span class="pre">'producer':</span> <span class="pre">'Producer',</span> <span class="pre">'transcriber':</span> <span class="pre">'Transcriber',</span> <span class="pre">'translator':</span> <span class="pre">'Translator'}</span></em><a class="headerlink" href="#core.overdrive.OverdriveRepresentationExtractor.overdrive_role_to_simplified_role" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.overdrive.OverdriveRepresentationExtractor.parse_roles">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">parse_roles</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">id</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rolestring</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/overdrive.html#OverdriveRepresentationExtractor.parse_roles"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.overdrive.OverdriveRepresentationExtractor.parse_roles" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</section>
<section id="module-core.problem_details">
<span id="core-problem-details-module"></span><h2>core.problem_details module<a class="headerlink" href="#module-core.problem_details" title="Permalink to this heading">¶</a></h2>
</section>
<section id="module-core.s3">
<span id="core-s3-module"></span><h2>core.s3 module<a class="headerlink" href="#module-core.s3" title="Permalink to this heading">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="core.s3.MinIOUploader">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.s3.</span></span><span class="sig-name descname"><span class="pre">MinIOUploader</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">integration</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">client_class</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/s3.html#MinIOUploader"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.s3.MinIOUploader" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.s3.S3Uploader" title="core.s3.S3Uploader"><code class="xref py py-class docutils literal notranslate"><span class="pre">S3Uploader</span></code></a></p>
<dl class="py attribute">
<dt class="sig sig-object py" id="core.s3.MinIOUploader.NAME">
<span class="sig-name descname"><span class="pre">NAME</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'MinIO'</span></em><a class="headerlink" href="#core.s3.MinIOUploader.NAME" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.s3.MinIOUploader.SETTINGS">
<span class="sig-name descname"><span class="pre">SETTINGS</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">[{'key':</span> <span class="pre">'username',</span> <span class="pre">'label':</span> <span class="pre">l'Access</span> <span class="pre">Key',</span> <span class="pre">'description':</span> <span class="pre">'',</span> <span class="pre">'type':</span> <span class="pre">None,</span> <span class="pre">'required':</span> <span class="pre">False,</span> <span class="pre">'default':</span> <span class="pre">None,</span> <span class="pre">'options':</span> <span class="pre">None,</span> <span class="pre">'category':</span> <span class="pre">None},</span> <span class="pre">{'key':</span> <span class="pre">'password',</span> <span class="pre">'label':</span> <span class="pre">l'Secret</span> <span class="pre">Key',</span> <span class="pre">'description':</span> <span class="pre">l'If</span> <span class="pre">the</span> <span class="pre">&lt;em&gt;Access</span> <span class="pre">Key&lt;/em&gt;</span> <span class="pre">and</span> <span class="pre">&lt;em&gt;Secret</span> <span class="pre">Key&lt;/em&gt;</span> <span class="pre">are</span> <span class="pre">not</span> <span class="pre">given</span> <span class="pre">here</span> <span class="pre">credentials</span> <span class="pre">will</span> <span class="pre">be</span> <span class="pre">used</span> <span class="pre">as</span> <span class="pre">outlined</span> <span class="pre">in</span> <span class="pre">the</span> <span class="pre">&lt;a</span> <span class="pre">href=&quot;https://boto3.amazonaws.com/v1/documentation/api/latest/guide/configuration.html#configuring-credentials&quot;&gt;Boto3</span> <span class="pre">documenation&lt;/a&gt;.</span> <span class="pre">If</span> <span class="pre">&lt;em&gt;Access</span> <span class="pre">Key&lt;/em&gt;</span> <span class="pre">is</span> <span class="pre">given,</span> <span class="pre">&lt;em&gt;Secrent</span> <span class="pre">Key&lt;/em&gt;</span> <span class="pre">must</span> <span class="pre">also</span> <span class="pre">be</span> <span class="pre">given.',</span> <span class="pre">'type':</span> <span class="pre">None,</span> <span class="pre">'required':</span> <span class="pre">False,</span> <span class="pre">'default':</span> <span class="pre">None,</span> <span class="pre">'options':</span> <span class="pre">None,</span> <span class="pre">'category':</span> <span class="pre">None},</span> <span class="pre">{'key':</span> <span class="pre">'book_covers_bucket',</span> <span class="pre">'label':</span> <span class="pre">l'Book</span> <span class="pre">Covers</span> <span class="pre">Bucket',</span> <span class="pre">'description':</span> <span class="pre">l'All</span> <span class="pre">book</span> <span class="pre">cover</span> <span class="pre">images</span> <span class="pre">encountered</span> <span class="pre">will</span> <span class="pre">be</span> <span class="pre">mirrored</span> <span class="pre">to</span> <span class="pre">this</span> <span class="pre">S3</span> <span class="pre">bucket.</span> <span class="pre">Large</span> <span class="pre">images</span> <span class="pre">will</span> <span class="pre">be</span> <span class="pre">scaled</span> <span class="pre">down,</span> <span class="pre">and</span> <span class="pre">the</span> <span class="pre">scaled-down</span> <span class="pre">copies</span> <span class="pre">will</span> <span class="pre">also</span> <span class="pre">be</span> <span class="pre">uploaded</span> <span class="pre">to</span> <span class="pre">this</span> <span class="pre">bucket.</span> <span class="pre">&lt;p&gt;The</span> <span class="pre">bucket</span> <span class="pre">must</span> <span class="pre">already</span> <span class="pre">exist&amp;mdash;it</span> <span class="pre">will</span> <span class="pre">not</span> <span class="pre">be</span> <span class="pre">created</span> <span class="pre">automatically.&lt;/p&gt;',</span> <span class="pre">'type':</span> <span class="pre">None,</span> <span class="pre">'required':</span> <span class="pre">False,</span> <span class="pre">'default':</span> <span class="pre">None,</span> <span class="pre">'options':</span> <span class="pre">None,</span> <span class="pre">'category':</span> <span class="pre">None},</span> <span class="pre">{'key':</span> <span class="pre">'open_access_content_bucket',</span> <span class="pre">'label':</span> <span class="pre">l'Open</span> <span class="pre">Access</span> <span class="pre">Content</span> <span class="pre">Bucket',</span> <span class="pre">'description':</span> <span class="pre">l'All</span> <span class="pre">open-access</span> <span class="pre">books</span> <span class="pre">encountered</span> <span class="pre">will</span> <span class="pre">be</span> <span class="pre">uploaded</span> <span class="pre">to</span> <span class="pre">this</span> <span class="pre">S3</span> <span class="pre">bucket.</span> <span class="pre">&lt;p&gt;The</span> <span class="pre">bucket</span> <span class="pre">must</span> <span class="pre">already</span> <span class="pre">exist&amp;mdash;it</span> <span class="pre">will</span> <span class="pre">not</span> <span class="pre">be</span> <span class="pre">created</span> <span class="pre">automatically.&lt;/p&gt;',</span> <span class="pre">'type':</span> <span class="pre">None,</span> <span class="pre">'required':</span> <span class="pre">False,</span> <span class="pre">'default':</span> <span class="pre">None,</span> <span class="pre">'options':</span> <span class="pre">None,</span> <span class="pre">'category':</span> <span class="pre">None},</span> <span class="pre">{'key':</span> <span class="pre">'protected_content_bucket',</span> <span class="pre">'label':</span> <span class="pre">l'Protected</span> <span class="pre">Access</span> <span class="pre">Content</span> <span class="pre">Bucket',</span> <span class="pre">'description':</span> <span class="pre">l'Self-hosted</span> <span class="pre">books</span> <span class="pre">will</span> <span class="pre">be</span> <span class="pre">uploaded</span> <span class="pre">to</span> <span class="pre">this</span> <span class="pre">S3</span> <span class="pre">bucket.</span> <span class="pre">&lt;p&gt;The</span> <span class="pre">bucket</span> <span class="pre">must</span> <span class="pre">already</span> <span class="pre">exist&amp;mdash;it</span> <span class="pre">will</span> <span class="pre">not</span> <span class="pre">be</span> <span class="pre">created</span> <span class="pre">automatically.&lt;/p&gt;',</span> <span class="pre">'type':</span> <span class="pre">None,</span> <span class="pre">'required':</span> <span class="pre">False,</span> <span class="pre">'default':</span> <span class="pre">None,</span> <span class="pre">'options':</span> <span class="pre">None,</span> <span class="pre">'category':</span> <span class="pre">None},</span> <span class="pre">{'key':</span> <span class="pre">'marc_bucket',</span> <span class="pre">'label':</span> <span class="pre">l'MARC</span> <span class="pre">File</span> <span class="pre">Bucket',</span> <span class="pre">'description':</span> <span class="pre">l'All</span> <span class="pre">generated</span> <span class="pre">MARC</span> <span class="pre">files</span> <span class="pre">will</span> <span class="pre">be</span> <span class="pre">uploaded</span> <span class="pre">to</span> <span class="pre">this</span> <span class="pre">S3</span> <span class="pre">bucket.</span> <span class="pre">&lt;p&gt;The</span> <span class="pre">bucket</span> <span class="pre">must</span> <span class="pre">already</span> <span class="pre">exist&amp;mdash;it</span> <span class="pre">will</span> <span class="pre">not</span> <span class="pre">be</span> <span class="pre">created</span> <span class="pre">automatically.&lt;/p&gt;',</span> <span class="pre">'type':</span> <span class="pre">None,</span> <span class="pre">'required':</span> <span class="pre">False,</span> <span class="pre">'default':</span> <span class="pre">None,</span> <span class="pre">'options':</span> <span class="pre">None,</span> <span class="pre">'category':</span> <span class="pre">None},</span> <span class="pre">{'key':</span> <span class="pre">'s3_region',</span> <span class="pre">'label':</span> <span class="pre">l'S3</span> <span class="pre">region',</span> <span class="pre">'description':</span> <span class="pre">l'S3</span> <span class="pre">region</span> <span class="pre">which</span> <span class="pre">will</span> <span class="pre">be</span> <span class="pre">used</span> <span class="pre">for</span> <span class="pre">storing</span> <span class="pre">the</span> <span class="pre">content.',</span> <span class="pre">'type':</span> <span class="pre">'select',</span> <span class="pre">'required':</span> <span class="pre">False,</span> <span class="pre">'default':</span> <span class="pre">'us-east-1',</span> <span class="pre">'options':</span> <span class="pre">[{'key':</span> <span class="pre">'af-south-1',</span> <span class="pre">'label':</span> <span class="pre">'af-south-1'},</span> <span class="pre">{'key':</span> <span class="pre">'ap-east-1',</span> <span class="pre">'label':</span> <span class="pre">'ap-east-1'},</span> <span class="pre">{'key':</span> <span class="pre">'ap-northeast-1',</span> <span class="pre">'label':</span> <span class="pre">'ap-northeast-1'},</span> <span class="pre">{'key':</span> <span class="pre">'ap-northeast-2',</span> <span class="pre">'label':</span> <span class="pre">'ap-northeast-2'},</span> <span class="pre">{'key':</span> <span class="pre">'ap-northeast-3',</span> <span class="pre">'label':</span> <span class="pre">'ap-northeast-3'},</span> <span class="pre">{'key':</span> <span class="pre">'ap-south-1',</span> <span class="pre">'label':</span> <span class="pre">'ap-south-1'},</span> <span class="pre">{'key':</span> <span class="pre">'ap-southeast-1',</span> <span class="pre">'label':</span> <span class="pre">'ap-southeast-1'},</span> <span class="pre">{'key':</span> <span class="pre">'ap-southeast-2',</span> <span class="pre">'label':</span> <span class="pre">'ap-southeast-2'},</span> <span class="pre">{'key':</span> <span class="pre">'ap-southeast-3',</span> <span class="pre">'label':</span> <span class="pre">'ap-southeast-3'},</span> <span class="pre">{'key':</span> <span class="pre">'ca-central-1',</span> <span class="pre">'label':</span> <span class="pre">'ca-central-1'},</span> <span class="pre">{'key':</span> <span class="pre">'eu-central-1',</span> <span class="pre">'label':</span> <span class="pre">'eu-central-1'},</span> <span class="pre">{'key':</span> <span class="pre">'eu-north-1',</span> <span class="pre">'label':</span> <span class="pre">'eu-north-1'},</span> <span class="pre">{'key':</span> <span class="pre">'eu-south-1',</span> <span class="pre">'label':</span> <span class="pre">'eu-south-1'},</span> <span class="pre">{'key':</span> <span class="pre">'eu-west-1',</span> <span class="pre">'label':</span> <span class="pre">'eu-west-1'},</span> <span class="pre">{'key':</span> <span class="pre">'eu-west-2',</span> <span class="pre">'label':</span> <span class="pre">'eu-west-2'},</span> <span class="pre">{'key':</span> <span class="pre">'eu-west-3',</span> <span class="pre">'label':</span> <span class="pre">'eu-west-3'},</span> <span class="pre">{'key':</span> <span class="pre">'me-south-1',</span> <span class="pre">'label':</span> <span class="pre">'me-south-1'},</span> <span class="pre">{'key':</span> <span class="pre">'sa-east-1',</span> <span class="pre">'label':</span> <span class="pre">'sa-east-1'},</span> <span class="pre">{'key':</span> <span class="pre">'us-east-1',</span> <span class="pre">'label':</span> <span class="pre">'us-east-1'},</span> <span class="pre">{'key':</span> <span class="pre">'us-east-2',</span> <span class="pre">'label':</span> <span class="pre">'us-east-2'},</span> <span class="pre">{'key':</span> <span class="pre">'us-west-1',</span> <span class="pre">'label':</span> <span class="pre">'us-west-1'},</span> <span class="pre">{'key':</span> <span class="pre">'us-west-2',</span> <span class="pre">'label':</span> <span class="pre">'us-west-2'}],</span> <span class="pre">'category':</span> <span class="pre">None},</span> <span class="pre">{'key':</span> <span class="pre">'s3_addressing_style',</span> <span class="pre">'label':</span> <span class="pre">l'S3</span> <span class="pre">addressing</span> <span class="pre">style',</span> <span class="pre">'description':</span> <span class="pre">l'Buckets</span> <span class="pre">created</span> <span class="pre">after</span> <span class="pre">September</span> <span class="pre">30,</span> <span class="pre">2020,</span> <span class="pre">will</span> <span class="pre">support</span> <span class="pre">only</span> <span class="pre">virtual</span> <span class="pre">hosted-style</span> <span class="pre">requests.</span> <span class="pre">Path-style</span> <span class="pre">requests</span> <span class="pre">will</span> <span class="pre">continue</span> <span class="pre">to</span> <span class="pre">be</span> <span class="pre">supported</span> <span class="pre">for</span> <span class="pre">buckets</span> <span class="pre">created</span> <span class="pre">on</span> <span class="pre">or</span> <span class="pre">before</span> <span class="pre">this</span> <span class="pre">date.</span> <span class="pre">For</span> <span class="pre">more</span> <span class="pre">information,</span> <span class="pre">see</span> <span class="pre">&lt;a</span> <span class="pre">href=&quot;https://aws.amazon.com/blogs/aws/amazon-s3-path-deprecation-plan-the-rest-of-the-story/&quot;&gt;Amazon</span> <span class="pre">S3</span> <span class="pre">Path</span> <span class="pre">Deprecation</span> <span class="pre">Plan</span> <span class="pre">-</span> <span class="pre">The</span> <span class="pre">Rest</span> <span class="pre">of</span> <span class="pre">the</span> <span class="pre">Story&lt;/a&gt;.',</span> <span class="pre">'type':</span> <span class="pre">'select',</span> <span class="pre">'required':</span> <span class="pre">False,</span> <span class="pre">'default':</span> <span class="pre">'us-east-1',</span> <span class="pre">'options':</span> <span class="pre">[{'key':</span> <span class="pre">'virtual',</span> <span class="pre">'label':</span> <span class="pre">l'Virtual'},</span> <span class="pre">{'key':</span> <span class="pre">'path',</span> <span class="pre">'label':</span> <span class="pre">l'Path'},</span> <span class="pre">{'key':</span> <span class="pre">'auto',</span> <span class="pre">'label':</span> <span class="pre">l'Auto'}],</span> <span class="pre">'category':</span> <span class="pre">None},</span> <span class="pre">{'key':</span> <span class="pre">'s3_presigned_url_expiration',</span> <span class="pre">'label':</span> <span class="pre">l'S3</span> <span class="pre">presigned</span> <span class="pre">URL</span> <span class="pre">expiration',</span> <span class="pre">'description':</span> <span class="pre">l'Time</span> <span class="pre">in</span> <span class="pre">seconds</span> <span class="pre">for</span> <span class="pre">the</span> <span class="pre">presigned</span> <span class="pre">URL</span> <span class="pre">to</span> <span class="pre">remain</span> <span class="pre">valid',</span> <span class="pre">'type':</span> <span class="pre">'number',</span> <span class="pre">'required':</span> <span class="pre">False,</span> <span class="pre">'default':</span> <span class="pre">3600,</span> <span class="pre">'options':</span> <span class="pre">None,</span> <span class="pre">'category':</span> <span class="pre">None},</span> <span class="pre">{'key':</span> <span class="pre">'bucket_name_transform',</span> <span class="pre">'label':</span> <span class="pre">l'URL</span> <span class="pre">format',</span> <span class="pre">'description':</span> <span class="pre">l'A</span> <span class="pre">file</span> <span class="pre">mirrored</span> <span class="pre">to</span> <span class="pre">S3</span> <span class="pre">is</span> <span class="pre">available</span> <span class="pre">at</span> <span class="pre">&lt;code&gt;http://{bucket}.s3.{region}.amazonaws.com/{filename}&lt;/code&gt;.</span> <span class="pre">If</span> <span class="pre">you've</span> <span class="pre">set</span> <span class="pre">up</span> <span class="pre">your</span> <span class="pre">DNS</span> <span class="pre">so</span> <span class="pre">that</span> <span class="pre">http://[bucket]/</span> <span class="pre">or</span> <span class="pre">https://[bucket]/</span> <span class="pre">points</span> <span class="pre">to</span> <span class="pre">the</span> <span class="pre">appropriate</span> <span class="pre">S3</span> <span class="pre">bucket,</span> <span class="pre">you</span> <span class="pre">can</span> <span class="pre">configure</span> <span class="pre">this</span> <span class="pre">S3</span> <span class="pre">integration</span> <span class="pre">to</span> <span class="pre">shorten</span> <span class="pre">the</span> <span class="pre">URLs.</span> <span class="pre">&lt;p&gt;If</span> <span class="pre">you</span> <span class="pre">haven't</span> <span class="pre">set</span> <span class="pre">up</span> <span class="pre">your</span> <span class="pre">S3</span> <span class="pre">buckets,</span> <span class="pre">don't</span> <span class="pre">change</span> <span class="pre">this</span> <span class="pre">from</span> <span class="pre">the</span> <span class="pre">default</span> <span class="pre">--</span> <span class="pre">you'll</span> <span class="pre">get</span> <span class="pre">URLs</span> <span class="pre">that</span> <span class="pre">don't</span> <span class="pre">work.&lt;/p&gt;',</span> <span class="pre">'type':</span> <span class="pre">'select',</span> <span class="pre">'required':</span> <span class="pre">False,</span> <span class="pre">'default':</span> <span class="pre">'identity',</span> <span class="pre">'options':</span> <span class="pre">[{'key':</span> <span class="pre">'identity',</span> <span class="pre">'label':</span> <span class="pre">l'S3</span> <span class="pre">Default:</span> <span class="pre">https://{bucket}.s3.{region}.amazonaws.com/{file}'},</span> <span class="pre">{'key':</span> <span class="pre">'https',</span> <span class="pre">'label':</span> <span class="pre">l'HTTPS:</span> <span class="pre">https://{bucket}/{file}'},</span> <span class="pre">{'key':</span> <span class="pre">'http',</span> <span class="pre">'label':</span> <span class="pre">l'HTTP:</span> <span class="pre">http://{bucket}/{file}'}],</span> <span class="pre">'category':</span> <span class="pre">None},</span> <span class="pre">{'key':</span> <span class="pre">'ENDPOINT_URL',</span> <span class="pre">'label':</span> <span class="pre">l'Endpoint</span> <span class="pre">URL',</span> <span class="pre">'description':</span> <span class="pre">l'MinIO's</span> <span class="pre">endpoint</span> <span class="pre">URL',</span> <span class="pre">'type':</span> <span class="pre">None,</span> <span class="pre">'required':</span> <span class="pre">True,</span> <span class="pre">'default':</span> <span class="pre">None,</span> <span class="pre">'options':</span> <span class="pre">None,</span> <span class="pre">'category':</span> <span class="pre">None,</span> <span class="pre">'format':</span> <span class="pre">None}]</span></em><a class="headerlink" href="#core.s3.MinIOUploader.SETTINGS" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.s3.MinIOUploaderConfiguration">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.s3.</span></span><span class="sig-name descname"><span class="pre">MinIOUploaderConfiguration</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">configuration_storage</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">db</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/s3.html#MinIOUploaderConfiguration"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.s3.MinIOUploaderConfiguration" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="core.model.html#core.model.configuration.ConfigurationGrouping" title="core.model.configuration.ConfigurationGrouping"><code class="xref py py-class docutils literal notranslate"><span class="pre">ConfigurationGrouping</span></code></a></p>
<dl class="py attribute">
<dt class="sig sig-object py" id="core.s3.MinIOUploaderConfiguration.ENDPOINT_URL">
<span class="sig-name descname"><span class="pre">ENDPOINT_URL</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'ENDPOINT_URL'</span></em><a class="headerlink" href="#core.s3.MinIOUploaderConfiguration.ENDPOINT_URL" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.s3.MinIOUploaderConfiguration.endpoint_url">
<span class="sig-name descname"><span class="pre">endpoint_url</span></span><a class="headerlink" href="#core.s3.MinIOUploaderConfiguration.endpoint_url" title="Permalink to this definition">¶</a></dt>
<dd><p>Contains configuration metadata</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.s3.MockS3Client">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.s3.</span></span><span class="sig-name descname"><span class="pre">MockS3Client</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">service</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">region_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">aws_access_key_id</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">aws_secret_access_key</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">config</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/s3.html#MockS3Client"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.s3.MockS3Client" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>This pool lets us test the real S3Uploader class with a mocked-up
boto3 client.</p>
<dl class="py method">
<dt class="sig sig-object py" id="core.s3.MockS3Client.abort_multipart_upload">
<span class="sig-name descname"><span class="pre">abort_multipart_upload</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/s3.html#MockS3Client.abort_multipart_upload"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.s3.MockS3Client.abort_multipart_upload" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.s3.MockS3Client.complete_multipart_upload">
<span class="sig-name descname"><span class="pre">complete_multipart_upload</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/s3.html#MockS3Client.complete_multipart_upload"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.s3.MockS3Client.complete_multipart_upload" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.s3.MockS3Client.create_multipart_upload">
<span class="sig-name descname"><span class="pre">create_multipart_upload</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/s3.html#MockS3Client.create_multipart_upload"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.s3.MockS3Client.create_multipart_upload" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.s3.MockS3Client.generate_presigned_url">
<span class="sig-name descname"><span class="pre">generate_presigned_url</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ClientMethod</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Params</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ExpiresIn</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">3600</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">HttpMethod</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/s3.html#MockS3Client.generate_presigned_url"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.s3.MockS3Client.generate_presigned_url" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.s3.MockS3Client.upload_fileobj">
<span class="sig-name descname"><span class="pre">upload_fileobj</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">Fileobj</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Bucket</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Key</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ExtraArgs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/s3.html#MockS3Client.upload_fileobj"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.s3.MockS3Client.upload_fileobj" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.s3.MockS3Client.upload_part">
<span class="sig-name descname"><span class="pre">upload_part</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/s3.html#MockS3Client.upload_part"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.s3.MockS3Client.upload_part" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.s3.MockS3Uploader">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.s3.</span></span><span class="sig-name descname"><span class="pre">MockS3Uploader</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fail</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/s3.html#MockS3Uploader"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.s3.MockS3Uploader" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.s3.S3Uploader" title="core.s3.S3Uploader"><code class="xref py py-class docutils literal notranslate"><span class="pre">S3Uploader</span></code></a></p>
<p>A dummy uploader for use in tests.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="core.s3.MockS3Uploader.buckets">
<span class="sig-name descname"><span class="pre">buckets</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">{'book_covers_bucket':</span> <span class="pre">'test-cover-bucket',</span> <span class="pre">'marc_bucket':</span> <span class="pre">'test-marc-bucket',</span> <span class="pre">'open_access_content_bucket':</span> <span class="pre">'test-content-bucket',</span> <span class="pre">'protected_content_bucket':</span> <span class="pre">'test-content-bucket'}</span></em><a class="headerlink" href="#core.s3.MockS3Uploader.buckets" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.s3.MockS3Uploader.mirror_one">
<span class="sig-name descname"><span class="pre">mirror_one</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">representation</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/s3.html#MockS3Uploader.mirror_one"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.s3.MockS3Uploader.mirror_one" title="Permalink to this definition">¶</a></dt>
<dd><p>Mirror a single representation to the given URL.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>representation</strong> (<a class="reference internal" href="core.model.html#core.model.resource.Representation" title="core.model.resource.Representation"><em>Representation</em></a>) – Book’s representation</p></li>
<li><p><strong>mirror_to</strong> (<em>string</em>) – Mirror URL</p></li>
<li><p><strong>collection</strong> (<em>Optional</em><em>[</em><a class="reference internal" href="core.model.html#core.model.collection.Collection" title="core.model.collection.Collection"><em>core.model.collection.Collection</em></a><em>]</em>) – Collection</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.s3.MockS3Uploader.multipart_upload">
<span class="sig-name descname"><span class="pre">multipart_upload</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">representation</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mirror_to</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/s3.html#MockS3Uploader.multipart_upload"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.s3.MockS3Uploader.multipart_upload" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.s3.MultipartS3Upload">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.s3.</span></span><span class="sig-name descname"><span class="pre">MultipartS3Upload</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">uploader</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">representation</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mirror_to</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/s3.html#MultipartS3Upload"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.s3.MultipartS3Upload" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<dl class="py method">
<dt class="sig sig-object py" id="core.s3.MultipartS3Upload.abort">
<span class="sig-name descname"><span class="pre">abort</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/s3.html#MultipartS3Upload.abort"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.s3.MultipartS3Upload.abort" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.s3.MultipartS3Upload.complete">
<span class="sig-name descname"><span class="pre">complete</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/s3.html#MultipartS3Upload.complete"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.s3.MultipartS3Upload.complete" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.s3.MultipartS3Upload.upload_part">
<span class="sig-name descname"><span class="pre">upload_part</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">content</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/s3.html#MultipartS3Upload.upload_part"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.s3.MultipartS3Upload.upload_part" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.s3.S3AddressingStyle">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.s3.</span></span><span class="sig-name descname"><span class="pre">S3AddressingStyle</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/s3.html#S3AddressingStyle"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.s3.S3AddressingStyle" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">Enum</span></code></p>
<p>Enumeration of different addressing styles supported by boto</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="core.s3.S3AddressingStyle.AUTO">
<span class="sig-name descname"><span class="pre">AUTO</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'auto'</span></em><a class="headerlink" href="#core.s3.S3AddressingStyle.AUTO" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.s3.S3AddressingStyle.PATH">
<span class="sig-name descname"><span class="pre">PATH</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'path'</span></em><a class="headerlink" href="#core.s3.S3AddressingStyle.PATH" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.s3.S3AddressingStyle.VIRTUAL">
<span class="sig-name descname"><span class="pre">VIRTUAL</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'virtual'</span></em><a class="headerlink" href="#core.s3.S3AddressingStyle.VIRTUAL" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.s3.S3Uploader">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.s3.</span></span><span class="sig-name descname"><span class="pre">S3Uploader</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">integration</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">client_class</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">host</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'amazonaws.com'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/s3.html#S3Uploader"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.s3.S3Uploader" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.mirror.MirrorUploader" title="core.mirror.MirrorUploader"><code class="xref py py-class docutils literal notranslate"><span class="pre">MirrorUploader</span></code></a></p>
<dl class="py attribute">
<dt class="sig sig-object py" id="core.s3.S3Uploader.NAME">
<span class="sig-name descname"><span class="pre">NAME</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'Amazon</span> <span class="pre">S3'</span></em><a class="headerlink" href="#core.s3.S3Uploader.NAME" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.s3.S3Uploader.S3_HOST">
<span class="sig-name descname"><span class="pre">S3_HOST</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'amazonaws.com'</span></em><a class="headerlink" href="#core.s3.S3Uploader.S3_HOST" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.s3.S3Uploader.SETTINGS">
<span class="sig-name descname"><span class="pre">SETTINGS</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">[{'key':</span> <span class="pre">'username',</span> <span class="pre">'label':</span> <span class="pre">l'Access</span> <span class="pre">Key',</span> <span class="pre">'description':</span> <span class="pre">'',</span> <span class="pre">'type':</span> <span class="pre">None,</span> <span class="pre">'required':</span> <span class="pre">False,</span> <span class="pre">'default':</span> <span class="pre">None,</span> <span class="pre">'options':</span> <span class="pre">None,</span> <span class="pre">'category':</span> <span class="pre">None},</span> <span class="pre">{'key':</span> <span class="pre">'password',</span> <span class="pre">'label':</span> <span class="pre">l'Secret</span> <span class="pre">Key',</span> <span class="pre">'description':</span> <span class="pre">l'If</span> <span class="pre">the</span> <span class="pre">&lt;em&gt;Access</span> <span class="pre">Key&lt;/em&gt;</span> <span class="pre">and</span> <span class="pre">&lt;em&gt;Secret</span> <span class="pre">Key&lt;/em&gt;</span> <span class="pre">are</span> <span class="pre">not</span> <span class="pre">given</span> <span class="pre">here</span> <span class="pre">credentials</span> <span class="pre">will</span> <span class="pre">be</span> <span class="pre">used</span> <span class="pre">as</span> <span class="pre">outlined</span> <span class="pre">in</span> <span class="pre">the</span> <span class="pre">&lt;a</span> <span class="pre">href=&quot;https://boto3.amazonaws.com/v1/documentation/api/latest/guide/configuration.html#configuring-credentials&quot;&gt;Boto3</span> <span class="pre">documenation&lt;/a&gt;.</span> <span class="pre">If</span> <span class="pre">&lt;em&gt;Access</span> <span class="pre">Key&lt;/em&gt;</span> <span class="pre">is</span> <span class="pre">given,</span> <span class="pre">&lt;em&gt;Secrent</span> <span class="pre">Key&lt;/em&gt;</span> <span class="pre">must</span> <span class="pre">also</span> <span class="pre">be</span> <span class="pre">given.',</span> <span class="pre">'type':</span> <span class="pre">None,</span> <span class="pre">'required':</span> <span class="pre">False,</span> <span class="pre">'default':</span> <span class="pre">None,</span> <span class="pre">'options':</span> <span class="pre">None,</span> <span class="pre">'category':</span> <span class="pre">None},</span> <span class="pre">{'key':</span> <span class="pre">'book_covers_bucket',</span> <span class="pre">'label':</span> <span class="pre">l'Book</span> <span class="pre">Covers</span> <span class="pre">Bucket',</span> <span class="pre">'description':</span> <span class="pre">l'All</span> <span class="pre">book</span> <span class="pre">cover</span> <span class="pre">images</span> <span class="pre">encountered</span> <span class="pre">will</span> <span class="pre">be</span> <span class="pre">mirrored</span> <span class="pre">to</span> <span class="pre">this</span> <span class="pre">S3</span> <span class="pre">bucket.</span> <span class="pre">Large</span> <span class="pre">images</span> <span class="pre">will</span> <span class="pre">be</span> <span class="pre">scaled</span> <span class="pre">down,</span> <span class="pre">and</span> <span class="pre">the</span> <span class="pre">scaled-down</span> <span class="pre">copies</span> <span class="pre">will</span> <span class="pre">also</span> <span class="pre">be</span> <span class="pre">uploaded</span> <span class="pre">to</span> <span class="pre">this</span> <span class="pre">bucket.</span> <span class="pre">&lt;p&gt;The</span> <span class="pre">bucket</span> <span class="pre">must</span> <span class="pre">already</span> <span class="pre">exist&amp;mdash;it</span> <span class="pre">will</span> <span class="pre">not</span> <span class="pre">be</span> <span class="pre">created</span> <span class="pre">automatically.&lt;/p&gt;',</span> <span class="pre">'type':</span> <span class="pre">None,</span> <span class="pre">'required':</span> <span class="pre">False,</span> <span class="pre">'default':</span> <span class="pre">None,</span> <span class="pre">'options':</span> <span class="pre">None,</span> <span class="pre">'category':</span> <span class="pre">None},</span> <span class="pre">{'key':</span> <span class="pre">'open_access_content_bucket',</span> <span class="pre">'label':</span> <span class="pre">l'Open</span> <span class="pre">Access</span> <span class="pre">Content</span> <span class="pre">Bucket',</span> <span class="pre">'description':</span> <span class="pre">l'All</span> <span class="pre">open-access</span> <span class="pre">books</span> <span class="pre">encountered</span> <span class="pre">will</span> <span class="pre">be</span> <span class="pre">uploaded</span> <span class="pre">to</span> <span class="pre">this</span> <span class="pre">S3</span> <span class="pre">bucket.</span> <span class="pre">&lt;p&gt;The</span> <span class="pre">bucket</span> <span class="pre">must</span> <span class="pre">already</span> <span class="pre">exist&amp;mdash;it</span> <span class="pre">will</span> <span class="pre">not</span> <span class="pre">be</span> <span class="pre">created</span> <span class="pre">automatically.&lt;/p&gt;',</span> <span class="pre">'type':</span> <span class="pre">None,</span> <span class="pre">'required':</span> <span class="pre">False,</span> <span class="pre">'default':</span> <span class="pre">None,</span> <span class="pre">'options':</span> <span class="pre">None,</span> <span class="pre">'category':</span> <span class="pre">None},</span> <span class="pre">{'key':</span> <span class="pre">'protected_content_bucket',</span> <span class="pre">'label':</span> <span class="pre">l'Protected</span> <span class="pre">Access</span> <span class="pre">Content</span> <span class="pre">Bucket',</span> <span class="pre">'description':</span> <span class="pre">l'Self-hosted</span> <span class="pre">books</span> <span class="pre">will</span> <span class="pre">be</span> <span class="pre">uploaded</span> <span class="pre">to</span> <span class="pre">this</span> <span class="pre">S3</span> <span class="pre">bucket.</span> <span class="pre">&lt;p&gt;The</span> <span class="pre">bucket</span> <span class="pre">must</span> <span class="pre">already</span> <span class="pre">exist&amp;mdash;it</span> <span class="pre">will</span> <span class="pre">not</span> <span class="pre">be</span> <span class="pre">created</span> <span class="pre">automatically.&lt;/p&gt;',</span> <span class="pre">'type':</span> <span class="pre">None,</span> <span class="pre">'required':</span> <span class="pre">False,</span> <span class="pre">'default':</span> <span class="pre">None,</span> <span class="pre">'options':</span> <span class="pre">None,</span> <span class="pre">'category':</span> <span class="pre">None},</span> <span class="pre">{'key':</span> <span class="pre">'marc_bucket',</span> <span class="pre">'label':</span> <span class="pre">l'MARC</span> <span class="pre">File</span> <span class="pre">Bucket',</span> <span class="pre">'description':</span> <span class="pre">l'All</span> <span class="pre">generated</span> <span class="pre">MARC</span> <span class="pre">files</span> <span class="pre">will</span> <span class="pre">be</span> <span class="pre">uploaded</span> <span class="pre">to</span> <span class="pre">this</span> <span class="pre">S3</span> <span class="pre">bucket.</span> <span class="pre">&lt;p&gt;The</span> <span class="pre">bucket</span> <span class="pre">must</span> <span class="pre">already</span> <span class="pre">exist&amp;mdash;it</span> <span class="pre">will</span> <span class="pre">not</span> <span class="pre">be</span> <span class="pre">created</span> <span class="pre">automatically.&lt;/p&gt;',</span> <span class="pre">'type':</span> <span class="pre">None,</span> <span class="pre">'required':</span> <span class="pre">False,</span> <span class="pre">'default':</span> <span class="pre">None,</span> <span class="pre">'options':</span> <span class="pre">None,</span> <span class="pre">'category':</span> <span class="pre">None},</span> <span class="pre">{'key':</span> <span class="pre">'s3_region',</span> <span class="pre">'label':</span> <span class="pre">l'S3</span> <span class="pre">region',</span> <span class="pre">'description':</span> <span class="pre">l'S3</span> <span class="pre">region</span> <span class="pre">which</span> <span class="pre">will</span> <span class="pre">be</span> <span class="pre">used</span> <span class="pre">for</span> <span class="pre">storing</span> <span class="pre">the</span> <span class="pre">content.',</span> <span class="pre">'type':</span> <span class="pre">'select',</span> <span class="pre">'required':</span> <span class="pre">False,</span> <span class="pre">'default':</span> <span class="pre">'us-east-1',</span> <span class="pre">'options':</span> <span class="pre">[{'key':</span> <span class="pre">'af-south-1',</span> <span class="pre">'label':</span> <span class="pre">'af-south-1'},</span> <span class="pre">{'key':</span> <span class="pre">'ap-east-1',</span> <span class="pre">'label':</span> <span class="pre">'ap-east-1'},</span> <span class="pre">{'key':</span> <span class="pre">'ap-northeast-1',</span> <span class="pre">'label':</span> <span class="pre">'ap-northeast-1'},</span> <span class="pre">{'key':</span> <span class="pre">'ap-northeast-2',</span> <span class="pre">'label':</span> <span class="pre">'ap-northeast-2'},</span> <span class="pre">{'key':</span> <span class="pre">'ap-northeast-3',</span> <span class="pre">'label':</span> <span class="pre">'ap-northeast-3'},</span> <span class="pre">{'key':</span> <span class="pre">'ap-south-1',</span> <span class="pre">'label':</span> <span class="pre">'ap-south-1'},</span> <span class="pre">{'key':</span> <span class="pre">'ap-southeast-1',</span> <span class="pre">'label':</span> <span class="pre">'ap-southeast-1'},</span> <span class="pre">{'key':</span> <span class="pre">'ap-southeast-2',</span> <span class="pre">'label':</span> <span class="pre">'ap-southeast-2'},</span> <span class="pre">{'key':</span> <span class="pre">'ap-southeast-3',</span> <span class="pre">'label':</span> <span class="pre">'ap-southeast-3'},</span> <span class="pre">{'key':</span> <span class="pre">'ca-central-1',</span> <span class="pre">'label':</span> <span class="pre">'ca-central-1'},</span> <span class="pre">{'key':</span> <span class="pre">'eu-central-1',</span> <span class="pre">'label':</span> <span class="pre">'eu-central-1'},</span> <span class="pre">{'key':</span> <span class="pre">'eu-north-1',</span> <span class="pre">'label':</span> <span class="pre">'eu-north-1'},</span> <span class="pre">{'key':</span> <span class="pre">'eu-south-1',</span> <span class="pre">'label':</span> <span class="pre">'eu-south-1'},</span> <span class="pre">{'key':</span> <span class="pre">'eu-west-1',</span> <span class="pre">'label':</span> <span class="pre">'eu-west-1'},</span> <span class="pre">{'key':</span> <span class="pre">'eu-west-2',</span> <span class="pre">'label':</span> <span class="pre">'eu-west-2'},</span> <span class="pre">{'key':</span> <span class="pre">'eu-west-3',</span> <span class="pre">'label':</span> <span class="pre">'eu-west-3'},</span> <span class="pre">{'key':</span> <span class="pre">'me-south-1',</span> <span class="pre">'label':</span> <span class="pre">'me-south-1'},</span> <span class="pre">{'key':</span> <span class="pre">'sa-east-1',</span> <span class="pre">'label':</span> <span class="pre">'sa-east-1'},</span> <span class="pre">{'key':</span> <span class="pre">'us-east-1',</span> <span class="pre">'label':</span> <span class="pre">'us-east-1'},</span> <span class="pre">{'key':</span> <span class="pre">'us-east-2',</span> <span class="pre">'label':</span> <span class="pre">'us-east-2'},</span> <span class="pre">{'key':</span> <span class="pre">'us-west-1',</span> <span class="pre">'label':</span> <span class="pre">'us-west-1'},</span> <span class="pre">{'key':</span> <span class="pre">'us-west-2',</span> <span class="pre">'label':</span> <span class="pre">'us-west-2'}],</span> <span class="pre">'category':</span> <span class="pre">None},</span> <span class="pre">{'key':</span> <span class="pre">'s3_addressing_style',</span> <span class="pre">'label':</span> <span class="pre">l'S3</span> <span class="pre">addressing</span> <span class="pre">style',</span> <span class="pre">'description':</span> <span class="pre">l'Buckets</span> <span class="pre">created</span> <span class="pre">after</span> <span class="pre">September</span> <span class="pre">30,</span> <span class="pre">2020,</span> <span class="pre">will</span> <span class="pre">support</span> <span class="pre">only</span> <span class="pre">virtual</span> <span class="pre">hosted-style</span> <span class="pre">requests.</span> <span class="pre">Path-style</span> <span class="pre">requests</span> <span class="pre">will</span> <span class="pre">continue</span> <span class="pre">to</span> <span class="pre">be</span> <span class="pre">supported</span> <span class="pre">for</span> <span class="pre">buckets</span> <span class="pre">created</span> <span class="pre">on</span> <span class="pre">or</span> <span class="pre">before</span> <span class="pre">this</span> <span class="pre">date.</span> <span class="pre">For</span> <span class="pre">more</span> <span class="pre">information,</span> <span class="pre">see</span> <span class="pre">&lt;a</span> <span class="pre">href=&quot;https://aws.amazon.com/blogs/aws/amazon-s3-path-deprecation-plan-the-rest-of-the-story/&quot;&gt;Amazon</span> <span class="pre">S3</span> <span class="pre">Path</span> <span class="pre">Deprecation</span> <span class="pre">Plan</span> <span class="pre">-</span> <span class="pre">The</span> <span class="pre">Rest</span> <span class="pre">of</span> <span class="pre">the</span> <span class="pre">Story&lt;/a&gt;.',</span> <span class="pre">'type':</span> <span class="pre">'select',</span> <span class="pre">'required':</span> <span class="pre">False,</span> <span class="pre">'default':</span> <span class="pre">'us-east-1',</span> <span class="pre">'options':</span> <span class="pre">[{'key':</span> <span class="pre">'virtual',</span> <span class="pre">'label':</span> <span class="pre">l'Virtual'},</span> <span class="pre">{'key':</span> <span class="pre">'path',</span> <span class="pre">'label':</span> <span class="pre">l'Path'},</span> <span class="pre">{'key':</span> <span class="pre">'auto',</span> <span class="pre">'label':</span> <span class="pre">l'Auto'}],</span> <span class="pre">'category':</span> <span class="pre">None},</span> <span class="pre">{'key':</span> <span class="pre">'s3_presigned_url_expiration',</span> <span class="pre">'label':</span> <span class="pre">l'S3</span> <span class="pre">presigned</span> <span class="pre">URL</span> <span class="pre">expiration',</span> <span class="pre">'description':</span> <span class="pre">l'Time</span> <span class="pre">in</span> <span class="pre">seconds</span> <span class="pre">for</span> <span class="pre">the</span> <span class="pre">presigned</span> <span class="pre">URL</span> <span class="pre">to</span> <span class="pre">remain</span> <span class="pre">valid',</span> <span class="pre">'type':</span> <span class="pre">'number',</span> <span class="pre">'required':</span> <span class="pre">False,</span> <span class="pre">'default':</span> <span class="pre">3600,</span> <span class="pre">'options':</span> <span class="pre">None,</span> <span class="pre">'category':</span> <span class="pre">None},</span> <span class="pre">{'key':</span> <span class="pre">'bucket_name_transform',</span> <span class="pre">'label':</span> <span class="pre">l'URL</span> <span class="pre">format',</span> <span class="pre">'description':</span> <span class="pre">l'A</span> <span class="pre">file</span> <span class="pre">mirrored</span> <span class="pre">to</span> <span class="pre">S3</span> <span class="pre">is</span> <span class="pre">available</span> <span class="pre">at</span> <span class="pre">&lt;code&gt;http://{bucket}.s3.{region}.amazonaws.com/{filename}&lt;/code&gt;.</span> <span class="pre">If</span> <span class="pre">you've</span> <span class="pre">set</span> <span class="pre">up</span> <span class="pre">your</span> <span class="pre">DNS</span> <span class="pre">so</span> <span class="pre">that</span> <span class="pre">http://[bucket]/</span> <span class="pre">or</span> <span class="pre">https://[bucket]/</span> <span class="pre">points</span> <span class="pre">to</span> <span class="pre">the</span> <span class="pre">appropriate</span> <span class="pre">S3</span> <span class="pre">bucket,</span> <span class="pre">you</span> <span class="pre">can</span> <span class="pre">configure</span> <span class="pre">this</span> <span class="pre">S3</span> <span class="pre">integration</span> <span class="pre">to</span> <span class="pre">shorten</span> <span class="pre">the</span> <span class="pre">URLs.</span> <span class="pre">&lt;p&gt;If</span> <span class="pre">you</span> <span class="pre">haven't</span> <span class="pre">set</span> <span class="pre">up</span> <span class="pre">your</span> <span class="pre">S3</span> <span class="pre">buckets,</span> <span class="pre">don't</span> <span class="pre">change</span> <span class="pre">this</span> <span class="pre">from</span> <span class="pre">the</span> <span class="pre">default</span> <span class="pre">--</span> <span class="pre">you'll</span> <span class="pre">get</span> <span class="pre">URLs</span> <span class="pre">that</span> <span class="pre">don't</span> <span class="pre">work.&lt;/p&gt;',</span> <span class="pre">'type':</span> <span class="pre">'select',</span> <span class="pre">'required':</span> <span class="pre">False,</span> <span class="pre">'default':</span> <span class="pre">'identity',</span> <span class="pre">'options':</span> <span class="pre">[{'key':</span> <span class="pre">'identity',</span> <span class="pre">'label':</span> <span class="pre">l'S3</span> <span class="pre">Default:</span> <span class="pre">https://{bucket}.s3.{region}.amazonaws.com/{file}'},</span> <span class="pre">{'key':</span> <span class="pre">'https',</span> <span class="pre">'label':</span> <span class="pre">l'HTTPS:</span> <span class="pre">https://{bucket}/{file}'},</span> <span class="pre">{'key':</span> <span class="pre">'http',</span> <span class="pre">'label':</span> <span class="pre">l'HTTP:</span> <span class="pre">http://{bucket}/{file}'}],</span> <span class="pre">'category':</span> <span class="pre">None}]</span></em><a class="headerlink" href="#core.s3.S3Uploader.SETTINGS" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.s3.S3Uploader.SITEWIDE">
<span class="sig-name descname"><span class="pre">SITEWIDE</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">True</span></em><a class="headerlink" href="#core.s3.S3Uploader.SITEWIDE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.s3.S3Uploader.book_url">
<span class="sig-name descname"><span class="pre">book_url</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">identifier</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">extension</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'.epub'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">open_access</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data_source</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">title</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/s3.html#S3Uploader.book_url"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.s3.S3Uploader.book_url" title="Permalink to this definition">¶</a></dt>
<dd><p>The path to the hosted EPUB file for the given identifier.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.s3.S3Uploader.content_root">
<span class="sig-name descname"><span class="pre">content_root</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">bucket</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/s3.html#S3Uploader.content_root"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.s3.S3Uploader.content_root" title="Permalink to this definition">¶</a></dt>
<dd><p>The root URL to the S3 location of hosted content of
the given type.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.s3.S3Uploader.cover_image_root">
<span class="sig-name descname"><span class="pre">cover_image_root</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">bucket</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data_source</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scaled_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/s3.html#S3Uploader.cover_image_root"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.s3.S3Uploader.cover_image_root" title="Permalink to this definition">¶</a></dt>
<dd><p>The root URL to the S3 location of cover images for
the given data source.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.s3.S3Uploader.cover_image_url">
<span class="sig-name descname"><span class="pre">cover_image_url</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data_source</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">identifier</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filename</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scaled_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/s3.html#S3Uploader.cover_image_url"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.s3.S3Uploader.cover_image_url" title="Permalink to this definition">¶</a></dt>
<dd><p>The path to the hosted cover image for the given identifier.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.s3.S3Uploader.final_mirror_url">
<span class="sig-name descname"><span class="pre">final_mirror_url</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">bucket</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">key</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/s3.html#S3Uploader.final_mirror_url"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.s3.S3Uploader.final_mirror_url" title="Permalink to this definition">¶</a></dt>
<dd><p>Determine the URL to pass into Representation.set_as_mirrored,
assuming that it was successfully uploaded to the given
<cite>bucket</cite> as <cite>key</cite>.</p>
<p>Depending on ExternalIntegration configuration this may
be any of the following:</p>
<p><a class="reference external" href="https:/">https:/</a>/{bucket}.s3.{region}.amazonaws.com/{key}
<a class="reference external" href="http:/">http:/</a>/{bucket}/{key}
<a class="reference external" href="https:/">https:/</a>/{bucket}/{key}</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.s3.S3Uploader.get_bucket">
<span class="sig-name descname"><span class="pre">get_bucket</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">bucket_key</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/s3.html#S3Uploader.get_bucket"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.s3.S3Uploader.get_bucket" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets the bucket for a particular use based on the given key</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.s3.S3Uploader.key_join">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">key_join</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">encode</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/s3.html#S3Uploader.key_join"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.s3.S3Uploader.key_join" title="Permalink to this definition">¶</a></dt>
<dd><p>Quote the path portions of an S3 key while leaving the path
characters themselves alone.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>key</strong> – Either a key, or a list of parts to be
assembled into a key.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A string that can be used as an S3 key.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.s3.S3Uploader.marc_file_root">
<span class="sig-name descname"><span class="pre">marc_file_root</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">bucket</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">library</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/s3.html#S3Uploader.marc_file_root"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.s3.S3Uploader.marc_file_root" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.s3.S3Uploader.marc_file_url">
<span class="sig-name descname"><span class="pre">marc_file_url</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">library</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lane</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">end_time</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">start_time</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/s3.html#S3Uploader.marc_file_url"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.s3.S3Uploader.marc_file_url" title="Permalink to this definition">¶</a></dt>
<dd><p>The path to the hosted MARC file for the given library, lane,
and date range.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.s3.S3Uploader.mirror_one">
<span class="sig-name descname"><span class="pre">mirror_one</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">representation</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mirror_to</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">collection</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/s3.html#S3Uploader.mirror_one"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.s3.S3Uploader.mirror_one" title="Permalink to this definition">¶</a></dt>
<dd><p>Mirror a single representation to the given URL.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>representation</strong> (<a class="reference internal" href="core.model.html#core.model.resource.Representation" title="core.model.resource.Representation"><em>Representation</em></a>) – Book’s representation</p></li>
<li><p><strong>mirror_to</strong> (<em>string</em>) – Mirror URL</p></li>
<li><p><strong>collection</strong> (<em>Optional</em><em>[</em><a class="reference internal" href="core.model.html#core.model.collection.Collection" title="core.model.collection.Collection"><em>core.model.collection.Collection</em></a><em>]</em>) – Collection</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.s3.S3Uploader.multipart_upload">
<span class="sig-name descname"><span class="pre">multipart_upload</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">representation</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mirror_to</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">upload_class=&lt;class</span> <span class="pre">'core.s3.MultipartS3Upload'&gt;</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/s3.html#S3Uploader.multipart_upload"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.s3.S3Uploader.multipart_upload" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.s3.S3Uploader.sign_url">
<span class="sig-name descname"><span class="pre">sign_url</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">url</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">expiration</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/s3.html#S3Uploader.sign_url"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.s3.S3Uploader.sign_url" title="Permalink to this definition">¶</a></dt>
<dd><p>Signs a URL and make it expirable</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>url</strong> (<em>string</em>) – URL</p></li>
<li><p><strong>expiration</strong> (<em>int</em>) – (Optional) Time in seconds for the presigned URL to remain valid.
If it’s empty, S3_PRESIGNED_URL_EXPIRATION configuration setting is used</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Signed expirable link</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>string</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.s3.S3Uploader.split_url">
<span class="sig-name descname"><span class="pre">split_url</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">url</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">unquote</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/s3.html#S3Uploader.split_url"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.s3.S3Uploader.split_url" title="Permalink to this definition">¶</a></dt>
<dd><p>Splits the URL into the components: bucket and file path</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>url</strong> (<em>string</em>) – URL</p></li>
<li><p><strong>unquote</strong> (<em>bool</em>) – Boolean value indicating whether it’s required to unquote URL elements</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Tuple (bucket, file path)</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Tuple[string, string]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.s3.S3Uploader.url">
<span class="sig-name descname"><span class="pre">url</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">bucket</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">path</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/s3.html#S3Uploader.url"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.s3.S3Uploader.url" title="Permalink to this definition">¶</a></dt>
<dd><p>The URL to a resource on S3 identified by bucket and path.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.s3.S3UploaderConfiguration">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.s3.</span></span><span class="sig-name descname"><span class="pre">S3UploaderConfiguration</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">configuration_storage</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">db</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/s3.html#S3UploaderConfiguration"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.s3.S3UploaderConfiguration" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="core.model.html#core.model.configuration.ConfigurationGrouping" title="core.model.configuration.ConfigurationGrouping"><code class="xref py py-class docutils literal notranslate"><span class="pre">ConfigurationGrouping</span></code></a></p>
<dl class="py attribute">
<dt class="sig sig-object py" id="core.s3.S3UploaderConfiguration.BOOK_COVERS_BUCKET_KEY">
<span class="sig-name descname"><span class="pre">BOOK_COVERS_BUCKET_KEY</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'book_covers_bucket'</span></em><a class="headerlink" href="#core.s3.S3UploaderConfiguration.BOOK_COVERS_BUCKET_KEY" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.s3.S3UploaderConfiguration.MARC_BUCKET_KEY">
<span class="sig-name descname"><span class="pre">MARC_BUCKET_KEY</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'marc_bucket'</span></em><a class="headerlink" href="#core.s3.S3UploaderConfiguration.MARC_BUCKET_KEY" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.s3.S3UploaderConfiguration.OA_CONTENT_BUCKET_KEY">
<span class="sig-name descname"><span class="pre">OA_CONTENT_BUCKET_KEY</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'open_access_content_bucket'</span></em><a class="headerlink" href="#core.s3.S3UploaderConfiguration.OA_CONTENT_BUCKET_KEY" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.s3.S3UploaderConfiguration.PROTECTED_CONTENT_BUCKET_KEY">
<span class="sig-name descname"><span class="pre">PROTECTED_CONTENT_BUCKET_KEY</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'protected_content_bucket'</span></em><a class="headerlink" href="#core.s3.S3UploaderConfiguration.PROTECTED_CONTENT_BUCKET_KEY" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.s3.S3UploaderConfiguration.S3_ADDRESSING_STYLE">
<span class="sig-name descname"><span class="pre">S3_ADDRESSING_STYLE</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'s3_addressing_style'</span></em><a class="headerlink" href="#core.s3.S3UploaderConfiguration.S3_ADDRESSING_STYLE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.s3.S3UploaderConfiguration.S3_DEFAULT_ADDRESSING_STYLE">
<span class="sig-name descname"><span class="pre">S3_DEFAULT_ADDRESSING_STYLE</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'virtual'</span></em><a class="headerlink" href="#core.s3.S3UploaderConfiguration.S3_DEFAULT_ADDRESSING_STYLE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.s3.S3UploaderConfiguration.S3_DEFAULT_PRESIGNED_URL_EXPIRATION">
<span class="sig-name descname"><span class="pre">S3_DEFAULT_PRESIGNED_URL_EXPIRATION</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">3600</span></em><a class="headerlink" href="#core.s3.S3UploaderConfiguration.S3_DEFAULT_PRESIGNED_URL_EXPIRATION" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.s3.S3UploaderConfiguration.S3_DEFAULT_REGION">
<span class="sig-name descname"><span class="pre">S3_DEFAULT_REGION</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'us-east-1'</span></em><a class="headerlink" href="#core.s3.S3UploaderConfiguration.S3_DEFAULT_REGION" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.s3.S3UploaderConfiguration.S3_PRESIGNED_URL_EXPIRATION">
<span class="sig-name descname"><span class="pre">S3_PRESIGNED_URL_EXPIRATION</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'s3_presigned_url_expiration'</span></em><a class="headerlink" href="#core.s3.S3UploaderConfiguration.S3_PRESIGNED_URL_EXPIRATION" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.s3.S3UploaderConfiguration.S3_REGION">
<span class="sig-name descname"><span class="pre">S3_REGION</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'s3_region'</span></em><a class="headerlink" href="#core.s3.S3UploaderConfiguration.S3_REGION" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.s3.S3UploaderConfiguration.URL_TEMPLATES_BY_TEMPLATE">
<span class="sig-name descname"><span class="pre">URL_TEMPLATES_BY_TEMPLATE</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">{'http':</span> <span class="pre">'http://%(bucket)s/%(key)s',</span> <span class="pre">'https':</span> <span class="pre">'https://%(bucket)s/%(key)s',</span> <span class="pre">'identity':</span> <span class="pre">'https://%(bucket)s.s3.%(region)s/%(key)s'}</span></em><a class="headerlink" href="#core.s3.S3UploaderConfiguration.URL_TEMPLATES_BY_TEMPLATE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.s3.S3UploaderConfiguration.URL_TEMPLATE_DEFAULT">
<span class="sig-name descname"><span class="pre">URL_TEMPLATE_DEFAULT</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'identity'</span></em><a class="headerlink" href="#core.s3.S3UploaderConfiguration.URL_TEMPLATE_DEFAULT" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.s3.S3UploaderConfiguration.URL_TEMPLATE_HTTP">
<span class="sig-name descname"><span class="pre">URL_TEMPLATE_HTTP</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'http'</span></em><a class="headerlink" href="#core.s3.S3UploaderConfiguration.URL_TEMPLATE_HTTP" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.s3.S3UploaderConfiguration.URL_TEMPLATE_HTTPS">
<span class="sig-name descname"><span class="pre">URL_TEMPLATE_HTTPS</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'https'</span></em><a class="headerlink" href="#core.s3.S3UploaderConfiguration.URL_TEMPLATE_HTTPS" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.s3.S3UploaderConfiguration.URL_TEMPLATE_KEY">
<span class="sig-name descname"><span class="pre">URL_TEMPLATE_KEY</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'bucket_name_transform'</span></em><a class="headerlink" href="#core.s3.S3UploaderConfiguration.URL_TEMPLATE_KEY" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.s3.S3UploaderConfiguration.access_key">
<span class="sig-name descname"><span class="pre">access_key</span></span><a class="headerlink" href="#core.s3.S3UploaderConfiguration.access_key" title="Permalink to this definition">¶</a></dt>
<dd><p>Contains configuration metadata</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.s3.S3UploaderConfiguration.book_covers_bucket">
<span class="sig-name descname"><span class="pre">book_covers_bucket</span></span><a class="headerlink" href="#core.s3.S3UploaderConfiguration.book_covers_bucket" title="Permalink to this definition">¶</a></dt>
<dd><p>Contains configuration metadata</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.s3.S3UploaderConfiguration.marc_file_bucket">
<span class="sig-name descname"><span class="pre">marc_file_bucket</span></span><a class="headerlink" href="#core.s3.S3UploaderConfiguration.marc_file_bucket" title="Permalink to this definition">¶</a></dt>
<dd><p>Contains configuration metadata</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.s3.S3UploaderConfiguration.open_access_content_bucket">
<span class="sig-name descname"><span class="pre">open_access_content_bucket</span></span><a class="headerlink" href="#core.s3.S3UploaderConfiguration.open_access_content_bucket" title="Permalink to this definition">¶</a></dt>
<dd><p>Contains configuration metadata</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.s3.S3UploaderConfiguration.protected_access_content_bucket">
<span class="sig-name descname"><span class="pre">protected_access_content_bucket</span></span><a class="headerlink" href="#core.s3.S3UploaderConfiguration.protected_access_content_bucket" title="Permalink to this definition">¶</a></dt>
<dd><p>Contains configuration metadata</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.s3.S3UploaderConfiguration.s3_addressing_style">
<span class="sig-name descname"><span class="pre">s3_addressing_style</span></span><a class="headerlink" href="#core.s3.S3UploaderConfiguration.s3_addressing_style" title="Permalink to this definition">¶</a></dt>
<dd><p>Contains configuration metadata</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.s3.S3UploaderConfiguration.s3_presigned_url_expiration">
<span class="sig-name descname"><span class="pre">s3_presigned_url_expiration</span></span><a class="headerlink" href="#core.s3.S3UploaderConfiguration.s3_presigned_url_expiration" title="Permalink to this definition">¶</a></dt>
<dd><p>Contains configuration metadata</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.s3.S3UploaderConfiguration.s3_region">
<span class="sig-name descname"><span class="pre">s3_region</span></span><a class="headerlink" href="#core.s3.S3UploaderConfiguration.s3_region" title="Permalink to this definition">¶</a></dt>
<dd><p>Contains configuration metadata</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.s3.S3UploaderConfiguration.secret_key">
<span class="sig-name descname"><span class="pre">secret_key</span></span><a class="headerlink" href="#core.s3.S3UploaderConfiguration.secret_key" title="Permalink to this definition">¶</a></dt>
<dd><p>Contains configuration metadata</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.s3.S3UploaderConfiguration.url_template">
<span class="sig-name descname"><span class="pre">url_template</span></span><a class="headerlink" href="#core.s3.S3UploaderConfiguration.url_template" title="Permalink to this definition">¶</a></dt>
<dd><p>Contains configuration metadata</p>
</dd></dl>

</dd></dl>

</section>
<section id="module-core.scripts">
<span id="core-scripts-module"></span><h2>core.scripts module<a class="headerlink" href="#module-core.scripts" title="Permalink to this heading">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="core.scripts.AddClassificationScript">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.scripts.</span></span><span class="sig-name descname"><span class="pre">AddClassificationScript</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cmd_args=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stdin=&lt;_io.TextIOWrapper</span> <span class="pre">name='&lt;stdin&gt;'</span> <span class="pre">mode='r'</span> <span class="pre">encoding='utf-8'&gt;</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#AddClassificationScript"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.scripts.AddClassificationScript" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.scripts.IdentifierInputScript" title="core.scripts.IdentifierInputScript"><code class="xref py py-class docutils literal notranslate"><span class="pre">IdentifierInputScript</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="core.scripts.AddClassificationScript.arg_parser">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">arg_parser</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#AddClassificationScript.arg_parser"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.scripts.AddClassificationScript.arg_parser" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.scripts.AddClassificationScript.do_run">
<span class="sig-name descname"><span class="pre">do_run</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#AddClassificationScript.do_run"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.scripts.AddClassificationScript.do_run" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.scripts.AddClassificationScript.name">
<span class="sig-name descname"><span class="pre">name</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'Add</span> <span class="pre">a</span> <span class="pre">classification</span> <span class="pre">to</span> <span class="pre">an</span> <span class="pre">identifier'</span></em><a class="headerlink" href="#core.scripts.AddClassificationScript.name" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.scripts.CheckContributorNamesInDB">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.scripts.</span></span><span class="sig-name descname"><span class="pre">CheckContributorNamesInDB</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cmd_args=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stdin=&lt;_io.TextIOWrapper</span> <span class="pre">name='&lt;stdin&gt;'</span> <span class="pre">mode='r'</span> <span class="pre">encoding='utf-8'&gt;</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#CheckContributorNamesInDB"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.scripts.CheckContributorNamesInDB" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.scripts.IdentifierInputScript" title="core.scripts.IdentifierInputScript"><code class="xref py py-class docutils literal notranslate"><span class="pre">IdentifierInputScript</span></code></a></p>
<p>Checks that contributor sort_names are display_names in
“last name, comma, other names” format.</p>
<p>Read contributors edition by edition, so that can, if necessary,
restrict db query by passed-in identifiers, and so can find associated
license pools to register author complaints to.</p>
<p>NOTE:  There’s also CheckContributorNamesOnWeb in metadata,
it’s a child of this script.  Use it to check our knowledge against
viaf, with the newer better sort_name selection and formatting.</p>
<p>TODO: make sure don’t start at beginning again when interrupt while batch job is running.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="core.scripts.CheckContributorNamesInDB.COMPLAINT_SOURCE">
<span class="sig-name descname"><span class="pre">COMPLAINT_SOURCE</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'CheckContributorNamesInDB'</span></em><a class="headerlink" href="#core.scripts.CheckContributorNamesInDB.COMPLAINT_SOURCE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.scripts.CheckContributorNamesInDB.COMPLAINT_TYPE">
<span class="sig-name descname"><span class="pre">COMPLAINT_TYPE</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'http://librarysimplified.org/terms/problem/wrong-author'</span></em><a class="headerlink" href="#core.scripts.CheckContributorNamesInDB.COMPLAINT_TYPE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.scripts.CheckContributorNamesInDB.do_run">
<span class="sig-name descname"><span class="pre">do_run</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">batch_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#CheckContributorNamesInDB.do_run"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.scripts.CheckContributorNamesInDB.do_run" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.scripts.CheckContributorNamesInDB.make_query">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">make_query</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">identifier_type</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">identifiers</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">log</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#CheckContributorNamesInDB.make_query"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.scripts.CheckContributorNamesInDB.make_query" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.scripts.CheckContributorNamesInDB.process_contribution_local">
<span class="sig-name descname"><span class="pre">process_contribution_local</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">contribution</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">log</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#CheckContributorNamesInDB.process_contribution_local"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.scripts.CheckContributorNamesInDB.process_contribution_local" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.scripts.CheckContributorNamesInDB.process_local_mismatch">
<span class="sig-name descname"><span class="pre">process_local_mismatch</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">contribution</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">computed_sort_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">error_message_detail</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">log</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#CheckContributorNamesInDB.process_local_mismatch"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.scripts.CheckContributorNamesInDB.process_local_mismatch" title="Permalink to this definition">¶</a></dt>
<dd><p>Determines if a problem is to be investigated further or recorded as a Complaint,
to be solved by a human.  In this class, it’s always a complaint.  In the overridden
method in the child class in metadata_wrangler code, we sometimes go do a web query.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.scripts.CheckContributorNamesInDB.register_problem">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">register_problem</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">source</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">contribution</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">computed_sort_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">error_message_detail</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">log</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#CheckContributorNamesInDB.register_problem"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.scripts.CheckContributorNamesInDB.register_problem" title="Permalink to this definition">¶</a></dt>
<dd><p>Make a Complaint in the database, so a human can take a look at this Contributor’s name
and resolve whatever the complex issue that got us here.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.scripts.CheckContributorNamesInDB.set_contributor_sort_name">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">set_contributor_sort_name</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sort_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">contribution</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#CheckContributorNamesInDB.set_contributor_sort_name"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.scripts.CheckContributorNamesInDB.set_contributor_sort_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the contributor.sort_name and associated edition.author_name to the passed-in value.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.scripts.CollectionArgumentsScript">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.scripts.</span></span><span class="sig-name descname"><span class="pre">CollectionArgumentsScript</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#CollectionArgumentsScript"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.scripts.CollectionArgumentsScript" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.scripts.CollectionInputScript" title="core.scripts.CollectionInputScript"><code class="xref py py-class docutils literal notranslate"><span class="pre">CollectionInputScript</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="core.scripts.CollectionArgumentsScript.arg_parser">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">arg_parser</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#CollectionArgumentsScript.arg_parser"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.scripts.CollectionArgumentsScript.arg_parser" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.scripts.CollectionInputScript">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.scripts.</span></span><span class="sig-name descname"><span class="pre">CollectionInputScript</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#CollectionInputScript"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.scripts.CollectionInputScript" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.scripts.Script" title="core.scripts.Script"><code class="xref py py-class docutils literal notranslate"><span class="pre">Script</span></code></a></p>
<p>A script that takes collection names as command line inputs.</p>
<dl class="py method">
<dt class="sig sig-object py" id="core.scripts.CollectionInputScript.arg_parser">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">arg_parser</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#CollectionInputScript.arg_parser"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.scripts.CollectionInputScript.arg_parser" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.scripts.CollectionInputScript.look_up_collections">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">look_up_collections</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">parsed</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#CollectionInputScript.look_up_collections"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.scripts.CollectionInputScript.look_up_collections" title="Permalink to this definition">¶</a></dt>
<dd><p>Turn collection names as specified on the command line into
real database Collection objects.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.scripts.CollectionInputScript.parse_command_line">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">parse_command_line</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cmd_args</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#CollectionInputScript.parse_command_line"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.scripts.CollectionInputScript.parse_command_line" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.scripts.CollectionType">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.scripts.</span></span><span class="sig-name descname"><span class="pre">CollectionType</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#CollectionType"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.scripts.CollectionType" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">Enum</span></code></p>
<p>An enumeration.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="core.scripts.CollectionType.LCP">
<span class="sig-name descname"><span class="pre">LCP</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'LCP'</span></em><a class="headerlink" href="#core.scripts.CollectionType.LCP" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.scripts.CollectionType.OPEN_ACCESS">
<span class="sig-name descname"><span class="pre">OPEN_ACCESS</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'OPEN_ACCESS'</span></em><a class="headerlink" href="#core.scripts.CollectionType.OPEN_ACCESS" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.scripts.CollectionType.PROTECTED_ACCESS">
<span class="sig-name descname"><span class="pre">PROTECTED_ACCESS</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'PROTECTED_ACCESS'</span></em><a class="headerlink" href="#core.scripts.CollectionType.PROTECTED_ACCESS" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.scripts.ConfigurationSettingScript">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.scripts.</span></span><span class="sig-name descname"><span class="pre">ConfigurationSettingScript</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#ConfigurationSettingScript"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.scripts.ConfigurationSettingScript" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.scripts.Script" title="core.scripts.Script"><code class="xref py py-class docutils literal notranslate"><span class="pre">Script</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="core.scripts.ConfigurationSettingScript.add_setting_argument">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">add_setting_argument</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">parser</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">help</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#ConfigurationSettingScript.add_setting_argument"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.scripts.ConfigurationSettingScript.add_setting_argument" title="Permalink to this definition">¶</a></dt>
<dd><p>Modify an ArgumentParser to indicate that the script takes
command-line settings.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.scripts.ConfigurationSettingScript.apply_settings">
<span class="sig-name descname"><span class="pre">apply_settings</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">settings</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">obj</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#ConfigurationSettingScript.apply_settings"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.scripts.ConfigurationSettingScript.apply_settings" title="Permalink to this definition">¶</a></dt>
<dd><p>Treat <cite>settings</cite> as a list of command-line argument settings,
and apply each one to <cite>obj</cite>.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.scripts.ConfigureCollectionScript">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.scripts.</span></span><span class="sig-name descname"><span class="pre">ConfigureCollectionScript</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#ConfigureCollectionScript"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.scripts.ConfigureCollectionScript" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.scripts.ConfigurationSettingScript" title="core.scripts.ConfigurationSettingScript"><code class="xref py py-class docutils literal notranslate"><span class="pre">ConfigurationSettingScript</span></code></a></p>
<p>Create a collection or change its settings.</p>
<dl class="py method">
<dt class="sig sig-object py" id="core.scripts.ConfigureCollectionScript.arg_parser">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">arg_parser</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#ConfigureCollectionScript.arg_parser"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.scripts.ConfigureCollectionScript.arg_parser" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.scripts.ConfigureCollectionScript.do_run">
<span class="sig-name descname"><span class="pre">do_run</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cmd_args=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output=&lt;_io.TextIOWrapper</span> <span class="pre">name='&lt;stdout&gt;'</span> <span class="pre">mode='w'</span> <span class="pre">encoding='utf-8'&gt;</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#ConfigureCollectionScript.do_run"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.scripts.ConfigureCollectionScript.do_run" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.scripts.ConfigureCollectionScript.name">
<span class="sig-name descname"><span class="pre">name</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">&quot;Change</span> <span class="pre">a</span> <span class="pre">collection's</span> <span class="pre">settings&quot;</span></em><a class="headerlink" href="#core.scripts.ConfigureCollectionScript.name" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.scripts.ConfigureCollectionScript.parse_command_line">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">parse_command_line</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cmd_args</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#ConfigureCollectionScript.parse_command_line"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.scripts.ConfigureCollectionScript.parse_command_line" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.scripts.ConfigureIntegrationScript">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.scripts.</span></span><span class="sig-name descname"><span class="pre">ConfigureIntegrationScript</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#ConfigureIntegrationScript"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.scripts.ConfigureIntegrationScript" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.scripts.ConfigurationSettingScript" title="core.scripts.ConfigurationSettingScript"><code class="xref py py-class docutils literal notranslate"><span class="pre">ConfigurationSettingScript</span></code></a></p>
<p>Create a integration or change its settings.</p>
<dl class="py method">
<dt class="sig sig-object py" id="core.scripts.ConfigureIntegrationScript.arg_parser">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">arg_parser</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#ConfigureIntegrationScript.arg_parser"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.scripts.ConfigureIntegrationScript.arg_parser" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.scripts.ConfigureIntegrationScript.do_run">
<span class="sig-name descname"><span class="pre">do_run</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cmd_args=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output=&lt;_io.TextIOWrapper</span> <span class="pre">name='&lt;stdout&gt;'</span> <span class="pre">mode='w'</span> <span class="pre">encoding='utf-8'&gt;</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#ConfigureIntegrationScript.do_run"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.scripts.ConfigureIntegrationScript.do_run" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.scripts.ConfigureIntegrationScript.name">
<span class="sig-name descname"><span class="pre">name</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">&quot;Create</span> <span class="pre">a</span> <span class="pre">site-wide</span> <span class="pre">integration</span> <span class="pre">or</span> <span class="pre">change</span> <span class="pre">an</span> <span class="pre">integration's</span> <span class="pre">settings&quot;</span></em><a class="headerlink" href="#core.scripts.ConfigureIntegrationScript.name" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.scripts.ConfigureIntegrationScript.parse_command_line">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">parse_command_line</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cmd_args</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#ConfigureIntegrationScript.parse_command_line"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.scripts.ConfigureIntegrationScript.parse_command_line" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.scripts.ConfigureLaneScript">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.scripts.</span></span><span class="sig-name descname"><span class="pre">ConfigureLaneScript</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#ConfigureLaneScript"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.scripts.ConfigureLaneScript" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.scripts.ConfigurationSettingScript" title="core.scripts.ConfigurationSettingScript"><code class="xref py py-class docutils literal notranslate"><span class="pre">ConfigurationSettingScript</span></code></a></p>
<p>Create a lane or change its settings.</p>
<dl class="py method">
<dt class="sig sig-object py" id="core.scripts.ConfigureLaneScript.arg_parser">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">arg_parser</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#ConfigureLaneScript.arg_parser"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.scripts.ConfigureLaneScript.arg_parser" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.scripts.ConfigureLaneScript.do_run">
<span class="sig-name descname"><span class="pre">do_run</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cmd_args=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output=&lt;_io.TextIOWrapper</span> <span class="pre">name='&lt;stdout&gt;'</span> <span class="pre">mode='w'</span> <span class="pre">encoding='utf-8'&gt;</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#ConfigureLaneScript.do_run"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.scripts.ConfigureLaneScript.do_run" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.scripts.ConfigureLaneScript.name">
<span class="sig-name descname"><span class="pre">name</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">&quot;Change</span> <span class="pre">a</span> <span class="pre">lane's</span> <span class="pre">settings&quot;</span></em><a class="headerlink" href="#core.scripts.ConfigureLaneScript.name" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.scripts.ConfigureLaneScript.parse_command_line">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">parse_command_line</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cmd_args</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#ConfigureLaneScript.parse_command_line"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.scripts.ConfigureLaneScript.parse_command_line" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.scripts.ConfigureLibraryScript">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.scripts.</span></span><span class="sig-name descname"><span class="pre">ConfigureLibraryScript</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#ConfigureLibraryScript"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.scripts.ConfigureLibraryScript" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.scripts.ConfigurationSettingScript" title="core.scripts.ConfigurationSettingScript"><code class="xref py py-class docutils literal notranslate"><span class="pre">ConfigurationSettingScript</span></code></a></p>
<p>Create a library or change its settings.</p>
<dl class="py method">
<dt class="sig sig-object py" id="core.scripts.ConfigureLibraryScript.arg_parser">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">arg_parser</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#ConfigureLibraryScript.arg_parser"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.scripts.ConfigureLibraryScript.arg_parser" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.scripts.ConfigureLibraryScript.do_run">
<span class="sig-name descname"><span class="pre">do_run</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cmd_args=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output=&lt;_io.TextIOWrapper</span> <span class="pre">name='&lt;stdout&gt;'</span> <span class="pre">mode='w'</span> <span class="pre">encoding='utf-8'&gt;</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#ConfigureLibraryScript.do_run"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.scripts.ConfigureLibraryScript.do_run" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.scripts.ConfigureLibraryScript.name">
<span class="sig-name descname"><span class="pre">name</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">&quot;Change</span> <span class="pre">a</span> <span class="pre">library's</span> <span class="pre">settings&quot;</span></em><a class="headerlink" href="#core.scripts.ConfigureLibraryScript.name" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.scripts.ConfigureSiteScript">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.scripts.</span></span><span class="sig-name descname"><span class="pre">ConfigureSiteScript</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">config=&lt;class</span> <span class="pre">'core.config.Configuration'&gt;</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#ConfigureSiteScript"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.scripts.ConfigureSiteScript" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.scripts.ConfigurationSettingScript" title="core.scripts.ConfigurationSettingScript"><code class="xref py py-class docutils literal notranslate"><span class="pre">ConfigurationSettingScript</span></code></a></p>
<p>View or update site-wide configuration.</p>
<dl class="py method">
<dt class="sig sig-object py" id="core.scripts.ConfigureSiteScript.arg_parser">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">arg_parser</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#ConfigureSiteScript.arg_parser"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.scripts.ConfigureSiteScript.arg_parser" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.scripts.ConfigureSiteScript.do_run">
<span class="sig-name descname"><span class="pre">do_run</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cmd_args=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output=&lt;_io.TextIOWrapper</span> <span class="pre">name='&lt;stdout&gt;'</span> <span class="pre">mode='w'</span> <span class="pre">encoding='utf-8'&gt;</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#ConfigureSiteScript.do_run"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.scripts.ConfigureSiteScript.do_run" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.scripts.CustomListManagementScript">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.scripts.</span></span><span class="sig-name descname"><span class="pre">CustomListManagementScript</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">manager_class</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data_source_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">list_identifier</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">list_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">primary_language</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">description</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">manager_kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#CustomListManagementScript"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.scripts.CustomListManagementScript" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.scripts.Script" title="core.scripts.Script"><code class="xref py py-class docutils literal notranslate"><span class="pre">Script</span></code></a></p>
<p>Maintain a CustomList whose membership is determined by a
MembershipManager.</p>
<dl class="py method">
<dt class="sig sig-object py" id="core.scripts.CustomListManagementScript.run">
<span class="sig-name descname"><span class="pre">run</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#CustomListManagementScript.run"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.scripts.CustomListManagementScript.run" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.scripts.CustomListSweeperScript">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.scripts.</span></span><span class="sig-name descname"><span class="pre">CustomListSweeperScript</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#CustomListSweeperScript"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.scripts.CustomListSweeperScript" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.scripts.LibraryInputScript" title="core.scripts.LibraryInputScript"><code class="xref py py-class docutils literal notranslate"><span class="pre">LibraryInputScript</span></code></a></p>
<p>Do something to each custom list in a library.</p>
<dl class="py method">
<dt class="sig sig-object py" id="core.scripts.CustomListSweeperScript.process_custom_list">
<span class="sig-name descname"><span class="pre">process_custom_list</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">custom_list</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#CustomListSweeperScript.process_custom_list"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.scripts.CustomListSweeperScript.process_custom_list" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.scripts.CustomListSweeperScript.process_library">
<span class="sig-name descname"><span class="pre">process_library</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">library</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#CustomListSweeperScript.process_library"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.scripts.CustomListSweeperScript.process_library" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.scripts.DatabaseMigrationInitializationScript">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.scripts.</span></span><span class="sig-name descname"><span class="pre">DatabaseMigrationInitializationScript</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#DatabaseMigrationInitializationScript"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.scripts.DatabaseMigrationInitializationScript" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.scripts.DatabaseMigrationScript" title="core.scripts.DatabaseMigrationScript"><code class="xref py py-class docutils literal notranslate"><span class="pre">DatabaseMigrationScript</span></code></a></p>
<p>Creates a timestamp to kickoff the regular use of
DatabaseMigrationScript to manage migrations.</p>
<dl class="py method">
<dt class="sig sig-object py" id="core.scripts.DatabaseMigrationInitializationScript.arg_parser">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">arg_parser</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#DatabaseMigrationInitializationScript.arg_parser"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.scripts.DatabaseMigrationInitializationScript.arg_parser" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.scripts.DatabaseMigrationInitializationScript.run">
<span class="sig-name descname"><span class="pre">run</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cmd_args</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#DatabaseMigrationInitializationScript.run"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.scripts.DatabaseMigrationInitializationScript.run" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.scripts.DatabaseMigrationScript">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.scripts.</span></span><span class="sig-name descname"><span class="pre">DatabaseMigrationScript</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#DatabaseMigrationScript"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.scripts.DatabaseMigrationScript" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.scripts.Script" title="core.scripts.Script"><code class="xref py py-class docutils literal notranslate"><span class="pre">Script</span></code></a></p>
<p>Runs new migrations.</p>
<p>This script needs to execute without ever loading an ORM object,
because the database might be in a state that’s not compatible
with the current ORM version.</p>
<p>This is not a TimestampScript because it keeps separate Timestamps
for the Python and the SQL migrations, and because Timestamps
are ORM objects, which this script can’t touch.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="core.scripts.DatabaseMigrationScript.DO_NOT_EXECUTE">
<span class="sig-name descname"><span class="pre">DO_NOT_EXECUTE</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'SIMPLYE_MIGRATION_DO_NOT_EXECUTE'</span></em><a class="headerlink" href="#core.scripts.DatabaseMigrationScript.DO_NOT_EXECUTE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.scripts.DatabaseMigrationScript.MIGRATION_WITH_COUNTER">
<span class="sig-name descname"><span class="pre">MIGRATION_WITH_COUNTER</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">re.compile('\\d{8}-(\\d+)-(.)+\\.(py|sql)')</span></em><a class="headerlink" href="#core.scripts.DatabaseMigrationScript.MIGRATION_WITH_COUNTER" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.scripts.DatabaseMigrationScript.PY_TIMESTAMP_SERVICE_NAME">
<span class="sig-name descname"><span class="pre">PY_TIMESTAMP_SERVICE_NAME</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'Database</span> <span class="pre">Migration</span> <span class="pre">-</span> <span class="pre">Python'</span></em><a class="headerlink" href="#core.scripts.DatabaseMigrationScript.PY_TIMESTAMP_SERVICE_NAME" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.scripts.DatabaseMigrationScript.SERVICE_NAME">
<span class="sig-name descname"><span class="pre">SERVICE_NAME</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'Database</span> <span class="pre">Migration'</span></em><a class="headerlink" href="#core.scripts.DatabaseMigrationScript.SERVICE_NAME" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.scripts.DatabaseMigrationScript.TRANSACTIONLESS_COMMANDS">
<span class="sig-name descname"><span class="pre">TRANSACTIONLESS_COMMANDS</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">['alter</span> <span class="pre">type']</span></em><a class="headerlink" href="#core.scripts.DatabaseMigrationScript.TRANSACTIONLESS_COMMANDS" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.scripts.DatabaseMigrationScript.TRANSACTION_PER_STATEMENT">
<span class="sig-name descname"><span class="pre">TRANSACTION_PER_STATEMENT</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'SIMPLYE_MIGRATION_TRANSACTION_PER_STATEMENT'</span></em><a class="headerlink" href="#core.scripts.DatabaseMigrationScript.TRANSACTION_PER_STATEMENT" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.scripts.DatabaseMigrationScript.TimestampInfo">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">TimestampInfo</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">service</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">finish</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">counter</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#DatabaseMigrationScript.TimestampInfo"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.scripts.DatabaseMigrationScript.TimestampInfo" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Act like a ORM Timestamp object, but with no database connection.</p>
<dl class="py method">
<dt class="sig sig-object py" id="core.scripts.DatabaseMigrationScript.TimestampInfo.find">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">find</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">script</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">service</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#DatabaseMigrationScript.TimestampInfo.find"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.scripts.DatabaseMigrationScript.TimestampInfo.find" title="Permalink to this definition">¶</a></dt>
<dd><p>Find or create an existing timestamp representing the last
migration script that was run.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>A TimestampInfo object or None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.scripts.DatabaseMigrationScript.TimestampInfo.save">
<span class="sig-name descname"><span class="pre">save</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#DatabaseMigrationScript.TimestampInfo.save"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.scripts.DatabaseMigrationScript.TimestampInfo.save" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.scripts.DatabaseMigrationScript.TimestampInfo.update">
<span class="sig-name descname"><span class="pre">update</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">finish</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">counter</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">migration_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#DatabaseMigrationScript.TimestampInfo.update"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.scripts.DatabaseMigrationScript.TimestampInfo.update" title="Permalink to this definition">¶</a></dt>
<dd><p>Saves a TimestampInfo object to the database.</p>
</dd></dl>

</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.scripts.DatabaseMigrationScript.arg_parser">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">arg_parser</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#DatabaseMigrationScript.arg_parser"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.scripts.DatabaseMigrationScript.arg_parser" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="core.scripts.DatabaseMigrationScript.directories_by_priority">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">directories_by_priority</span></span><a class="headerlink" href="#core.scripts.DatabaseMigrationScript.directories_by_priority" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a list containing the migration directory path for core
and its container server, organized in priority order (core first)</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.scripts.DatabaseMigrationScript.fetch_migration_files">
<span class="sig-name descname"><span class="pre">fetch_migration_files</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#DatabaseMigrationScript.fetch_migration_files"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.scripts.DatabaseMigrationScript.fetch_migration_files" title="Permalink to this definition">¶</a></dt>
<dd><p>Pulls migration files from the expected locations</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>a tuple with a list of migration filenames and a dictionary of
those files separated by their absolute directory location.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.scripts.DatabaseMigrationScript.get_new_migrations">
<span class="sig-name descname"><span class="pre">get_new_migrations</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">timestamp</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">migrations</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#DatabaseMigrationScript.get_new_migrations"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.scripts.DatabaseMigrationScript.get_new_migrations" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a list of migration filenames, representing migrations
created since the timestamp</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.scripts.DatabaseMigrationScript.load_configuration">
<span class="sig-name descname"><span class="pre">load_configuration</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#DatabaseMigrationScript.load_configuration"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.scripts.DatabaseMigrationScript.load_configuration" title="Permalink to this definition">¶</a></dt>
<dd><p>Load configuration without accessing the database.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.scripts.DatabaseMigrationScript.migratable_files">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">migratable_files</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filelist</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">extensions</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#DatabaseMigrationScript.migratable_files"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.scripts.DatabaseMigrationScript.migratable_files" title="Permalink to this definition">¶</a></dt>
<dd><p>Filter a list of files for migratable file extensions</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="core.scripts.DatabaseMigrationScript.name">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">name</span></span><a class="headerlink" href="#core.scripts.DatabaseMigrationScript.name" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the appropriate target Timestamp service name for the
timestamp, depending on the script parameters.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="core.scripts.DatabaseMigrationScript.overall_timestamp">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">overall_timestamp</span></span><a class="headerlink" href="#core.scripts.DatabaseMigrationScript.overall_timestamp" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a TimestampInfo object corresponding to the the overall or
general “Database Migration” service.</p>
<p>If there is no Timestamp or the Timestamp doesn’t have a timestamp
attribute, it returns None.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="core.scripts.DatabaseMigrationScript.python_timestamp">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">python_timestamp</span></span><a class="headerlink" href="#core.scripts.DatabaseMigrationScript.python_timestamp" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a TimestampInfo object corresponding to the python migration-
specific “Database Migration - Python” Timestamp.</p>
<p>If there is no Timestamp or the Timestamp hasn’t been initialized with
a timestamp attribute, it returns None.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.scripts.DatabaseMigrationScript.run">
<span class="sig-name descname"><span class="pre">run</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">test_db</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">test</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cmd_args</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#DatabaseMigrationScript.run"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.scripts.DatabaseMigrationScript.run" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.scripts.DatabaseMigrationScript.run_migrations">
<span class="sig-name descname"><span class="pre">run_migrations</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">migrations</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">migrations_by_dir</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timestamp</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#DatabaseMigrationScript.run_migrations"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.scripts.DatabaseMigrationScript.run_migrations" title="Permalink to this definition">¶</a></dt>
<dd><p>Run each migration, first by timestamp and then by directory
priority.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.scripts.DatabaseMigrationScript.sort_migrations">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">sort_migrations</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">migrations</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#DatabaseMigrationScript.sort_migrations"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.scripts.DatabaseMigrationScript.sort_migrations" title="Permalink to this definition">¶</a></dt>
<dd><p>All Python migrations sort after all SQL migrations, since a Python
migration requires an up-to-date database schema.</p>
<p>Migrations with a counter digit sort after migrations without
one.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.scripts.DatabaseMigrationScript.update_timestamps">
<span class="sig-name descname"><span class="pre">update_timestamps</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">migration_file</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#DatabaseMigrationScript.update_timestamps"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.scripts.DatabaseMigrationScript.update_timestamps" title="Permalink to this definition">¶</a></dt>
<dd><p>Updates this service’s timestamp to match a given migration</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.scripts.DatabaseVacuum">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.scripts.</span></span><span class="sig-name descname"><span class="pre">DatabaseVacuum</span></span><a class="reference internal" href="_modules/core/scripts.html#DatabaseVacuum"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.scripts.DatabaseVacuum" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.scripts.Script" title="core.scripts.Script"><code class="xref py py-class docutils literal notranslate"><span class="pre">Script</span></code></a></p>
<p>Script to vacuum all database tables</p>
<dl class="simple">
<dt>Args:</dt><dd><p>Script (_type_): _description_</p>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="core.scripts.DatabaseVacuum.do_run">
<span class="sig-name descname"><span class="pre">do_run</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">subcommand</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'FULL'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#DatabaseVacuum.do_run"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.scripts.DatabaseVacuum.do_run" title="Permalink to this definition">¶</a></dt>
<dd><p>Run the database vacuum</p>
<dl class="simple">
<dt>Args:</dt><dd><dl class="simple">
<dt>subcommand (str, optional): </dt><dd><p>Can be any of these
FULL [ boolean ]
FREEZE [ boolean ]
VERBOSE [ boolean ]
ANALYZE [ boolean ]
DISABLE_PAGE_SKIPPING [ boolean ]
SKIP_LOCKED [ boolean ]
INDEX_CLEANUP { AUTO | ON | OFF }
PROCESS_TOAST [ boolean ]
TRUNCATE [ boolean ]</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.scripts.Explain">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.scripts.</span></span><span class="sig-name descname"><span class="pre">Explain</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#Explain"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.scripts.Explain" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.scripts.IdentifierInputScript" title="core.scripts.IdentifierInputScript"><code class="xref py py-class docutils literal notranslate"><span class="pre">IdentifierInputScript</span></code></a></p>
<p>Explain everything known about a given work.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="core.scripts.Explain.METADATA_URL_TEMPLATE">
<span class="sig-name descname"><span class="pre">METADATA_URL_TEMPLATE</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'http://metadata.librarysimplified.org/lookup?urn=%s'</span></em><a class="headerlink" href="#core.scripts.Explain.METADATA_URL_TEMPLATE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.scripts.Explain.TIME_FORMAT">
<span class="sig-name descname"><span class="pre">TIME_FORMAT</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'%Y-%m-%d</span> <span class="pre">%H:%M'</span></em><a class="headerlink" href="#core.scripts.Explain.TIME_FORMAT" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.scripts.Explain.do_run">
<span class="sig-name descname"><span class="pre">do_run</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cmd_args=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stdin=&lt;_io.TextIOWrapper</span> <span class="pre">name='&lt;stdin&gt;'</span> <span class="pre">mode='r'</span> <span class="pre">encoding='utf-8'&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stdout=&lt;_io.TextIOWrapper</span> <span class="pre">name='&lt;stdout&gt;'</span> <span class="pre">mode='w'</span> <span class="pre">encoding='utf-8'&gt;</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#Explain.do_run"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.scripts.Explain.do_run" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.scripts.Explain.explain">
<span class="sig-name descname"><span class="pre">explain</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">edition</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">presentation_calculation_policy</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#Explain.explain"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.scripts.Explain.explain" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.scripts.Explain.explain_contribution">
<span class="sig-name descname"><span class="pre">explain_contribution</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">contribution</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#Explain.explain_contribution"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.scripts.Explain.explain_contribution" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.scripts.Explain.explain_coverage_record">
<span class="sig-name descname"><span class="pre">explain_coverage_record</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cr</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#Explain.explain_coverage_record"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.scripts.Explain.explain_coverage_record" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.scripts.Explain.explain_identifier">
<span class="sig-name descname"><span class="pre">explain_identifier</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">identifier</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">primary</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">seen</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">strength</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">level</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#Explain.explain_identifier"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.scripts.Explain.explain_identifier" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.scripts.Explain.explain_license_pool">
<span class="sig-name descname"><span class="pre">explain_license_pool</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pool</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#Explain.explain_license_pool"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.scripts.Explain.explain_license_pool" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.scripts.Explain.explain_work">
<span class="sig-name descname"><span class="pre">explain_work</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">work</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#Explain.explain_work"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.scripts.Explain.explain_work" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.scripts.Explain.explain_work_coverage_record">
<span class="sig-name descname"><span class="pre">explain_work_coverage_record</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cr</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#Explain.explain_work_coverage_record"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.scripts.Explain.explain_work_coverage_record" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.scripts.Explain.name">
<span class="sig-name descname"><span class="pre">name</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'Explain</span> <span class="pre">everything</span> <span class="pre">known</span> <span class="pre">about</span> <span class="pre">a</span> <span class="pre">given</span> <span class="pre">work'</span></em><a class="headerlink" href="#core.scripts.Explain.name" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.scripts.Explain.write">
<span class="sig-name descname"><span class="pre">write</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">s</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#Explain.write"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.scripts.Explain.write" title="Permalink to this definition">¶</a></dt>
<dd><p>Write a string to self.stdout.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.scripts.IdentifierInputScript">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.scripts.</span></span><span class="sig-name descname"><span class="pre">IdentifierInputScript</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#IdentifierInputScript"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.scripts.IdentifierInputScript" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.scripts.InputScript" title="core.scripts.InputScript"><code class="xref py py-class docutils literal notranslate"><span class="pre">InputScript</span></code></a></p>
<p>A script that takes identifiers as command line inputs.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="core.scripts.IdentifierInputScript.DATABASE_ID">
<span class="sig-name descname"><span class="pre">DATABASE_ID</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'Database</span> <span class="pre">ID'</span></em><a class="headerlink" href="#core.scripts.IdentifierInputScript.DATABASE_ID" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.scripts.IdentifierInputScript.arg_parser">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">arg_parser</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#IdentifierInputScript.arg_parser"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.scripts.IdentifierInputScript.arg_parser" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.scripts.IdentifierInputScript.look_up_identifiers">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">look_up_identifiers</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">parsed</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stdin_identifier_strings</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#IdentifierInputScript.look_up_identifiers"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.scripts.IdentifierInputScript.look_up_identifiers" title="Permalink to this definition">¶</a></dt>
<dd><p>Turn identifiers as specified on the command line into
real database Identifier objects.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.scripts.IdentifierInputScript.parse_command_line">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">parse_command_line</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cmd_args=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stdin=&lt;_io.TextIOWrapper</span> <span class="pre">name='&lt;stdin&gt;'</span> <span class="pre">mode='r'</span> <span class="pre">encoding='utf-8'&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">*args</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">**kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#IdentifierInputScript.parse_command_line"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.scripts.IdentifierInputScript.parse_command_line" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.scripts.IdentifierInputScript.parse_identifier_list">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">parse_identifier_list</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">identifier_type</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data_source</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">arguments</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">autocreate</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#IdentifierInputScript.parse_identifier_list"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.scripts.IdentifierInputScript.parse_identifier_list" title="Permalink to this definition">¶</a></dt>
<dd><p>Turn a list of identifiers into a list of Identifier objects.</p>
<p>The list of arguments is probably derived from a command-line
parser such as the one defined in
IdentifierInputScript.arg_parser().</p>
<p>This makes it easy to identify specific identifiers on the
command line. Examples:</p>
<p>1 2</p>
<p>a b c</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.scripts.InputScript">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.scripts.</span></span><span class="sig-name descname"><span class="pre">InputScript</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#InputScript"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.scripts.InputScript" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.scripts.Script" title="core.scripts.Script"><code class="xref py py-class docutils literal notranslate"><span class="pre">Script</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="core.scripts.InputScript.read_stdin_lines">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">read_stdin_lines</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">stdin</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#InputScript.read_stdin_lines"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.scripts.InputScript.read_stdin_lines" title="Permalink to this definition">¶</a></dt>
<dd><p>Read lines from a (possibly mocked, possibly empty) standard input.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.scripts.LaneSweeperScript">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.scripts.</span></span><span class="sig-name descname"><span class="pre">LaneSweeperScript</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#LaneSweeperScript"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.scripts.LaneSweeperScript" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.scripts.LibraryInputScript" title="core.scripts.LibraryInputScript"><code class="xref py py-class docutils literal notranslate"><span class="pre">LibraryInputScript</span></code></a></p>
<p>Do something to each lane in a library.</p>
<dl class="py method">
<dt class="sig sig-object py" id="core.scripts.LaneSweeperScript.process_lane">
<span class="sig-name descname"><span class="pre">process_lane</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">lane</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#LaneSweeperScript.process_lane"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.scripts.LaneSweeperScript.process_lane" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.scripts.LaneSweeperScript.process_library">
<span class="sig-name descname"><span class="pre">process_library</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">library</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#LaneSweeperScript.process_library"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.scripts.LaneSweeperScript.process_library" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.scripts.LaneSweeperScript.should_process_lane">
<span class="sig-name descname"><span class="pre">should_process_lane</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">lane</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#LaneSweeperScript.should_process_lane"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.scripts.LaneSweeperScript.should_process_lane" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.scripts.LibraryInputScript">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.scripts.</span></span><span class="sig-name descname"><span class="pre">LibraryInputScript</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#LibraryInputScript"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.scripts.LibraryInputScript" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.scripts.InputScript" title="core.scripts.InputScript"><code class="xref py py-class docutils literal notranslate"><span class="pre">InputScript</span></code></a></p>
<p>A script that operates on one or more Libraries.</p>
<dl class="py method">
<dt class="sig sig-object py" id="core.scripts.LibraryInputScript.arg_parser">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">arg_parser</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">multiple_libraries</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#LibraryInputScript.arg_parser"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.scripts.LibraryInputScript.arg_parser" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.scripts.LibraryInputScript.do_run">
<span class="sig-name descname"><span class="pre">do_run</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#LibraryInputScript.do_run"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.scripts.LibraryInputScript.do_run" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.scripts.LibraryInputScript.look_up_libraries">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">look_up_libraries</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">parsed</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#LibraryInputScript.look_up_libraries"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.scripts.LibraryInputScript.look_up_libraries" title="Permalink to this definition">¶</a></dt>
<dd><p>Turn library names as specified on the command line into real
Library objects.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.scripts.LibraryInputScript.parse_command_line">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">parse_command_line</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cmd_args</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#LibraryInputScript.parse_command_line"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.scripts.LibraryInputScript.parse_command_line" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.scripts.LibraryInputScript.parse_library_list">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">parse_library_list</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">arguments</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#LibraryInputScript.parse_library_list"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.scripts.LibraryInputScript.parse_library_list" title="Permalink to this definition">¶</a></dt>
<dd><p>Turn a list of library short names into a list of Library objects.</p>
<p>The list of arguments is probably derived from a command-line
parser such as the one defined in
LibraryInputScript.arg_parser().</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.scripts.LibraryInputScript.process_libraries">
<span class="sig-name descname"><span class="pre">process_libraries</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">libraries</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#LibraryInputScript.process_libraries"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.scripts.LibraryInputScript.process_libraries" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.scripts.LibraryInputScript.process_library">
<span class="sig-name descname"><span class="pre">process_library</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">library</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#LibraryInputScript.process_library"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.scripts.LibraryInputScript.process_library" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.scripts.ListCollectionMetadataIdentifiersScript">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.scripts.</span></span><span class="sig-name descname"><span class="pre">ListCollectionMetadataIdentifiersScript</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#ListCollectionMetadataIdentifiersScript"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.scripts.ListCollectionMetadataIdentifiersScript" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.scripts.CollectionInputScript" title="core.scripts.CollectionInputScript"><code class="xref py py-class docutils literal notranslate"><span class="pre">CollectionInputScript</span></code></a></p>
<p>List the metadata identifiers for Collections in the database.</p>
<p>This script is helpful for accounting for and tracking collections on
the metadata wrangler.</p>
<dl class="py method">
<dt class="sig sig-object py" id="core.scripts.ListCollectionMetadataIdentifiersScript.do_run">
<span class="sig-name descname"><span class="pre">do_run</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">collections</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#ListCollectionMetadataIdentifiersScript.do_run"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.scripts.ListCollectionMetadataIdentifiersScript.do_run" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.scripts.ListCollectionMetadataIdentifiersScript.run">
<span class="sig-name descname"><span class="pre">run</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cmd_args</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#ListCollectionMetadataIdentifiersScript.run"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.scripts.ListCollectionMetadataIdentifiersScript.run" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.scripts.MirrorResourcesScript">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.scripts.</span></span><span class="sig-name descname"><span class="pre">MirrorResourcesScript</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#MirrorResourcesScript"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.scripts.MirrorResourcesScript" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.scripts.CollectionInputScript" title="core.scripts.CollectionInputScript"><code class="xref py py-class docutils literal notranslate"><span class="pre">CollectionInputScript</span></code></a></p>
<p>Make sure that all mirrorable resources in a collection have
in fact been mirrored.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="core.scripts.MirrorResourcesScript.MIRROR_UTILITY">
<span class="sig-name descname"><span class="pre">MIRROR_UTILITY</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">&lt;core.metadata_layer.MetaToModelUtility</span> <span class="pre">object&gt;</span></em><a class="headerlink" href="#core.scripts.MirrorResourcesScript.MIRROR_UTILITY" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.scripts.MirrorResourcesScript.collections_with_uploader">
<span class="sig-name descname"><span class="pre">collections_with_uploader</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">collections</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">collection_type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">CollectionType.OPEN_ACCESS</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#MirrorResourcesScript.collections_with_uploader"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.scripts.MirrorResourcesScript.collections_with_uploader" title="Permalink to this definition">¶</a></dt>
<dd><p>Filter out collections that have no MirrorUploader.</p>
<dl class="field-list simple">
<dt class="field-odd">Yield<span class="colon">:</span></dt>
<dd class="field-odd"><p>2-tuples (Collection, ReplacementPolicy). The
ReplacementPolicy is the appropriate one for this script
to use for that Collection.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.scripts.MirrorResourcesScript.derive_rights_status">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">derive_rights_status</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">license_pool</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">resource</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#MirrorResourcesScript.derive_rights_status"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.scripts.MirrorResourcesScript.derive_rights_status" title="Permalink to this definition">¶</a></dt>
<dd><p>Make a best guess about the rights status for the given
resource.</p>
<p>This relies on the information having been available at one point,
but having been stored in the database at a slight remove.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.scripts.MirrorResourcesScript.do_run">
<span class="sig-name descname"><span class="pre">do_run</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cmd_args</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#MirrorResourcesScript.do_run"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.scripts.MirrorResourcesScript.do_run" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.scripts.MirrorResourcesScript.process_collection">
<span class="sig-name descname"><span class="pre">process_collection</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">collection</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">policy</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">unmirrored</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#MirrorResourcesScript.process_collection"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.scripts.MirrorResourcesScript.process_collection" title="Permalink to this definition">¶</a></dt>
<dd><p>Make sure every mirrorable resource in this collection has
been mirrored.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>unmirrored</strong> – A replacement for Hyperlink.unmirrored,
for use in tests.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.scripts.MirrorResourcesScript.process_item">
<span class="sig-name descname"><span class="pre">process_item</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">collection</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">link_obj</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">policy</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#MirrorResourcesScript.process_item"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.scripts.MirrorResourcesScript.process_item" title="Permalink to this definition">¶</a></dt>
<dd><p>Determine the URL that needs to be mirrored and (for books)
the rationale that lets us mirror that URL. Then mirror it.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.scripts.MirrorResourcesScript.replacement_policy">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">replacement_policy</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mirrors</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#MirrorResourcesScript.replacement_policy"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.scripts.MirrorResourcesScript.replacement_policy" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a ReplacementPolicy for this script that uses the
given mirrors.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.scripts.MockStdin">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.scripts.</span></span><span class="sig-name descname"><span class="pre">MockStdin</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">lines</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#MockStdin"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.scripts.MockStdin" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Mock a list of identifiers passed in on standard input.</p>
<dl class="py method">
<dt class="sig sig-object py" id="core.scripts.MockStdin.readlines">
<span class="sig-name descname"><span class="pre">readlines</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#MockStdin.readlines"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.scripts.MockStdin.readlines" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.scripts.OPDSImportScript">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.scripts.</span></span><span class="sig-name descname"><span class="pre">OPDSImportScript</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">importer_class</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">monitor_class</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">protocol</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#OPDSImportScript"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.scripts.OPDSImportScript" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.scripts.CollectionInputScript" title="core.scripts.CollectionInputScript"><code class="xref py py-class docutils literal notranslate"><span class="pre">CollectionInputScript</span></code></a></p>
<p>Import all books from the OPDS feed associated with a collection.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="core.scripts.OPDSImportScript.IMPORTER_CLASS">
<span class="sig-name descname"><span class="pre">IMPORTER_CLASS</span></span><a class="headerlink" href="#core.scripts.OPDSImportScript.IMPORTER_CLASS" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <a class="reference internal" href="#core.opds_import.OPDSImporter" title="core.opds_import.OPDSImporter"><code class="xref py py-class docutils literal notranslate"><span class="pre">OPDSImporter</span></code></a></p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.scripts.OPDSImportScript.MONITOR_CLASS">
<span class="sig-name descname"><span class="pre">MONITOR_CLASS</span></span><a class="headerlink" href="#core.scripts.OPDSImportScript.MONITOR_CLASS" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <a class="reference internal" href="#core.opds_import.OPDSImportMonitor" title="core.opds_import.OPDSImportMonitor"><code class="xref py py-class docutils literal notranslate"><span class="pre">OPDSImportMonitor</span></code></a></p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.scripts.OPDSImportScript.PROTOCOL">
<span class="sig-name descname"><span class="pre">PROTOCOL</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'OPDS</span> <span class="pre">Import'</span></em><a class="headerlink" href="#core.scripts.OPDSImportScript.PROTOCOL" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.scripts.OPDSImportScript.arg_parser">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">arg_parser</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#OPDSImportScript.arg_parser"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.scripts.OPDSImportScript.arg_parser" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.scripts.OPDSImportScript.do_run">
<span class="sig-name descname"><span class="pre">do_run</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cmd_args</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#OPDSImportScript.do_run"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.scripts.OPDSImportScript.do_run" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.scripts.OPDSImportScript.name">
<span class="sig-name descname"><span class="pre">name</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'Import</span> <span class="pre">all</span> <span class="pre">books</span> <span class="pre">from</span> <span class="pre">the</span> <span class="pre">OPDS</span> <span class="pre">feed</span> <span class="pre">associated</span> <span class="pre">with</span> <span class="pre">a</span> <span class="pre">collection.'</span></em><a class="headerlink" href="#core.scripts.OPDSImportScript.name" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.scripts.OPDSImportScript.run_monitor">
<span class="sig-name descname"><span class="pre">run_monitor</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">collection</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">force</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#OPDSImportScript.run_monitor"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.scripts.OPDSImportScript.run_monitor" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.scripts.PatronInputScript">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.scripts.</span></span><span class="sig-name descname"><span class="pre">PatronInputScript</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#PatronInputScript"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.scripts.PatronInputScript" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.scripts.LibraryInputScript" title="core.scripts.LibraryInputScript"><code class="xref py py-class docutils literal notranslate"><span class="pre">LibraryInputScript</span></code></a></p>
<p>A script that operates on one or more Patrons.</p>
<dl class="py method">
<dt class="sig sig-object py" id="core.scripts.PatronInputScript.arg_parser">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">arg_parser</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#PatronInputScript.arg_parser"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.scripts.PatronInputScript.arg_parser" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.scripts.PatronInputScript.do_run">
<span class="sig-name descname"><span class="pre">do_run</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#PatronInputScript.do_run"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.scripts.PatronInputScript.do_run" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.scripts.PatronInputScript.look_up_patrons">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">look_up_patrons</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">parsed</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stdin_patron_strings</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#PatronInputScript.look_up_patrons"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.scripts.PatronInputScript.look_up_patrons" title="Permalink to this definition">¶</a></dt>
<dd><p>Turn patron identifiers as specified on the command line into real
Patron objects.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.scripts.PatronInputScript.parse_command_line">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">parse_command_line</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cmd_args=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stdin=&lt;_io.TextIOWrapper</span> <span class="pre">name='&lt;stdin&gt;'</span> <span class="pre">mode='r'</span> <span class="pre">encoding='utf-8'&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">*args</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">**kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#PatronInputScript.parse_command_line"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.scripts.PatronInputScript.parse_command_line" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.scripts.PatronInputScript.parse_patron_list">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">parse_patron_list</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">library</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">arguments</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#PatronInputScript.parse_patron_list"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.scripts.PatronInputScript.parse_patron_list" title="Permalink to this definition">¶</a></dt>
<dd><p>Turn a list of patron identifiers into a list of Patron objects.</p>
<p>The list of arguments is probably derived from a command-line
parser such as the one defined in
PatronInputScript.arg_parser().</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.scripts.PatronInputScript.process_patron">
<span class="sig-name descname"><span class="pre">process_patron</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">patron</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#PatronInputScript.process_patron"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.scripts.PatronInputScript.process_patron" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.scripts.PatronInputScript.process_patrons">
<span class="sig-name descname"><span class="pre">process_patrons</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">patrons</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#PatronInputScript.process_patrons"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.scripts.PatronInputScript.process_patrons" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.scripts.RebuildSearchIndexScript">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.scripts.</span></span><span class="sig-name descname"><span class="pre">RebuildSearchIndexScript</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#RebuildSearchIndexScript"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.scripts.RebuildSearchIndexScript" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.scripts.RunWorkCoverageProviderScript" title="core.scripts.RunWorkCoverageProviderScript"><code class="xref py py-class docutils literal notranslate"><span class="pre">RunWorkCoverageProviderScript</span></code></a>, <a class="reference internal" href="#core.scripts.RemovesSearchCoverage" title="core.scripts.RemovesSearchCoverage"><code class="xref py py-class docutils literal notranslate"><span class="pre">RemovesSearchCoverage</span></code></a></p>
<p>Completely delete the search index and recreate it.</p>
<dl class="py method">
<dt class="sig sig-object py" id="core.scripts.RebuildSearchIndexScript.do_run">
<span class="sig-name descname"><span class="pre">do_run</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#RebuildSearchIndexScript.do_run"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.scripts.RebuildSearchIndexScript.do_run" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.scripts.ReclassifyWorksForUncheckedSubjectsScript">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.scripts.</span></span><span class="sig-name descname"><span class="pre">ReclassifyWorksForUncheckedSubjectsScript</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#ReclassifyWorksForUncheckedSubjectsScript"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.scripts.ReclassifyWorksForUncheckedSubjectsScript" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.scripts.WorkClassificationScript" title="core.scripts.WorkClassificationScript"><code class="xref py py-class docutils literal notranslate"><span class="pre">WorkClassificationScript</span></code></a></p>
<p>Reclassify all Works whose current classifications appear to
depend on Subjects in the ‘unchecked’ state.</p>
<p>This generally means that some migration script reset those
Subjects because the rules for processing them changed.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="core.scripts.ReclassifyWorksForUncheckedSubjectsScript.batch_size">
<span class="sig-name descname"><span class="pre">batch_size</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">100</span></em><a class="headerlink" href="#core.scripts.ReclassifyWorksForUncheckedSubjectsScript.batch_size" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.scripts.ReclassifyWorksForUncheckedSubjectsScript.name">
<span class="sig-name descname"><span class="pre">name</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'Reclassify</span> <span class="pre">works</span> <span class="pre">that</span> <span class="pre">use</span> <span class="pre">unchecked</span> <span class="pre">subjects.'</span></em><a class="headerlink" href="#core.scripts.ReclassifyWorksForUncheckedSubjectsScript.name" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.scripts.ReclassifyWorksForUncheckedSubjectsScript.policy">
<span class="sig-name descname"><span class="pre">policy</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">&lt;core.model.PresentationCalculationPolicy</span> <span class="pre">object&gt;</span></em><a class="headerlink" href="#core.scripts.ReclassifyWorksForUncheckedSubjectsScript.policy" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.scripts.RemovesSearchCoverage">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.scripts.</span></span><span class="sig-name descname"><span class="pre">RemovesSearchCoverage</span></span><a class="reference internal" href="_modules/core/scripts.html#RemovesSearchCoverage"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.scripts.RemovesSearchCoverage" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Mix-in class for a script that might remove all coverage records
for the search engine.</p>
<dl class="py method">
<dt class="sig sig-object py" id="core.scripts.RemovesSearchCoverage.remove_search_coverage_records">
<span class="sig-name descname"><span class="pre">remove_search_coverage_records</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#RemovesSearchCoverage.remove_search_coverage_records"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.scripts.RemovesSearchCoverage.remove_search_coverage_records" title="Permalink to this definition">¶</a></dt>
<dd><p>Delete all search coverage records from the database.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>The number of records deleted.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.scripts.RunCollectionCoverageProviderScript">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.scripts.</span></span><span class="sig-name descname"><span class="pre">RunCollectionCoverageProviderScript</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">provider_class</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_db</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">providers</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#RunCollectionCoverageProviderScript"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.scripts.RunCollectionCoverageProviderScript" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.scripts.RunCoverageProvidersScript" title="core.scripts.RunCoverageProvidersScript"><code class="xref py py-class docutils literal notranslate"><span class="pre">RunCoverageProvidersScript</span></code></a></p>
<p>Run the same CoverageProvider code for all Collections that
get their licenses from the appropriate place.</p>
<dl class="py method">
<dt class="sig sig-object py" id="core.scripts.RunCollectionCoverageProviderScript.get_providers">
<span class="sig-name descname"><span class="pre">get_providers</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">provider_class</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#RunCollectionCoverageProviderScript.get_providers"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.scripts.RunCollectionCoverageProviderScript.get_providers" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.scripts.RunCollectionMonitorScript">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.scripts.</span></span><span class="sig-name descname"><span class="pre">RunCollectionMonitorScript</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">monitor_class</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_db</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cmd_args</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#RunCollectionMonitorScript"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.scripts.RunCollectionMonitorScript" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.scripts.RunMultipleMonitorsScript" title="core.scripts.RunMultipleMonitorsScript"><code class="xref py py-class docutils literal notranslate"><span class="pre">RunMultipleMonitorsScript</span></code></a>, <a class="reference internal" href="#core.scripts.CollectionArgumentsScript" title="core.scripts.CollectionArgumentsScript"><code class="xref py py-class docutils literal notranslate"><span class="pre">CollectionArgumentsScript</span></code></a></p>
<p>Run a CollectionMonitor on every Collection that comes through a
certain protocol.</p>
<dl class="py method">
<dt class="sig sig-object py" id="core.scripts.RunCollectionMonitorScript.monitors">
<span class="sig-name descname"><span class="pre">monitors</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#RunCollectionMonitorScript.monitors"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.scripts.RunCollectionMonitorScript.monitors" title="Permalink to this definition">¶</a></dt>
<dd><p>Find all the Monitors that need to be run.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>A list of Monitor objects.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.scripts.RunCoverageProviderScript">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.scripts.</span></span><span class="sig-name descname"><span class="pre">RunCoverageProviderScript</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">provider</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_db</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cmd_args</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">provider_args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">provider_kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#RunCoverageProviderScript"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.scripts.RunCoverageProviderScript" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.scripts.IdentifierInputScript" title="core.scripts.IdentifierInputScript"><code class="xref py py-class docutils literal notranslate"><span class="pre">IdentifierInputScript</span></code></a></p>
<p>Run a single coverage provider.</p>
<dl class="py method">
<dt class="sig sig-object py" id="core.scripts.RunCoverageProviderScript.arg_parser">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">arg_parser</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#RunCoverageProviderScript.arg_parser"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.scripts.RunCoverageProviderScript.arg_parser" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.scripts.RunCoverageProviderScript.do_run">
<span class="sig-name descname"><span class="pre">do_run</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#RunCoverageProviderScript.do_run"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.scripts.RunCoverageProviderScript.do_run" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.scripts.RunCoverageProviderScript.extract_additional_command_line_arguments">
<span class="sig-name descname"><span class="pre">extract_additional_command_line_arguments</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#RunCoverageProviderScript.extract_additional_command_line_arguments"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.scripts.RunCoverageProviderScript.extract_additional_command_line_arguments" title="Permalink to this definition">¶</a></dt>
<dd><p>A hook method for subclasses.</p>
<p>Turns command-line arguments into additional keyword arguments
to the CoverageProvider constructor.</p>
<p>By default, pass in a value used only by CoverageProvider
(as opposed to WorkCoverageProvider).</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.scripts.RunCoverageProviderScript.parse_command_line">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">parse_command_line</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cmd_args=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stdin=&lt;_io.TextIOWrapper</span> <span class="pre">name='&lt;stdin&gt;'</span> <span class="pre">mode='r'</span> <span class="pre">encoding='utf-8'&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">*args</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">**kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#RunCoverageProviderScript.parse_command_line"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.scripts.RunCoverageProviderScript.parse_command_line" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.scripts.RunCoverageProvidersScript">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.scripts.</span></span><span class="sig-name descname"><span class="pre">RunCoverageProvidersScript</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">providers</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_db</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#RunCoverageProvidersScript"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.scripts.RunCoverageProvidersScript" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.scripts.Script" title="core.scripts.Script"><code class="xref py py-class docutils literal notranslate"><span class="pre">Script</span></code></a></p>
<p>Alternate between multiple coverage providers.</p>
<dl class="py method">
<dt class="sig sig-object py" id="core.scripts.RunCoverageProvidersScript.do_run">
<span class="sig-name descname"><span class="pre">do_run</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#RunCoverageProvidersScript.do_run"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.scripts.RunCoverageProvidersScript.do_run" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.scripts.RunMonitorScript">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.scripts.</span></span><span class="sig-name descname"><span class="pre">RunMonitorScript</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">monitor</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_db</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#RunMonitorScript"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.scripts.RunMonitorScript" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.scripts.Script" title="core.scripts.Script"><code class="xref py py-class docutils literal notranslate"><span class="pre">Script</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="core.scripts.RunMonitorScript.do_run">
<span class="sig-name descname"><span class="pre">do_run</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#RunMonitorScript.do_run"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.scripts.RunMonitorScript.do_run" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.scripts.RunMultipleMonitorsScript">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.scripts.</span></span><span class="sig-name descname"><span class="pre">RunMultipleMonitorsScript</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#RunMultipleMonitorsScript"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.scripts.RunMultipleMonitorsScript" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.scripts.Script" title="core.scripts.Script"><code class="xref py py-class docutils literal notranslate"><span class="pre">Script</span></code></a></p>
<p>Run a number of monitors in sequence.</p>
<p>Currently the Monitors are run one at a time. It should be
possible to take a command-line argument that runs all the
Monitors in batches, each in its own thread. Unfortunately, it’s
tough to know in a given situation that this won’t overload the
system.</p>
<dl class="py method">
<dt class="sig sig-object py" id="core.scripts.RunMultipleMonitorsScript.do_run">
<span class="sig-name descname"><span class="pre">do_run</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#RunMultipleMonitorsScript.do_run"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.scripts.RunMultipleMonitorsScript.do_run" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.scripts.RunMultipleMonitorsScript.monitors">
<span class="sig-name descname"><span class="pre">monitors</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#RunMultipleMonitorsScript.monitors"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.scripts.RunMultipleMonitorsScript.monitors" title="Permalink to this definition">¶</a></dt>
<dd><p>Find all the Monitors that need to be run.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>A list of Monitor objects.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.scripts.RunReaperMonitorsScript">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.scripts.</span></span><span class="sig-name descname"><span class="pre">RunReaperMonitorsScript</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#RunReaperMonitorsScript"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.scripts.RunReaperMonitorsScript" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.scripts.RunMultipleMonitorsScript" title="core.scripts.RunMultipleMonitorsScript"><code class="xref py py-class docutils literal notranslate"><span class="pre">RunMultipleMonitorsScript</span></code></a></p>
<p>Run all the monitors found in ReaperMonitor.REGISTRY</p>
<dl class="py method">
<dt class="sig sig-object py" id="core.scripts.RunReaperMonitorsScript.monitors">
<span class="sig-name descname"><span class="pre">monitors</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#RunReaperMonitorsScript.monitors"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.scripts.RunReaperMonitorsScript.monitors" title="Permalink to this definition">¶</a></dt>
<dd><p>Find all the Monitors that need to be run.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>A list of Monitor objects.</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.scripts.RunReaperMonitorsScript.name">
<span class="sig-name descname"><span class="pre">name</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'Run</span> <span class="pre">all</span> <span class="pre">reaper</span> <span class="pre">monitors'</span></em><a class="headerlink" href="#core.scripts.RunReaperMonitorsScript.name" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.scripts.RunThreadedCollectionCoverageProviderScript">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.scripts.</span></span><span class="sig-name descname"><span class="pre">RunThreadedCollectionCoverageProviderScript</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">provider_class</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">worker_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_db</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">provider_kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#RunThreadedCollectionCoverageProviderScript"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.scripts.RunThreadedCollectionCoverageProviderScript" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.scripts.Script" title="core.scripts.Script"><code class="xref py py-class docutils literal notranslate"><span class="pre">Script</span></code></a></p>
<p>Run coverage providers in multiple threads.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="core.scripts.RunThreadedCollectionCoverageProviderScript.DEFAULT_WORKER_SIZE">
<span class="sig-name descname"><span class="pre">DEFAULT_WORKER_SIZE</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">5</span></em><a class="headerlink" href="#core.scripts.RunThreadedCollectionCoverageProviderScript.DEFAULT_WORKER_SIZE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.scripts.RunThreadedCollectionCoverageProviderScript.get_query_and_batch_sizes">
<span class="sig-name descname"><span class="pre">get_query_and_batch_sizes</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">provider</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#RunThreadedCollectionCoverageProviderScript.get_query_and_batch_sizes"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.scripts.RunThreadedCollectionCoverageProviderScript.get_query_and_batch_sizes" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.scripts.RunThreadedCollectionCoverageProviderScript.run">
<span class="sig-name descname"><span class="pre">run</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pool</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#RunThreadedCollectionCoverageProviderScript.run"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.scripts.RunThreadedCollectionCoverageProviderScript.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Runs a CollectionCoverageProvider with multiple threads and
updates the timestamp accordingly.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>pool</strong> – A DatabasePool (or other) object for use in testing
environments.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.scripts.RunWorkCoverageProviderScript">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.scripts.</span></span><span class="sig-name descname"><span class="pre">RunWorkCoverageProviderScript</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">provider_class</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_db</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">providers</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#RunWorkCoverageProviderScript"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.scripts.RunWorkCoverageProviderScript" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.scripts.RunCollectionCoverageProviderScript" title="core.scripts.RunCollectionCoverageProviderScript"><code class="xref py py-class docutils literal notranslate"><span class="pre">RunCollectionCoverageProviderScript</span></code></a></p>
<p>Run a WorkCoverageProvider on every relevant Work in the system.</p>
<dl class="py method">
<dt class="sig sig-object py" id="core.scripts.RunWorkCoverageProviderScript.get_providers">
<span class="sig-name descname"><span class="pre">get_providers</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">provider_class</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#RunWorkCoverageProviderScript.get_providers"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.scripts.RunWorkCoverageProviderScript.get_providers" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.scripts.Script">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.scripts.</span></span><span class="sig-name descname"><span class="pre">Script</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#Script"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.scripts.Script" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<dl class="py method">
<dt class="sig sig-object py" id="core.scripts.Script.arg_parser">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">arg_parser</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#Script.arg_parser"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.scripts.Script.arg_parser" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="core.scripts.Script.data_directory">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">data_directory</span></span><a class="headerlink" href="#core.scripts.Script.data_directory" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.scripts.Script.load_configuration">
<span class="sig-name descname"><span class="pre">load_configuration</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#Script.load_configuration"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.scripts.Script.load_configuration" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="core.scripts.Script.log">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">log</span></span><a class="headerlink" href="#core.scripts.Script.log" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.scripts.Script.parse_command_line">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">parse_command_line</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cmd_args</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#Script.parse_command_line"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.scripts.Script.parse_command_line" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.scripts.Script.parse_time">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">parse_time</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">time_string</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#Script.parse_time"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.scripts.Script.parse_time" title="Permalink to this definition">¶</a></dt>
<dd><p>Try to pass the given string as a time.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.scripts.Script.run">
<span class="sig-name descname"><span class="pre">run</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#Script.run"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.scripts.Script.run" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="core.scripts.Script.script_name">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">script_name</span></span><a class="headerlink" href="#core.scripts.Script.script_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Find or guess the name of the script.</p>
<p>This is either the .name of the Script object or the name of
the class.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.scripts.Script.update_timestamp">
<span class="sig-name descname"><span class="pre">update_timestamp</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">timestamp_data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">start_time</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">exception</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#Script.update_timestamp"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.scripts.Script.update_timestamp" title="Permalink to this definition">¶</a></dt>
<dd><p>By default scripts have no timestamp of their own.</p>
<p>Most scripts either work through Monitors or CoverageProviders,
which have their own logic for creating timestamps, or they
are designed to be run interactively from the command-line, so
facts about when they last ran are not relevant.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>start_time</strong> – The time the script started running.</p></li>
<li><p><strong>exception</strong> – A stack trace for the exception, if any,
that stopped the script from running.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.scripts.SearchIndexCoverageRemover">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.scripts.</span></span><span class="sig-name descname"><span class="pre">SearchIndexCoverageRemover</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#SearchIndexCoverageRemover"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.scripts.SearchIndexCoverageRemover" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.scripts.TimestampScript" title="core.scripts.TimestampScript"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimestampScript</span></code></a>, <a class="reference internal" href="#core.scripts.RemovesSearchCoverage" title="core.scripts.RemovesSearchCoverage"><code class="xref py py-class docutils literal notranslate"><span class="pre">RemovesSearchCoverage</span></code></a></p>
<p>Script that removes search index coverage for all works.</p>
<p>This guarantees the SearchIndexCoverageProvider will add
fresh coverage for every Work the next time it runs.</p>
<dl class="py method">
<dt class="sig sig-object py" id="core.scripts.SearchIndexCoverageRemover.do_run">
<span class="sig-name descname"><span class="pre">do_run</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#SearchIndexCoverageRemover.do_run"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.scripts.SearchIndexCoverageRemover.do_run" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.scripts.ShowCollectionsScript">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.scripts.</span></span><span class="sig-name descname"><span class="pre">ShowCollectionsScript</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#ShowCollectionsScript"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.scripts.ShowCollectionsScript" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.scripts.Script" title="core.scripts.Script"><code class="xref py py-class docutils literal notranslate"><span class="pre">Script</span></code></a></p>
<p>Show information about the collections on a server.</p>
<dl class="py method">
<dt class="sig sig-object py" id="core.scripts.ShowCollectionsScript.arg_parser">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">arg_parser</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#ShowCollectionsScript.arg_parser"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.scripts.ShowCollectionsScript.arg_parser" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.scripts.ShowCollectionsScript.do_run">
<span class="sig-name descname"><span class="pre">do_run</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cmd_args=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output=&lt;_io.TextIOWrapper</span> <span class="pre">name='&lt;stdout&gt;'</span> <span class="pre">mode='w'</span> <span class="pre">encoding='utf-8'&gt;</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#ShowCollectionsScript.do_run"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.scripts.ShowCollectionsScript.do_run" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.scripts.ShowCollectionsScript.name">
<span class="sig-name descname"><span class="pre">name</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'List</span> <span class="pre">the</span> <span class="pre">collections</span> <span class="pre">on</span> <span class="pre">this</span> <span class="pre">server.'</span></em><a class="headerlink" href="#core.scripts.ShowCollectionsScript.name" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.scripts.ShowIntegrationsScript">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.scripts.</span></span><span class="sig-name descname"><span class="pre">ShowIntegrationsScript</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#ShowIntegrationsScript"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.scripts.ShowIntegrationsScript" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.scripts.Script" title="core.scripts.Script"><code class="xref py py-class docutils literal notranslate"><span class="pre">Script</span></code></a></p>
<p>Show information about the external integrations on a server.</p>
<dl class="py method">
<dt class="sig sig-object py" id="core.scripts.ShowIntegrationsScript.arg_parser">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">arg_parser</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#ShowIntegrationsScript.arg_parser"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.scripts.ShowIntegrationsScript.arg_parser" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.scripts.ShowIntegrationsScript.do_run">
<span class="sig-name descname"><span class="pre">do_run</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cmd_args=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output=&lt;_io.TextIOWrapper</span> <span class="pre">name='&lt;stdout&gt;'</span> <span class="pre">mode='w'</span> <span class="pre">encoding='utf-8'&gt;</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#ShowIntegrationsScript.do_run"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.scripts.ShowIntegrationsScript.do_run" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.scripts.ShowIntegrationsScript.name">
<span class="sig-name descname"><span class="pre">name</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'List</span> <span class="pre">the</span> <span class="pre">external</span> <span class="pre">integrations</span> <span class="pre">on</span> <span class="pre">this</span> <span class="pre">server.'</span></em><a class="headerlink" href="#core.scripts.ShowIntegrationsScript.name" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.scripts.ShowLanesScript">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.scripts.</span></span><span class="sig-name descname"><span class="pre">ShowLanesScript</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#ShowLanesScript"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.scripts.ShowLanesScript" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.scripts.Script" title="core.scripts.Script"><code class="xref py py-class docutils literal notranslate"><span class="pre">Script</span></code></a></p>
<p>Show information about the lanes on a server.</p>
<dl class="py method">
<dt class="sig sig-object py" id="core.scripts.ShowLanesScript.arg_parser">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">arg_parser</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#ShowLanesScript.arg_parser"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.scripts.ShowLanesScript.arg_parser" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.scripts.ShowLanesScript.do_run">
<span class="sig-name descname"><span class="pre">do_run</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cmd_args=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output=&lt;_io.TextIOWrapper</span> <span class="pre">name='&lt;stdout&gt;'</span> <span class="pre">mode='w'</span> <span class="pre">encoding='utf-8'&gt;</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#ShowLanesScript.do_run"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.scripts.ShowLanesScript.do_run" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.scripts.ShowLanesScript.name">
<span class="sig-name descname"><span class="pre">name</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'List</span> <span class="pre">the</span> <span class="pre">lanes</span> <span class="pre">on</span> <span class="pre">this</span> <span class="pre">server.'</span></em><a class="headerlink" href="#core.scripts.ShowLanesScript.name" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.scripts.ShowLibrariesScript">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.scripts.</span></span><span class="sig-name descname"><span class="pre">ShowLibrariesScript</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#ShowLibrariesScript"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.scripts.ShowLibrariesScript" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.scripts.Script" title="core.scripts.Script"><code class="xref py py-class docutils literal notranslate"><span class="pre">Script</span></code></a></p>
<p>Show information about the libraries on a server.</p>
<dl class="py method">
<dt class="sig sig-object py" id="core.scripts.ShowLibrariesScript.arg_parser">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">arg_parser</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#ShowLibrariesScript.arg_parser"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.scripts.ShowLibrariesScript.arg_parser" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.scripts.ShowLibrariesScript.do_run">
<span class="sig-name descname"><span class="pre">do_run</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cmd_args=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output=&lt;_io.TextIOWrapper</span> <span class="pre">name='&lt;stdout&gt;'</span> <span class="pre">mode='w'</span> <span class="pre">encoding='utf-8'&gt;</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#ShowLibrariesScript.do_run"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.scripts.ShowLibrariesScript.do_run" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.scripts.ShowLibrariesScript.name">
<span class="sig-name descname"><span class="pre">name</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'List</span> <span class="pre">the</span> <span class="pre">libraries</span> <span class="pre">on</span> <span class="pre">this</span> <span class="pre">server.'</span></em><a class="headerlink" href="#core.scripts.ShowLibrariesScript.name" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.scripts.SubjectInputScript">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.scripts.</span></span><span class="sig-name descname"><span class="pre">SubjectInputScript</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#SubjectInputScript"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.scripts.SubjectInputScript" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.scripts.Script" title="core.scripts.Script"><code class="xref py py-class docutils literal notranslate"><span class="pre">Script</span></code></a></p>
<p>A script whose command line filters the set of Subjects.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>a 2-tuple (subject type, subject filter) that can be
passed into the SubjectSweepMonitor constructor.</p>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="core.scripts.SubjectInputScript.arg_parser">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">arg_parser</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#SubjectInputScript.arg_parser"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.scripts.SubjectInputScript.arg_parser" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.scripts.TimestampScript">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.scripts.</span></span><span class="sig-name descname"><span class="pre">TimestampScript</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#TimestampScript"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.scripts.TimestampScript" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.scripts.Script" title="core.scripts.Script"><code class="xref py py-class docutils literal notranslate"><span class="pre">Script</span></code></a></p>
<p>A script that automatically records a timestamp whenever it runs.</p>
<dl class="py method">
<dt class="sig sig-object py" id="core.scripts.TimestampScript.update_timestamp">
<span class="sig-name descname"><span class="pre">update_timestamp</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">timestamp_data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">start</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">exception</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#TimestampScript.update_timestamp"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.scripts.TimestampScript.update_timestamp" title="Permalink to this definition">¶</a></dt>
<dd><p>Update the appropriate Timestamp for this script.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>timestamp_data</strong> – A TimestampData representing what the script
itself thinks its timestamp should look like. Data will be filled in
where it is missing, but it will not be modified if present.</p></li>
<li><p><strong>start</strong> – The time at which this script believes the
service started running. The script itself may change this
value for its own purposes.</p></li>
<li><p><strong>exception</strong> – The exception with which this script
believes the service stopped running. The script itself may
change this value for its own purposes.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.scripts.UpdateCustomListSizeScript">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.scripts.</span></span><span class="sig-name descname"><span class="pre">UpdateCustomListSizeScript</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#UpdateCustomListSizeScript"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.scripts.UpdateCustomListSizeScript" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.scripts.CustomListSweeperScript" title="core.scripts.CustomListSweeperScript"><code class="xref py py-class docutils literal notranslate"><span class="pre">CustomListSweeperScript</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="core.scripts.UpdateCustomListSizeScript.process_custom_list">
<span class="sig-name descname"><span class="pre">process_custom_list</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">custom_list</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#UpdateCustomListSizeScript.process_custom_list"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.scripts.UpdateCustomListSizeScript.process_custom_list" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.scripts.UpdateLaneSizeScript">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.scripts.</span></span><span class="sig-name descname"><span class="pre">UpdateLaneSizeScript</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#UpdateLaneSizeScript"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.scripts.UpdateLaneSizeScript" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.scripts.LaneSweeperScript" title="core.scripts.LaneSweeperScript"><code class="xref py py-class docutils literal notranslate"><span class="pre">LaneSweeperScript</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="core.scripts.UpdateLaneSizeScript.process_lane">
<span class="sig-name descname"><span class="pre">process_lane</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">lane</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#UpdateLaneSizeScript.process_lane"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.scripts.UpdateLaneSizeScript.process_lane" title="Permalink to this definition">¶</a></dt>
<dd><p>Update the estimated size of a Lane.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.scripts.UpdateLaneSizeScript.should_process_lane">
<span class="sig-name descname"><span class="pre">should_process_lane</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">lane</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#UpdateLaneSizeScript.should_process_lane"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.scripts.UpdateLaneSizeScript.should_process_lane" title="Permalink to this definition">¶</a></dt>
<dd><p>We don’t want to process generic WorkLists – there’s nowhere
to store the data.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.scripts.WhereAreMyBooksScript">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.scripts.</span></span><span class="sig-name descname"><span class="pre">WhereAreMyBooksScript</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">search</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#WhereAreMyBooksScript"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.scripts.WhereAreMyBooksScript" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.scripts.CollectionInputScript" title="core.scripts.CollectionInputScript"><code class="xref py py-class docutils literal notranslate"><span class="pre">CollectionInputScript</span></code></a></p>
<p>Try to figure out why Works aren’t showing up.</p>
<p>This is a common problem on a new installation or when a new collection
is being configured.</p>
<dl class="py method">
<dt class="sig sig-object py" id="core.scripts.WhereAreMyBooksScript.check_library">
<span class="sig-name descname"><span class="pre">check_library</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">library</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#WhereAreMyBooksScript.check_library"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.scripts.WhereAreMyBooksScript.check_library" title="Permalink to this definition">¶</a></dt>
<dd><p>Make sure a library is properly set up to show works.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.scripts.WhereAreMyBooksScript.delete_cached_feeds">
<span class="sig-name descname"><span class="pre">delete_cached_feeds</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#WhereAreMyBooksScript.delete_cached_feeds"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.scripts.WhereAreMyBooksScript.delete_cached_feeds" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.scripts.WhereAreMyBooksScript.explain_collection">
<span class="sig-name descname"><span class="pre">explain_collection</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">collection</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#WhereAreMyBooksScript.explain_collection"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.scripts.WhereAreMyBooksScript.explain_collection" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.scripts.WhereAreMyBooksScript.out">
<span class="sig-name descname"><span class="pre">out</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">s</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#WhereAreMyBooksScript.out"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.scripts.WhereAreMyBooksScript.out" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.scripts.WhereAreMyBooksScript.run">
<span class="sig-name descname"><span class="pre">run</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cmd_args</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#WhereAreMyBooksScript.run"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.scripts.WhereAreMyBooksScript.run" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.scripts.WorkClassificationScript">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.scripts.</span></span><span class="sig-name descname"><span class="pre">WorkClassificationScript</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#WorkClassificationScript"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.scripts.WorkClassificationScript" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.scripts.WorkPresentationScript" title="core.scripts.WorkPresentationScript"><code class="xref py py-class docutils literal notranslate"><span class="pre">WorkPresentationScript</span></code></a></p>
<p>Recalculate the classification–and nothing else–for Work objects.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="core.scripts.WorkClassificationScript.name">
<span class="sig-name descname"><span class="pre">name</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'Recalculate</span> <span class="pre">the</span> <span class="pre">classification</span> <span class="pre">for</span> <span class="pre">works</span> <span class="pre">that</span> <span class="pre">need</span> <span class="pre">it.'</span></em><a class="headerlink" href="#core.scripts.WorkClassificationScript.name" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.scripts.WorkClassificationScript.policy">
<span class="sig-name descname"><span class="pre">policy</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">&lt;core.model.PresentationCalculationPolicy</span> <span class="pre">object&gt;</span></em><a class="headerlink" href="#core.scripts.WorkClassificationScript.policy" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.scripts.WorkConsolidationScript">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.scripts.</span></span><span class="sig-name descname"><span class="pre">WorkConsolidationScript</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">force=False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">batch_size=10</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_db=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cmd_args=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stdin=&lt;_io.TextIOWrapper</span> <span class="pre">name='&lt;stdin&gt;'</span> <span class="pre">mode='r'</span> <span class="pre">encoding='utf-8'&gt;</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#WorkConsolidationScript"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.scripts.WorkConsolidationScript" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.scripts.WorkProcessingScript" title="core.scripts.WorkProcessingScript"><code class="xref py py-class docutils literal notranslate"><span class="pre">WorkProcessingScript</span></code></a></p>
<p>Given an Identifier, make sure all the LicensePools for that
Identifier are in Works that follow these rules:</p>
<p>a) For a given permanent work ID, there may be at most one Work
containing open-access LicensePools.</p>
<ol class="loweralpha simple" start="2">
<li><p>Each non-open-access LicensePool has its own individual Work.</p></li>
</ol>
<dl class="py method">
<dt class="sig sig-object py" id="core.scripts.WorkConsolidationScript.do_run">
<span class="sig-name descname"><span class="pre">do_run</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#WorkConsolidationScript.do_run"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.scripts.WorkConsolidationScript.do_run" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.scripts.WorkConsolidationScript.make_query">
<span class="sig-name descname"><span class="pre">make_query</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">identifier_type</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">identifiers</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data_source</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">log</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#WorkConsolidationScript.make_query"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.scripts.WorkConsolidationScript.make_query" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.scripts.WorkConsolidationScript.name">
<span class="sig-name descname"><span class="pre">name</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'Work</span> <span class="pre">consolidation</span> <span class="pre">script'</span></em><a class="headerlink" href="#core.scripts.WorkConsolidationScript.name" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.scripts.WorkConsolidationScript.process_work">
<span class="sig-name descname"><span class="pre">process_work</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">work</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#WorkConsolidationScript.process_work"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.scripts.WorkConsolidationScript.process_work" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.scripts.WorkOPDSScript">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.scripts.</span></span><span class="sig-name descname"><span class="pre">WorkOPDSScript</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#WorkOPDSScript"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.scripts.WorkOPDSScript" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.scripts.WorkPresentationScript" title="core.scripts.WorkPresentationScript"><code class="xref py py-class docutils literal notranslate"><span class="pre">WorkPresentationScript</span></code></a></p>
<p>Recalculate the OPDS entries, MARC record, and search index entries
for Work objects.</p>
<p>This is intended to verify that a problem has already been resolved and just
needs to be propagated to these three ‘caches’.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="core.scripts.WorkOPDSScript.name">
<span class="sig-name descname"><span class="pre">name</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'Recalculate</span> <span class="pre">OPDS</span> <span class="pre">entries,</span> <span class="pre">MARC</span> <span class="pre">record,</span> <span class="pre">and</span> <span class="pre">search</span> <span class="pre">index</span> <span class="pre">entries</span> <span class="pre">for</span> <span class="pre">works</span> <span class="pre">that</span> <span class="pre">need</span> <span class="pre">it.'</span></em><a class="headerlink" href="#core.scripts.WorkOPDSScript.name" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.scripts.WorkOPDSScript.policy">
<span class="sig-name descname"><span class="pre">policy</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">&lt;core.model.PresentationCalculationPolicy</span> <span class="pre">object&gt;</span></em><a class="headerlink" href="#core.scripts.WorkOPDSScript.policy" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.scripts.WorkPresentationScript">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.scripts.</span></span><span class="sig-name descname"><span class="pre">WorkPresentationScript</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#WorkPresentationScript"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.scripts.WorkPresentationScript" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.scripts.TimestampScript" title="core.scripts.TimestampScript"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimestampScript</span></code></a>, <a class="reference internal" href="#core.scripts.WorkProcessingScript" title="core.scripts.WorkProcessingScript"><code class="xref py py-class docutils literal notranslate"><span class="pre">WorkProcessingScript</span></code></a></p>
<p>Calculate the presentation for Work objects.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="core.scripts.WorkPresentationScript.name">
<span class="sig-name descname"><span class="pre">name</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'Recalculate</span> <span class="pre">the</span> <span class="pre">presentation</span> <span class="pre">for</span> <span class="pre">works</span> <span class="pre">that</span> <span class="pre">need</span> <span class="pre">it.'</span></em><a class="headerlink" href="#core.scripts.WorkPresentationScript.name" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.scripts.WorkPresentationScript.policy">
<span class="sig-name descname"><span class="pre">policy</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">&lt;core.model.PresentationCalculationPolicy</span> <span class="pre">object&gt;</span></em><a class="headerlink" href="#core.scripts.WorkPresentationScript.policy" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.scripts.WorkPresentationScript.process_work">
<span class="sig-name descname"><span class="pre">process_work</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">work</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#WorkPresentationScript.process_work"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.scripts.WorkPresentationScript.process_work" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.scripts.WorkProcessingScript">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.scripts.</span></span><span class="sig-name descname"><span class="pre">WorkProcessingScript</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">force=False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">batch_size=10</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_db=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cmd_args=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stdin=&lt;_io.TextIOWrapper</span> <span class="pre">name='&lt;stdin&gt;'</span> <span class="pre">mode='r'</span> <span class="pre">encoding='utf-8'&gt;</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#WorkProcessingScript"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.scripts.WorkProcessingScript" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.scripts.IdentifierInputScript" title="core.scripts.IdentifierInputScript"><code class="xref py py-class docutils literal notranslate"><span class="pre">IdentifierInputScript</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="core.scripts.WorkProcessingScript.do_run">
<span class="sig-name descname"><span class="pre">do_run</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#WorkProcessingScript.do_run"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.scripts.WorkProcessingScript.do_run" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.scripts.WorkProcessingScript.make_query">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">make_query</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">identifier_type</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">identifiers</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data_source</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">log</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#WorkProcessingScript.make_query"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.scripts.WorkProcessingScript.make_query" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.scripts.WorkProcessingScript.name">
<span class="sig-name descname"><span class="pre">name</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'Work</span> <span class="pre">processing</span> <span class="pre">script'</span></em><a class="headerlink" href="#core.scripts.WorkProcessingScript.name" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.scripts.WorkProcessingScript.process_work">
<span class="sig-name descname"><span class="pre">process_work</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">work</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#WorkProcessingScript.process_work"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.scripts.WorkProcessingScript.process_work" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</section>
<section id="module-core.selftest">
<span id="core-selftest-module"></span><h2>core.selftest module<a class="headerlink" href="#module-core.selftest" title="Permalink to this heading">¶</a></h2>
<p>Define the interfaces used by ExternalIntegration self-tests.</p>
<dl class="py class">
<dt class="sig sig-object py" id="core.selftest.HasSelfTests">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.selftest.</span></span><span class="sig-name descname"><span class="pre">HasSelfTests</span></span><a class="reference internal" href="_modules/core/selftest.html#HasSelfTests"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.selftest.HasSelfTests" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>An object capable of verifying its own setup by running a
series of self-tests.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="core.selftest.HasSelfTests.SELF_TEST_RESULTS_SETTING">
<span class="sig-name descname"><span class="pre">SELF_TEST_RESULTS_SETTING</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'self_test_results'</span></em><a class="headerlink" href="#core.selftest.HasSelfTests.SELF_TEST_RESULTS_SETTING" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.selftest.HasSelfTests.external_integration">
<span class="sig-name descname"><span class="pre">external_integration</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/selftest.html#HasSelfTests.external_integration"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.selftest.HasSelfTests.external_integration" title="Permalink to this definition">¶</a></dt>
<dd><p>Locate the ExternalIntegration associated with this object.
The status of the self-tests will be stored as a ConfigurationSetting
on this ExternalIntegration.</p>
<p>By default, there is no way to get from an object to its
ExternalIntegration, and self-test status will not be stored.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.selftest.HasSelfTests.prior_test_results">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">prior_test_results</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">constructor_method</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/selftest.html#HasSelfTests.prior_test_results"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.selftest.HasSelfTests.prior_test_results" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve the last set of test results from the database.</p>
<p>The arguments here are the same as the arguments to run_self_tests.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.selftest.HasSelfTests.run_self_tests">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">run_self_tests</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">constructor_method</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/selftest.html#HasSelfTests.run_self_tests"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.selftest.HasSelfTests.run_self_tests" title="Permalink to this definition">¶</a></dt>
<dd><p>Instantiate this class and call _run_self_tests on it.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>_db</strong> – A database connection. Will be passed into <cite>_run_self_tests</cite>.
This connection may need to be used again
in args, if the constructor needs it.</p></li>
<li><p><strong>constructor_method</strong> – Method to use to instantiate the
class, if different from the default constructor.</p></li>
<li><p><strong>args</strong> – Positional arguments to pass into the constructor.</p></li>
<li><p><strong>kwargs</strong> – Keyword arguments to pass into the constructor.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A 2-tuple (results_dict, results_list) <cite>results_dict</cite>
is a JSON-serializable dictionary describing the results of
the self-test. <cite>results_list</cite> is a list of SelfTestResult
objects.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.selftest.HasSelfTests.run_test">
<span class="sig-name descname"><span class="pre">run_test</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">method</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/selftest.html#HasSelfTests.run_test"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.selftest.HasSelfTests.run_test" title="Permalink to this definition">¶</a></dt>
<dd><p>Run a test method, record any exception that happens, and keep
track of how long the test takes to run.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> – The name of the test to be run.</p></li>
<li><p><strong>method</strong> – A method to call to run the test.</p></li>
<li><p><strong>args</strong> – Positional arguments to <cite>method</cite>.</p></li>
<li><p><strong>kwargs</strong> – Keyword arguments to <cite>method</cite>.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A filled-in SelfTestResult.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.selftest.HasSelfTests.test_failure">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">test_failure</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">message</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">debug_message</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/selftest.html#HasSelfTests.test_failure"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.selftest.HasSelfTests.test_failure" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a SelfTestResult for a known failure.</p>
<p>This is useful when you can’t even get the data necessary to
run a test method.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.selftest.SelfTestResult">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.selftest.</span></span><span class="sig-name descname"><span class="pre">SelfTestResult</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/selftest.html#SelfTestResult"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.selftest.SelfTestResult" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>The result of running a single self-test.</p>
<p>HasSelfTest.run_self_tests() returns a list of these</p>
<dl class="py property">
<dt class="sig sig-object py" id="core.selftest.SelfTestResult.debug_message">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">debug_message</span></span><a class="headerlink" href="#core.selftest.SelfTestResult.debug_message" title="Permalink to this definition">¶</a></dt>
<dd><p>The debug message associated with the Exception, if any.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="core.selftest.SelfTestResult.duration">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">duration</span></span><a class="headerlink" href="#core.selftest.SelfTestResult.duration" title="Permalink to this definition">¶</a></dt>
<dd><p>How long the test took to run.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="core.selftest.SelfTestResult.to_dict">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">to_dict</span></span><a class="headerlink" href="#core.selftest.SelfTestResult.to_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert this SelfTestResult to a dictionary for use in
JSON serialization.</p>
</dd></dl>

</dd></dl>

</section>
<section id="module-core.testing">
<span id="core-testing-module"></span><h2>core.testing module<a class="headerlink" href="#module-core.testing" title="Permalink to this heading">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="core.testing.AlwaysSuccessfulBibliographicCoverageProvider">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.testing.</span></span><span class="sig-name descname"><span class="pre">AlwaysSuccessfulBibliographicCoverageProvider</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">collection</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/testing.html#AlwaysSuccessfulBibliographicCoverageProvider"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.testing.AlwaysSuccessfulBibliographicCoverageProvider" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.testing.MockCoverageProvider" title="core.testing.MockCoverageProvider"><code class="xref py py-class docutils literal notranslate"><span class="pre">MockCoverageProvider</span></code></a>, <a class="reference internal" href="#core.coverage.BibliographicCoverageProvider" title="core.coverage.BibliographicCoverageProvider"><code class="xref py py-class docutils literal notranslate"><span class="pre">BibliographicCoverageProvider</span></code></a></p>
<p>A BibliographicCoverageProvider that does nothing and is always
successful.</p>
<p>Note that this only works if you’ve put a working Edition and
LicensePool in place beforehand. Otherwise the process will fail
during handle_success().</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="core.testing.AlwaysSuccessfulBibliographicCoverageProvider.SERVICE_NAME">
<span class="sig-name descname"><span class="pre">SERVICE_NAME</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'Always</span> <span class="pre">successful</span> <span class="pre">(bibliographic)'</span></em><a class="headerlink" href="#core.testing.AlwaysSuccessfulBibliographicCoverageProvider.SERVICE_NAME" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.testing.AlwaysSuccessfulBibliographicCoverageProvider.process_item">
<span class="sig-name descname"><span class="pre">process_item</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">identifier</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/testing.html#AlwaysSuccessfulBibliographicCoverageProvider.process_item"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.testing.AlwaysSuccessfulBibliographicCoverageProvider.process_item" title="Permalink to this definition">¶</a></dt>
<dd><p>Do the work necessary to give coverage to one specific item.</p>
<p>Since this is where the actual work happens, this is not
implemented in IdentifierCoverageProvider or
WorkCoverageProvider, and must be handled in a subclass.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.testing.AlwaysSuccessfulCollectionCoverageProvider">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.testing.</span></span><span class="sig-name descname"><span class="pre">AlwaysSuccessfulCollectionCoverageProvider</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">collection</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/testing.html#AlwaysSuccessfulCollectionCoverageProvider"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.testing.AlwaysSuccessfulCollectionCoverageProvider" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.testing.MockCoverageProvider" title="core.testing.MockCoverageProvider"><code class="xref py py-class docutils literal notranslate"><span class="pre">MockCoverageProvider</span></code></a>, <a class="reference internal" href="#core.coverage.CollectionCoverageProvider" title="core.coverage.CollectionCoverageProvider"><code class="xref py py-class docutils literal notranslate"><span class="pre">CollectionCoverageProvider</span></code></a></p>
<p>A CollectionCoverageProvider that does nothing and always succeeds.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="core.testing.AlwaysSuccessfulCollectionCoverageProvider.SERVICE_NAME">
<span class="sig-name descname"><span class="pre">SERVICE_NAME</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'Always</span> <span class="pre">successful</span> <span class="pre">(collection)'</span></em><a class="headerlink" href="#core.testing.AlwaysSuccessfulCollectionCoverageProvider.SERVICE_NAME" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.testing.AlwaysSuccessfulCollectionCoverageProvider.process_item">
<span class="sig-name descname"><span class="pre">process_item</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">item</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/testing.html#AlwaysSuccessfulCollectionCoverageProvider.process_item"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.testing.AlwaysSuccessfulCollectionCoverageProvider.process_item" title="Permalink to this definition">¶</a></dt>
<dd><p>Do the work necessary to give coverage to one specific item.</p>
<p>Since this is where the actual work happens, this is not
implemented in IdentifierCoverageProvider or
WorkCoverageProvider, and must be handled in a subclass.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.testing.AlwaysSuccessfulCoverageProvider">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.testing.</span></span><span class="sig-name descname"><span class="pre">AlwaysSuccessfulCoverageProvider</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/testing.html#AlwaysSuccessfulCoverageProvider"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.testing.AlwaysSuccessfulCoverageProvider" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.testing.InstrumentedCoverageProvider" title="core.testing.InstrumentedCoverageProvider"><code class="xref py py-class docutils literal notranslate"><span class="pre">InstrumentedCoverageProvider</span></code></a></p>
<p>A CoverageProvider that does nothing and always succeeds.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="core.testing.AlwaysSuccessfulCoverageProvider.SERVICE_NAME">
<span class="sig-name descname"><span class="pre">SERVICE_NAME</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'Always</span> <span class="pre">successful'</span></em><a class="headerlink" href="#core.testing.AlwaysSuccessfulCoverageProvider.SERVICE_NAME" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.testing.AlwaysSuccessfulWorkCoverageProvider">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.testing.</span></span><span class="sig-name descname"><span class="pre">AlwaysSuccessfulWorkCoverageProvider</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/testing.html#AlwaysSuccessfulWorkCoverageProvider"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.testing.AlwaysSuccessfulWorkCoverageProvider" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.testing.InstrumentedWorkCoverageProvider" title="core.testing.InstrumentedWorkCoverageProvider"><code class="xref py py-class docutils literal notranslate"><span class="pre">InstrumentedWorkCoverageProvider</span></code></a></p>
<p>A WorkCoverageProvider that does nothing and always succeeds.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="core.testing.AlwaysSuccessfulWorkCoverageProvider.SERVICE_NAME">
<span class="sig-name descname"><span class="pre">SERVICE_NAME</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'Always</span> <span class="pre">successful</span> <span class="pre">(works)'</span></em><a class="headerlink" href="#core.testing.AlwaysSuccessfulWorkCoverageProvider.SERVICE_NAME" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.testing.BrokenBibliographicCoverageProvider">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.testing.</span></span><span class="sig-name descname"><span class="pre">BrokenBibliographicCoverageProvider</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/testing.html#BrokenBibliographicCoverageProvider"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.testing.BrokenBibliographicCoverageProvider" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.testing.BrokenCoverageProvider" title="core.testing.BrokenCoverageProvider"><code class="xref py py-class docutils literal notranslate"><span class="pre">BrokenCoverageProvider</span></code></a>, <a class="reference internal" href="#core.coverage.BibliographicCoverageProvider" title="core.coverage.BibliographicCoverageProvider"><code class="xref py py-class docutils literal notranslate"><span class="pre">BibliographicCoverageProvider</span></code></a></p>
<dl class="py attribute">
<dt class="sig sig-object py" id="core.testing.BrokenBibliographicCoverageProvider.SERVICE_NAME">
<span class="sig-name descname"><span class="pre">SERVICE_NAME</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'Broken</span> <span class="pre">(bibliographic)'</span></em><a class="headerlink" href="#core.testing.BrokenBibliographicCoverageProvider.SERVICE_NAME" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.testing.BrokenCoverageProvider">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.testing.</span></span><span class="sig-name descname"><span class="pre">BrokenCoverageProvider</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/testing.html#BrokenCoverageProvider"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.testing.BrokenCoverageProvider" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.testing.InstrumentedCoverageProvider" title="core.testing.InstrumentedCoverageProvider"><code class="xref py py-class docutils literal notranslate"><span class="pre">InstrumentedCoverageProvider</span></code></a></p>
<dl class="py attribute">
<dt class="sig sig-object py" id="core.testing.BrokenCoverageProvider.SERVICE_NAME">
<span class="sig-name descname"><span class="pre">SERVICE_NAME</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'Broken'</span></em><a class="headerlink" href="#core.testing.BrokenCoverageProvider.SERVICE_NAME" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.testing.BrokenCoverageProvider.process_item">
<span class="sig-name descname"><span class="pre">process_item</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">item</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/testing.html#BrokenCoverageProvider.process_item"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.testing.BrokenCoverageProvider.process_item" title="Permalink to this definition">¶</a></dt>
<dd><p>Do the work necessary to give coverage to one specific item.</p>
<p>Since this is where the actual work happens, this is not
implemented in IdentifierCoverageProvider or
WorkCoverageProvider, and must be handled in a subclass.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.testing.DatabaseTest">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.testing.</span></span><span class="sig-name descname"><span class="pre">DatabaseTest</span></span><a class="reference internal" href="_modules/core/testing.html#DatabaseTest"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.testing.DatabaseTest" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<dl class="py attribute">
<dt class="sig sig-object py" id="core.testing.DatabaseTest.connection">
<span class="sig-name descname"><span class="pre">connection</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#core.testing.DatabaseTest.connection" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.testing.DatabaseTest.engine">
<span class="sig-name descname"><span class="pre">engine</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#core.testing.DatabaseTest.engine" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.testing.DatabaseTest.get_database_connection">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">get_database_connection</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/testing.html#DatabaseTest.get_database_connection"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.testing.DatabaseTest.get_database_connection" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.testing.DatabaseTest.make_default_library">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">make_default_library</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/testing.html#DatabaseTest.make_default_library"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.testing.DatabaseTest.make_default_library" title="Permalink to this definition">¶</a></dt>
<dd><p>Ensure that the default library exists in the given database.</p>
<p>This can be called by code intended for use in testing but not actually
within a DatabaseTest subclass.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.testing.DatabaseTest.print_database_class">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">print_database_class</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">db_connection</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/testing.html#DatabaseTest.print_database_class"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.testing.DatabaseTest.print_database_class" title="Permalink to this definition">¶</a></dt>
<dd><p>Prints to the console the entire contents of the database, as the unit test sees it.
Exists because unit tests don’t persist db information, they create a memory
representation of the db state, and then roll the unit test-derived transactions back.
So we cannot see what’s going on by going into postgres and running selects.
This is the in-test alternative to going into postgres.</p>
<p>Can be called from model and metadata classes as well as tests.</p>
<p>NOTE: The purpose of this method is for debugging.
Be careful of leaving it in code and potentially outputting
vast tracts of data into your output stream on production.</p>
<p>Call like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">set_trace</span><span class="p">()</span>
<span class="kn">from</span> <span class="nn">testing</span> <span class="kn">import</span> <span class="p">(</span><span class="n">l</span><span class="o">=</span>
    <span class="n">DatabaseTest</span><span class="p">,</span>
<span class="p">)</span>
<span class="n">_db</span> <span class="o">=</span> <span class="n">Session</span><span class="o">.</span><span class="n">object_session</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
<span class="n">DatabaseTest</span><span class="o">.</span><span class="n">print_database_class</span><span class="p">(</span><span class="n">_db</span><span class="p">)</span>

<span class="n">TODO</span><span class="p">:</span> <span class="n">remove</span> <span class="n">before</span> <span class="n">prod</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.testing.DatabaseTest.print_database_instance">
<span class="sig-name descname"><span class="pre">print_database_instance</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/testing.html#DatabaseTest.print_database_instance"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.testing.DatabaseTest.print_database_instance" title="Permalink to this definition">¶</a></dt>
<dd><p>Calls the class method that examines the current state of the database model
(whether it’s been committed or not).</p>
<p>NOTE: If you set_trace, and hit “continue”, you’ll start seeing console output right
away, without waiting for the whole test to run and the standard output section to display.
You can also use nosetest –nocapture.</p>
<p>I use:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">test_name</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="p">[</span><span class="n">code</span><span class="o">...</span><span class="p">]</span>
    <span class="n">set_trace</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">print_database_instance</span><span class="p">()</span>  <span class="c1"># TODO: remove before prod</span>
    <span class="p">[</span><span class="n">code</span><span class="o">...</span><span class="p">]</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.testing.DatabaseTest.sample_cover_path">
<span class="sig-name descname"><span class="pre">sample_cover_path</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/testing.html#DatabaseTest.sample_cover_path"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.testing.DatabaseTest.sample_cover_path" title="Permalink to this definition">¶</a></dt>
<dd><p>The path to the sample cover with the given filename.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.testing.DatabaseTest.sample_cover_representation">
<span class="sig-name descname"><span class="pre">sample_cover_representation</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/testing.html#DatabaseTest.sample_cover_representation"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.testing.DatabaseTest.sample_cover_representation" title="Permalink to this definition">¶</a></dt>
<dd><p>A Representation of the sample cover with the given filename.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.testing.DatabaseTest.search_mock">
<span class="sig-name descname"><span class="pre">search_mock</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">request</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/testing.html#DatabaseTest.search_mock"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.testing.DatabaseTest.search_mock" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.testing.DatabaseTest.setup_class">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">setup_class</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/testing.html#DatabaseTest.setup_class"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.testing.DatabaseTest.setup_class" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.testing.DatabaseTest.setup_method">
<span class="sig-name descname"><span class="pre">setup_method</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/testing.html#DatabaseTest.setup_method"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.testing.DatabaseTest.setup_method" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.testing.DatabaseTest.shortDescription">
<span class="sig-name descname"><span class="pre">shortDescription</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/testing.html#DatabaseTest.shortDescription"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.testing.DatabaseTest.shortDescription" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.testing.DatabaseTest.teardown_class">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">teardown_class</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/testing.html#DatabaseTest.teardown_class"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.testing.DatabaseTest.teardown_class" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.testing.DatabaseTest.teardown_method">
<span class="sig-name descname"><span class="pre">teardown_method</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/testing.html#DatabaseTest.teardown_method"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.testing.DatabaseTest.teardown_method" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.testing.DatabaseTest.time_eq">
<span class="sig-name descname"><span class="pre">time_eq</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">a</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">b</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/testing.html#DatabaseTest.time_eq"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.testing.DatabaseTest.time_eq" title="Permalink to this definition">¶</a></dt>
<dd><p>Assert that two times are <em>approximately</em> the same – within 2 seconds.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.testing.DummyCanonicalizeLookupResponse">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.testing.</span></span><span class="sig-name descname"><span class="pre">DummyCanonicalizeLookupResponse</span></span><a class="reference internal" href="_modules/core/testing.html#DummyCanonicalizeLookupResponse"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.testing.DummyCanonicalizeLookupResponse" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<dl class="py method">
<dt class="sig sig-object py" id="core.testing.DummyCanonicalizeLookupResponse.failure">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">failure</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/testing.html#DummyCanonicalizeLookupResponse.failure"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.testing.DummyCanonicalizeLookupResponse.failure" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.testing.DummyCanonicalizeLookupResponse.success">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">success</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">result</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/testing.html#DummyCanonicalizeLookupResponse.success"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.testing.DummyCanonicalizeLookupResponse.success" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.testing.DummyHTTPClient">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.testing.</span></span><span class="sig-name descname"><span class="pre">DummyHTTPClient</span></span><a class="reference internal" href="_modules/core/testing.html#DummyHTTPClient"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.testing.DummyHTTPClient" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<dl class="py method">
<dt class="sig sig-object py" id="core.testing.DummyHTTPClient.do_get">
<span class="sig-name descname"><span class="pre">do_get</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">url</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/testing.html#DummyHTTPClient.do_get"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.testing.DummyHTTPClient.do_get" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.testing.DummyHTTPClient.do_post">
<span class="sig-name descname"><span class="pre">do_post</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">url</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">wargs</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/testing.html#DummyHTTPClient.do_post"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.testing.DummyHTTPClient.do_post" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.testing.DummyHTTPClient.queue_requests_response">
<span class="sig-name descname"><span class="pre">queue_requests_response</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">response_code</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">media_type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'text/html'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">other_headers</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">content</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/testing.html#DummyHTTPClient.queue_requests_response"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.testing.DummyHTTPClient.queue_requests_response" title="Permalink to this definition">¶</a></dt>
<dd><p>Queue a response of the type produced by HTTP.get_with_timeout.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.testing.DummyHTTPClient.queue_response">
<span class="sig-name descname"><span class="pre">queue_response</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">response_code</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">media_type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'text/html'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">other_headers</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">content</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/testing.html#DummyHTTPClient.queue_response"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.testing.DummyHTTPClient.queue_response" title="Permalink to this definition">¶</a></dt>
<dd><p>Queue a response of the type produced by
Representation.simple_http_get.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.testing.DummyMetadataClient">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.testing.</span></span><span class="sig-name descname"><span class="pre">DummyMetadataClient</span></span><a class="reference internal" href="_modules/core/testing.html#DummyMetadataClient"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.testing.DummyMetadataClient" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<dl class="py method">
<dt class="sig sig-object py" id="core.testing.DummyMetadataClient.canonicalize_author_name">
<span class="sig-name descname"><span class="pre">canonicalize_author_name</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">primary_identifier</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">display_author</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/testing.html#DummyMetadataClient.canonicalize_author_name"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.testing.DummyMetadataClient.canonicalize_author_name" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.testing.EndToEndSearchTest">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.testing.</span></span><span class="sig-name descname"><span class="pre">EndToEndSearchTest</span></span><a class="reference internal" href="_modules/core/testing.html#EndToEndSearchTest"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.testing.EndToEndSearchTest" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.testing.ExternalSearchTest" title="core.testing.ExternalSearchTest"><code class="xref py py-class docutils literal notranslate"><span class="pre">ExternalSearchTest</span></code></a></p>
<p>Subclasses of this class set up real works in a real
search index and run searches against it.</p>
<dl class="py method">
<dt class="sig sig-object py" id="core.testing.EndToEndSearchTest.populate_works">
<span class="sig-name descname"><span class="pre">populate_works</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/testing.html#EndToEndSearchTest.populate_works"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.testing.EndToEndSearchTest.populate_works" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.testing.EndToEndSearchTest.setup_method">
<span class="sig-name descname"><span class="pre">setup_method</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/testing.html#EndToEndSearchTest.setup_method"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.testing.EndToEndSearchTest.setup_method" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.testing.ExternalSearchTest">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.testing.</span></span><span class="sig-name descname"><span class="pre">ExternalSearchTest</span></span><a class="reference internal" href="_modules/core/testing.html#ExternalSearchTest"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.testing.ExternalSearchTest" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.testing.DatabaseTest" title="core.testing.DatabaseTest"><code class="xref py py-class docutils literal notranslate"><span class="pre">DatabaseTest</span></code></a></p>
<p>These tests require elasticsearch to be running locally. If it’s not, or there’s
an error creating the index, the tests will pass without doing anything.</p>
<p>Tests for elasticsearch are useful for ensuring that we haven’t accidentally broken
a type of search by changing analyzers or queries, but search needs to be tested manually
to ensure that it works well overall, with a realistic index.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="core.testing.ExternalSearchTest.SIMPLIFIED_TEST_ELASTICSEARCH">
<span class="sig-name descname"><span class="pre">SIMPLIFIED_TEST_ELASTICSEARCH</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'http://localhost:9200'</span></em><a class="headerlink" href="#core.testing.ExternalSearchTest.SIMPLIFIED_TEST_ELASTICSEARCH" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.testing.ExternalSearchTest.default_work">
<span class="sig-name descname"><span class="pre">default_work</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/testing.html#ExternalSearchTest.default_work"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.testing.ExternalSearchTest.default_work" title="Permalink to this definition">¶</a></dt>
<dd><p>Convenience method to create a work with a license pool
in the default collection.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.testing.ExternalSearchTest.pytestmark">
<span class="sig-name descname"><span class="pre">pytestmark</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">[Mark(name='elasticsearch',</span> <span class="pre">args=(),</span> <span class="pre">kwargs={})]</span></em><a class="headerlink" href="#core.testing.ExternalSearchTest.pytestmark" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.testing.ExternalSearchTest.setup_index">
<span class="sig-name descname"><span class="pre">setup_index</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">new_index</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/testing.html#ExternalSearchTest.setup_index"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.testing.ExternalSearchTest.setup_index" title="Permalink to this definition">¶</a></dt>
<dd><p>Create an index and register it to be destroyed during teardown.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.testing.ExternalSearchTest.setup_method">
<span class="sig-name descname"><span class="pre">setup_method</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/testing.html#ExternalSearchTest.setup_method"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.testing.ExternalSearchTest.setup_method" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.testing.ExternalSearchTest.teardown_method">
<span class="sig-name descname"><span class="pre">teardown_method</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/testing.html#ExternalSearchTest.teardown_method"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.testing.ExternalSearchTest.teardown_method" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.testing.InstrumentedCoverageProvider">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.testing.</span></span><span class="sig-name descname"><span class="pre">InstrumentedCoverageProvider</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/testing.html#InstrumentedCoverageProvider"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.testing.InstrumentedCoverageProvider" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.testing.MockCoverageProvider" title="core.testing.MockCoverageProvider"><code class="xref py py-class docutils literal notranslate"><span class="pre">MockCoverageProvider</span></code></a>, <a class="reference internal" href="#core.coverage.IdentifierCoverageProvider" title="core.coverage.IdentifierCoverageProvider"><code class="xref py py-class docutils literal notranslate"><span class="pre">IdentifierCoverageProvider</span></code></a></p>
<p>A CoverageProvider that keeps track of every item it tried
to cover.</p>
<dl class="py method">
<dt class="sig sig-object py" id="core.testing.InstrumentedCoverageProvider.process_item">
<span class="sig-name descname"><span class="pre">process_item</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">item</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/testing.html#InstrumentedCoverageProvider.process_item"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.testing.InstrumentedCoverageProvider.process_item" title="Permalink to this definition">¶</a></dt>
<dd><p>Do the work necessary to give coverage to one specific item.</p>
<p>Since this is where the actual work happens, this is not
implemented in IdentifierCoverageProvider or
WorkCoverageProvider, and must be handled in a subclass.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.testing.InstrumentedWorkCoverageProvider">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.testing.</span></span><span class="sig-name descname"><span class="pre">InstrumentedWorkCoverageProvider</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/testing.html#InstrumentedWorkCoverageProvider"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.testing.InstrumentedWorkCoverageProvider" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.testing.MockCoverageProvider" title="core.testing.MockCoverageProvider"><code class="xref py py-class docutils literal notranslate"><span class="pre">MockCoverageProvider</span></code></a>, <a class="reference internal" href="#core.coverage.WorkCoverageProvider" title="core.coverage.WorkCoverageProvider"><code class="xref py py-class docutils literal notranslate"><span class="pre">WorkCoverageProvider</span></code></a></p>
<p>A WorkCoverageProvider that keeps track of every item it tried
to cover.</p>
<dl class="py method">
<dt class="sig sig-object py" id="core.testing.InstrumentedWorkCoverageProvider.process_item">
<span class="sig-name descname"><span class="pre">process_item</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">item</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/testing.html#InstrumentedWorkCoverageProvider.process_item"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.testing.InstrumentedWorkCoverageProvider.process_item" title="Permalink to this definition">¶</a></dt>
<dd><p>Do the work necessary to give coverage to one specific item.</p>
<p>Since this is where the actual work happens, this is not
implemented in IdentifierCoverageProvider or
WorkCoverageProvider, and must be handled in a subclass.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.testing.LogCaptureHandler">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.testing.</span></span><span class="sig-name descname"><span class="pre">LogCaptureHandler</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">logger</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/testing.html#LogCaptureHandler"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.testing.LogCaptureHandler" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">Handler</span></code></p>
<p>A <cite>logging.Handler</cite> context manager that captures the messages
of emitted log records in the context of the specified <cite>logger</cite>.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="core.testing.LogCaptureHandler.LEVEL_NAMES">
<span class="sig-name descname"><span class="pre">LEVEL_NAMES</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">['critical',</span> <span class="pre">'error',</span> <span class="pre">'warning',</span> <span class="pre">'info',</span> <span class="pre">'debug',</span> <span class="pre">'notset']</span></em><a class="headerlink" href="#core.testing.LogCaptureHandler.LEVEL_NAMES" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.testing.LogCaptureHandler.emit">
<span class="sig-name descname"><span class="pre">emit</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">record</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/testing.html#LogCaptureHandler.emit"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.testing.LogCaptureHandler.emit" title="Permalink to this definition">¶</a></dt>
<dd><p>Do whatever it takes to actually log the specified logging record.</p>
<p>This version is intended to be implemented by subclasses and so
raises a NotImplementedError.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.testing.LogCaptureHandler.reset">
<span class="sig-name descname"><span class="pre">reset</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/testing.html#LogCaptureHandler.reset"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.testing.LogCaptureHandler.reset" title="Permalink to this definition">¶</a></dt>
<dd><p>Empty the message accumulators.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.testing.MockCoverageProvider">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.testing.</span></span><span class="sig-name descname"><span class="pre">MockCoverageProvider</span></span><a class="reference internal" href="_modules/core/testing.html#MockCoverageProvider"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.testing.MockCoverageProvider" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Mixin class for mock CoverageProviders that defines common constants.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="core.testing.MockCoverageProvider.DATA_SOURCE_NAME">
<span class="sig-name descname"><span class="pre">DATA_SOURCE_NAME</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'Gutenberg'</span></em><a class="headerlink" href="#core.testing.MockCoverageProvider.DATA_SOURCE_NAME" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.testing.MockCoverageProvider.INPUT_IDENTIFIER_TYPES">
<span class="sig-name descname"><span class="pre">INPUT_IDENTIFIER_TYPES</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#core.testing.MockCoverageProvider.INPUT_IDENTIFIER_TYPES" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.testing.MockCoverageProvider.PROTOCOL">
<span class="sig-name descname"><span class="pre">PROTOCOL</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'OPDS</span> <span class="pre">Import'</span></em><a class="headerlink" href="#core.testing.MockCoverageProvider.PROTOCOL" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.testing.MockCoverageProvider.SERVICE_NAME">
<span class="sig-name descname"><span class="pre">SERVICE_NAME</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'Generic</span> <span class="pre">mock</span> <span class="pre">CoverageProvider'</span></em><a class="headerlink" href="#core.testing.MockCoverageProvider.SERVICE_NAME" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.testing.MockRequestsRequest">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.testing.</span></span><span class="sig-name descname"><span class="pre">MockRequestsRequest</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">url</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">method</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'GET'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">headers</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/testing.html#MockRequestsRequest"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.testing.MockRequestsRequest" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>A mock object that simulates an HTTP request from the
<cite>requests</cite> library.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.testing.MockRequestsResponse">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.testing.</span></span><span class="sig-name descname"><span class="pre">MockRequestsResponse</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">status_code</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">headers</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">{}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">content</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">url</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">request</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/testing.html#MockRequestsResponse"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.testing.MockRequestsResponse" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>A mock object that simulates an HTTP response from the
<cite>requests</cite> library.</p>
<dl class="py method">
<dt class="sig sig-object py" id="core.testing.MockRequestsResponse.json">
<span class="sig-name descname"><span class="pre">json</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/testing.html#MockRequestsResponse.json"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.testing.MockRequestsResponse.json" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.testing.MockRequestsResponse.raise_for_status">
<span class="sig-name descname"><span class="pre">raise_for_status</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/testing.html#MockRequestsResponse.raise_for_status"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.testing.MockRequestsResponse.raise_for_status" title="Permalink to this definition">¶</a></dt>
<dd><p>Null implementation of raise_for_status, a method
implemented by real requests Response objects.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="core.testing.MockRequestsResponse.text">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">text</span></span><a class="headerlink" href="#core.testing.MockRequestsResponse.text" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.testing.NeverSuccessfulBibliographicCoverageProvider">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.testing.</span></span><span class="sig-name descname"><span class="pre">NeverSuccessfulBibliographicCoverageProvider</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">collection</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/testing.html#NeverSuccessfulBibliographicCoverageProvider"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.testing.NeverSuccessfulBibliographicCoverageProvider" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.testing.MockCoverageProvider" title="core.testing.MockCoverageProvider"><code class="xref py py-class docutils literal notranslate"><span class="pre">MockCoverageProvider</span></code></a>, <a class="reference internal" href="#core.coverage.BibliographicCoverageProvider" title="core.coverage.BibliographicCoverageProvider"><code class="xref py py-class docutils literal notranslate"><span class="pre">BibliographicCoverageProvider</span></code></a></p>
<p>Simulates a BibliographicCoverageProvider that’s never successful.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="core.testing.NeverSuccessfulBibliographicCoverageProvider.SERVICE_NAME">
<span class="sig-name descname"><span class="pre">SERVICE_NAME</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'Never</span> <span class="pre">successful</span> <span class="pre">(bibliographic)'</span></em><a class="headerlink" href="#core.testing.NeverSuccessfulBibliographicCoverageProvider.SERVICE_NAME" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.testing.NeverSuccessfulBibliographicCoverageProvider.process_item">
<span class="sig-name descname"><span class="pre">process_item</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">identifier</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/testing.html#NeverSuccessfulBibliographicCoverageProvider.process_item"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.testing.NeverSuccessfulBibliographicCoverageProvider.process_item" title="Permalink to this definition">¶</a></dt>
<dd><p>Do the work necessary to give coverage to one specific item.</p>
<p>Since this is where the actual work happens, this is not
implemented in IdentifierCoverageProvider or
WorkCoverageProvider, and must be handled in a subclass.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.testing.NeverSuccessfulCoverageProvider">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.testing.</span></span><span class="sig-name descname"><span class="pre">NeverSuccessfulCoverageProvider</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/testing.html#NeverSuccessfulCoverageProvider"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.testing.NeverSuccessfulCoverageProvider" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.testing.InstrumentedCoverageProvider" title="core.testing.InstrumentedCoverageProvider"><code class="xref py py-class docutils literal notranslate"><span class="pre">InstrumentedCoverageProvider</span></code></a></p>
<p>A CoverageProvider that does nothing and always fails.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="core.testing.NeverSuccessfulCoverageProvider.SERVICE_NAME">
<span class="sig-name descname"><span class="pre">SERVICE_NAME</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'Never</span> <span class="pre">successful'</span></em><a class="headerlink" href="#core.testing.NeverSuccessfulCoverageProvider.SERVICE_NAME" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.testing.NeverSuccessfulCoverageProvider.process_item">
<span class="sig-name descname"><span class="pre">process_item</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">item</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/testing.html#NeverSuccessfulCoverageProvider.process_item"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.testing.NeverSuccessfulCoverageProvider.process_item" title="Permalink to this definition">¶</a></dt>
<dd><p>Do the work necessary to give coverage to one specific item.</p>
<p>Since this is where the actual work happens, this is not
implemented in IdentifierCoverageProvider or
WorkCoverageProvider, and must be handled in a subclass.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.testing.NeverSuccessfulWorkCoverageProvider">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.testing.</span></span><span class="sig-name descname"><span class="pre">NeverSuccessfulWorkCoverageProvider</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/testing.html#NeverSuccessfulWorkCoverageProvider"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.testing.NeverSuccessfulWorkCoverageProvider" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.testing.InstrumentedWorkCoverageProvider" title="core.testing.InstrumentedWorkCoverageProvider"><code class="xref py py-class docutils literal notranslate"><span class="pre">InstrumentedWorkCoverageProvider</span></code></a></p>
<dl class="py attribute">
<dt class="sig sig-object py" id="core.testing.NeverSuccessfulWorkCoverageProvider.SERVICE_NAME">
<span class="sig-name descname"><span class="pre">SERVICE_NAME</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'Never</span> <span class="pre">successful</span> <span class="pre">(works)'</span></em><a class="headerlink" href="#core.testing.NeverSuccessfulWorkCoverageProvider.SERVICE_NAME" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.testing.NeverSuccessfulWorkCoverageProvider.process_item">
<span class="sig-name descname"><span class="pre">process_item</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">item</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/testing.html#NeverSuccessfulWorkCoverageProvider.process_item"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.testing.NeverSuccessfulWorkCoverageProvider.process_item" title="Permalink to this definition">¶</a></dt>
<dd><p>Do the work necessary to give coverage to one specific item.</p>
<p>Since this is where the actual work happens, this is not
implemented in IdentifierCoverageProvider or
WorkCoverageProvider, and must be handled in a subclass.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.testing.SearchClientForTesting">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.testing.</span></span><span class="sig-name descname"><span class="pre">SearchClientForTesting</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">url</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">works_index</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">test_search_term</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">in_testing</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mapping</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/testing.html#SearchClientForTesting"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.testing.SearchClientForTesting" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.external_search.ExternalSearchIndex" title="core.external_search.ExternalSearchIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">ExternalSearchIndex</span></code></a></p>
<p>When creating an index, limit it to a single shard and disable
replicas.</p>
<p>This makes search results more predictable.</p>
<dl class="py method">
<dt class="sig sig-object py" id="core.testing.SearchClientForTesting.setup_index">
<span class="sig-name descname"><span class="pre">setup_index</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">new_index</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/testing.html#SearchClientForTesting.setup_index"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.testing.SearchClientForTesting.setup_index" title="Permalink to this definition">¶</a></dt>
<dd><p>Create the search index with appropriate mapping.</p>
<p>This will destroy the search index, and all works will need
to be indexed again. In production, don’t use this on an
existing index. Use it to create a new index, then change the
alias to point to the new index.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.testing.TaskIgnoringCoverageProvider">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.testing.</span></span><span class="sig-name descname"><span class="pre">TaskIgnoringCoverageProvider</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/testing.html#TaskIgnoringCoverageProvider"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.testing.TaskIgnoringCoverageProvider" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.testing.InstrumentedCoverageProvider" title="core.testing.InstrumentedCoverageProvider"><code class="xref py py-class docutils literal notranslate"><span class="pre">InstrumentedCoverageProvider</span></code></a></p>
<p>A coverage provider that ignores all work given to it.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="core.testing.TaskIgnoringCoverageProvider.SERVICE_NAME">
<span class="sig-name descname"><span class="pre">SERVICE_NAME</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'I</span> <span class="pre">ignore</span> <span class="pre">all</span> <span class="pre">work.'</span></em><a class="headerlink" href="#core.testing.TaskIgnoringCoverageProvider.SERVICE_NAME" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.testing.TaskIgnoringCoverageProvider.process_batch">
<span class="sig-name descname"><span class="pre">process_batch</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">batch</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/testing.html#TaskIgnoringCoverageProvider.process_batch"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.testing.TaskIgnoringCoverageProvider.process_batch" title="Permalink to this definition">¶</a></dt>
<dd><p>Do what it takes to give coverage records to a batch of
items.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>A mixed list of coverage records and CoverageFailures.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.testing.TransientFailureCoverageProvider">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.testing.</span></span><span class="sig-name descname"><span class="pre">TransientFailureCoverageProvider</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/testing.html#TransientFailureCoverageProvider"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.testing.TransientFailureCoverageProvider" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.testing.InstrumentedCoverageProvider" title="core.testing.InstrumentedCoverageProvider"><code class="xref py py-class docutils literal notranslate"><span class="pre">InstrumentedCoverageProvider</span></code></a></p>
<dl class="py attribute">
<dt class="sig sig-object py" id="core.testing.TransientFailureCoverageProvider.SERVICE_NAME">
<span class="sig-name descname"><span class="pre">SERVICE_NAME</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'Never</span> <span class="pre">successful</span> <span class="pre">(transient)'</span></em><a class="headerlink" href="#core.testing.TransientFailureCoverageProvider.SERVICE_NAME" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.testing.TransientFailureCoverageProvider.process_item">
<span class="sig-name descname"><span class="pre">process_item</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">item</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/testing.html#TransientFailureCoverageProvider.process_item"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.testing.TransientFailureCoverageProvider.process_item" title="Permalink to this definition">¶</a></dt>
<dd><p>Do the work necessary to give coverage to one specific item.</p>
<p>Since this is where the actual work happens, this is not
implemented in IdentifierCoverageProvider or
WorkCoverageProvider, and must be handled in a subclass.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.testing.TransientFailureWorkCoverageProvider">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.testing.</span></span><span class="sig-name descname"><span class="pre">TransientFailureWorkCoverageProvider</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/testing.html#TransientFailureWorkCoverageProvider"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.testing.TransientFailureWorkCoverageProvider" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.testing.InstrumentedWorkCoverageProvider" title="core.testing.InstrumentedWorkCoverageProvider"><code class="xref py py-class docutils literal notranslate"><span class="pre">InstrumentedWorkCoverageProvider</span></code></a></p>
<dl class="py attribute">
<dt class="sig sig-object py" id="core.testing.TransientFailureWorkCoverageProvider.SERVICE_NAME">
<span class="sig-name descname"><span class="pre">SERVICE_NAME</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'Never</span> <span class="pre">successful</span> <span class="pre">(transient,</span> <span class="pre">works)'</span></em><a class="headerlink" href="#core.testing.TransientFailureWorkCoverageProvider.SERVICE_NAME" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.testing.TransientFailureWorkCoverageProvider.process_item">
<span class="sig-name descname"><span class="pre">process_item</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">item</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/testing.html#TransientFailureWorkCoverageProvider.process_item"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.testing.TransientFailureWorkCoverageProvider.process_item" title="Permalink to this definition">¶</a></dt>
<dd><p>Do the work necessary to give coverage to one specific item.</p>
<p>Since this is where the actual work happens, this is not
implemented in IdentifierCoverageProvider or
WorkCoverageProvider, and must be handled in a subclass.</p>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="core.testing.pytest_configure">
<span class="sig-prename descclassname"><span class="pre">core.testing.</span></span><span class="sig-name descname"><span class="pre">pytest_configure</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/testing.html#pytest_configure"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.testing.pytest_configure" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="core.testing.session_fixture">
<span class="sig-prename descclassname"><span class="pre">core.testing.</span></span><span class="sig-name descname"><span class="pre">session_fixture</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/testing.html#session_fixture"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.testing.session_fixture" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</section>
<section id="module-core.user_profile">
<span id="core-user-profile-module"></span><h2>core.user_profile module<a class="headerlink" href="#module-core.user_profile" title="Permalink to this heading">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="core.user_profile.MockProfileStorage">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.user_profile.</span></span><span class="sig-name descname"><span class="pre">MockProfileStorage</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">read_only_settings</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">writable_settings</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/user_profile.html#MockProfileStorage"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.user_profile.MockProfileStorage" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.user_profile.ProfileStorage" title="core.user_profile.ProfileStorage"><code class="xref py py-class docutils literal notranslate"><span class="pre">ProfileStorage</span></code></a></p>
<p>A profile storage object for use in tests.</p>
<p>Keeps information in in-memory dictionaries rather than in a database.</p>
<dl class="py property">
<dt class="sig sig-object py" id="core.user_profile.MockProfileStorage.profile_document">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">profile_document</span></span><a class="headerlink" href="#core.user_profile.MockProfileStorage.profile_document" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a Profile document representing the current state of
the user’s profile.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>A dictionary that can be serialized as JSON.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.user_profile.MockProfileStorage.update">
<span class="sig-name descname"><span class="pre">update</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">new_values</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">profile_document</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/user_profile.html#MockProfileStorage.update"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.user_profile.MockProfileStorage.update" title="Permalink to this definition">¶</a></dt>
<dd><p>(Try to) change the user’s profile so it looks like the provided
Profile document.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="core.user_profile.MockProfileStorage.writable_setting_names">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">writable_setting_names</span></span><a class="headerlink" href="#core.user_profile.MockProfileStorage.writable_setting_names" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the subset of fields that are considered writable.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.user_profile.ProfileController">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.user_profile.</span></span><span class="sig-name descname"><span class="pre">ProfileController</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">storage</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/user_profile.html#ProfileController"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.user_profile.ProfileController" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Implement the User Profile Management Protocol.</p>
<p><a class="reference external" href="https://github.com/NYPL-Simplified/Simplified/wiki/User-Profile-Management-Protocol">https://github.com/NYPL-Simplified/Simplified/wiki/User-Profile-Management-Protocol</a></p>
<dl class="py attribute">
<dt class="sig sig-object py" id="core.user_profile.ProfileController.LINK_RELATION">
<span class="sig-name descname"><span class="pre">LINK_RELATION</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'http://librarysimplified.org/terms/rel/user-profile'</span></em><a class="headerlink" href="#core.user_profile.ProfileController.LINK_RELATION" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.user_profile.ProfileController.MEDIA_TYPE">
<span class="sig-name descname"><span class="pre">MEDIA_TYPE</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'vnd.librarysimplified/user-profile+json'</span></em><a class="headerlink" href="#core.user_profile.ProfileController.MEDIA_TYPE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.user_profile.ProfileController.get">
<span class="sig-name descname"><span class="pre">get</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/user_profile.html#ProfileController.get"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.user_profile.ProfileController.get" title="Permalink to this definition">¶</a></dt>
<dd><p>Turn the storage object into a Profile document and send out its
JSON-based representation.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>return</strong> – A ProblemDetail if there is a problem; otherwise,
a 3-tuple (entity-body, response code, headers)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.user_profile.ProfileController.put">
<span class="sig-name descname"><span class="pre">put</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">headers</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">body</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/user_profile.html#ProfileController.put"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.user_profile.ProfileController.put" title="Permalink to this definition">¶</a></dt>
<dd><p>Update the profile storage object with new settings
from a Profile document sent with a PUT request.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>return</strong> – A ProblemDetail if there is a problem; otherwise,
a 3-tuple (response code, media type, entity-body)</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="core.user_profile.ProfileStorage">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">core.user_profile.</span></span><span class="sig-name descname"><span class="pre">ProfileStorage</span></span><a class="reference internal" href="_modules/core/user_profile.html#ProfileStorage"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.user_profile.ProfileStorage" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>An abstract class defining a specific user’s profile.</p>
<p>Subclasses should get profile information from somewhere specific,
e.g. a database row.</p>
<p>An instance of this class is responsible for one specific user’s profile,
not the set of all profiles.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="core.user_profile.ProfileStorage.AUTHORIZATION_EXPIRES">
<span class="sig-name descname"><span class="pre">AUTHORIZATION_EXPIRES</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'simplified:authorization_expires'</span></em><a class="headerlink" href="#core.user_profile.ProfileStorage.AUTHORIZATION_EXPIRES" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.user_profile.ProfileStorage.AUTHORIZATION_IDENTIFIER">
<span class="sig-name descname"><span class="pre">AUTHORIZATION_IDENTIFIER</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'simplified:authorization_identifier'</span></em><a class="headerlink" href="#core.user_profile.ProfileStorage.AUTHORIZATION_IDENTIFIER" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.user_profile.ProfileStorage.FINES">
<span class="sig-name descname"><span class="pre">FINES</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'simplified:fines'</span></em><a class="headerlink" href="#core.user_profile.ProfileStorage.FINES" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.user_profile.ProfileStorage.NS">
<span class="sig-name descname"><span class="pre">NS</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'simplified:'</span></em><a class="headerlink" href="#core.user_profile.ProfileStorage.NS" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.user_profile.ProfileStorage.SETTINGS_KEY">
<span class="sig-name descname"><span class="pre">SETTINGS_KEY</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'settings'</span></em><a class="headerlink" href="#core.user_profile.ProfileStorage.SETTINGS_KEY" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="core.user_profile.ProfileStorage.SYNCHRONIZE_ANNOTATIONS">
<span class="sig-name descname"><span class="pre">SYNCHRONIZE_ANNOTATIONS</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'simplified:synchronize_annotations'</span></em><a class="headerlink" href="#core.user_profile.ProfileStorage.SYNCHRONIZE_ANNOTATIONS" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="core.user_profile.ProfileStorage.profile_document">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">profile_document</span></span><a class="headerlink" href="#core.user_profile.ProfileStorage.profile_document" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a Profile document representing the current state of
the user’s profile.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>A dictionary that can be serialized as JSON.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="core.user_profile.ProfileStorage.update">
<span class="sig-name descname"><span class="pre">update</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">new_values</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">profile_document</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/user_profile.html#ProfileStorage.update"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#core.user_profile.ProfileStorage.update" title="Permalink to this definition">¶</a></dt>
<dd><p>(Try to) change the user’s profile so it looks like the provided
Profile document.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>new_values</strong> – A dictionary of settings that the
client wants to change.</p></li>
<li><p><strong>profile_document</strong> – The full Profile document as provided
by the client. Should not be necessary, but provided in
case it’s useful.</p></li>
</ul>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>Exception</strong> – If there’s a problem making the user’s profile
look like the provided Profile document.</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="core.user_profile.ProfileStorage.writable_setting_names">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">writable_setting_names</span></span><a class="headerlink" href="#core.user_profile.ProfileStorage.writable_setting_names" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the subset of settings that are considered writable.</p>
<p>An attempt to modify a setting that’s not in this list will fail
before update() is called.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>An iterable.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="module-core">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-core" title="Permalink to this heading">¶</a></h2>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">Library Simplified Circulation Manager</a></h1>








<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="modules.html">circulation</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="api.html">api package</a></li>
<li class="toctree-l2"><a class="reference internal" href="app.html">app module</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">core package</a></li>
<li class="toctree-l2"><a class="reference internal" href="scripts.html">scripts module</a></li>
</ul>
</li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
  <li><a href="modules.html">circulation</a><ul>
      <li>Previous: <a href="app.html" title="previous chapter">app module</a></li>
      <li>Next: <a href="core.classifier.html" title="next chapter">core.classifier package</a></li>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2022, The New York Public Library, Astor, Lenox, and Tilden Foundations.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 5.0.0b1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="_sources/core.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>