
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>core package &#8212; Library Simplified Circulation Manager  documentation</title>
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/language_data.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="core.classifier package" href="core.classifier.html" />
    <link rel="prev" title="app module" href="app.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="core-package">
<h1>core package<a class="headerlink" href="#core-package" title="Permalink to this headline">¶</a></h1>
<div class="section" id="subpackages">
<h2>Subpackages<a class="headerlink" href="#subpackages" title="Permalink to this headline">¶</a></h2>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="core.classifier.html">core.classifier package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="core.classifier.html#submodules">Submodules</a></li>
<li class="toctree-l2"><a class="reference internal" href="core.classifier.html#module-core.classifier.age">core.classifier.age module</a></li>
<li class="toctree-l2"><a class="reference internal" href="core.classifier.html#module-core.classifier.bic">core.classifier.bic module</a></li>
<li class="toctree-l2"><a class="reference internal" href="core.classifier.html#module-core.classifier.bisac">core.classifier.bisac module</a></li>
<li class="toctree-l2"><a class="reference internal" href="core.classifier.html#module-core.classifier.ddc">core.classifier.ddc module</a></li>
<li class="toctree-l2"><a class="reference internal" href="core.classifier.html#module-core.classifier.gutenberg">core.classifier.gutenberg module</a></li>
<li class="toctree-l2"><a class="reference internal" href="core.classifier.html#module-core.classifier.keyword">core.classifier.keyword module</a></li>
<li class="toctree-l2"><a class="reference internal" href="core.classifier.html#module-core.classifier.lcc">core.classifier.lcc module</a></li>
<li class="toctree-l2"><a class="reference internal" href="core.classifier.html#module-core.classifier.overdrive">core.classifier.overdrive module</a></li>
<li class="toctree-l2"><a class="reference internal" href="core.classifier.html#module-core.classifier.rbdigital">core.classifier.rbdigital module</a></li>
<li class="toctree-l2"><a class="reference internal" href="core.classifier.html#module-core.classifier.simplified">core.classifier.simplified module</a></li>
<li class="toctree-l2"><a class="reference internal" href="core.classifier.html#module-core.classifier">Module contents</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="core.model.html">core.model package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="core.model.html#submodules">Submodules</a></li>
<li class="toctree-l2"><a class="reference internal" href="core.model.html#module-core.model.admin">core.model.admin module</a></li>
<li class="toctree-l2"><a class="reference internal" href="core.model.html#module-core.model.cachedfeed">core.model.cachedfeed module</a></li>
<li class="toctree-l2"><a class="reference internal" href="core.model.html#module-core.model.circulationevent">core.model.circulationevent module</a></li>
<li class="toctree-l2"><a class="reference internal" href="core.model.html#module-core.model.classification">core.model.classification module</a></li>
<li class="toctree-l2"><a class="reference internal" href="core.model.html#module-core.model.collection">core.model.collection module</a></li>
<li class="toctree-l2"><a class="reference internal" href="core.model.html#module-core.model.complaint">core.model.complaint module</a></li>
<li class="toctree-l2"><a class="reference internal" href="core.model.html#module-core.model.configuration">core.model.configuration module</a></li>
<li class="toctree-l2"><a class="reference internal" href="core.model.html#module-core.model.constants">core.model.constants module</a></li>
<li class="toctree-l2"><a class="reference internal" href="core.model.html#module-core.model.contributor">core.model.contributor module</a></li>
<li class="toctree-l2"><a class="reference internal" href="core.model.html#module-core.model.coverage">core.model.coverage module</a></li>
<li class="toctree-l2"><a class="reference internal" href="core.model.html#module-core.model.credential">core.model.credential module</a></li>
<li class="toctree-l2"><a class="reference internal" href="core.model.html#module-core.model.customlist">core.model.customlist module</a></li>
<li class="toctree-l2"><a class="reference internal" href="core.model.html#module-core.model.datasource">core.model.datasource module</a></li>
<li class="toctree-l2"><a class="reference internal" href="core.model.html#module-core.model.edition">core.model.edition module</a></li>
<li class="toctree-l2"><a class="reference internal" href="core.model.html#module-core.model.hasfulltablecache">core.model.hasfulltablecache module</a></li>
<li class="toctree-l2"><a class="reference internal" href="core.model.html#module-core.model.identifier">core.model.identifier module</a></li>
<li class="toctree-l2"><a class="reference internal" href="core.model.html#module-core.model.integrationclient">core.model.integrationclient module</a></li>
<li class="toctree-l2"><a class="reference internal" href="core.model.html#module-core.model.library">core.model.library module</a></li>
<li class="toctree-l2"><a class="reference internal" href="core.model.html#module-core.model.licensing">core.model.licensing module</a></li>
<li class="toctree-l2"><a class="reference internal" href="core.model.html#module-core.model.listeners">core.model.listeners module</a></li>
<li class="toctree-l2"><a class="reference internal" href="core.model.html#module-core.model.measurement">core.model.measurement module</a></li>
<li class="toctree-l2"><a class="reference internal" href="core.model.html#module-core.model.patron">core.model.patron module</a></li>
<li class="toctree-l2"><a class="reference internal" href="core.model.html#module-core.model.resource">core.model.resource module</a></li>
<li class="toctree-l2"><a class="reference internal" href="core.model.html#module-core.model.work">core.model.work module</a></li>
<li class="toctree-l2"><a class="reference internal" href="core.model.html#module-core.model">Module contents</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="core.resources.html">core.resources package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="core.resources.html#module-core.resources">Module contents</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="core.util.html">core.util package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="core.util.html#submodules">Submodules</a></li>
<li class="toctree-l2"><a class="reference internal" href="core.util.html#module-core.util.accept_language">core.util.accept_language module</a></li>
<li class="toctree-l2"><a class="reference internal" href="core.util.html#module-core.util.authentication_for_opds">core.util.authentication_for_opds module</a></li>
<li class="toctree-l2"><a class="reference internal" href="core.util.html#module-core.util.epub">core.util.epub module</a></li>
<li class="toctree-l2"><a class="reference internal" href="core.util.html#module-core.util.flask_util">core.util.flask_util module</a></li>
<li class="toctree-l2"><a class="reference internal" href="core.util.html#module-core.util.http">core.util.http module</a></li>
<li class="toctree-l2"><a class="reference internal" href="core.util.html#module-core.util.languages">core.util.languages module</a></li>
<li class="toctree-l2"><a class="reference internal" href="core.util.html#module-core.util.median">core.util.median module</a></li>
<li class="toctree-l2"><a class="reference internal" href="core.util.html#module-core.util.opds_writer">core.util.opds_writer module</a></li>
<li class="toctree-l2"><a class="reference internal" href="core.util.html#module-core.util.permanent_work_id">core.util.permanent_work_id module</a></li>
<li class="toctree-l2"><a class="reference internal" href="core.util.html#module-core.util.personal_names">core.util.personal_names module</a></li>
<li class="toctree-l2"><a class="reference internal" href="core.util.html#module-core.util.problem_detail">core.util.problem_detail module</a></li>
<li class="toctree-l2"><a class="reference internal" href="core.util.html#module-core.util.stopwords">core.util.stopwords module</a></li>
<li class="toctree-l2"><a class="reference internal" href="core.util.html#module-core.util.string_helpers">core.util.string_helpers module</a></li>
<li class="toctree-l2"><a class="reference internal" href="core.util.html#module-core.util.summary">core.util.summary module</a></li>
<li class="toctree-l2"><a class="reference internal" href="core.util.html#module-core.util.titles">core.util.titles module</a></li>
<li class="toctree-l2"><a class="reference internal" href="core.util.html#module-core.util.web_publication_manifest">core.util.web_publication_manifest module</a></li>
<li class="toctree-l2"><a class="reference internal" href="core.util.html#module-core.util.worker_pools">core.util.worker_pools module</a></li>
<li class="toctree-l2"><a class="reference internal" href="core.util.html#module-core.util.xmlparser">core.util.xmlparser module</a></li>
<li class="toctree-l2"><a class="reference internal" href="core.util.html#module-core.util">Module contents</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div class="section" id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-core.analytics">
<span id="core-analytics-module"></span><h2>core.analytics module<a class="headerlink" href="#module-core.analytics" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="core.analytics.Analytics">
<em class="property">class </em><code class="descclassname">core.analytics.</code><code class="descname">Analytics</code><span class="sig-paren">(</span><em>_db</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/analytics.html#Analytics"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.analytics.Analytics" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<dl class="attribute">
<dt id="core.analytics.Analytics.GLOBAL_ENABLED">
<code class="descname">GLOBAL_ENABLED</code><em class="property"> = None</em><a class="headerlink" href="#core.analytics.Analytics.GLOBAL_ENABLED" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.analytics.Analytics.LIBRARY_ENABLED">
<code class="descname">LIBRARY_ENABLED</code><em class="property"> = set([])</em><a class="headerlink" href="#core.analytics.Analytics.LIBRARY_ENABLED" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="core.analytics.Analytics.collect_event">
<code class="descname">collect_event</code><span class="sig-paren">(</span><em>library</em>, <em>license_pool</em>, <em>event_type</em>, <em>time=None</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/analytics.html#Analytics.collect_event"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.analytics.Analytics.collect_event" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="classmethod">
<dt id="core.analytics.Analytics.is_configured">
<em class="property">classmethod </em><code class="descname">is_configured</code><span class="sig-paren">(</span><em>library</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/analytics.html#Analytics.is_configured"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.analytics.Analytics.is_configured" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>
<div class="section" id="module-core.app_server">
<span id="core-app-server-module"></span><h2>core.app_server module<a class="headerlink" href="#module-core.app_server" title="Permalink to this headline">¶</a></h2>
<p>Implement logic common to more than one of the Simplified applications.</p>
<dl class="class">
<dt id="core.app_server.ComplaintController">
<em class="property">class </em><code class="descclassname">core.app_server.</code><code class="descname">ComplaintController</code><a class="reference internal" href="_modules/core/app_server.html#ComplaintController"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.app_server.ComplaintController" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>A controller to register complaints against objects.</p>
<dl class="method">
<dt id="core.app_server.ComplaintController.register">
<code class="descname">register</code><span class="sig-paren">(</span><em>license_pool</em>, <em>raw_data</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/app_server.html#ComplaintController.register"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.app_server.ComplaintController.register" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="core.app_server.ErrorHandler">
<em class="property">class </em><code class="descclassname">core.app_server.</code><code class="descname">ErrorHandler</code><span class="sig-paren">(</span><em>app</em>, <em>debug=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/app_server.html#ErrorHandler"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.app_server.ErrorHandler" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<dl class="method">
<dt id="core.app_server.ErrorHandler.handle">
<code class="descname">handle</code><span class="sig-paren">(</span><em>exception</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/app_server.html#ErrorHandler.handle"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.app_server.ErrorHandler.handle" title="Permalink to this definition">¶</a></dt>
<dd><p>Something very bad has happened. Notify the client.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="core.app_server.HeartbeatController">
<em class="property">class </em><code class="descclassname">core.app_server.</code><code class="descname">HeartbeatController</code><a class="reference internal" href="_modules/core/app_server.html#HeartbeatController"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.app_server.HeartbeatController" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<dl class="attribute">
<dt id="core.app_server.HeartbeatController.HEALTH_CHECK_TYPE">
<code class="descname">HEALTH_CHECK_TYPE</code><em class="property"> = 'application/vnd.health+json'</em><a class="headerlink" href="#core.app_server.HeartbeatController.HEALTH_CHECK_TYPE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.app_server.HeartbeatController.VERSION_FILENAME">
<code class="descname">VERSION_FILENAME</code><em class="property"> = '.version'</em><a class="headerlink" href="#core.app_server.HeartbeatController.VERSION_FILENAME" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="core.app_server.HeartbeatController.heartbeat">
<code class="descname">heartbeat</code><span class="sig-paren">(</span><em>conf_class=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/app_server.html#HeartbeatController.heartbeat"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.app_server.HeartbeatController.heartbeat" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="core.app_server.URNLookupController">
<em class="property">class </em><code class="descclassname">core.app_server.</code><code class="descname">URNLookupController</code><span class="sig-paren">(</span><em>_db</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/app_server.html#URNLookupController"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.app_server.URNLookupController" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>A controller for looking up OPDS entries for specific books,
identified in terms of their Identifier URNs.</p>
<dl class="method">
<dt id="core.app_server.URNLookupController.permalink">
<code class="descname">permalink</code><span class="sig-paren">(</span><em>urn</em>, <em>annotator</em>, <em>route_name='work'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/app_server.html#URNLookupController.permalink"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.app_server.URNLookupController.permalink" title="Permalink to this definition">¶</a></dt>
<dd><p>Look up a single identifier and generate an OPDS feed.</p>
<p>TODO: This method is tested, but it seems unused and it
should be possible to remove it.</p>
</dd></dl>

<dl class="method">
<dt id="core.app_server.URNLookupController.process_urns">
<code class="descname">process_urns</code><span class="sig-paren">(</span><em>urns</em>, <em>**process_urn_kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/app_server.html#URNLookupController.process_urns"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.app_server.URNLookupController.process_urns" title="Permalink to this definition">¶</a></dt>
<dd><p>Process a number of URNs by instantiating a URNLookupHandler
and having it do the work.</p>
<p>The information gathered by the URNLookupHandler can be used
by the caller to generate an OPDS feed.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">A URNLookupHandler, or a ProblemDetail if
there’s a problem with the request.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="core.app_server.URNLookupController.work_lookup">
<code class="descname">work_lookup</code><span class="sig-paren">(</span><em>annotator</em>, <em>route_name='lookup'</em>, <em>**process_urn_kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/app_server.html#URNLookupController.work_lookup"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.app_server.URNLookupController.work_lookup" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate an OPDS feed describing works identified by identifier.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="core.app_server.URNLookupHandler">
<em class="property">class </em><code class="descclassname">core.app_server.</code><code class="descname">URNLookupHandler</code><span class="sig-paren">(</span><em>_db</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/app_server.html#URNLookupHandler"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.app_server.URNLookupHandler" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>A helper for URNLookupController that takes URNs as input and looks
up their OPDS entries.</p>
<p>This is a separate class from URNLookupController because
URNLookupController is designed to not keep state.</p>
<dl class="attribute">
<dt id="core.app_server.URNLookupHandler.UNRECOGNIZED_IDENTIFIER">
<code class="descname">UNRECOGNIZED_IDENTIFIER</code><em class="property"> = 'This work is not in the collection.'</em><a class="headerlink" href="#core.app_server.URNLookupHandler.UNRECOGNIZED_IDENTIFIER" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.app_server.URNLookupHandler.WORK_NOT_CREATED">
<code class="descname">WORK_NOT_CREATED</code><em class="property"> = 'Identifier resolved but work not yet created.'</em><a class="headerlink" href="#core.app_server.URNLookupHandler.WORK_NOT_CREATED" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.app_server.URNLookupHandler.WORK_NOT_PRESENTATION_READY">
<code class="descname">WORK_NOT_PRESENTATION_READY</code><em class="property"> = 'Work created but not yet presentation-ready.'</em><a class="headerlink" href="#core.app_server.URNLookupHandler.WORK_NOT_PRESENTATION_READY" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="core.app_server.URNLookupHandler.add_entry">
<code class="descname">add_entry</code><span class="sig-paren">(</span><em>entry</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/app_server.html#URNLookupHandler.add_entry"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.app_server.URNLookupHandler.add_entry" title="Permalink to this definition">¶</a></dt>
<dd><p>An identifier lookup succeeded in creating an OPDS entry.</p>
</dd></dl>

<dl class="method">
<dt id="core.app_server.URNLookupHandler.add_message">
<code class="descname">add_message</code><span class="sig-paren">(</span><em>urn</em>, <em>status_code</em>, <em>message</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/app_server.html#URNLookupHandler.add_message"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.app_server.URNLookupHandler.add_message" title="Permalink to this definition">¶</a></dt>
<dd><p>An identifier lookup resulted in the creation of a message.</p>
</dd></dl>

<dl class="method">
<dt id="core.app_server.URNLookupHandler.add_urn_failure_messages">
<code class="descname">add_urn_failure_messages</code><span class="sig-paren">(</span><em>failures</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/app_server.html#URNLookupHandler.add_urn_failure_messages"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.app_server.URNLookupHandler.add_urn_failure_messages" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="core.app_server.URNLookupHandler.add_work">
<code class="descname">add_work</code><span class="sig-paren">(</span><em>identifier</em>, <em>work</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/app_server.html#URNLookupHandler.add_work"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.app_server.URNLookupHandler.add_work" title="Permalink to this definition">¶</a></dt>
<dd><p>An identifier lookup succeeded in finding a Work.</p>
</dd></dl>

<dl class="method">
<dt id="core.app_server.URNLookupHandler.post_lookup_hook">
<code class="descname">post_lookup_hook</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/app_server.html#URNLookupHandler.post_lookup_hook"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.app_server.URNLookupHandler.post_lookup_hook" title="Permalink to this definition">¶</a></dt>
<dd><p>Run after looking up a number of Identifiers.</p>
<p>By default, does nothing.</p>
</dd></dl>

<dl class="method">
<dt id="core.app_server.URNLookupHandler.process_identifier">
<code class="descname">process_identifier</code><span class="sig-paren">(</span><em>identifier</em>, <em>urn</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/app_server.html#URNLookupHandler.process_identifier"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.app_server.URNLookupHandler.process_identifier" title="Permalink to this definition">¶</a></dt>
<dd><p>Turn a URN into a Work suitable for use in an OPDS feed.</p>
</dd></dl>

<dl class="method">
<dt id="core.app_server.URNLookupHandler.process_urns">
<code class="descname">process_urns</code><span class="sig-paren">(</span><em>urns</em>, <em>**process_urn_kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/app_server.html#URNLookupHandler.process_urns"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.app_server.URNLookupHandler.process_urns" title="Permalink to this definition">¶</a></dt>
<dd><p>Processes a list of URNs for a lookup request.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">None or, to override default feed behavior, a ProblemDetail
or Response.</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="core.app_server.cdn_url_for">
<code class="descclassname">core.app_server.</code><code class="descname">cdn_url_for</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/app_server.html#cdn_url_for"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.app_server.cdn_url_for" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="core.app_server.compressible">
<code class="descclassname">core.app_server.</code><code class="descname">compressible</code><span class="sig-paren">(</span><em>f</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/app_server.html#compressible"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.app_server.compressible" title="Permalink to this definition">¶</a></dt>
<dd><p>Decorate a function to make it transparently handle whatever
compression the client has announced it supports.</p>
<p>Currently the only form of compression supported is
representation-level gzip compression requested through the
Accept-Encoding header.</p>
<p>This code was modified from
<a class="reference external" href="http://kb.sites.apiit.edu.my/knowledge-base/how-to-gzip-response-in-flask/">http://kb.sites.apiit.edu.my/knowledge-base/how-to-gzip-response-in-flask/</a>,
though I don’t know if that’s the original source; it shows up in
a lot of places.</p>
</dd></dl>

<dl class="function">
<dt id="core.app_server.load_facets_from_request">
<code class="descclassname">core.app_server.</code><code class="descname">load_facets_from_request</code><span class="sig-paren">(</span><em>facet_config=None</em>, <em>worklist=None</em>, <em>base_class=&lt;class 'core.lane.Facets'&gt;</em>, <em>base_class_constructor_kwargs=None</em>, <em>default_entrypoint=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/app_server.html#load_facets_from_request"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.app_server.load_facets_from_request" title="Permalink to this definition">¶</a></dt>
<dd><p>Figure out which faceting object this request is asking for.</p>
<p>The active request must have the <cite>library</cite> member set to a Library
object.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>worklist</strong> – The WorkList, if any, associated with the request.</li>
<li><strong>facet_config</strong> – An object containing the currently configured
facet groups, if different from the request library.</li>
<li><strong>base_class</strong> – The faceting class to instantiate.</li>
<li><strong>base_class_constructor_kwargs</strong> – Keyword arguments to pass into
the faceting class constructor, other than those obtained from
the request.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">A faceting object if possible; otherwise a ProblemDetail.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="core.app_server.load_lending_policy">
<code class="descclassname">core.app_server.</code><code class="descname">load_lending_policy</code><span class="sig-paren">(</span><em>policy</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/app_server.html#load_lending_policy"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.app_server.load_lending_policy" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="core.app_server.load_pagination_from_request">
<code class="descclassname">core.app_server.</code><code class="descname">load_pagination_from_request</code><span class="sig-paren">(</span><em>base_class=&lt;class 'core.lane.Pagination'&gt;</em>, <em>base_class_constructor_kwargs=None</em>, <em>default_size=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/app_server.html#load_pagination_from_request"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.app_server.load_pagination_from_request" title="Permalink to this definition">¶</a></dt>
<dd><p>Figure out which Pagination object this request is asking for.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>base_class</strong> – A subclass of Pagination to instantiate.</li>
<li><strong>base_class_constructor_kwargs</strong> – Extra keyword arguments to use
when instantiating the Pagination subclass.</li>
<li><strong>default_size</strong> – The default page size.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">An instance of <cite>base_class</cite>.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="core.app_server.returns_problem_detail">
<code class="descclassname">core.app_server.</code><code class="descname">returns_problem_detail</code><span class="sig-paren">(</span><em>f</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/app_server.html#returns_problem_detail"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.app_server.returns_problem_detail" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="module-core.cdn">
<span id="core-cdn-module"></span><h2>core.cdn module<a class="headerlink" href="#module-core.cdn" title="Permalink to this headline">¶</a></h2>
<p>Turn local URLs into CDN URLs.</p>
<dl class="function">
<dt id="core.cdn.cdnify">
<code class="descclassname">core.cdn.</code><code class="descname">cdnify</code><span class="sig-paren">(</span><em>url</em>, <em>cdns=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/cdn.html#cdnify"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.cdn.cdnify" title="Permalink to this definition">¶</a></dt>
<dd><p>Turn local URLs into CDN URLs</p>
</dd></dl>

</div>
<div class="section" id="module-core.config">
<span id="core-config-module"></span><h2>core.config module<a class="headerlink" href="#module-core.config" title="Permalink to this headline">¶</a></h2>
<dl class="exception">
<dt id="core.config.CannotLoadConfiguration">
<em class="property">exception </em><code class="descclassname">core.config.</code><code class="descname">CannotLoadConfiguration</code><span class="sig-paren">(</span><em>message</em>, <em>debug_message=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/config.html#CannotLoadConfiguration"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.config.CannotLoadConfiguration" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="core.util.html#core.util.http.IntegrationException" title="core.util.http.IntegrationException"><code class="xref py py-class docutils literal notranslate"><span class="pre">core.util.http.IntegrationException</span></code></a></p>
<p>The current configuration of an external integration, or of the
site as a whole, is in an incomplete or inconsistent state.</p>
<p>This is more specific than a base IntegrationException because it
assumes the problem is evident just by looking at the current
configuration, with no need to actually talk to the foreign
server.</p>
</dd></dl>

<dl class="class">
<dt id="core.config.Configuration">
<em class="property">class </em><code class="descclassname">core.config.</code><code class="descname">Configuration</code><a class="reference internal" href="_modules/core/config.html#Configuration"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.config.Configuration" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.config.ConfigurationConstants" title="core.config.ConfigurationConstants"><code class="xref py py-class docutils literal notranslate"><span class="pre">core.config.ConfigurationConstants</span></code></a></p>
<dl class="attribute">
<dt id="core.config.Configuration.ALLOW_HOLDS">
<code class="descname">ALLOW_HOLDS</code><em class="property"> = 'allow_holds'</em><a class="headerlink" href="#core.config.Configuration.ALLOW_HOLDS" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.config.Configuration.ANALYTICS_POLICY">
<code class="descname">ANALYTICS_POLICY</code><em class="property"> = 'analytics'</em><a class="headerlink" href="#core.config.Configuration.ANALYTICS_POLICY" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.config.Configuration.APP_VERSION">
<code class="descname">APP_VERSION</code><em class="property"> = 'app_version'</em><a class="headerlink" href="#core.config.Configuration.APP_VERSION" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.config.Configuration.AXIS_INTEGRATION">
<code class="descname">AXIS_INTEGRATION</code><em class="property"> = 'Axis 360'</em><a class="headerlink" href="#core.config.Configuration.AXIS_INTEGRATION" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.config.Configuration.BASE_URL_KEY">
<code class="descname">BASE_URL_KEY</code><em class="property"> = u'base_url'</em><a class="headerlink" href="#core.config.Configuration.BASE_URL_KEY" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.config.Configuration.CDNS_LOADED_FROM_DATABASE">
<code class="descname">CDNS_LOADED_FROM_DATABASE</code><em class="property"> = 'loaded_from_database'</em><a class="headerlink" href="#core.config.Configuration.CDNS_LOADED_FROM_DATABASE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.config.Configuration.CDN_MIRRORED_DOMAIN_KEY">
<code class="descname">CDN_MIRRORED_DOMAIN_KEY</code><em class="property"> = u'mirrored_domain'</em><a class="headerlink" href="#core.config.Configuration.CDN_MIRRORED_DOMAIN_KEY" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.config.Configuration.CONTENT_SERVER_INTEGRATION">
<code class="descname">CONTENT_SERVER_INTEGRATION</code><em class="property"> = u'Content Server'</em><a class="headerlink" href="#core.config.Configuration.CONTENT_SERVER_INTEGRATION" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.config.Configuration.DATABASE_INTEGRATION">
<code class="descname">DATABASE_INTEGRATION</code><em class="property"> = u'Postgres'</em><a class="headerlink" href="#core.config.Configuration.DATABASE_INTEGRATION" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.config.Configuration.DATABASE_LOG_LEVEL">
<code class="descname">DATABASE_LOG_LEVEL</code><em class="property"> = 'database_log_level'</em><a class="headerlink" href="#core.config.Configuration.DATABASE_LOG_LEVEL" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.config.Configuration.DATABASE_PRODUCTION_ENVIRONMENT_VARIABLE">
<code class="descname">DATABASE_PRODUCTION_ENVIRONMENT_VARIABLE</code><em class="property"> = 'SIMPLIFIED_PRODUCTION_DATABASE'</em><a class="headerlink" href="#core.config.Configuration.DATABASE_PRODUCTION_ENVIRONMENT_VARIABLE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.config.Configuration.DATABASE_PRODUCTION_URL">
<code class="descname">DATABASE_PRODUCTION_URL</code><em class="property"> = 'production_url'</em><a class="headerlink" href="#core.config.Configuration.DATABASE_PRODUCTION_URL" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.config.Configuration.DATABASE_TEST_ENVIRONMENT_VARIABLE">
<code class="descname">DATABASE_TEST_ENVIRONMENT_VARIABLE</code><em class="property"> = 'SIMPLIFIED_TEST_DATABASE'</em><a class="headerlink" href="#core.config.Configuration.DATABASE_TEST_ENVIRONMENT_VARIABLE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.config.Configuration.DATABASE_TEST_URL">
<code class="descname">DATABASE_TEST_URL</code><em class="property"> = 'test_url'</em><a class="headerlink" href="#core.config.Configuration.DATABASE_TEST_URL" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.config.Configuration.DATA_DIRECTORY">
<code class="descname">DATA_DIRECTORY</code><em class="property"> = 'data_directory'</em><a class="headerlink" href="#core.config.Configuration.DATA_DIRECTORY" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.config.Configuration.DEBUG">
<code class="descname">DEBUG</code><em class="property"> = 'DEBUG'</em><a class="headerlink" href="#core.config.Configuration.DEBUG" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.config.Configuration.DEFAULT_APP_NAME">
<code class="descname">DEFAULT_APP_NAME</code><em class="property"> = 'simplified'</em><a class="headerlink" href="#core.config.Configuration.DEFAULT_APP_NAME" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.config.Configuration.DEFAULT_MINIMUM_FEATURED_QUALITY">
<code class="descname">DEFAULT_MINIMUM_FEATURED_QUALITY</code><em class="property"> = 0.65</em><a class="headerlink" href="#core.config.Configuration.DEFAULT_MINIMUM_FEATURED_QUALITY" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.config.Configuration.DEFAULT_OPDS_FORMAT">
<code class="descname">DEFAULT_OPDS_FORMAT</code><em class="property"> = 'simple_opds_entry'</em><a class="headerlink" href="#core.config.Configuration.DEFAULT_OPDS_FORMAT" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.config.Configuration.ERROR">
<code class="descname">ERROR</code><em class="property"> = 'ERROR'</em><a class="headerlink" href="#core.config.Configuration.ERROR" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.config.Configuration.EXCLUDED_AUDIO_DATA_SOURCES">
<code class="descname">EXCLUDED_AUDIO_DATA_SOURCES</code><em class="property"> = 'excluded_audio_data_sources'</em><a class="headerlink" href="#core.config.Configuration.EXCLUDED_AUDIO_DATA_SOURCES" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.config.Configuration.EXTERNAL_TYPE_REGULAR_EXPRESSION">
<code class="descname">EXTERNAL_TYPE_REGULAR_EXPRESSION</code><em class="property"> = 'external_type_regular_expression'</em><a class="headerlink" href="#core.config.Configuration.EXTERNAL_TYPE_REGULAR_EXPRESSION" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.config.Configuration.FEATURED_LANE_SIZE">
<code class="descname">FEATURED_LANE_SIZE</code><em class="property"> = 'featured_lane_size'</em><a class="headerlink" href="#core.config.Configuration.FEATURED_LANE_SIZE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.config.Configuration.INFO">
<code class="descname">INFO</code><em class="property"> = 'INFO'</em><a class="headerlink" href="#core.config.Configuration.INFO" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.config.Configuration.INTEGRATIONS">
<code class="descname">INTEGRATIONS</code><em class="property"> = 'integrations'</em><a class="headerlink" href="#core.config.Configuration.INTEGRATIONS" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.config.Configuration.LANES_POLICY">
<code class="descname">LANES_POLICY</code><em class="property"> = 'lanes'</em><a class="headerlink" href="#core.config.Configuration.LANES_POLICY" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.config.Configuration.LAST_CHECKED_FOR_SITE_CONFIGURATION_UPDATE">
<code class="descname">LAST_CHECKED_FOR_SITE_CONFIGURATION_UPDATE</code><em class="property"> = 'last_checked_for_site_configuration_update'</em><a class="headerlink" href="#core.config.Configuration.LAST_CHECKED_FOR_SITE_CONFIGURATION_UPDATE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.config.Configuration.LIBRARY_SETTINGS">
<code class="descname">LIBRARY_SETTINGS</code><em class="property"> = [{'format': 'url', 'required': True, 'description': l'The library's main website, e.g. &quot;https://www.nypl.org/&quot; (not this Circulation Manager's URL).', 'key': u'website', 'label': l'URL of the library's website'}, {'category': 'Loans, Holds, &amp; Fines', 'default': 'true', 'label': l'Allow books to be put on hold', 'key': 'allow_holds', 'type': 'select', 'options': [{'key': 'true', 'label': l'Allow holds'}, {'key': 'false', 'label': l'Disable holds'}]}, {'category': 'Lanes &amp; Filters', 'readOnly': True, 'description': l'Patrons will see the selected entry points at the top level and in search results. &lt;p&gt;Currently supported audiobook vendors: Bibliotheca, Axis 360', 'key': 'enabled_entry_points', 'format': 'narrow', 'default': ['Book'], 'type': 'list', 'options': [{'key': 'All', 'label': 'All'}, {'key': 'Book', 'label': 'eBooks'}, {'key': 'Audio', 'label': 'Audiobooks'}], 'label': l'Enabled entry points'}, {'default': 15, 'category': 'Lanes &amp; Filters', 'type': 'number', 'key': 'featured_lane_size', 'label': l'Maximum number of books in the 'featured' lanes'}, {'category': 'Lanes &amp; Filters', 'description': l'Between 0 and 1.', 'default': 0.65, 'max': 1, 'label': l'Minimum quality for books that show up in 'featured' lanes', 'key': 'minimum_featured_quality', 'type': 'number'}, {'category': 'Lanes &amp; Filters', 'default': ['now', 'all', 'always'], 'label': l'Allow patrons to filter availability to', 'paired': 'facets_default_available', 'key': 'facets_enabled_available', 'type': 'list', 'options': [{'key': 'now', 'label': l'Available now'}, {'key': 'all', 'label': l'All'}, {'key': 'always', 'label': l'Yours to keep'}]}, {'category': 'Lanes &amp; Filters', 'default': ['title', 'author', 'added', 'random'], 'label': l'Allow patrons to sort by', 'paired': 'facets_default_order', 'key': 'facets_enabled_order', 'type': 'list', 'options': [{'key': 'title', 'label': l'Title'}, {'key': 'author', 'label': l'Author'}, {'key': 'added', 'label': l'Recently Added'}, {'key': 'random', 'label': l'Random'}]}, {'category': 'Lanes &amp; Filters', 'default': ['full', 'featured'], 'label': l'Allow patrons to filter collection to', 'paired': 'facets_default_collection', 'key': 'facets_enabled_collection', 'type': 'list', 'options': [{'key': 'full', 'label': l'Everything'}, {'key': 'featured', 'label': l'Popular Books'}]}, {'category': 'Lanes &amp; Filters', 'default': 'all', 'skip': True, 'label': l'Default Availability', 'key': 'facets_default_available', 'type': 'select', 'options': [{'key': 'now', 'label': l'Available now'}, {'key': 'all', 'label': l'All'}, {'key': 'always', 'label': l'Yours to keep'}]}, {'category': 'Lanes &amp; Filters', 'default': 'author', 'skip': True, 'label': l'Default Sort by', 'key': 'facets_default_order', 'type': 'select', 'options': [{'key': 'title', 'label': l'Title'}, {'key': 'author', 'label': l'Author'}, {'key': 'added', 'label': l'Recently Added'}, {'key': 'random', 'label': l'Random'}]}, {'category': 'Lanes &amp; Filters', 'default': 'full', 'skip': True, 'label': l'Default Collection', 'key': 'facets_default_collection', 'type': 'select', 'options': [{'key': 'full', 'label': l'Everything'}, {'key': 'featured', 'label': l'Popular Books'}]}]</em><a class="headerlink" href="#core.config.Configuration.LIBRARY_SETTINGS" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.config.Configuration.LOCALIZATION_LANGUAGES">
<code class="descname">LOCALIZATION_LANGUAGES</code><em class="property"> = 'localization_languages'</em><a class="headerlink" href="#core.config.Configuration.LOCALIZATION_LANGUAGES" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.config.Configuration.LOGGING">
<code class="descname">LOGGING</code><em class="property"> = 'logging'</em><a class="headerlink" href="#core.config.Configuration.LOGGING" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.config.Configuration.LOGGING_FORMAT">
<code class="descname">LOGGING_FORMAT</code><em class="property"> = 'format'</em><a class="headerlink" href="#core.config.Configuration.LOGGING_FORMAT" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.config.Configuration.LOGGING_LEVEL">
<code class="descname">LOGGING_LEVEL</code><em class="property"> = 'level'</em><a class="headerlink" href="#core.config.Configuration.LOGGING_LEVEL" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.config.Configuration.LOG_APP_NAME">
<code class="descname">LOG_APP_NAME</code><em class="property"> = 'log_app'</em><a class="headerlink" href="#core.config.Configuration.LOG_APP_NAME" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.config.Configuration.LOG_DATA_FORMAT">
<code class="descname">LOG_DATA_FORMAT</code><em class="property"> = 'format'</em><a class="headerlink" href="#core.config.Configuration.LOG_DATA_FORMAT" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.config.Configuration.LOG_FORMAT_JSON">
<code class="descname">LOG_FORMAT_JSON</code><em class="property"> = 'json'</em><a class="headerlink" href="#core.config.Configuration.LOG_FORMAT_JSON" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.config.Configuration.LOG_FORMAT_TEXT">
<code class="descname">LOG_FORMAT_TEXT</code><em class="property"> = 'text'</em><a class="headerlink" href="#core.config.Configuration.LOG_FORMAT_TEXT" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.config.Configuration.LOG_LEVEL">
<code class="descname">LOG_LEVEL</code><em class="property"> = 'log_level'</em><a class="headerlink" href="#core.config.Configuration.LOG_LEVEL" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.config.Configuration.LOG_LEVEL_UI">
<code class="descname">LOG_LEVEL_UI</code><em class="property"> = [{'key': 'DEBUG', 'label': l'Debug'}, {'key': 'INFO', 'label': l'Info'}, {'key': 'WARN', 'label': l'Warn'}, {'key': 'ERROR', 'label': l'Error'}]</em><a class="headerlink" href="#core.config.Configuration.LOG_LEVEL_UI" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.config.Configuration.LOG_OUTPUT_TYPE">
<code class="descname">LOG_OUTPUT_TYPE</code><em class="property"> = 'output'</em><a class="headerlink" href="#core.config.Configuration.LOG_OUTPUT_TYPE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.config.Configuration.MINIMUM_FEATURED_QUALITY">
<code class="descname">MINIMUM_FEATURED_QUALITY</code><em class="property"> = 'minimum_featured_quality'</em><a class="headerlink" href="#core.config.Configuration.MINIMUM_FEATURED_QUALITY" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.config.Configuration.NAME">
<code class="descname">NAME</code><em class="property"> = 'name'</em><a class="headerlink" href="#core.config.Configuration.NAME" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.config.Configuration.NO_APP_VERSION_FOUND">
<code class="descname">NO_APP_VERSION_FOUND</code><em class="property"> = &lt;object object&gt;</em><a class="headerlink" href="#core.config.Configuration.NO_APP_VERSION_FOUND" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.config.Configuration.OVERDRIVE_INTEGRATION">
<code class="descname">OVERDRIVE_INTEGRATION</code><em class="property"> = 'Overdrive'</em><a class="headerlink" href="#core.config.Configuration.OVERDRIVE_INTEGRATION" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.config.Configuration.POLICIES">
<code class="descname">POLICIES</code><em class="property"> = 'policies'</em><a class="headerlink" href="#core.config.Configuration.POLICIES" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.config.Configuration.RBDIGITAL_INTEGRATION">
<code class="descname">RBDIGITAL_INTEGRATION</code><em class="property"> = 'RBDigital'</em><a class="headerlink" href="#core.config.Configuration.RBDIGITAL_INTEGRATION" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.config.Configuration.SITEWIDE_SETTINGS">
<code class="descname">SITEWIDE_SETTINGS</code><em class="property"> = [{'format': 'url', 'required': True, 'key': u'base_url', 'label': l'Base url of the application'}, {'default': 'INFO', 'type': 'select', 'options': [{'key': 'DEBUG', 'label': l'Debug'}, {'key': 'INFO', 'label': l'Info'}, {'key': 'WARN', 'label': l'Warn'}, {'key': 'ERROR', 'label': l'Error'}], 'key': 'log_level', 'label': l'Log Level'}, {'default': 'simplified', 'required': True, 'description': l'Log messages originating from this application will be tagged with this name. If you run multiple instances, giving each one a different application name will help you determine which instance is having problems.', 'key': 'log_app', 'label': l'Application name'}, {'description': l'Database logs are extremely verbose, so unless you're diagnosing a database-related problem, it's a good idea to set a higher log level for database messages.', 'default': 'WARN', 'label': l'Database Log Level', 'key': 'database_log_level', 'type': 'select', 'options': [{'key': 'DEBUG', 'label': l'Debug'}, {'key': 'INFO', 'label': l'Info'}, {'key': 'WARN', 'label': l'Warn'}, {'key': 'ERROR', 'label': l'Error'}]}, {'default': None, 'required': True, 'description': l'Audiobooks from these data sources will be hidden from the collection, even if they would otherwise show up as available.', 'key': 'excluded_audio_data_sources', 'label': l'Excluded audiobook sources'}]</em><a class="headerlink" href="#core.config.Configuration.SITEWIDE_SETTINGS" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.config.Configuration.SITE_CONFIGURATION_CHANGED">
<code class="descname">SITE_CONFIGURATION_CHANGED</code><em class="property"> = 'Site Configuration Changed'</em><a class="headerlink" href="#core.config.Configuration.SITE_CONFIGURATION_CHANGED" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.config.Configuration.SITE_CONFIGURATION_LAST_UPDATE">
<code class="descname">SITE_CONFIGURATION_LAST_UPDATE</code><em class="property"> = 'site_configuration_last_update'</em><a class="headerlink" href="#core.config.Configuration.SITE_CONFIGURATION_LAST_UPDATE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.config.Configuration.SITE_CONFIGURATION_TIMEOUT">
<code class="descname">SITE_CONFIGURATION_TIMEOUT</code><em class="property"> = 'site_configuration_timeout'</em><a class="headerlink" href="#core.config.Configuration.SITE_CONFIGURATION_TIMEOUT" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.config.Configuration.THREEM_INTEGRATION">
<code class="descname">THREEM_INTEGRATION</code><em class="property"> = '3M'</em><a class="headerlink" href="#core.config.Configuration.THREEM_INTEGRATION" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.config.Configuration.TYPE">
<code class="descname">TYPE</code><em class="property"> = 'type'</em><a class="headerlink" href="#core.config.Configuration.TYPE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.config.Configuration.URL">
<code class="descname">URL</code><em class="property"> = 'url'</em><a class="headerlink" href="#core.config.Configuration.URL" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.config.Configuration.VERSION_FILENAME">
<code class="descname">VERSION_FILENAME</code><em class="property"> = '.version'</em><a class="headerlink" href="#core.config.Configuration.VERSION_FILENAME" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.config.Configuration.WARN">
<code class="descname">WARN</code><em class="property"> = 'WARN'</em><a class="headerlink" href="#core.config.Configuration.WARN" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.config.Configuration.WEBSITE_URL">
<code class="descname">WEBSITE_URL</code><em class="property"> = u'website'</em><a class="headerlink" href="#core.config.Configuration.WEBSITE_URL" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="classmethod">
<dt id="core.config.Configuration.app_version">
<em class="property">classmethod </em><code class="descname">app_version</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/config.html#Configuration.app_version"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.config.Configuration.app_version" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the git version of the app, if a .version file exists.</p>
</dd></dl>

<dl class="classmethod">
<dt id="core.config.Configuration.cdns">
<em class="property">classmethod </em><code class="descname">cdns</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/config.html#Configuration.cdns"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.config.Configuration.cdns" title="Permalink to this definition">¶</a></dt>
<dd><p>Get CDN configuration, loading it from the database
if necessary.</p>
</dd></dl>

<dl class="classmethod">
<dt id="core.config.Configuration.cdns_loaded_from_database">
<em class="property">classmethod </em><code class="descname">cdns_loaded_from_database</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/config.html#Configuration.cdns_loaded_from_database"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.config.Configuration.cdns_loaded_from_database" title="Permalink to this definition">¶</a></dt>
<dd><p>Has the site configuration been loaded from the database yet?</p>
</dd></dl>

<dl class="classmethod">
<dt id="core.config.Configuration.data_directory">
<em class="property">classmethod </em><code class="descname">data_directory</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/config.html#Configuration.data_directory"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.config.Configuration.data_directory" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="classmethod">
<dt id="core.config.Configuration.database_url">
<em class="property">classmethod </em><code class="descname">database_url</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/config.html#Configuration.database_url"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.config.Configuration.database_url" title="Permalink to this definition">¶</a></dt>
<dd><p>Find the database URL configured for this site.</p>
<p>For compatibility with old configurations, we will look in the
site configuration first.</p>
<p>If it’s not there, we will look in the appropriate environment
variable.</p>
</dd></dl>

<dl class="attribute">
<dt id="core.config.Configuration.description">
<code class="descname">description</code><em class="property"> = l'Allow patrons to filter collection to'</em><a class="headerlink" href="#core.config.Configuration.description" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.config.Configuration.display_name">
<code class="descname">display_name</code><em class="property"> = l'Collection'</em><a class="headerlink" href="#core.config.Configuration.display_name" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.config.Configuration.entrypoint">
<code class="descname">entrypoint</code><a class="headerlink" href="#core.config.Configuration.entrypoint" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <a class="reference internal" href="#core.entrypoint.AudiobooksEntryPoint" title="core.entrypoint.AudiobooksEntryPoint"><code class="xref py py-class docutils literal notranslate"><span class="pre">core.entrypoint.AudiobooksEntryPoint</span></code></a></p>
</dd></dl>

<dl class="attribute">
<dt id="core.config.Configuration.facet">
<code class="descname">facet</code><em class="property"> = 'featured'</em><a class="headerlink" href="#core.config.Configuration.facet" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="classmethod">
<dt id="core.config.Configuration.get">
<em class="property">classmethod </em><code class="descname">get</code><span class="sig-paren">(</span><em>key</em>, <em>default=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/config.html#Configuration.get"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.config.Configuration.get" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.config.Configuration.group">
<code class="descname">group</code><em class="property"> = 'collection'</em><a class="headerlink" href="#core.config.Configuration.group" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.config.Configuration.instance">
<code class="descname">instance</code><em class="property"> = {}</em><a class="headerlink" href="#core.config.Configuration.instance" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="classmethod">
<dt id="core.config.Configuration.integration">
<em class="property">classmethod </em><code class="descname">integration</code><span class="sig-paren">(</span><em>name</em>, <em>required=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/config.html#Configuration.integration"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.config.Configuration.integration" title="Permalink to this definition">¶</a></dt>
<dd><p>Find an integration configuration by name.</p>
</dd></dl>

<dl class="classmethod">
<dt id="core.config.Configuration.integration_url">
<em class="property">classmethod </em><code class="descname">integration_url</code><span class="sig-paren">(</span><em>name</em>, <em>required=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/config.html#Configuration.integration_url"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.config.Configuration.integration_url" title="Permalink to this definition">¶</a></dt>
<dd><p>Find the URL to an integration.</p>
</dd></dl>

<dl class="classmethod">
<dt id="core.config.Configuration.last_checked_for_site_configuration_update">
<em class="property">classmethod </em><code class="descname">last_checked_for_site_configuration_update</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/config.html#Configuration.last_checked_for_site_configuration_update"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.config.Configuration.last_checked_for_site_configuration_update" title="Permalink to this definition">¶</a></dt>
<dd><p>When was the last time we actually checked when the database
was updated?</p>
</dd></dl>

<dl class="classmethod">
<dt id="core.config.Configuration.load">
<em class="property">classmethod </em><code class="descname">load</code><span class="sig-paren">(</span><em>_db=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/config.html#Configuration.load"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.config.Configuration.load" title="Permalink to this definition">¶</a></dt>
<dd><p>Load configuration information from the filesystem, and
(optionally) from the database.</p>
</dd></dl>

<dl class="classmethod">
<dt id="core.config.Configuration.load_cdns">
<em class="property">classmethod </em><code class="descname">load_cdns</code><span class="sig-paren">(</span><em>_db</em>, <em>config_instance=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/config.html#Configuration.load_cdns"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.config.Configuration.load_cdns" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="classmethod">
<dt id="core.config.Configuration.load_from_file">
<em class="property">classmethod </em><code class="descname">load_from_file</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/config.html#Configuration.load_from_file"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.config.Configuration.load_from_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Load additional site configuration from a config file.</p>
<p>This is being phased out in favor of taking all configuration from a
database.</p>
</dd></dl>

<dl class="classmethod">
<dt id="core.config.Configuration.localization_languages">
<em class="property">classmethod </em><code class="descname">localization_languages</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/config.html#Configuration.localization_languages"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.config.Configuration.localization_languages" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.config.Configuration.log">
<code class="descname">log</code><em class="property"> = &lt;logging.Logger object&gt;</em><a class="headerlink" href="#core.config.Configuration.log" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="classmethod">
<dt id="core.config.Configuration.policy">
<em class="property">classmethod </em><code class="descname">policy</code><span class="sig-paren">(</span><em>name</em>, <em>default=None</em>, <em>required=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/config.html#Configuration.policy"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.config.Configuration.policy" title="Permalink to this definition">¶</a></dt>
<dd><p>Find a policy configuration by name.</p>
</dd></dl>

<dl class="classmethod">
<dt id="core.config.Configuration.required">
<em class="property">classmethod </em><code class="descname">required</code><span class="sig-paren">(</span><em>key</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/config.html#Configuration.required"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.config.Configuration.required" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="classmethod">
<dt id="core.config.Configuration.site_configuration_last_update">
<em class="property">classmethod </em><code class="descname">site_configuration_last_update</code><span class="sig-paren">(</span><em>_db</em>, <em>known_value=None</em>, <em>timeout=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/config.html#Configuration.site_configuration_last_update"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.config.Configuration.site_configuration_last_update" title="Permalink to this definition">¶</a></dt>
<dd><p>Check when the site configuration was last updated.</p>
<p>Updates Configuration.instance[Configuration.SITE_CONFIGURATION_LAST_UPDATE].
It’s the application’s responsibility to periodically check
this value and reload the configuration if appropriate.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>known_value</strong> – We know when the site configuration was
last updated–it’s this timestamp. Use it instead of checking
with the database.</li>
<li><strong>timeout</strong> – We will only call out to the database once in
this number of seconds. If we are asked again before this
number of seconds elapses, we will assume site configuration
has not changed.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">a datetime object.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="core.config.Configuration.x">
<code class="descname">x</code><a class="headerlink" href="#core.config.Configuration.x" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <a class="reference internal" href="#core.entrypoint.EbooksEntryPoint" title="core.entrypoint.EbooksEntryPoint"><code class="xref py py-class docutils literal notranslate"><span class="pre">core.entrypoint.EbooksEntryPoint</span></code></a></p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="core.config.ConfigurationConstants">
<em class="property">class </em><code class="descclassname">core.config.</code><code class="descname">ConfigurationConstants</code><a class="reference internal" href="_modules/core/config.html#ConfigurationConstants"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.config.ConfigurationConstants" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<dl class="attribute">
<dt id="core.config.ConfigurationConstants.DEFAULT_FACET_KEY_PREFIX">
<code class="descname">DEFAULT_FACET_KEY_PREFIX</code><em class="property"> = 'facets_default_'</em><a class="headerlink" href="#core.config.ConfigurationConstants.DEFAULT_FACET_KEY_PREFIX" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.config.ConfigurationConstants.ENABLED_FACETS_KEY_PREFIX">
<code class="descname">ENABLED_FACETS_KEY_PREFIX</code><em class="property"> = 'facets_enabled_'</em><a class="headerlink" href="#core.config.ConfigurationConstants.ENABLED_FACETS_KEY_PREFIX" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="function">
<dt id="core.config.empty_config">
<code class="descclassname">core.config.</code><code class="descname">empty_config</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwds</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/config.html#empty_config"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.config.empty_config" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="core.config.temp_config">
<code class="descclassname">core.config.</code><code class="descname">temp_config</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwds</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/config.html#temp_config"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.config.temp_config" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="module-core.coverage">
<span id="core-coverage-module"></span><h2>core.coverage module<a class="headerlink" href="#module-core.coverage" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="core.coverage.BaseCoverageProvider">
<em class="property">class </em><code class="descclassname">core.coverage.</code><code class="descname">BaseCoverageProvider</code><span class="sig-paren">(</span><em>_db</em>, <em>batch_size=None</em>, <em>cutoff_time=None</em>, <em>registered_only=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/coverage.html#BaseCoverageProvider"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.coverage.BaseCoverageProvider" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Run certain objects through an algorithm. If the algorithm returns
success, add a coverage record for that object, so the object
doesn’t need to be processed again. If the algorithm returns a
CoverageFailure, that failure may itself be memorialized as a
coverage record.</p>
<p>Instead of instantiating this class directly, subclass one of its
subclasses: either IdentifierCoverageProvider or
WorkCoverageProvider.</p>
<p>In IdentifierCoverageProvider the ‘objects’ are Identifier objects
and the coverage records are CoverageRecord objects. In
WorkCoverageProvider the ‘objects’ are Work objects and the
coverage records are WorkCoverageRecord objects.</p>
<dl class="attribute">
<dt id="core.coverage.BaseCoverageProvider.DEFAULT_BATCH_SIZE">
<code class="descname">DEFAULT_BATCH_SIZE</code><em class="property"> = 100</em><a class="headerlink" href="#core.coverage.BaseCoverageProvider.DEFAULT_BATCH_SIZE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.coverage.BaseCoverageProvider.OPERATION">
<code class="descname">OPERATION</code><em class="property"> = None</em><a class="headerlink" href="#core.coverage.BaseCoverageProvider.OPERATION" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.coverage.BaseCoverageProvider.SERVICE_NAME">
<code class="descname">SERVICE_NAME</code><em class="property"> = None</em><a class="headerlink" href="#core.coverage.BaseCoverageProvider.SERVICE_NAME" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="core.coverage.BaseCoverageProvider.add_coverage_record_for">
<code class="descname">add_coverage_record_for</code><span class="sig-paren">(</span><em>item</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/coverage.html#BaseCoverageProvider.add_coverage_record_for"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.coverage.BaseCoverageProvider.add_coverage_record_for" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a coverage record for the given item.</p>
<p>Implemented in IdentifierCoverageProvider and WorkCoverageProvider.</p>
</dd></dl>

<dl class="method">
<dt id="core.coverage.BaseCoverageProvider.add_coverage_records_for">
<code class="descname">add_coverage_records_for</code><span class="sig-paren">(</span><em>items</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/coverage.html#BaseCoverageProvider.add_coverage_records_for"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.coverage.BaseCoverageProvider.add_coverage_records_for" title="Permalink to this definition">¶</a></dt>
<dd><p>Add CoverageRecords for a group of items from a batch,
each of which was successful.</p>
</dd></dl>

<dl class="attribute">
<dt id="core.coverage.BaseCoverageProvider.collection">
<code class="descname">collection</code><a class="headerlink" href="#core.coverage.BaseCoverageProvider.collection" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve the Collection object associated with this
CoverageProvider.</p>
</dd></dl>

<dl class="method">
<dt id="core.coverage.BaseCoverageProvider.failure_for_ignored_item">
<code class="descname">failure_for_ignored_item</code><span class="sig-paren">(</span><em>work</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/coverage.html#BaseCoverageProvider.failure_for_ignored_item"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.coverage.BaseCoverageProvider.failure_for_ignored_item" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a CoverageFailure recording the coverage provider’s
failure to even try to process an item.</p>
<p>Implemented in IdentifierCoverageProvider and
WorkCoverageProvider.</p>
</dd></dl>

<dl class="method">
<dt id="core.coverage.BaseCoverageProvider.finalize_batch">
<code class="descname">finalize_batch</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/coverage.html#BaseCoverageProvider.finalize_batch"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.coverage.BaseCoverageProvider.finalize_batch" title="Permalink to this definition">¶</a></dt>
<dd><p>Do whatever is necessary to complete this batch before moving on to
the next one.</p>
<p>e.g. committing the database session or uploading a bunch of
assets to S3.</p>
</dd></dl>

<dl class="method">
<dt id="core.coverage.BaseCoverageProvider.finalize_timestampdata">
<code class="descname">finalize_timestampdata</code><span class="sig-paren">(</span><em>timestamp</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/coverage.html#BaseCoverageProvider.finalize_timestampdata"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.coverage.BaseCoverageProvider.finalize_timestampdata" title="Permalink to this definition">¶</a></dt>
<dd><p>Finalize the given TimestampData and write it to the
database.</p>
</dd></dl>

<dl class="method">
<dt id="core.coverage.BaseCoverageProvider.handle_success">
<code class="descname">handle_success</code><span class="sig-paren">(</span><em>item</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/coverage.html#BaseCoverageProvider.handle_success"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.coverage.BaseCoverageProvider.handle_success" title="Permalink to this definition">¶</a></dt>
<dd><p>Do something special to mark the successful coverage of the
given item.</p>
</dd></dl>

<dl class="method">
<dt id="core.coverage.BaseCoverageProvider.items_that_need_coverage">
<code class="descname">items_that_need_coverage</code><span class="sig-paren">(</span><em>identifiers=None</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/coverage.html#BaseCoverageProvider.items_that_need_coverage"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.coverage.BaseCoverageProvider.items_that_need_coverage" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a database query returning only those items that
need coverage.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>subset</strong> – A list of Identifier objects. If present, return
only items that need coverage <em>and</em> are associated with one
of these identifiers.</td>
</tr>
</tbody>
</table>
<p>Implemented in CoverageProvider and WorkCoverageProvider.</p>
</dd></dl>

<dl class="attribute">
<dt id="core.coverage.BaseCoverageProvider.log">
<code class="descname">log</code><a class="headerlink" href="#core.coverage.BaseCoverageProvider.log" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.coverage.BaseCoverageProvider.operation">
<code class="descname">operation</code><a class="headerlink" href="#core.coverage.BaseCoverageProvider.operation" title="Permalink to this definition">¶</a></dt>
<dd><p>Which operation should this CoverageProvider use to
distinguish between multiple CoverageRecords from the same data
source?</p>
</dd></dl>

<dl class="method">
<dt id="core.coverage.BaseCoverageProvider.process_batch">
<code class="descname">process_batch</code><span class="sig-paren">(</span><em>batch</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/coverage.html#BaseCoverageProvider.process_batch"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.coverage.BaseCoverageProvider.process_batch" title="Permalink to this definition">¶</a></dt>
<dd><p>Do what it takes to give coverage records to a batch of
items.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">A mixed list of coverage records and CoverageFailures.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="core.coverage.BaseCoverageProvider.process_batch_and_handle_results">
<code class="descname">process_batch_and_handle_results</code><span class="sig-paren">(</span><em>batch</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/coverage.html#BaseCoverageProvider.process_batch_and_handle_results"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.coverage.BaseCoverageProvider.process_batch_and_handle_results" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">A 2-tuple (counts, records).</td>
</tr>
</tbody>
</table>
<p><cite>counts</cite> is a 3-tuple (successes, transient failures,
persistent_failures).</p>
<p><cite>records</cite> is a mixed list of coverage record objects (for
successes and persistent failures) and CoverageFailure objects
(for transient failures).</p>
</dd></dl>

<dl class="method">
<dt id="core.coverage.BaseCoverageProvider.process_item">
<code class="descname">process_item</code><span class="sig-paren">(</span><em>item</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/coverage.html#BaseCoverageProvider.process_item"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.coverage.BaseCoverageProvider.process_item" title="Permalink to this definition">¶</a></dt>
<dd><p>Do the work necessary to give coverage to one specific item.</p>
<p>Since this is where the actual work happens, this is not
implemented in IdentifierCoverageProvider or
WorkCoverageProvider, and must be handled in a subclass.</p>
</dd></dl>

<dl class="method">
<dt id="core.coverage.BaseCoverageProvider.record_failure_as_coverage_record">
<code class="descname">record_failure_as_coverage_record</code><span class="sig-paren">(</span><em>failure</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/coverage.html#BaseCoverageProvider.record_failure_as_coverage_record"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.coverage.BaseCoverageProvider.record_failure_as_coverage_record" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert the given CoverageFailure to a coverage record.</p>
<p>Implemented in IdentifierCoverageProvider and WorkCoverageProvider.</p>
</dd></dl>

<dl class="method">
<dt id="core.coverage.BaseCoverageProvider.run">
<code class="descname">run</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/coverage.html#BaseCoverageProvider.run"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.coverage.BaseCoverageProvider.run" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="core.coverage.BaseCoverageProvider.run_once">
<code class="descname">run_once</code><span class="sig-paren">(</span><em>progress</em>, <em>count_as_covered=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/coverage.html#BaseCoverageProvider.run_once"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.coverage.BaseCoverageProvider.run_once" title="Permalink to this definition">¶</a></dt>
<dd><p>Try to grant coverage to a number of uncovered items.</p>
<p>NOTE: If you override this method, it’s very important that
your implementation eventually do one of the following:
* Set progress.finish
* Set progress.exception
* Raise an exception</p>
<p>If you don’t do any of these things, run() will assume you still
have work to do, and will keep calling run_once() forever.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>progress</strong> – A CoverageProviderProgress representing the
progress made so far, and the number of records that
need to be ignored for the rest of the run.</li>
<li><strong>count_as_covered</strong> – Which values for CoverageRecord.status
should count as meaning ‘already covered’.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">A CoverageProviderProgress representing whatever
additional progress has been made.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="core.coverage.BaseCoverageProvider.run_once_and_update_timestamp">
<code class="descname">run_once_and_update_timestamp</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/coverage.html#BaseCoverageProvider.run_once_and_update_timestamp"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.coverage.BaseCoverageProvider.run_once_and_update_timestamp" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="core.coverage.BaseCoverageProvider.should_update">
<code class="descname">should_update</code><span class="sig-paren">(</span><em>coverage_record</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/coverage.html#BaseCoverageProvider.should_update"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.coverage.BaseCoverageProvider.should_update" title="Permalink to this definition">¶</a></dt>
<dd><p>Should we do the work to update the given coverage record?</p>
</dd></dl>

<dl class="attribute">
<dt id="core.coverage.BaseCoverageProvider.timestamp">
<code class="descname">timestamp</code><a class="headerlink" href="#core.coverage.BaseCoverageProvider.timestamp" title="Permalink to this definition">¶</a></dt>
<dd><p>Look up the Timestamp object for this CoverageProvider.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="core.coverage.BibliographicCoverageProvider">
<em class="property">class </em><code class="descclassname">core.coverage.</code><code class="descname">BibliographicCoverageProvider</code><span class="sig-paren">(</span><em>collection</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/coverage.html#BibliographicCoverageProvider"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.coverage.BibliographicCoverageProvider" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.coverage.CollectionCoverageProvider" title="core.coverage.CollectionCoverageProvider"><code class="xref py py-class docutils literal notranslate"><span class="pre">core.coverage.CollectionCoverageProvider</span></code></a></p>
<p>Fill in bibliographic metadata for all books in a Collection.</p>
<p>e.g. ensures that we get Overdrive coverage for all Overdrive IDs
in a collection.</p>
<p>Although a BibliographicCoverageProvider may gather
CirculationData for a book, it cannot guarantee equal coverage for
all Collections that contain that book. CirculationData should be
limited to things like formats that don’t vary between
Collections, and you should use a CollectionMonitor to make sure
your circulation information is up-to-date for each Collection.</p>
<dl class="method">
<dt id="core.coverage.BibliographicCoverageProvider.handle_success">
<code class="descname">handle_success</code><span class="sig-paren">(</span><em>identifier</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/coverage.html#BibliographicCoverageProvider.handle_success"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.coverage.BibliographicCoverageProvider.handle_success" title="Permalink to this definition">¶</a></dt>
<dd><p>Once a book has bibliographic coverage, it can be given a
work and made presentation ready.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="core.coverage.CatalogCoverageProvider">
<em class="property">class </em><code class="descclassname">core.coverage.</code><code class="descname">CatalogCoverageProvider</code><span class="sig-paren">(</span><em>collection</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/coverage.html#CatalogCoverageProvider"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.coverage.CatalogCoverageProvider" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.coverage.CollectionCoverageProvider" title="core.coverage.CollectionCoverageProvider"><code class="xref py py-class docutils literal notranslate"><span class="pre">core.coverage.CollectionCoverageProvider</span></code></a></p>
<p>Most CollectionCoverageProviders provide coverage to Identifiers
that are licensed through a given Collection.</p>
<p>A CatalogCoverageProvider provides coverage to Identifiers that
are present in a given Collection’s catalog.</p>
<dl class="method">
<dt id="core.coverage.CatalogCoverageProvider.items_that_need_coverage">
<code class="descname">items_that_need_coverage</code><span class="sig-paren">(</span><em>identifiers=None</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/coverage.html#CatalogCoverageProvider.items_that_need_coverage"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.coverage.CatalogCoverageProvider.items_that_need_coverage" title="Permalink to this definition">¶</a></dt>
<dd><p>Find all Identifiers in this Collection’s catalog but lacking
coverage through this CoverageProvider.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="core.coverage.CollectionCoverageProvider">
<em class="property">class </em><code class="descclassname">core.coverage.</code><code class="descname">CollectionCoverageProvider</code><span class="sig-paren">(</span><em>collection</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/coverage.html#CollectionCoverageProvider"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.coverage.CollectionCoverageProvider" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.coverage.IdentifierCoverageProvider" title="core.coverage.IdentifierCoverageProvider"><code class="xref py py-class docutils literal notranslate"><span class="pre">core.coverage.IdentifierCoverageProvider</span></code></a></p>
<p>A CoverageProvider that covers all the Identifiers currently
licensed to a given Collection.</p>
<p>You should subclass this CoverageProvider if you want to create
Works (as opposed to operating on existing Works) or update the
circulation information for LicensePools. You can’t use it to
create new LicensePools, since it only operates on Identifiers
that already have a LicencePool in the given Collection.</p>
<p>If a book shows up in multiple Collections, the first Collection
to process it takes care of it for the others. Any books that were
processed through their membership in another Collection will be
left alone.</p>
<p>For this reason it’s important that subclasses of this
CoverageProvider only deal with bibliographic information and
format availability information (such as links to open-access
downloads). You’ll have problems if you try to use
CollectionCoverageProvider to keep track of information like the
number of licenses available for a book.</p>
<p>In addition to defining the class variables defined by
CoverageProvider, you must define the class variable PROTOCOL when
subclassing this class. This is the entity that provides the
licenses for this Collection. It should be one of the
collection-type provider constants defined in the
<cite>ExternalIntegration</cite> class, such as
ExternalIntegration.OPDS_IMPORT or ExternalIntegration.OVERDRIVE.</p>
<dl class="attribute">
<dt id="core.coverage.CollectionCoverageProvider.DEFAULT_BATCH_SIZE">
<code class="descname">DEFAULT_BATCH_SIZE</code><em class="property"> = 10</em><a class="headerlink" href="#core.coverage.CollectionCoverageProvider.DEFAULT_BATCH_SIZE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.coverage.CollectionCoverageProvider.EXCLUDE_SEARCH_INDEX">
<code class="descname">EXCLUDE_SEARCH_INDEX</code><em class="property"> = False</em><a class="headerlink" href="#core.coverage.CollectionCoverageProvider.EXCLUDE_SEARCH_INDEX" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.coverage.CollectionCoverageProvider.INPUT_IDENTIFIER_TYPES">
<code class="descname">INPUT_IDENTIFIER_TYPES</code><em class="property"> = None</em><a class="headerlink" href="#core.coverage.CollectionCoverageProvider.INPUT_IDENTIFIER_TYPES" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.coverage.CollectionCoverageProvider.PROTOCOL">
<code class="descname">PROTOCOL</code><em class="property"> = None</em><a class="headerlink" href="#core.coverage.CollectionCoverageProvider.PROTOCOL" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="classmethod">
<dt id="core.coverage.CollectionCoverageProvider.all">
<em class="property">classmethod </em><code class="descname">all</code><span class="sig-paren">(</span><em>_db</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/coverage.html#CollectionCoverageProvider.all"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.coverage.CollectionCoverageProvider.all" title="Permalink to this definition">¶</a></dt>
<dd><p>Yield a sequence of CollectionCoverageProvider instances, one for
every Collection that gets its licenses from cls.PROTOCOL.</p>
<p>CollectionCoverageProviders will be yielded in a random order.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>kwargs</strong> – Keyword arguments passed into the constructor for
CollectionCoverageProvider (or, more likely, one of its subclasses).</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="classmethod">
<dt id="core.coverage.CollectionCoverageProvider.collections">
<em class="property">classmethod </em><code class="descname">collections</code><span class="sig-paren">(</span><em>_db</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/coverage.html#CollectionCoverageProvider.collections"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.coverage.CollectionCoverageProvider.collections" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a list of randomly sorted list of collections covered by the
provider.</p>
</dd></dl>

<dl class="method">
<dt id="core.coverage.CollectionCoverageProvider.items_that_need_coverage">
<code class="descname">items_that_need_coverage</code><span class="sig-paren">(</span><em>identifiers=None</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/coverage.html#CollectionCoverageProvider.items_that_need_coverage"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.coverage.CollectionCoverageProvider.items_that_need_coverage" title="Permalink to this definition">¶</a></dt>
<dd><p>Find all Identifiers associated with this Collection but lacking
coverage through this CoverageProvider.</p>
</dd></dl>

<dl class="method">
<dt id="core.coverage.CollectionCoverageProvider.license_pool">
<code class="descname">license_pool</code><span class="sig-paren">(</span><em>identifier</em>, <em>data_source=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/coverage.html#CollectionCoverageProvider.license_pool"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.coverage.CollectionCoverageProvider.license_pool" title="Permalink to this definition">¶</a></dt>
<dd><p>Finds this Collection’s LicensePool for the given Identifier,
creating one if necessary.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>data_source</strong> – If it’s necessary to create a LicensePool,
the new LicensePool will have this DataSource. The default is to
use the DataSource associated with the CoverageProvider. This
should only be needed by the metadata wrangler.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="core.coverage.CollectionCoverageProvider.run_once">
<code class="descname">run_once</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/coverage.html#CollectionCoverageProvider.run_once"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.coverage.CollectionCoverageProvider.run_once" title="Permalink to this definition">¶</a></dt>
<dd><p>Try to grant coverage to a number of uncovered items.</p>
<p>NOTE: If you override this method, it’s very important that
your implementation eventually do one of the following:
* Set progress.finish
* Set progress.exception
* Raise an exception</p>
<p>If you don’t do any of these things, run() will assume you still
have work to do, and will keep calling run_once() forever.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>progress</strong> – A CoverageProviderProgress representing the
progress made so far, and the number of records that
need to be ignored for the rest of the run.</li>
<li><strong>count_as_covered</strong> – Which values for CoverageRecord.status
should count as meaning ‘already covered’.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">A CoverageProviderProgress representing whatever
additional progress has been made.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="core.coverage.CollectionCoverageProvider.set_metadata_and_circulation_data">
<code class="descname">set_metadata_and_circulation_data</code><span class="sig-paren">(</span><em>identifier</em>, <em>metadata</em>, <em>circulationdata</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/coverage.html#CollectionCoverageProvider.set_metadata_and_circulation_data"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.coverage.CollectionCoverageProvider.set_metadata_and_circulation_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Makes sure that the given Identifier has a Work, Edition (in the
context of this Collection), and LicensePool (ditto), and that
all the information is up to date.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">The Identifier (if successful) or an appropriate
CoverageFailure (if not).</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="core.coverage.CollectionCoverageProvider.set_presentation_ready">
<code class="descname">set_presentation_ready</code><span class="sig-paren">(</span><em>identifier</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/coverage.html#CollectionCoverageProvider.set_presentation_ready"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.coverage.CollectionCoverageProvider.set_presentation_ready" title="Permalink to this definition">¶</a></dt>
<dd><p>Set a Work presentation-ready.</p>
</dd></dl>

<dl class="method">
<dt id="core.coverage.CollectionCoverageProvider.work">
<code class="descname">work</code><span class="sig-paren">(</span><em>identifier</em>, <em>license_pool=None</em>, <em>**calculate_work_kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/coverage.html#CollectionCoverageProvider.work"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.coverage.CollectionCoverageProvider.work" title="Permalink to this definition">¶</a></dt>
<dd><p>Finds or creates a Work for this Identifier as licensed through
this Collection.</p>
<p>If the given Identifier already has a Work associated with it,
that Work will always be used, since an Identifier can only have one
Work associated with it.</p>
<p>However, if there is no current Work, a Work will only be
created if the given Identifier already has a LicensePool in
the Collection associated with this CoverageProvider (or if a
LicensePool to use is provided.) This method will not create
new LicensePools.</p>
<p>If the work is newly created or an existing work is not
presentation-ready, a new Work will be created by calling
LicensePool.calculate_work(). If there is an existing
presentation-ready work, calculate_work() will not be called;
instead, the work will be slated for recalculation when its
metadata changes through Metadata.apply().</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>calculate_work_kwargs</strong> – Keyword arguments to pass into
calculate_work() if and when it is called.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">A Work, if possible. Otherwise, a CoverageFailure explaining
why no Work could be created.</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="core.coverage.CollectionCoverageProviderJob">
<em class="property">class </em><code class="descclassname">core.coverage.</code><code class="descname">CollectionCoverageProviderJob</code><span class="sig-paren">(</span><em>collection</em>, <em>provider_class</em>, <em>progress</em>, <em>**provider_kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/coverage.html#CollectionCoverageProviderJob"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.coverage.CollectionCoverageProviderJob" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="core.util.html#core.util.worker_pools.DatabaseJob" title="core.util.worker_pools.DatabaseJob"><code class="xref py py-class docutils literal notranslate"><span class="pre">core.util.worker_pools.DatabaseJob</span></code></a></p>
<dl class="method">
<dt id="core.coverage.CollectionCoverageProviderJob.run">
<code class="descname">run</code><span class="sig-paren">(</span><em>_db</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/coverage.html#CollectionCoverageProviderJob.run"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.coverage.CollectionCoverageProviderJob.run" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="core.coverage.CoverageFailure">
<em class="property">class </em><code class="descclassname">core.coverage.</code><code class="descname">CoverageFailure</code><span class="sig-paren">(</span><em>obj</em>, <em>exception</em>, <em>data_source=None</em>, <em>transient=True</em>, <em>collection=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/coverage.html#CoverageFailure"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.coverage.CoverageFailure" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Object representing the failure to provide coverage.</p>
<dl class="method">
<dt id="core.coverage.CoverageFailure.to_coverage_record">
<code class="descname">to_coverage_record</code><span class="sig-paren">(</span><em>operation=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/coverage.html#CoverageFailure.to_coverage_record"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.coverage.CoverageFailure.to_coverage_record" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert this failure into a CoverageRecord.</p>
</dd></dl>

<dl class="method">
<dt id="core.coverage.CoverageFailure.to_work_coverage_record">
<code class="descname">to_work_coverage_record</code><span class="sig-paren">(</span><em>operation</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/coverage.html#CoverageFailure.to_work_coverage_record"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.coverage.CoverageFailure.to_work_coverage_record" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert this failure into a WorkCoverageRecord.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="core.coverage.CoverageProviderProgress">
<em class="property">class </em><code class="descclassname">core.coverage.</code><code class="descname">CoverageProviderProgress</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/coverage.html#CoverageProviderProgress"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.coverage.CoverageProviderProgress" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.metadata_layer.TimestampData" title="core.metadata_layer.TimestampData"><code class="xref py py-class docutils literal notranslate"><span class="pre">core.metadata_layer.TimestampData</span></code></a></p>
<p>A TimestampData optimized for the special needs of
CoverageProviders.</p>
<dl class="attribute">
<dt id="core.coverage.CoverageProviderProgress.achievements">
<code class="descname">achievements</code><a class="headerlink" href="#core.coverage.CoverageProviderProgress.achievements" title="Permalink to this definition">¶</a></dt>
<dd><p>Represent the achievements of a CoverageProvider as a
human-readable string.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="core.coverage.IdentifierCoverageProvider">
<em class="property">class </em><code class="descclassname">core.coverage.</code><code class="descname">IdentifierCoverageProvider</code><span class="sig-paren">(</span><em>_db</em>, <em>collection=None</em>, <em>input_identifiers=None</em>, <em>replacement_policy=None</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/coverage.html#IdentifierCoverageProvider"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.coverage.IdentifierCoverageProvider" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.coverage.BaseCoverageProvider" title="core.coverage.BaseCoverageProvider"><code class="xref py py-class docutils literal notranslate"><span class="pre">core.coverage.BaseCoverageProvider</span></code></a></p>
<p>Run Identifiers of certain types (ISBN, Overdrive, OCLC Number,
etc.) through an algorithm associated with a certain DataSource.</p>
<p>This class is designed to be subclassed rather than instantiated
directly. Subclasses should define SERVICE_NAME, OPERATION
(optional), DATA_SOURCE_NAME, and
INPUT_IDENTIFIER_TYPES. SERVICE_NAME and OPERATION are described
in BaseCoverageProvider; the rest are described in appropriate
comments in this class.</p>
<dl class="attribute">
<dt id="core.coverage.IdentifierCoverageProvider.COVERAGE_COUNTS_FOR_EVERY_COLLECTION">
<code class="descname">COVERAGE_COUNTS_FOR_EVERY_COLLECTION</code><em class="property"> = True</em><a class="headerlink" href="#core.coverage.IdentifierCoverageProvider.COVERAGE_COUNTS_FOR_EVERY_COLLECTION" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.coverage.IdentifierCoverageProvider.DATA_SOURCE_NAME">
<code class="descname">DATA_SOURCE_NAME</code><em class="property"> = None</em><a class="headerlink" href="#core.coverage.IdentifierCoverageProvider.DATA_SOURCE_NAME" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.coverage.IdentifierCoverageProvider.INPUT_IDENTIFIER_TYPES">
<code class="descname">INPUT_IDENTIFIER_TYPES</code><em class="property"> = &lt;object object&gt;</em><a class="headerlink" href="#core.coverage.IdentifierCoverageProvider.INPUT_IDENTIFIER_TYPES" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.coverage.IdentifierCoverageProvider.NO_SPECIFIED_TYPES">
<code class="descname">NO_SPECIFIED_TYPES</code><em class="property"> = &lt;object object&gt;</em><a class="headerlink" href="#core.coverage.IdentifierCoverageProvider.NO_SPECIFIED_TYPES" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="core.coverage.IdentifierCoverageProvider.add_coverage_record_for">
<code class="descname">add_coverage_record_for</code><span class="sig-paren">(</span><em>item</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/coverage.html#IdentifierCoverageProvider.add_coverage_record_for"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.coverage.IdentifierCoverageProvider.add_coverage_record_for" title="Permalink to this definition">¶</a></dt>
<dd><p>Record this CoverageProvider’s coverage for the given
Edition/Identifier, as a CoverageRecord.</p>
</dd></dl>

<dl class="classmethod">
<dt id="core.coverage.IdentifierCoverageProvider.bulk_register">
<em class="property">classmethod </em><code class="descname">bulk_register</code><span class="sig-paren">(</span><em>identifiers</em>, <em>data_source=None</em>, <em>collection=None</em>, <em>force=False</em>, <em>autocreate=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/coverage.html#IdentifierCoverageProvider.bulk_register"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.coverage.IdentifierCoverageProvider.bulk_register" title="Permalink to this definition">¶</a></dt>
<dd><p>Registers identifiers for future coverage.</p>
<p>This method is primarily for use with CoverageProviders that use the
<cite>registered_only</cite> flag to process items. It’s currently only in use
on the Metadata Wrangler.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>data_source</strong> – DataSource object or basestring representing a
DataSource name.</li>
<li><strong>collection</strong> – Collection object to be associated with the
CoverageRecords.</li>
<li><strong>force</strong> – When True, even existing CoverageRecords will have
their status reset to CoverageRecord.REGISTERED.</li>
<li><strong>autocreate</strong> – When True, a basestring provided by data_source will
be autocreated in the database if it didn’t previously exist.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">A tuple of two lists: the first has fresh new REGISTERED
CoverageRecords and the second list already has Identifiers that
were ignored because they already had coverage.</p>
</td>
</tr>
</tbody>
</table>
<p>TODO: Take identifier eligibility into account when registering.</p>
</dd></dl>

<dl class="method">
<dt id="core.coverage.IdentifierCoverageProvider.can_cover">
<code class="descname">can_cover</code><span class="sig-paren">(</span><em>identifier</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/coverage.html#IdentifierCoverageProvider.can_cover"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.coverage.IdentifierCoverageProvider.can_cover" title="Permalink to this definition">¶</a></dt>
<dd><p>Can this IdentifierCoverageProvider do anything with the given
Identifier?</p>
<p>This is not needed in the normal course of events, but a
caller may need to decide whether to pass an Identifier
into ensure_coverage() or register().</p>
</dd></dl>

<dl class="attribute">
<dt id="core.coverage.IdentifierCoverageProvider.collection_or_not">
<code class="descname">collection_or_not</code><a class="headerlink" href="#core.coverage.IdentifierCoverageProvider.collection_or_not" title="Permalink to this definition">¶</a></dt>
<dd><p>If this CoverageProvider needs to be run multiple times on
the same identifier in different collections, this
returns the collection. Otherwise, this returns None.</p>
</dd></dl>

<dl class="attribute">
<dt id="core.coverage.IdentifierCoverageProvider.data_source">
<code class="descname">data_source</code><a class="headerlink" href="#core.coverage.IdentifierCoverageProvider.data_source" title="Permalink to this definition">¶</a></dt>
<dd><p>Look up the DataSource object corresponding to the
service we’re running this data through.</p>
<p>Out of an excess of caution, we look up the DataSource every
time, rather than storing it, in case a CoverageProvider is
ever used in an environment where the database session is
scoped (e.g. the circulation manager).</p>
</dd></dl>

<dl class="method">
<dt id="core.coverage.IdentifierCoverageProvider.edition">
<code class="descname">edition</code><span class="sig-paren">(</span><em>identifier</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/coverage.html#IdentifierCoverageProvider.edition"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.coverage.IdentifierCoverageProvider.edition" title="Permalink to this definition">¶</a></dt>
<dd><p>Finds or creates an Edition representing this coverage provider’s
view of a given Identifier.</p>
</dd></dl>

<dl class="method">
<dt id="core.coverage.IdentifierCoverageProvider.ensure_coverage">
<code class="descname">ensure_coverage</code><span class="sig-paren">(</span><em>item</em>, <em>force=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/coverage.html#IdentifierCoverageProvider.ensure_coverage"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.coverage.IdentifierCoverageProvider.ensure_coverage" title="Permalink to this definition">¶</a></dt>
<dd><p>Ensure coverage for one specific item.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>item</strong> – This should always be an Identifier, but this
code will also work if it’s an Edition. (The Edition’s
.primary_identifier will be covered.)</li>
<li><strong>force</strong> – Run the coverage code even if an existing
coverage record for this item was created after <cite>self.cutoff_time</cite>.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">Either a coverage record or a CoverageFailure.</p>
</td>
</tr>
</tbody>
</table>
<p>TODO: This could be abstracted and moved to BaseCoverageProvider.</p>
</dd></dl>

<dl class="method">
<dt id="core.coverage.IdentifierCoverageProvider.failure">
<code class="descname">failure</code><span class="sig-paren">(</span><em>identifier</em>, <em>error</em>, <em>transient=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/coverage.html#IdentifierCoverageProvider.failure"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.coverage.IdentifierCoverageProvider.failure" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a CoverageFailure object to memorialize an error.</p>
</dd></dl>

<dl class="method">
<dt id="core.coverage.IdentifierCoverageProvider.failure_for_ignored_item">
<code class="descname">failure_for_ignored_item</code><span class="sig-paren">(</span><em>item</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/coverage.html#IdentifierCoverageProvider.failure_for_ignored_item"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.coverage.IdentifierCoverageProvider.failure_for_ignored_item" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a CoverageFailure recording the CoverageProvider’s
failure to even try to process an item.</p>
</dd></dl>

<dl class="method">
<dt id="core.coverage.IdentifierCoverageProvider.items_that_need_coverage">
<code class="descname">items_that_need_coverage</code><span class="sig-paren">(</span><em>identifiers=None</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/coverage.html#IdentifierCoverageProvider.items_that_need_coverage"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.coverage.IdentifierCoverageProvider.items_that_need_coverage" title="Permalink to this definition">¶</a></dt>
<dd><p>Find all items lacking coverage from this CoverageProvider.</p>
<p>Items should be Identifiers, though Editions should also work.</p>
<p>By default, all identifiers of the <cite>INPUT_IDENTIFIER_TYPES</cite> which
don’t already have coverage are chosen.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>identifiers</strong> – The batch of identifier objects to test
for coverage. identifiers and self.input_identifiers can
intersect – if this provider was created for the purpose
of running specific Identifiers, and within those
Identifiers you want to batch, you can use both
parameters.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="core.coverage.IdentifierCoverageProvider.record_failure_as_coverage_record">
<code class="descname">record_failure_as_coverage_record</code><span class="sig-paren">(</span><em>failure</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/coverage.html#IdentifierCoverageProvider.record_failure_as_coverage_record"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.coverage.IdentifierCoverageProvider.record_failure_as_coverage_record" title="Permalink to this definition">¶</a></dt>
<dd><p>Turn a CoverageFailure into a CoverageRecord object.</p>
</dd></dl>

<dl class="classmethod">
<dt id="core.coverage.IdentifierCoverageProvider.register">
<em class="property">classmethod </em><code class="descname">register</code><span class="sig-paren">(</span><em>identifier</em>, <em>data_source=None</em>, <em>collection=None</em>, <em>force=False</em>, <em>autocreate=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/coverage.html#IdentifierCoverageProvider.register"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.coverage.IdentifierCoverageProvider.register" title="Permalink to this definition">¶</a></dt>
<dd><p>Registers an identifier for future coverage.</p>
<p>See <cite>CoverageProvider.bulk_register</cite> for more information about using
this method.</p>
</dd></dl>

<dl class="method">
<dt id="core.coverage.IdentifierCoverageProvider.run_on_specific_identifiers">
<code class="descname">run_on_specific_identifiers</code><span class="sig-paren">(</span><em>identifiers</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/coverage.html#IdentifierCoverageProvider.run_on_specific_identifiers"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.coverage.IdentifierCoverageProvider.run_on_specific_identifiers" title="Permalink to this definition">¶</a></dt>
<dd><p>Split a specific set of Identifiers into batches and process one
batch at a time.</p>
<p>This is for use by IdentifierInputScript.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">The same (counts, records) 2-tuple as
process_batch_and_handle_results.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="core.coverage.IdentifierCoverageProvider.set_metadata">
<code class="descname">set_metadata</code><span class="sig-paren">(</span><em>identifier</em>, <em>metadata</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/coverage.html#IdentifierCoverageProvider.set_metadata"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.coverage.IdentifierCoverageProvider.set_metadata" title="Permalink to this definition">¶</a></dt>
<dd><p>Finds or creates the Edition for an Identifier, updates it
with the given metadata.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">The Identifier (if successful) or an appropriate
CoverageFailure (if not).</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="core.coverage.MARCRecordWorkCoverageProvider">
<em class="property">class </em><code class="descclassname">core.coverage.</code><code class="descname">MARCRecordWorkCoverageProvider</code><span class="sig-paren">(</span><em>_db</em>, <em>batch_size=None</em>, <em>cutoff_time=None</em>, <em>registered_only=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/coverage.html#MARCRecordWorkCoverageProvider"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.coverage.MARCRecordWorkCoverageProvider" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.coverage.WorkPresentationProvider" title="core.coverage.WorkPresentationProvider"><code class="xref py py-class docutils literal notranslate"><span class="pre">core.coverage.WorkPresentationProvider</span></code></a></p>
<p>Make sure all presentation-ready works have an up-to-date MARC
record.</p>
<dl class="attribute">
<dt id="core.coverage.MARCRecordWorkCoverageProvider.DEFAULT_BATCH_SIZE">
<code class="descname">DEFAULT_BATCH_SIZE</code><em class="property"> = 1000</em><a class="headerlink" href="#core.coverage.MARCRecordWorkCoverageProvider.DEFAULT_BATCH_SIZE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.coverage.MARCRecordWorkCoverageProvider.OPERATION">
<code class="descname">OPERATION</code><em class="property"> = u'generate-marc'</em><a class="headerlink" href="#core.coverage.MARCRecordWorkCoverageProvider.OPERATION" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.coverage.MARCRecordWorkCoverageProvider.SERVICE_NAME">
<code class="descname">SERVICE_NAME</code><em class="property"> = 'MARC Record Work Coverage Provider'</em><a class="headerlink" href="#core.coverage.MARCRecordWorkCoverageProvider.SERVICE_NAME" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="core.coverage.MARCRecordWorkCoverageProvider.process_item">
<code class="descname">process_item</code><span class="sig-paren">(</span><em>work</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/coverage.html#MARCRecordWorkCoverageProvider.process_item"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.coverage.MARCRecordWorkCoverageProvider.process_item" title="Permalink to this definition">¶</a></dt>
<dd><p>Do the work necessary to give coverage to one specific item.</p>
<p>Since this is where the actual work happens, this is not
implemented in IdentifierCoverageProvider or
WorkCoverageProvider, and must be handled in a subclass.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="core.coverage.OPDSEntryWorkCoverageProvider">
<em class="property">class </em><code class="descclassname">core.coverage.</code><code class="descname">OPDSEntryWorkCoverageProvider</code><span class="sig-paren">(</span><em>_db</em>, <em>batch_size=None</em>, <em>cutoff_time=None</em>, <em>registered_only=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/coverage.html#OPDSEntryWorkCoverageProvider"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.coverage.OPDSEntryWorkCoverageProvider" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.coverage.WorkPresentationProvider" title="core.coverage.WorkPresentationProvider"><code class="xref py py-class docutils literal notranslate"><span class="pre">core.coverage.WorkPresentationProvider</span></code></a></p>
<p>Make sure all presentation-ready works have an up-to-date OPDS
entry.</p>
<p>This is different from the OPDSEntryCacheMonitor, which sweeps
over all presentation-ready works, even ones which are already
covered.</p>
<dl class="attribute">
<dt id="core.coverage.OPDSEntryWorkCoverageProvider.DEFAULT_BATCH_SIZE">
<code class="descname">DEFAULT_BATCH_SIZE</code><em class="property"> = 1000</em><a class="headerlink" href="#core.coverage.OPDSEntryWorkCoverageProvider.DEFAULT_BATCH_SIZE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.coverage.OPDSEntryWorkCoverageProvider.OPERATION">
<code class="descname">OPERATION</code><em class="property"> = u'generate-opds'</em><a class="headerlink" href="#core.coverage.OPDSEntryWorkCoverageProvider.OPERATION" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.coverage.OPDSEntryWorkCoverageProvider.SERVICE_NAME">
<code class="descname">SERVICE_NAME</code><em class="property"> = 'OPDS Entry Work Coverage Provider'</em><a class="headerlink" href="#core.coverage.OPDSEntryWorkCoverageProvider.SERVICE_NAME" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="core.coverage.OPDSEntryWorkCoverageProvider.process_item">
<code class="descname">process_item</code><span class="sig-paren">(</span><em>work</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/coverage.html#OPDSEntryWorkCoverageProvider.process_item"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.coverage.OPDSEntryWorkCoverageProvider.process_item" title="Permalink to this definition">¶</a></dt>
<dd><p>Do the work necessary to give coverage to one specific item.</p>
<p>Since this is where the actual work happens, this is not
implemented in IdentifierCoverageProvider or
WorkCoverageProvider, and must be handled in a subclass.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="core.coverage.PresentationReadyWorkCoverageProvider">
<em class="property">class </em><code class="descclassname">core.coverage.</code><code class="descname">PresentationReadyWorkCoverageProvider</code><span class="sig-paren">(</span><em>_db</em>, <em>batch_size=None</em>, <em>cutoff_time=None</em>, <em>registered_only=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/coverage.html#PresentationReadyWorkCoverageProvider"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.coverage.PresentationReadyWorkCoverageProvider" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.coverage.WorkCoverageProvider" title="core.coverage.WorkCoverageProvider"><code class="xref py py-class docutils literal notranslate"><span class="pre">core.coverage.WorkCoverageProvider</span></code></a></p>
<p>A WorkCoverageProvider that only covers presentation-ready works.</p>
<dl class="method">
<dt id="core.coverage.PresentationReadyWorkCoverageProvider.items_that_need_coverage">
<code class="descname">items_that_need_coverage</code><span class="sig-paren">(</span><em>identifiers=None</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/coverage.html#PresentationReadyWorkCoverageProvider.items_that_need_coverage"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.coverage.PresentationReadyWorkCoverageProvider.items_that_need_coverage" title="Permalink to this definition">¶</a></dt>
<dd><p>Find all Works lacking coverage from this CoverageProvider.</p>
<p>By default, all Works which don’t already have coverage are
chosen.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Param:</th><td class="field-body">Only Works connected with one of the given identifiers
are chosen.</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="core.coverage.WorkClassificationCoverageProvider">
<em class="property">class </em><code class="descclassname">core.coverage.</code><code class="descname">WorkClassificationCoverageProvider</code><span class="sig-paren">(</span><em>_db</em>, <em>batch_size=None</em>, <em>cutoff_time=None</em>, <em>registered_only=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/coverage.html#WorkClassificationCoverageProvider"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.coverage.WorkClassificationCoverageProvider" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.coverage.WorkPresentationEditionCoverageProvider" title="core.coverage.WorkPresentationEditionCoverageProvider"><code class="xref py py-class docutils literal notranslate"><span class="pre">core.coverage.WorkPresentationEditionCoverageProvider</span></code></a></p>
<p>Calculates the ‘expensive’ parts of a work’s presentation:
classifications, summary, and quality.</p>
<p>We do all three at once because these gathering together all
equivalent identifiers for the work, which can be, by far, the
most expensive part of the work.</p>
<p>This is called ‘classification’ because that’s the most likely use
of this coverage provider. If you want to make sure a bunch of
works get their summaries recalculated, you need to remember that
the coverage record to delete is CLASSIFY_OPERATION.</p>
<dl class="attribute">
<dt id="core.coverage.WorkClassificationCoverageProvider.DEFAULT_BATCH_SIZE">
<code class="descname">DEFAULT_BATCH_SIZE</code><em class="property"> = 20</em><a class="headerlink" href="#core.coverage.WorkClassificationCoverageProvider.DEFAULT_BATCH_SIZE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.coverage.WorkClassificationCoverageProvider.OPERATION">
<code class="descname">OPERATION</code><em class="property"> = u'classify'</em><a class="headerlink" href="#core.coverage.WorkClassificationCoverageProvider.OPERATION" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.coverage.WorkClassificationCoverageProvider.POLICY">
<code class="descname">POLICY</code><em class="property"> = &lt;core.model.PresentationCalculationPolicy object&gt;</em><a class="headerlink" href="#core.coverage.WorkClassificationCoverageProvider.POLICY" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.coverage.WorkClassificationCoverageProvider.SERVICE_NAME">
<code class="descname">SERVICE_NAME</code><em class="property"> = 'Work classification coverage provider'</em><a class="headerlink" href="#core.coverage.WorkClassificationCoverageProvider.SERVICE_NAME" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="core.coverage.WorkCoverageProvider">
<em class="property">class </em><code class="descclassname">core.coverage.</code><code class="descname">WorkCoverageProvider</code><span class="sig-paren">(</span><em>_db</em>, <em>batch_size=None</em>, <em>cutoff_time=None</em>, <em>registered_only=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/coverage.html#WorkCoverageProvider"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.coverage.WorkCoverageProvider" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.coverage.BaseCoverageProvider" title="core.coverage.BaseCoverageProvider"><code class="xref py py-class docutils literal notranslate"><span class="pre">core.coverage.BaseCoverageProvider</span></code></a></p>
<p>Perform coverage operations on Works rather than Identifiers.</p>
<dl class="method">
<dt id="core.coverage.WorkCoverageProvider.add_coverage_record_for">
<code class="descname">add_coverage_record_for</code><span class="sig-paren">(</span><em>work</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/coverage.html#WorkCoverageProvider.add_coverage_record_for"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.coverage.WorkCoverageProvider.add_coverage_record_for" title="Permalink to this definition">¶</a></dt>
<dd><p>Record this CoverageProvider’s coverage for the given
Edition/Identifier, as a WorkCoverageRecord.</p>
</dd></dl>

<dl class="method">
<dt id="core.coverage.WorkCoverageProvider.add_coverage_records_for">
<code class="descname">add_coverage_records_for</code><span class="sig-paren">(</span><em>works</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/coverage.html#WorkCoverageProvider.add_coverage_records_for"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.coverage.WorkCoverageProvider.add_coverage_records_for" title="Permalink to this definition">¶</a></dt>
<dd><p>Add WorkCoverageRecords for a group of works from a batch,
each of which was successful.</p>
</dd></dl>

<dl class="method">
<dt id="core.coverage.WorkCoverageProvider.failure">
<code class="descname">failure</code><span class="sig-paren">(</span><em>work</em>, <em>error</em>, <em>transient=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/coverage.html#WorkCoverageProvider.failure"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.coverage.WorkCoverageProvider.failure" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a CoverageFailure object.</p>
</dd></dl>

<dl class="method">
<dt id="core.coverage.WorkCoverageProvider.failure_for_ignored_item">
<code class="descname">failure_for_ignored_item</code><span class="sig-paren">(</span><em>work</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/coverage.html#WorkCoverageProvider.failure_for_ignored_item"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.coverage.WorkCoverageProvider.failure_for_ignored_item" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a CoverageFailure recording the WorkCoverageProvider’s
failure to even try to process a Work.</p>
</dd></dl>

<dl class="method">
<dt id="core.coverage.WorkCoverageProvider.items_that_need_coverage">
<code class="descname">items_that_need_coverage</code><span class="sig-paren">(</span><em>identifiers=None</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/coverage.html#WorkCoverageProvider.items_that_need_coverage"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.coverage.WorkCoverageProvider.items_that_need_coverage" title="Permalink to this definition">¶</a></dt>
<dd><p>Find all Works lacking coverage from this CoverageProvider.</p>
<p>By default, all Works which don’t already have coverage are
chosen.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Param:</th><td class="field-body">Only Works connected with one of the given identifiers
are chosen.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="core.coverage.WorkCoverageProvider.record_failure_as_coverage_record">
<code class="descname">record_failure_as_coverage_record</code><span class="sig-paren">(</span><em>failure</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/coverage.html#WorkCoverageProvider.record_failure_as_coverage_record"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.coverage.WorkCoverageProvider.record_failure_as_coverage_record" title="Permalink to this definition">¶</a></dt>
<dd><p>Turn a CoverageFailure into a WorkCoverageRecord object.</p>
</dd></dl>

<dl class="classmethod">
<dt id="core.coverage.WorkCoverageProvider.register">
<em class="property">classmethod </em><code class="descname">register</code><span class="sig-paren">(</span><em>work</em>, <em>force=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/coverage.html#WorkCoverageProvider.register"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.coverage.WorkCoverageProvider.register" title="Permalink to this definition">¶</a></dt>
<dd><p>Registers a work for future coverage.</p>
<p>This method is primarily for use with CoverageProviders that use the
<cite>registered_only</cite> flag to process items. It’s currently only in use
on the Metadata Wrangler.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>force</strong> – Set to True to reset an existing CoverageRecord’s status
“registered”, regardless of its current status.</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="core.coverage.WorkPresentationEditionCoverageProvider">
<em class="property">class </em><code class="descclassname">core.coverage.</code><code class="descname">WorkPresentationEditionCoverageProvider</code><span class="sig-paren">(</span><em>_db</em>, <em>batch_size=None</em>, <em>cutoff_time=None</em>, <em>registered_only=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/coverage.html#WorkPresentationEditionCoverageProvider"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.coverage.WorkPresentationEditionCoverageProvider" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.coverage.WorkPresentationProvider" title="core.coverage.WorkPresentationProvider"><code class="xref py py-class docutils literal notranslate"><span class="pre">core.coverage.WorkPresentationProvider</span></code></a></p>
<p>Make sure each Work has an up-to-date presentation edition.</p>
<p>This basically means comparing all the Editions associated with the
Work and building a composite Edition.</p>
<p>Expensive operations – calculating work quality, summary, and genre
classification – are reserved for WorkClassificationCoverageProvider</p>
<dl class="attribute">
<dt id="core.coverage.WorkPresentationEditionCoverageProvider.OPERATION">
<code class="descname">OPERATION</code><em class="property"> = u'choose-edition'</em><a class="headerlink" href="#core.coverage.WorkPresentationEditionCoverageProvider.OPERATION" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.coverage.WorkPresentationEditionCoverageProvider.POLICY">
<code class="descname">POLICY</code><em class="property"> = &lt;core.model.PresentationCalculationPolicy object&gt;</em><a class="headerlink" href="#core.coverage.WorkPresentationEditionCoverageProvider.POLICY" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.coverage.WorkPresentationEditionCoverageProvider.SERVICE_NAME">
<code class="descname">SERVICE_NAME</code><em class="property"> = 'Calculated presentation coverage provider'</em><a class="headerlink" href="#core.coverage.WorkPresentationEditionCoverageProvider.SERVICE_NAME" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="core.coverage.WorkPresentationEditionCoverageProvider.process_item">
<code class="descname">process_item</code><span class="sig-paren">(</span><em>work</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/coverage.html#WorkPresentationEditionCoverageProvider.process_item"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.coverage.WorkPresentationEditionCoverageProvider.process_item" title="Permalink to this definition">¶</a></dt>
<dd><p>Recalculate the presentation for a Work.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="core.coverage.WorkPresentationProvider">
<em class="property">class </em><code class="descclassname">core.coverage.</code><code class="descname">WorkPresentationProvider</code><span class="sig-paren">(</span><em>_db</em>, <em>batch_size=None</em>, <em>cutoff_time=None</em>, <em>registered_only=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/coverage.html#WorkPresentationProvider"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.coverage.WorkPresentationProvider" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.coverage.PresentationReadyWorkCoverageProvider" title="core.coverage.PresentationReadyWorkCoverageProvider"><code class="xref py py-class docutils literal notranslate"><span class="pre">core.coverage.PresentationReadyWorkCoverageProvider</span></code></a></p>
<p>Recalculate some part of presentation for works that are
presentation-ready.</p>
<p>A Work’s presentation is set when it’s made presentation-ready
(thus the name). When that happens, a number of WorkCoverageRecords
are set for that Work.</p>
<p>A migration script may remove a coverage record if it knows a work
needs to have some aspect of its presentation recalculated. These
providers give back the ‘missing’ coverage.</p>
<dl class="attribute">
<dt id="core.coverage.WorkPresentationProvider.DEFAULT_BATCH_SIZE">
<code class="descname">DEFAULT_BATCH_SIZE</code><em class="property"> = 100</em><a class="headerlink" href="#core.coverage.WorkPresentationProvider.DEFAULT_BATCH_SIZE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>
<div class="section" id="module-core.entrypoint">
<span id="core-entrypoint-module"></span><h2>core.entrypoint module<a class="headerlink" href="#module-core.entrypoint" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="core.entrypoint.AudiobooksEntryPoint">
<em class="property">class </em><code class="descclassname">core.entrypoint.</code><code class="descname">AudiobooksEntryPoint</code><a class="reference internal" href="_modules/core/entrypoint.html#AudiobooksEntryPoint"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.entrypoint.AudiobooksEntryPoint" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.entrypoint.MediumEntryPoint" title="core.entrypoint.MediumEntryPoint"><code class="xref py py-class docutils literal notranslate"><span class="pre">core.entrypoint.MediumEntryPoint</span></code></a></p>
<dl class="attribute">
<dt id="core.entrypoint.AudiobooksEntryPoint.INTERNAL_NAME">
<code class="descname">INTERNAL_NAME</code><em class="property"> = 'Audio'</em><a class="headerlink" href="#core.entrypoint.AudiobooksEntryPoint.INTERNAL_NAME" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.entrypoint.AudiobooksEntryPoint.URI">
<code class="descname">URI</code><em class="property"> = u'http://bib.schema.org/Audiobook'</em><a class="headerlink" href="#core.entrypoint.AudiobooksEntryPoint.URI" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="core.entrypoint.EbooksEntryPoint">
<em class="property">class </em><code class="descclassname">core.entrypoint.</code><code class="descname">EbooksEntryPoint</code><a class="reference internal" href="_modules/core/entrypoint.html#EbooksEntryPoint"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.entrypoint.EbooksEntryPoint" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.entrypoint.MediumEntryPoint" title="core.entrypoint.MediumEntryPoint"><code class="xref py py-class docutils literal notranslate"><span class="pre">core.entrypoint.MediumEntryPoint</span></code></a></p>
<dl class="attribute">
<dt id="core.entrypoint.EbooksEntryPoint.INTERNAL_NAME">
<code class="descname">INTERNAL_NAME</code><em class="property"> = 'Book'</em><a class="headerlink" href="#core.entrypoint.EbooksEntryPoint.INTERNAL_NAME" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.entrypoint.EbooksEntryPoint.URI">
<code class="descname">URI</code><em class="property"> = u'http://schema.org/EBook'</em><a class="headerlink" href="#core.entrypoint.EbooksEntryPoint.URI" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="core.entrypoint.EntryPoint">
<em class="property">class </em><code class="descclassname">core.entrypoint.</code><code class="descname">EntryPoint</code><a class="reference internal" href="_modules/core/entrypoint.html#EntryPoint"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.entrypoint.EntryPoint" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>A EntryPoint is a top-level entry point into a library’s Lane structure
that may apply additional filters to the Lane structure.</p>
<p>The “Books” and “Audiobooks” entry points (defined in the
EbooksEntryPoint and AudiobooksEntryPoint classes) are different
views on a library’s Lane structure; each applies an additional
filter against Edition.medium.</p>
<p>Each individual EntryPoint should be represented as a subclass of
EntryPoint, and should be registered with the overall EntryPoint
class by calling EntryPoint.register.</p>
<p>The list of entry points shows up as a facet group in a library’s
top-level grouped feed, and in search results. The SimplyE client
renders entry points as a set of tabs.</p>
<dl class="attribute">
<dt id="core.entrypoint.EntryPoint.BY_INTERNAL_NAME">
<code class="descname">BY_INTERNAL_NAME</code><em class="property"> = {'All': &lt;class 'core.entrypoint.EverythingEntryPoint'&gt;, 'Audio': &lt;class 'core.entrypoint.AudiobooksEntryPoint'&gt;, 'Book': &lt;class 'core.entrypoint.EbooksEntryPoint'&gt;}</em><a class="headerlink" href="#core.entrypoint.EntryPoint.BY_INTERNAL_NAME" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.entrypoint.EntryPoint.DEFAULT_ENABLED">
<code class="descname">DEFAULT_ENABLED</code><em class="property"> = [&lt;class 'core.entrypoint.EbooksEntryPoint'&gt;]</em><a class="headerlink" href="#core.entrypoint.EntryPoint.DEFAULT_ENABLED" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.entrypoint.EntryPoint.DISPLAY_TITLES">
<code class="descname">DISPLAY_TITLES</code><em class="property"> = {&lt;class 'core.entrypoint.EverythingEntryPoint'&gt;: 'All', &lt;class 'core.entrypoint.EbooksEntryPoint'&gt;: 'eBooks', &lt;class 'core.entrypoint.AudiobooksEntryPoint'&gt;: 'Audiobooks'}</em><a class="headerlink" href="#core.entrypoint.EntryPoint.DISPLAY_TITLES" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.entrypoint.EntryPoint.ENABLED_SETTING">
<code class="descname">ENABLED_SETTING</code><em class="property"> = 'enabled_entry_points'</em><a class="headerlink" href="#core.entrypoint.EntryPoint.ENABLED_SETTING" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.entrypoint.EntryPoint.ENTRY_POINTS">
<code class="descname">ENTRY_POINTS</code><em class="property"> = [&lt;class 'core.entrypoint.EverythingEntryPoint'&gt;, &lt;class 'core.entrypoint.EbooksEntryPoint'&gt;, &lt;class 'core.entrypoint.AudiobooksEntryPoint'&gt;]</em><a class="headerlink" href="#core.entrypoint.EntryPoint.ENTRY_POINTS" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.entrypoint.EntryPoint.URI">
<code class="descname">URI</code><em class="property"> = None</em><a class="headerlink" href="#core.entrypoint.EntryPoint.URI" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="classmethod">
<dt id="core.entrypoint.EntryPoint.modify_database_query">
<em class="property">classmethod </em><code class="descname">modify_database_query</code><span class="sig-paren">(</span><em>_db</em>, <em>qu</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/entrypoint.html#EntryPoint.modify_database_query"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.entrypoint.EntryPoint.modify_database_query" title="Permalink to this definition">¶</a></dt>
<dd><p>If necessary, modify a database query so that it restricts results
to items shown through this entry point.</p>
<p>The default behavior is to not change a database query at all.</p>
</dd></dl>

<dl class="classmethod">
<dt id="core.entrypoint.EntryPoint.modify_search_filter">
<em class="property">classmethod </em><code class="descname">modify_search_filter</code><span class="sig-paren">(</span><em>filter</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/entrypoint.html#EntryPoint.modify_search_filter"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.entrypoint.EntryPoint.modify_search_filter" title="Permalink to this definition">¶</a></dt>
<dd><p>If necessary, modify an ElasticSearch Filter object so that it
restricts results to items shown through this entry point.</p>
<p>The default behavior is not to change the Filter object at all.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>filter</strong> – An external_search.Filter object.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="classmethod">
<dt id="core.entrypoint.EntryPoint.register">
<em class="property">classmethod </em><code class="descname">register</code><span class="sig-paren">(</span><em>entrypoint_class</em>, <em>display_title</em>, <em>default_enabled=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/entrypoint.html#EntryPoint.register"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.entrypoint.EntryPoint.register" title="Permalink to this definition">¶</a></dt>
<dd><p>Register the given subclass with the master registry
kept in the EntryPoint class.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>entrypoint_class</strong> – A subclass of EntryPoint.</li>
<li><strong>display_title</strong> – The title to use when displaying this entry point
to patrons.</li>
<li><strong>default_enabled</strong> – New libraries should have this entry point
enabled by default.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="classmethod">
<dt id="core.entrypoint.EntryPoint.unregister">
<em class="property">classmethod </em><code class="descname">unregister</code><span class="sig-paren">(</span><em>entrypoint_class</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/entrypoint.html#EntryPoint.unregister"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.entrypoint.EntryPoint.unregister" title="Permalink to this definition">¶</a></dt>
<dd><p>Undo a subclass’s registration.</p>
<p>Only used in tests.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="core.entrypoint.EverythingEntryPoint">
<em class="property">class </em><code class="descclassname">core.entrypoint.</code><code class="descname">EverythingEntryPoint</code><a class="reference internal" href="_modules/core/entrypoint.html#EverythingEntryPoint"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.entrypoint.EverythingEntryPoint" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.entrypoint.EntryPoint" title="core.entrypoint.EntryPoint"><code class="xref py py-class docutils literal notranslate"><span class="pre">core.entrypoint.EntryPoint</span></code></a></p>
<p>An entry point that has everything.</p>
<dl class="attribute">
<dt id="core.entrypoint.EverythingEntryPoint.INTERNAL_NAME">
<code class="descname">INTERNAL_NAME</code><em class="property"> = 'All'</em><a class="headerlink" href="#core.entrypoint.EverythingEntryPoint.INTERNAL_NAME" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.entrypoint.EverythingEntryPoint.URI">
<code class="descname">URI</code><em class="property"> = 'http://schema.org/CreativeWork'</em><a class="headerlink" href="#core.entrypoint.EverythingEntryPoint.URI" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="core.entrypoint.MediumEntryPoint">
<em class="property">class </em><code class="descclassname">core.entrypoint.</code><code class="descname">MediumEntryPoint</code><a class="reference internal" href="_modules/core/entrypoint.html#MediumEntryPoint"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.entrypoint.MediumEntryPoint" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.entrypoint.EntryPoint" title="core.entrypoint.EntryPoint"><code class="xref py py-class docutils literal notranslate"><span class="pre">core.entrypoint.EntryPoint</span></code></a></p>
<p>A entry point that creates a view on one specific medium.</p>
<p>The medium is expected to be the entry point’s INTERNAL_NAME.</p>
<p>The URI is expected to be the one in
Edition.schema_to_additional_type[INTERNAL_NAME]</p>
<dl class="classmethod">
<dt id="core.entrypoint.MediumEntryPoint.modify_database_query">
<em class="property">classmethod </em><code class="descname">modify_database_query</code><span class="sig-paren">(</span><em>_db</em>, <em>qu</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/entrypoint.html#MediumEntryPoint.modify_database_query"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.entrypoint.MediumEntryPoint.modify_database_query" title="Permalink to this definition">¶</a></dt>
<dd><p>Modify a query against Work+LicensePool+Edition
to match only items with the right medium.</p>
</dd></dl>

<dl class="classmethod">
<dt id="core.entrypoint.MediumEntryPoint.modify_search_filter">
<em class="property">classmethod </em><code class="descname">modify_search_filter</code><span class="sig-paren">(</span><em>filter</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/entrypoint.html#MediumEntryPoint.modify_search_filter"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.entrypoint.MediumEntryPoint.modify_search_filter" title="Permalink to this definition">¶</a></dt>
<dd><p>Modify an external_search.Filter object so it only finds
titles available through this EntryPoint.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>filter</strong> – An external_search.Filter object.</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-core.external_list">
<span id="core-external-list-module"></span><h2>core.external_list module<a class="headerlink" href="#module-core.external_list" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="core.external_list.ClassificationBasedMembershipManager">
<em class="property">class </em><code class="descclassname">core.external_list.</code><code class="descname">ClassificationBasedMembershipManager</code><span class="sig-paren">(</span><em>custom_list</em>, <em>subject_fragments</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/external_list.html#ClassificationBasedMembershipManager"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.external_list.ClassificationBasedMembershipManager" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.external_list.MembershipManager" title="core.external_list.MembershipManager"><code class="xref py py-class docutils literal notranslate"><span class="pre">core.external_list.MembershipManager</span></code></a></p>
<p>Manage a custom list containing all Editions whose primary
Identifier is classified under one of the given subject fragments.</p>
<dl class="attribute">
<dt id="core.external_list.ClassificationBasedMembershipManager.new_membership">
<code class="descname">new_membership</code><a class="headerlink" href="#core.external_list.ClassificationBasedMembershipManager.new_membership" title="Permalink to this definition">¶</a></dt>
<dd><p>Iterate over the new membership of the list.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Yield:</th><td class="field-body">a sequence of Edition objects</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="core.external_list.CustomListFromCSV">
<em class="property">class </em><code class="descclassname">core.external_list.</code><code class="descname">CustomListFromCSV</code><span class="sig-paren">(</span><em>data_source_name</em>, <em>list_name</em>, <em>metadata_client=None</em>, <em>overwrite_old_data=False</em>, <em>annotation_field='text'</em>, <em>annotation_author_name_field='name'</em>, <em>annotation_author_affiliation_field='location'</em>, <em>first_appearance_field='timestamp'</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/external_list.html#CustomListFromCSV"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.external_list.CustomListFromCSV" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.metadata_layer.CSVMetadataImporter" title="core.metadata_layer.CSVMetadataImporter"><code class="xref py py-class docutils literal notranslate"><span class="pre">core.metadata_layer.CSVMetadataImporter</span></code></a></p>
<p>Create a CustomList, with entries, from a CSV file.</p>
<dl class="method">
<dt id="core.external_list.CustomListFromCSV.annotation_citation">
<code class="descname">annotation_citation</code><span class="sig-paren">(</span><em>row</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/external_list.html#CustomListFromCSV.annotation_citation"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.external_list.CustomListFromCSV.annotation_citation" title="Permalink to this definition">¶</a></dt>
<dd><p>Extract a citation for an annotation from a row of a CSV file.</p>
</dd></dl>

<dl class="method">
<dt id="core.external_list.CustomListFromCSV.metadata_to_list_entry">
<code class="descname">metadata_to_list_entry</code><span class="sig-paren">(</span><em>custom_list</em>, <em>data_source</em>, <em>now</em>, <em>metadata</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/external_list.html#CustomListFromCSV.metadata_to_list_entry"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.external_list.CustomListFromCSV.metadata_to_list_entry" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert a Metadata object to a CustomListEntry.</p>
</dd></dl>

<dl class="method">
<dt id="core.external_list.CustomListFromCSV.metadata_to_title">
<code class="descname">metadata_to_title</code><span class="sig-paren">(</span><em>now</em>, <em>metadata</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/external_list.html#CustomListFromCSV.metadata_to_title"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.external_list.CustomListFromCSV.metadata_to_title" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert a Metadata object to a TitleFromExternalList object.</p>
</dd></dl>

<dl class="method">
<dt id="core.external_list.CustomListFromCSV.to_customlist">
<code class="descname">to_customlist</code><span class="sig-paren">(</span><em>_db</em>, <em>dictreader</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/external_list.html#CustomListFromCSV.to_customlist"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.external_list.CustomListFromCSV.to_customlist" title="Permalink to this definition">¶</a></dt>
<dd><p>Turn the CSV file in <cite>dictreader</cite> into a CustomList.</p>
<p>TODO: Keep track of the list’s current members. If any item
was on the list but is no longer on the list, set its
last_appeared date to its most recent appearance.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="core.external_list.MembershipManager">
<em class="property">class </em><code class="descclassname">core.external_list.</code><code class="descname">MembershipManager</code><span class="sig-paren">(</span><em>custom_list</em>, <em>log=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/external_list.html#MembershipManager"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.external_list.MembershipManager" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Manage the membership of a custom list based on some criteria.</p>
<dl class="attribute">
<dt id="core.external_list.MembershipManager.new_membership">
<code class="descname">new_membership</code><a class="headerlink" href="#core.external_list.MembershipManager.new_membership" title="Permalink to this definition">¶</a></dt>
<dd><p>Iterate over the new membership of the list.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Yield:</th><td class="field-body">a sequence of Edition objects</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="core.external_list.MembershipManager.update">
<code class="descname">update</code><span class="sig-paren">(</span><em>update_time=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/external_list.html#MembershipManager.update"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.external_list.MembershipManager.update" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="core.external_list.TitleFromExternalList">
<em class="property">class </em><code class="descclassname">core.external_list.</code><code class="descname">TitleFromExternalList</code><span class="sig-paren">(</span><em>metadata</em>, <em>first_appearance</em>, <em>most_recent_appearance</em>, <em>annotation</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/external_list.html#TitleFromExternalList"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.external_list.TitleFromExternalList" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>This class helps you convert data from external lists into Simplified
Edition and CustomListEntry objects.</p>
<dl class="method">
<dt id="core.external_list.TitleFromExternalList.to_custom_list_entry">
<code class="descname">to_custom_list_entry</code><span class="sig-paren">(</span><em>custom_list</em>, <em>metadata_client</em>, <em>overwrite_old_data=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/external_list.html#TitleFromExternalList.to_custom_list_entry"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.external_list.TitleFromExternalList.to_custom_list_entry" title="Permalink to this definition">¶</a></dt>
<dd><p>Turn this object into a CustomListEntry with associated Edition.</p>
</dd></dl>

<dl class="method">
<dt id="core.external_list.TitleFromExternalList.to_edition">
<code class="descname">to_edition</code><span class="sig-paren">(</span><em>_db</em>, <em>metadata_client</em>, <em>overwrite_old_data=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/external_list.html#TitleFromExternalList.to_edition"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.external_list.TitleFromExternalList.to_edition" title="Permalink to this definition">¶</a></dt>
<dd><p>Create or update an Edition object for this list item.</p>
<p>We have two goals here:</p>
<p>1. Make sure there is an Edition representing the list’s view
of the data.</p>
<p>2. If at all possible, connect the Edition’s primary
identifier to other identifiers in the system, identifiers
which may have associated LicensePools. This can happen in two
ways:</p>
<p>2a. The Edition’s primary identifier, or other identifiers
associated with the Edition, may be directly associated with
LicensePools. This can happen if a book’s list entry includes
(e.g.) an Overdrive ID.</p>
<p>2b. The Edition’s permanent work ID may identify it as the
same work as other Editions in the system. In that case this
Edition’s primary identifier may be associated with the other
Editions’ primary identifiers. (p=0.85)</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-core.external_search">
<span id="core-external-search-module"></span><h2>core.external_search module<a class="headerlink" href="#module-core.external_search" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="core.external_search.CurrentMapping">
<em class="property">class </em><code class="descclassname">core.external_search.</code><code class="descname">CurrentMapping</code><a class="reference internal" href="_modules/core/external_search.html#CurrentMapping"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.external_search.CurrentMapping" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.external_search.Mapping" title="core.external_search.Mapping"><code class="xref py py-class docutils literal notranslate"><span class="pre">core.external_search.Mapping</span></code></a></p>
<p>The first mapping to support only Elasticsearch 6.</p>
<p>The body of this mapping looks for bibliographic information in
the core document, primarily used for matching search
requests. It also has nested documents, which are used for
filtering and ranking Works when generating other types of
feeds:</p>
<ul class="simple">
<li>licensepools – the Work has these LicensePools (includes current
availability as a boolean, but not detailed availability information)</li>
<li>customlists – the Work is on these CustomLists</li>
<li>contributors – these Contributors worked on the Work</li>
</ul>
<dl class="attribute">
<dt id="core.external_search.CurrentMapping.AUTHOR_CHAR_FILTER_NAMES">
<code class="descname">AUTHOR_CHAR_FILTER_NAMES</code><em class="property"> = ['unknown_author', 'primary_author_only', 'strip_parentheticals', 'strip_periods', 'collapse_three_initials', 'collapse_two_initials']</em><a class="headerlink" href="#core.external_search.CurrentMapping.AUTHOR_CHAR_FILTER_NAMES" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.external_search.CurrentMapping.CHAR_FILTERS">
<code class="descname">CHAR_FILTERS</code><em class="property"> = {'collapse_three_initials': {'pattern': ' ([A-Z]) ([A-Z]) ([A-Z])$', 'replacement': ' $1$2$3', 'type': 'pattern_replace'}, 'collapse_two_initials': {'pattern': ' ([A-Z]) ([A-Z])$', 'replacement': ' $1$2', 'type': 'pattern_replace'}, 'primary_author_only': {'pattern': '\\s+;.*', 'replacement': '', 'type': 'pattern_replace'}, 'remove_apostrophes': {'pattern': &quot;'&quot;, 'replacement': '', 'type': 'pattern_replace'}, 'strip_parentheticals': {'pattern': '\\s+\\([^)]+\\)', 'replacement': '', 'type': 'pattern_replace'}, 'strip_periods': {'pattern': '\\.', 'replacement': '', 'type': 'pattern_replace'}, 'unknown_author': {'pattern': '\\[Unknown\\]', 'replacement': u'\ufffd', 'type': 'pattern_replace'}}</em><a class="headerlink" href="#core.external_search.CurrentMapping.CHAR_FILTERS" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.external_search.CurrentMapping.VERSION_NAME">
<code class="descname">VERSION_NAME</code><em class="property"> = 'v4'</em><a class="headerlink" href="#core.external_search.CurrentMapping.VERSION_NAME" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.external_search.CurrentMapping.WORK_LAST_UPDATE_SCRIPT">
<code class="descname">WORK_LAST_UPDATE_SCRIPT</code><em class="property"> = &quot;\ndouble champion = -1;\n// Start off by looking at the work's last update time.\nfor (candidate in doc['last_update_time']) {\n    if (champion == -1 || candidate &gt; champion) { champion = candidate; }\n}\nif (params.collection_ids != null &amp;&amp; params.collection_ids.length &gt; 0) {\n    // Iterate over all licensepools looking for a pool in a collection\n    // relevant to this filter. When one is found, check its\n    // availability time to see if it's later than the last update time.\n    for (licensepool in params._source.licensepools) {\n        if (!params.collection_ids.contains(licensepool['collection_id'])) { continue; }\n        double candidate = licensepool['availability_time'];\n        if (champion == -1 || candidate &gt; champion) { champion = candidate; }\n    }\n}\nif (params.list_ids != null &amp;&amp; params.list_ids.length &gt; 0) {\n\n    // Iterate over all customlists looking for a list relevant to\n    // this filter. When one is found, check the previous work's first\n    // appearance on that list to see if it's later than the last\n    // update time.\n    for (customlist in params._source.customlists) {\n        if (!params.list_ids.contains(customlist['list_id'])) { continue; }\n        double candidate = customlist['first_appearance'];\n        if (champion == -1 || candidate &gt; champion) { champion = candidate; }\n    }\n}\n\nreturn champion;\n&quot;</em><a class="headerlink" href="#core.external_search.CurrentMapping.WORK_LAST_UPDATE_SCRIPT" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.external_search.CurrentMapping.name">
<code class="descname">name</code><em class="property"> = 'collapse_two_initials'</em><a class="headerlink" href="#core.external_search.CurrentMapping.name" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.external_search.CurrentMapping.normalizer">
<code class="descname">normalizer</code><em class="property"> = {'pattern': ' ([A-Z]) ([A-Z])$', 'replacement': ' $1$2', 'type': 'pattern_replace'}</em><a class="headerlink" href="#core.external_search.CurrentMapping.normalizer" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.external_search.CurrentMapping.pattern">
<code class="descname">pattern</code><em class="property"> = ' ([A-Z]) ([A-Z])$'</em><a class="headerlink" href="#core.external_search.CurrentMapping.pattern" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.external_search.CurrentMapping.replacement">
<code class="descname">replacement</code><em class="property"> = ' $1$2'</em><a class="headerlink" href="#core.external_search.CurrentMapping.replacement" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="classmethod">
<dt id="core.external_search.CurrentMapping.stored_scripts">
<em class="property">classmethod </em><code class="descname">stored_scripts</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/external_search.html#CurrentMapping.stored_scripts"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.external_search.CurrentMapping.stored_scripts" title="Permalink to this definition">¶</a></dt>
<dd><p>This version defines a single stored script, “work_last_update”,
defined below.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="core.external_search.ExternalSearchIndex">
<em class="property">class </em><code class="descclassname">core.external_search.</code><code class="descname">ExternalSearchIndex</code><span class="sig-paren">(</span><em>_db</em>, <em>url=None</em>, <em>works_index=None</em>, <em>test_search_term=None</em>, <em>in_testing=False</em>, <em>mapping=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/external_search.html#ExternalSearchIndex"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.external_search.ExternalSearchIndex" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.selftest.HasSelfTests" title="core.selftest.HasSelfTests"><code class="xref py py-class docutils literal notranslate"><span class="pre">core.selftest.HasSelfTests</span></code></a></p>
<dl class="attribute">
<dt id="core.external_search.ExternalSearchIndex.CURRENT_ALIAS_SUFFIX">
<code class="descname">CURRENT_ALIAS_SUFFIX</code><em class="property"> = 'current'</em><a class="headerlink" href="#core.external_search.ExternalSearchIndex.CURRENT_ALIAS_SUFFIX" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.external_search.ExternalSearchIndex.DEFAULT_TEST_SEARCH_TERM">
<code class="descname">DEFAULT_TEST_SEARCH_TERM</code><em class="property"> = u'test'</em><a class="headerlink" href="#core.external_search.ExternalSearchIndex.DEFAULT_TEST_SEARCH_TERM" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.external_search.ExternalSearchIndex.DEFAULT_WORKS_INDEX_PREFIX">
<code class="descname">DEFAULT_WORKS_INDEX_PREFIX</code><em class="property"> = u'circulation-works'</em><a class="headerlink" href="#core.external_search.ExternalSearchIndex.DEFAULT_WORKS_INDEX_PREFIX" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.external_search.ExternalSearchIndex.MOCK_IMPLEMENTATION">
<code class="descname">MOCK_IMPLEMENTATION</code><em class="property"> = None</em><a class="headerlink" href="#core.external_search.ExternalSearchIndex.MOCK_IMPLEMENTATION" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.external_search.ExternalSearchIndex.NAME">
<code class="descname">NAME</code><em class="property"> = u'Elasticsearch'</em><a class="headerlink" href="#core.external_search.ExternalSearchIndex.NAME" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.external_search.ExternalSearchIndex.SETTINGS">
<code class="descname">SETTINGS</code><em class="property"> = [{'format': 'url', 'required': True, 'key': u'url', 'label': l'URL'}, {'default': u'circulation-works', 'required': True, 'description': l'Any Elasticsearch indexes needed for this application will be created with this unique prefix. In most cases, the default will work fine. You may need to change this if you have multiple application servers using a single Elasticsearch server.', 'key': u'works_index_prefix', 'label': l'Index prefix'}, {'default': u'test', 'description': l'Self tests will use this value as the search term.', 'key': u'test_search_term', 'label': l'Test search term'}]</em><a class="headerlink" href="#core.external_search.ExternalSearchIndex.SETTINGS" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.external_search.ExternalSearchIndex.SITEWIDE">
<code class="descname">SITEWIDE</code><em class="property"> = True</em><a class="headerlink" href="#core.external_search.ExternalSearchIndex.SITEWIDE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.external_search.ExternalSearchIndex.TEST_SEARCH_TERM_KEY">
<code class="descname">TEST_SEARCH_TERM_KEY</code><em class="property"> = u'test_search_term'</em><a class="headerlink" href="#core.external_search.ExternalSearchIndex.TEST_SEARCH_TERM_KEY" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.external_search.ExternalSearchIndex.VERSION_RE">
<code class="descname">VERSION_RE</code><em class="property"> = &lt;_sre.SRE_Pattern object&gt;</em><a class="headerlink" href="#core.external_search.ExternalSearchIndex.VERSION_RE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.external_search.ExternalSearchIndex.WORKS_INDEX_PREFIX_KEY">
<code class="descname">WORKS_INDEX_PREFIX_KEY</code><em class="property"> = u'works_index_prefix'</em><a class="headerlink" href="#core.external_search.ExternalSearchIndex.WORKS_INDEX_PREFIX_KEY" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="core.external_search.ExternalSearchIndex.base_index_name">
<code class="descname">base_index_name</code><span class="sig-paren">(</span><em>index_or_alias</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/external_search.html#ExternalSearchIndex.base_index_name"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.external_search.ExternalSearchIndex.base_index_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Removes version or current suffix from base index name</p>
</dd></dl>

<dl class="method">
<dt id="core.external_search.ExternalSearchIndex.bulk_update">
<code class="descname">bulk_update</code><span class="sig-paren">(</span><em>works</em>, <em>retry_on_batch_failure=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/external_search.html#ExternalSearchIndex.bulk_update"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.external_search.ExternalSearchIndex.bulk_update" title="Permalink to this definition">¶</a></dt>
<dd><p>Upload a batch of works to the search index at once.</p>
</dd></dl>

<dl class="method">
<dt id="core.external_search.ExternalSearchIndex.count_works">
<code class="descname">count_works</code><span class="sig-paren">(</span><em>filter</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/external_search.html#ExternalSearchIndex.count_works"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.external_search.ExternalSearchIndex.count_works" title="Permalink to this definition">¶</a></dt>
<dd><p>Instead of retrieving works that match <cite>filter</cite>, count the total.</p>
</dd></dl>

<dl class="method">
<dt id="core.external_search.ExternalSearchIndex.create_search_doc">
<code class="descname">create_search_doc</code><span class="sig-paren">(</span><em>query_string</em>, <em>filter</em>, <em>pagination</em>, <em>debug</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/external_search.html#ExternalSearchIndex.create_search_doc"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.external_search.ExternalSearchIndex.create_search_doc" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="classmethod">
<dt id="core.external_search.ExternalSearchIndex.load">
<em class="property">classmethod </em><code class="descname">load</code><span class="sig-paren">(</span><em>_db</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/external_search.html#ExternalSearchIndex.load"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.external_search.ExternalSearchIndex.load" title="Permalink to this definition">¶</a></dt>
<dd><p>Load a generic implementation.</p>
</dd></dl>

<dl class="method">
<dt id="core.external_search.ExternalSearchIndex.query_works">
<code class="descname">query_works</code><span class="sig-paren">(</span><em>query_string</em>, <em>filter=None</em>, <em>pagination=None</em>, <em>debug=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/external_search.html#ExternalSearchIndex.query_works"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.external_search.ExternalSearchIndex.query_works" title="Permalink to this definition">¶</a></dt>
<dd><p>Run a search query.</p>
<p>This works by calling query_works_multi().</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>query_string</strong> – The string to search for.</li>
<li><strong>filter</strong> – A Filter object, used to filter out works that
would otherwise match the query string.</li>
<li><strong>pagination</strong> – A Pagination object, used to get a subset
of the search results.</li>
<li><strong>debug</strong> – If this is True, debugging information will
be gathered and logged. The search query will ask
ElasticSearch for all available fields, not just the
fields known to be used by the feed generation code.  This
all comes at a slight performance cost.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">A list of Hit objects containing information about
the search results. This will include the values of any
script fields calculated by ElasticSearch during the
search process.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="core.external_search.ExternalSearchIndex.query_works_multi">
<code class="descname">query_works_multi</code><span class="sig-paren">(</span><em>queries</em>, <em>debug=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/external_search.html#ExternalSearchIndex.query_works_multi"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.external_search.ExternalSearchIndex.query_works_multi" title="Permalink to this definition">¶</a></dt>
<dd><p>Run several queries simultaneously and return the results
as a big list.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>queries</strong> – A list of (query string, Filter, Pagination) 3-tuples,
each representing an Elasticsearch query to be run.</td>
</tr>
<tr class="field-even field"><th class="field-name">Yield:</th><td class="field-body">A sequence of lists, one per item in <cite>queries</cite>,
each containing the search results from that
(query string, Filter, Pagination) 3-tuple.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="core.external_search.ExternalSearchIndex.remove_work">
<code class="descname">remove_work</code><span class="sig-paren">(</span><em>work</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/external_search.html#ExternalSearchIndex.remove_work"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.external_search.ExternalSearchIndex.remove_work" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove the search document for <cite>work</cite> from the search index.</p>
</dd></dl>

<dl class="classmethod">
<dt id="core.external_search.ExternalSearchIndex.reset">
<em class="property">classmethod </em><code class="descname">reset</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/external_search.html#ExternalSearchIndex.reset"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.external_search.ExternalSearchIndex.reset" title="Permalink to this definition">¶</a></dt>
<dd><p>Resets the __client object to None so a new configuration
can be applied during object initialization.</p>
<p>This method is only intended for use in testing.</p>
</dd></dl>

<dl class="classmethod">
<dt id="core.external_search.ExternalSearchIndex.search_integration">
<em class="property">classmethod </em><code class="descname">search_integration</code><span class="sig-paren">(</span><em>_db</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/external_search.html#ExternalSearchIndex.search_integration"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.external_search.ExternalSearchIndex.search_integration" title="Permalink to this definition">¶</a></dt>
<dd><p>Look up the ExternalIntegration for ElasticSearch.</p>
</dd></dl>

<dl class="method">
<dt id="core.external_search.ExternalSearchIndex.set_stored_scripts">
<code class="descname">set_stored_scripts</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/external_search.html#ExternalSearchIndex.set_stored_scripts"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.external_search.ExternalSearchIndex.set_stored_scripts" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="core.external_search.ExternalSearchIndex.set_works_index_and_alias">
<code class="descname">set_works_index_and_alias</code><span class="sig-paren">(</span><em>_db</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/external_search.html#ExternalSearchIndex.set_works_index_and_alias"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.external_search.ExternalSearchIndex.set_works_index_and_alias" title="Permalink to this definition">¶</a></dt>
<dd><p>Finds or creates the works_index and works_alias based on
the current configuration.</p>
</dd></dl>

<dl class="method">
<dt id="core.external_search.ExternalSearchIndex.setup_current_alias">
<code class="descname">setup_current_alias</code><span class="sig-paren">(</span><em>_db</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/external_search.html#ExternalSearchIndex.setup_current_alias"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.external_search.ExternalSearchIndex.setup_current_alias" title="Permalink to this definition">¶</a></dt>
<dd><p>Finds or creates the works_alias as named by the current site
settings.</p>
<p>If the resulting alias exists and is affixed to a different
index or if it can’t be generated for any reason, the alias will
not be created or moved. Instead, the search client will use the
the works_index directly for search queries.</p>
</dd></dl>

<dl class="method">
<dt id="core.external_search.ExternalSearchIndex.setup_index">
<code class="descname">setup_index</code><span class="sig-paren">(</span><em>new_index=None</em>, <em>**index_settings</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/external_search.html#ExternalSearchIndex.setup_index"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.external_search.ExternalSearchIndex.setup_index" title="Permalink to this definition">¶</a></dt>
<dd><p>Create the search index with appropriate mapping.</p>
<p>This will destroy the search index, and all works will need
to be indexed again. In production, don’t use this on an
existing index. Use it to create a new index, then change the
alias to point to the new index.</p>
</dd></dl>

<dl class="method">
<dt id="core.external_search.ExternalSearchIndex.transfer_current_alias">
<code class="descname">transfer_current_alias</code><span class="sig-paren">(</span><em>_db</em>, <em>new_index</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/external_search.html#ExternalSearchIndex.transfer_current_alias"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.external_search.ExternalSearchIndex.transfer_current_alias" title="Permalink to this definition">¶</a></dt>
<dd><p>Force -current alias onto a new index</p>
</dd></dl>

<dl class="attribute">
<dt id="core.external_search.ExternalSearchIndex.work_document_type">
<code class="descname">work_document_type</code><em class="property"> = 'work-type'</em><a class="headerlink" href="#core.external_search.ExternalSearchIndex.work_document_type" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="classmethod">
<dt id="core.external_search.ExternalSearchIndex.works_alias_name">
<em class="property">classmethod </em><code class="descname">works_alias_name</code><span class="sig-paren">(</span><em>_db</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/external_search.html#ExternalSearchIndex.works_alias_name"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.external_search.ExternalSearchIndex.works_alias_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Look up the name of the search index alias.</p>
</dd></dl>

<dl class="classmethod">
<dt id="core.external_search.ExternalSearchIndex.works_index_name">
<em class="property">classmethod </em><code class="descname">works_index_name</code><span class="sig-paren">(</span><em>_db</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/external_search.html#ExternalSearchIndex.works_index_name"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.external_search.ExternalSearchIndex.works_index_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Look up the name of the search index.</p>
<p>It’s possible, but unlikely, that the search index alias will
point to some other index. But if there were no indexes, and a
new one needed to be created, this would be the name of that
index.</p>
</dd></dl>

<dl class="classmethod">
<dt id="core.external_search.ExternalSearchIndex.works_prefixed">
<em class="property">classmethod </em><code class="descname">works_prefixed</code><span class="sig-paren">(</span><em>_db</em>, <em>value</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/external_search.html#ExternalSearchIndex.works_prefixed"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.external_search.ExternalSearchIndex.works_prefixed" title="Permalink to this definition">¶</a></dt>
<dd><p>Prefix the given value with the prefix to use when generating index
and alias names.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">A string “{prefix}-{value}”, or None if no prefix is configured.</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="core.external_search.Filter">
<em class="property">class </em><code class="descclassname">core.external_search.</code><code class="descname">Filter</code><span class="sig-paren">(</span><em>collections=None</em>, <em>media=None</em>, <em>languages=None</em>, <em>fiction=None</em>, <em>audiences=None</em>, <em>target_age=None</em>, <em>genre_restriction_sets=None</em>, <em>customlist_restriction_sets=None</em>, <em>facets=None</em>, <em>script_fields=None</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/external_search.html#Filter"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.external_search.Filter" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.external_search.SearchBase" title="core.external_search.SearchBase"><code class="xref py py-class docutils literal notranslate"><span class="pre">core.external_search.SearchBase</span></code></a></p>
<p>A filter for search results.</p>
<p>This covers every reason you might want to not exclude a search
result that would otherise match the query string – wrong media,
wrong language, not available in the patron’s library, etc.</p>
<p>This also covers every way you might want to order the search
results: either by relevance to the search query (the default), or
by a specific field (e.g. author) as described by a Facets object.</p>
<p>It also covers additional calculated values you might need when
presenting the search results.</p>
<dl class="attribute">
<dt id="core.external_search.Filter.AUTHOR_MATCH_ROLES">
<code class="descname">AUTHOR_MATCH_ROLES</code><em class="property"> = [u'Primary Author', u'Author', u'Narrator', u'Editor', u'Director', u'Actor']</em><a class="headerlink" href="#core.external_search.Filter.AUTHOR_MATCH_ROLES" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.external_search.Filter.DETERMINISTIC">
<code class="descname">DETERMINISTIC</code><em class="property"> = &lt;object object&gt;</em><a class="headerlink" href="#core.external_search.Filter.DETERMINISTIC" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.external_search.Filter.FEATURABLE_SCRIPT">
<code class="descname">FEATURABLE_SCRIPT</code><em class="property"> = &quot;Math.pow(Math.min(%(cutoff).5f, doc['quality'].value), %(exponent).5f) * 5&quot;</em><a class="headerlink" href="#core.external_search.Filter.FEATURABLE_SCRIPT" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.external_search.Filter.KNOWN_SCRIPT_FIELDS">
<code class="descname">KNOWN_SCRIPT_FIELDS</code><em class="property"> = ['last_update']</em><a class="headerlink" href="#core.external_search.Filter.KNOWN_SCRIPT_FIELDS" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.external_search.Filter.asc">
<code class="descname">asc</code><a class="headerlink" href="#core.external_search.Filter.asc" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert order_ascending to Elasticsearch-speak.</p>
</dd></dl>

<dl class="attribute">
<dt id="core.external_search.Filter.audiences">
<code class="descname">audiences</code><a class="headerlink" href="#core.external_search.Filter.audiences" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the appropriate audiences for this query.</p>
<p>This will be whatever audiences were provided, but it will
probably also include the ‘All Ages’ audience.</p>
</dd></dl>

<dl class="attribute">
<dt id="core.external_search.Filter.author_filter">
<code class="descname">author_filter</code><a class="headerlink" href="#core.external_search.Filter.author_filter" title="Permalink to this definition">¶</a></dt>
<dd><p>Build a filter that matches a ‘contributors’ subdocument only
if it represents an author-level contribution by self.author.</p>
</dd></dl>

<dl class="method">
<dt id="core.external_search.Filter.build">
<code class="descname">build</code><span class="sig-paren">(</span><em>_chain_filters=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/external_search.html#Filter.build"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.external_search.Filter.build" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert this object to an Elasticsearch Filter object.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">A 2-tuple (filter, nested_filters). Filters on fields
within nested documents (such as
‘licensepools.collection_id’) must be applied as subqueries
to the query that will eventually be created from this
filter. <cite>nested_filters</cite> is a dictionary that maps a path
to a list of filters to apply to that path.</td>
</tr>
<tr class="field-even field"><th class="field-name">Parameters:</th><td class="field-body"><strong>_chain_filters</strong> – Mock function to use instead of
Filter._chain_filters</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="core.external_search.Filter.featurability_scoring_functions">
<code class="descname">featurability_scoring_functions</code><span class="sig-paren">(</span><em>random_seed</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/external_search.html#Filter.featurability_scoring_functions"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.external_search.Filter.featurability_scoring_functions" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate scoring functions that weight works randomly, but
with ‘more featurable’ works tending to be at the top.</p>
</dd></dl>

<dl class="classmethod">
<dt id="core.external_search.Filter.from_worklist">
<em class="property">classmethod </em><code class="descname">from_worklist</code><span class="sig-paren">(</span><em>_db</em>, <em>worklist</em>, <em>facets</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/external_search.html#Filter.from_worklist"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.external_search.Filter.from_worklist" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a Filter that finds only works that belong in the given
WorkList and EntryPoint.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>worklist</strong> – A WorkList</li>
<li><strong>facets</strong> – A SearchFacets object.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="core.external_search.Filter.last_update_time_script_field">
<code class="descname">last_update_time_script_field</code><a class="headerlink" href="#core.external_search.Filter.last_update_time_script_field" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the configuration for a script field that calculates the
‘last update’ time of a work. An ‘update’ happens when the
work’s metadata is changed, when it’s added to a collection
used by this Filter, or when it’s added to one of the lists
used by this Filter.</p>
</dd></dl>

<dl class="attribute">
<dt id="core.external_search.Filter.sort_order">
<code class="descname">sort_order</code><a class="headerlink" href="#core.external_search.Filter.sort_order" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a description, for use in an Elasticsearch document,
explaining how search results should be ordered.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">A list of dictionaries, each dictionary mapping a
field name to an explanation of how to sort that
field. Usually the explanation is a simple string, either
‘asc’ or ‘desc’.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="core.external_search.Filter.target_age_filter">
<code class="descname">target_age_filter</code><a class="headerlink" href="#core.external_search.Filter.target_age_filter" title="Permalink to this definition">¶</a></dt>
<dd><p>Helper method to generate the target age subfilter.</p>
<p>It’s complicated because it has to handle cases where the upper
or lower bound on target age is missing (indicating there is no
upper or lower bound).</p>
</dd></dl>

<dl class="classmethod">
<dt id="core.external_search.Filter.universal_base_filter">
<em class="property">classmethod </em><code class="descname">universal_base_filter</code><span class="sig-paren">(</span><em>_chain_filters=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/external_search.html#Filter.universal_base_filter"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.external_search.Filter.universal_base_filter" title="Permalink to this definition">¶</a></dt>
<dd><p>Build a set of restrictions on the main search document that are
always applied, even in the absence of other filters.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>_chain_filters</strong> – Mock function to use instead of
Filter._chain_filters</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">A Filter object.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="classmethod">
<dt id="core.external_search.Filter.universal_nested_filters">
<em class="property">classmethod </em><code class="descname">universal_nested_filters</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/external_search.html#Filter.universal_nested_filters"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.external_search.Filter.universal_nested_filters" title="Permalink to this definition">¶</a></dt>
<dd><p>Build a set of restrictions on subdocuments that are
always applied, even in the absence of other filters.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="core.external_search.Mapping">
<em class="property">class </em><code class="descclassname">core.external_search.</code><code class="descname">Mapping</code><a class="reference internal" href="_modules/core/external_search.html#Mapping"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.external_search.Mapping" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.external_search.MappingDocument" title="core.external_search.MappingDocument"><code class="xref py py-class docutils literal notranslate"><span class="pre">core.external_search.MappingDocument</span></code></a></p>
<p>A class that defines the mapping for a particular version of the search index.</p>
<p>Code that won’t change between versions can go here. (Or code that
can change between versions without affecting anything.)</p>
<dl class="attribute">
<dt id="core.external_search.Mapping.VERSION_NAME">
<code class="descname">VERSION_NAME</code><em class="property"> = None</em><a class="headerlink" href="#core.external_search.Mapping.VERSION_NAME" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="core.external_search.Mapping.body">
<code class="descname">body</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/external_search.html#Mapping.body"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.external_search.Mapping.body" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate the body of the mapping document for this version of the
mapping.</p>
</dd></dl>

<dl class="method">
<dt id="core.external_search.Mapping.create">
<code class="descname">create</code><span class="sig-paren">(</span><em>search_client</em>, <em>base_index_name</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/external_search.html#Mapping.create"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.external_search.Mapping.create" title="Permalink to this definition">¶</a></dt>
<dd><p>Ensure that an index exists in <cite>search_client</cite> for this Mapping.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">True or False, indicating whether the index was created new.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="classmethod">
<dt id="core.external_search.Mapping.script_name">
<em class="property">classmethod </em><code class="descname">script_name</code><span class="sig-paren">(</span><em>base_name</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/external_search.html#Mapping.script_name"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.external_search.Mapping.script_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Scope a script name with “simplified” (to avoid confusion with
other applications on the Elasticsearch server), and the
version number (to avoid confusion with other versions <em>of
this application</em>, which may implement the same script
differently, on this Elasticsearch server).</p>
</dd></dl>

<dl class="method">
<dt id="core.external_search.Mapping.sort_author_keyword_property_hook">
<code class="descname">sort_author_keyword_property_hook</code><span class="sig-paren">(</span><em>description</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/external_search.html#Mapping.sort_author_keyword_property_hook"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.external_search.Mapping.sort_author_keyword_property_hook" title="Permalink to this definition">¶</a></dt>
<dd><p>Give the <cite>sort_author</cite> property its custom analyzer.</p>
</dd></dl>

<dl class="classmethod">
<dt id="core.external_search.Mapping.version_name">
<em class="property">classmethod </em><code class="descname">version_name</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/external_search.html#Mapping.version_name"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.external_search.Mapping.version_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the name of this Mapping subclass.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="core.external_search.MappingDocument">
<em class="property">class </em><code class="descclassname">core.external_search.</code><code class="descname">MappingDocument</code><a class="reference internal" href="_modules/core/external_search.html#MappingDocument"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.external_search.MappingDocument" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>This class knows a lot about how the ‘properties’ section of an
Elasticsearch mapping document (or one of its subdocuments) is
created.</p>
<dl class="method">
<dt id="core.external_search.MappingDocument.add_properties">
<code class="descname">add_properties</code><span class="sig-paren">(</span><em>properties_by_type</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/external_search.html#MappingDocument.add_properties"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.external_search.MappingDocument.add_properties" title="Permalink to this definition">¶</a></dt>
<dd><p>Turn a dictionary mapping types to field names into a
bunch of add_property() calls.</p>
<p>Useful when you have a lot of fields that don’t need any
customization.</p>
</dd></dl>

<dl class="method">
<dt id="core.external_search.MappingDocument.add_property">
<code class="descname">add_property</code><span class="sig-paren">(</span><em>name</em>, <em>type</em>, <em>**description</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/external_search.html#MappingDocument.add_property"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.external_search.MappingDocument.add_property" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a field to the list of properties.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>name</strong> – Name of the field as found in search documents.</li>
<li><strong>type</strong> – Type of the field. This may be a custom type,
so long as a hook method is defined for that type.</li>
<li><strong>description</strong> – Description of the field.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="core.external_search.MappingDocument.basic_text_property_hook">
<code class="descname">basic_text_property_hook</code><span class="sig-paren">(</span><em>description</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/external_search.html#MappingDocument.basic_text_property_hook"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.external_search.MappingDocument.basic_text_property_hook" title="Permalink to this definition">¶</a></dt>
<dd><p>Hook method to handle the custom ‘basic_text’
property type.</p>
<p>This type does not exist in Elasticsearch. It’s our name for a
text field that is indexed three times: once using our default
English analyzer (“title”), once using an analyzer with
minimal stemming (“title.minimal”) for close matches, and once
using an analyzer that leaves stopwords in place, for searches
that rely on stopwords.</p>
</dd></dl>

<dl class="method">
<dt id="core.external_search.MappingDocument.filterable_text_property_hook">
<code class="descname">filterable_text_property_hook</code><span class="sig-paren">(</span><em>description</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/external_search.html#MappingDocument.filterable_text_property_hook"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.external_search.MappingDocument.filterable_text_property_hook" title="Permalink to this definition">¶</a></dt>
<dd><p>Hook method to handle the custom ‘filterable_text’
property type.</p>
<p>This type does not exist in Elasticsearch. It’s our name for a
text field that can be used in both queries and filters.</p>
<p>This field is indexed _four_ times – the three ways a normal
text field is indexed, plus again as an unparsed keyword that
can be used in filters.</p>
</dd></dl>

<dl class="method">
<dt id="core.external_search.MappingDocument.subdocument">
<code class="descname">subdocument</code><span class="sig-paren">(</span><em>name</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/external_search.html#MappingDocument.subdocument"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.external_search.MappingDocument.subdocument" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a new HasProperties object and register it as a
sub-document of this one.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="core.external_search.MockExternalSearchIndex">
<em class="property">class </em><code class="descclassname">core.external_search.</code><code class="descname">MockExternalSearchIndex</code><span class="sig-paren">(</span><em>url=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/external_search.html#MockExternalSearchIndex"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.external_search.MockExternalSearchIndex" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.external_search.ExternalSearchIndex" title="core.external_search.ExternalSearchIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">core.external_search.ExternalSearchIndex</span></code></a></p>
<dl class="method">
<dt id="core.external_search.MockExternalSearchIndex.bulk">
<code class="descname">bulk</code><span class="sig-paren">(</span><em>docs</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/external_search.html#MockExternalSearchIndex.bulk"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.external_search.MockExternalSearchIndex.bulk" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="core.external_search.MockExternalSearchIndex.count_works">
<code class="descname">count_works</code><span class="sig-paren">(</span><em>filter</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/external_search.html#MockExternalSearchIndex.count_works"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.external_search.MockExternalSearchIndex.count_works" title="Permalink to this definition">¶</a></dt>
<dd><p>Instead of retrieving works that match <cite>filter</cite>, count the total.</p>
</dd></dl>

<dl class="method">
<dt id="core.external_search.MockExternalSearchIndex.create_search_doc">
<code class="descname">create_search_doc</code><span class="sig-paren">(</span><em>query_string</em>, <em>filter=None</em>, <em>pagination=None</em>, <em>debug=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/external_search.html#MockExternalSearchIndex.create_search_doc"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.external_search.MockExternalSearchIndex.create_search_doc" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="core.external_search.MockExternalSearchIndex.delete">
<code class="descname">delete</code><span class="sig-paren">(</span><em>index</em>, <em>doc_type</em>, <em>id</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/external_search.html#MockExternalSearchIndex.delete"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.external_search.MockExternalSearchIndex.delete" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="core.external_search.MockExternalSearchIndex.exists">
<code class="descname">exists</code><span class="sig-paren">(</span><em>index</em>, <em>doc_type</em>, <em>id</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/external_search.html#MockExternalSearchIndex.exists"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.external_search.MockExternalSearchIndex.exists" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="core.external_search.MockExternalSearchIndex.index">
<code class="descname">index</code><span class="sig-paren">(</span><em>index</em>, <em>doc_type</em>, <em>id</em>, <em>body</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/external_search.html#MockExternalSearchIndex.index"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.external_search.MockExternalSearchIndex.index" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="core.external_search.MockExternalSearchIndex.query_works">
<code class="descname">query_works</code><span class="sig-paren">(</span><em>query_string</em>, <em>filter</em>, <em>pagination</em>, <em>debug=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/external_search.html#MockExternalSearchIndex.query_works"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.external_search.MockExternalSearchIndex.query_works" title="Permalink to this definition">¶</a></dt>
<dd><p>Run a search query.</p>
<p>This works by calling query_works_multi().</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>query_string</strong> – The string to search for.</li>
<li><strong>filter</strong> – A Filter object, used to filter out works that
would otherwise match the query string.</li>
<li><strong>pagination</strong> – A Pagination object, used to get a subset
of the search results.</li>
<li><strong>debug</strong> – If this is True, debugging information will
be gathered and logged. The search query will ask
ElasticSearch for all available fields, not just the
fields known to be used by the feed generation code.  This
all comes at a slight performance cost.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">A list of Hit objects containing information about
the search results. This will include the values of any
script fields calculated by ElasticSearch during the
search process.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="core.external_search.MockExternalSearchIndex.query_works_multi">
<code class="descname">query_works_multi</code><span class="sig-paren">(</span><em>queries</em>, <em>debug=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/external_search.html#MockExternalSearchIndex.query_works_multi"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.external_search.MockExternalSearchIndex.query_works_multi" title="Permalink to this definition">¶</a></dt>
<dd><p>Run several queries simultaneously and return the results
as a big list.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>queries</strong> – A list of (query string, Filter, Pagination) 3-tuples,
each representing an Elasticsearch query to be run.</td>
</tr>
<tr class="field-even field"><th class="field-name">Yield:</th><td class="field-body">A sequence of lists, one per item in <cite>queries</cite>,
each containing the search results from that
(query string, Filter, Pagination) 3-tuple.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="core.external_search.MockExternalSearchIndex.work_document_type">
<code class="descname">work_document_type</code><em class="property"> = 'work-type'</em><a class="headerlink" href="#core.external_search.MockExternalSearchIndex.work_document_type" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="core.external_search.MockMeta">
<em class="property">class </em><code class="descclassname">core.external_search.</code><code class="descname">MockMeta</code><a class="reference internal" href="_modules/core/external_search.html#MockMeta"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.external_search.MockMeta" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code></p>
<p>Mock the .meta object associated with an Elasticsearch search
result.  This is necessary to get SortKeyPagination to work with
MockExternalSearchIndex.</p>
<dl class="attribute">
<dt id="core.external_search.MockMeta.sort">
<code class="descname">sort</code><a class="headerlink" href="#core.external_search.MockMeta.sort" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="core.external_search.MockSearchResult">
<em class="property">class </em><code class="descclassname">core.external_search.</code><code class="descname">MockSearchResult</code><span class="sig-paren">(</span><em>sort_title</em>, <em>sort_author</em>, <em>meta</em>, <em>id</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/external_search.html#MockSearchResult"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.external_search.MockSearchResult" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<dl class="method">
<dt id="core.external_search.MockSearchResult.to_dict">
<code class="descname">to_dict</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/external_search.html#MockSearchResult.to_dict"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.external_search.MockSearchResult.to_dict" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="core.external_search.Query">
<em class="property">class </em><code class="descclassname">core.external_search.</code><code class="descname">Query</code><span class="sig-paren">(</span><em>query_string</em>, <em>filter=None</em>, <em>use_query_parser=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/external_search.html#Query"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.external_search.Query" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.external_search.SearchBase" title="core.external_search.SearchBase"><code class="xref py py-class docutils literal notranslate"><span class="pre">core.external_search.SearchBase</span></code></a></p>
<p>An attempt to find something in the search index.</p>
<dl class="attribute">
<dt id="core.external_search.Query.BASELINE_COEFFICIENT">
<code class="descname">BASELINE_COEFFICIENT</code><em class="property"> = 1</em><a class="headerlink" href="#core.external_search.Query.BASELINE_COEFFICIENT" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.external_search.Query.DEFAULT_KEYWORD_MATCH_COEFFICIENT">
<code class="descname">DEFAULT_KEYWORD_MATCH_COEFFICIENT</code><em class="property"> = 1000</em><a class="headerlink" href="#core.external_search.Query.DEFAULT_KEYWORD_MATCH_COEFFICIENT" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.external_search.Query.KEYWORD_MATCH_COEFFICIENT_FOR_FIELD">
<code class="descname">KEYWORD_MATCH_COEFFICIENT_FOR_FIELD</code><em class="property"> = {'imprint': 2, 'publisher': 2}</em><a class="headerlink" href="#core.external_search.Query.KEYWORD_MATCH_COEFFICIENT_FOR_FIELD" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.external_search.Query.MULTI_MATCH_FIELDS">
<code class="descname">MULTI_MATCH_FIELDS</code><em class="property"> = ['subtitle', 'series', 'author']</em><a class="headerlink" href="#core.external_search.Query.MULTI_MATCH_FIELDS" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.external_search.Query.QUERY_WAS_A_FILTER_WEIGHT">
<code class="descname">QUERY_WAS_A_FILTER_WEIGHT</code><em class="property"> = 600</em><a class="headerlink" href="#core.external_search.Query.QUERY_WAS_A_FILTER_WEIGHT" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.external_search.Query.SEARCH_RELEVANT_ROLES">
<code class="descname">SEARCH_RELEVANT_ROLES</code><em class="property"> = [u'Primary Author', u'Author', u'Narrator']</em><a class="headerlink" href="#core.external_search.Query.SEARCH_RELEVANT_ROLES" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.external_search.Query.SIMPLE_MATCH_FIELDS">
<code class="descname">SIMPLE_MATCH_FIELDS</code><em class="property"> = ['title', 'subtitle', 'series', 'publisher', 'imprint']</em><a class="headerlink" href="#core.external_search.Query.SIMPLE_MATCH_FIELDS" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.external_search.Query.SLIGHTLY_ABOVE_BASELINE">
<code class="descname">SLIGHTLY_ABOVE_BASELINE</code><em class="property"> = 1.1</em><a class="headerlink" href="#core.external_search.Query.SLIGHTLY_ABOVE_BASELINE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.external_search.Query.SPELLCHECKER">
<code class="descname">SPELLCHECKER</code><em class="property"> = &lt;spellchecker.spellchecker.SpellChecker object&gt;</em><a class="headerlink" href="#core.external_search.Query.SPELLCHECKER" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.external_search.Query.STEMMABLE_FIELDS">
<code class="descname">STEMMABLE_FIELDS</code><em class="property"> = ['title', 'subtitle', 'series']</em><a class="headerlink" href="#core.external_search.Query.STEMMABLE_FIELDS" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.external_search.Query.STOPWORD_FIELDS">
<code class="descname">STOPWORD_FIELDS</code><em class="property"> = ['title', 'subtitle', 'series']</em><a class="headerlink" href="#core.external_search.Query.STOPWORD_FIELDS" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.external_search.Query.WEIGHT_FOR_FIELD">
<code class="descname">WEIGHT_FOR_FIELD</code><em class="property"> = {'author': 120.0, 'contributors.display_name': 120.0, 'contributors.sort_name': 120.0, 'imprint': 40.0, 'publisher': 40.0, 'series': 120.0, 'subtitle': 130.0, 'summary': 80.0, 'title': 140.0}</em><a class="headerlink" href="#core.external_search.Query.WEIGHT_FOR_FIELD" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="core.external_search.Query.build">
<code class="descname">build</code><span class="sig-paren">(</span><em>elasticsearch</em>, <em>pagination=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/external_search.html#Query.build"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.external_search.Query.build" title="Permalink to this definition">¶</a></dt>
<dd><p>Make an Elasticsearch-DSL Search object out of this query.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>elasticsearch</strong> – An Elasticsearch-DSL Search object. This
object is ready to run a search against an Elasticsearch server,
but it doesn’t represent any particular Elasticsearch query.</li>
<li><strong>pagination</strong> – A Pagination object indicating a slice of
results to pull from the search index.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">An Elasticsearch-DSL Search object that’s prepared
to run this specific query.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="core.external_search.Query.elasticsearch_query">
<code class="descname">elasticsearch_query</code><a class="headerlink" href="#core.external_search.Query.elasticsearch_query" title="Permalink to this definition">¶</a></dt>
<dd><p>Build an Elasticsearch-DSL Query object for this query string.</p>
</dd></dl>

<dl class="attribute">
<dt id="core.external_search.Query.field">
<code class="descname">field</code><em class="property"> = 'contributors.display_name'</em><a class="headerlink" href="#core.external_search.Query.field" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.external_search.Query.match_author_hypotheses">
<code class="descname">match_author_hypotheses</code><a class="headerlink" href="#core.external_search.Query.match_author_hypotheses" title="Permalink to this definition">¶</a></dt>
<dd><p>Yield a sequence of query objects representing possible ways in
which a query string might represent a book’s author.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>query_string</strong> – The query string that might be the name
of an author.</td>
</tr>
<tr class="field-even field"><th class="field-name">Yield:</th><td class="field-body">A sequence of Elasticsearch-DSL query objects to be
considered as hypotheses.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="core.external_search.Query.match_one_field_hypotheses">
<code class="descname">match_one_field_hypotheses</code><span class="sig-paren">(</span><em>base_field</em>, <em>query_string=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/external_search.html#Query.match_one_field_hypotheses"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.external_search.Query.match_one_field_hypotheses" title="Permalink to this definition">¶</a></dt>
<dd><p>Yield a number of hypotheses representing different ways in
which the query string might be an attempt to match
a given field.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>base_field</strong> – The name of the field to search,
e.g. “title” or “contributors.sort_name”.</li>
<li><strong>query_string</strong> – The query string to use, if different from
self.query_string.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Yield:</th><td class="field-body"><p class="first last">A sequence of (hypothesis, weight) 2-tuples.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="core.external_search.Query.match_topic_hypotheses">
<code class="descname">match_topic_hypotheses</code><a class="headerlink" href="#core.external_search.Query.match_topic_hypotheses" title="Permalink to this definition">¶</a></dt>
<dd><p>Yield a number of hypotheses representing different
ways in which the query string might be a topic match.</p>
<p>Currently there is only one such hypothesis.</p>
<p>TODO: We probably want to introduce a fuzzy version of this
hypothesis.</p>
</dd></dl>

<dl class="attribute">
<dt id="core.external_search.Query.parsed_query_matches">
<code class="descname">parsed_query_matches</code><a class="headerlink" href="#core.external_search.Query.parsed_query_matches" title="Permalink to this definition">¶</a></dt>
<dd><p>Deal with a query string that contains information that should be
exactly matched against a controlled vocabulary
(e.g. “nonfiction” or “grade 5”) along with information that
is more search-like (such as a title or author).</p>
<p>The match information is pulled out of the query string and
used to make a series of match_phrase queries. The rest of the
information is used in a simple query that matches basic
fields.</p>
</dd></dl>

<dl class="method">
<dt id="core.external_search.Query.title_multi_match_for">
<code class="descname">title_multi_match_for</code><span class="sig-paren">(</span><em>other_field</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/external_search.html#Query.title_multi_match_for"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.external_search.Query.title_multi_match_for" title="Permalink to this definition">¶</a></dt>
<dd><p>Helper method to create a MultiMatch hypothesis that crosses
multiple fields.</p>
<p>This strategy only works if everything is spelled correctly,
since we can’t combine a “cross_fields” Multimatch query
with a fuzzy search.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Yield:</th><td class="field-body">At most one (hypothesis, weight) 2-tuple.</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="core.external_search.QueryParser">
<em class="property">class </em><code class="descclassname">core.external_search.</code><code class="descname">QueryParser</code><span class="sig-paren">(</span><em>query_string</em>, <em>query_class=&lt;class 'core.external_search.Query'&gt;</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/external_search.html#QueryParser"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.external_search.QueryParser" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Attempt to parse filter information out of a query string.</p>
<p>This class is where we make sense of queries like the following:</p>
<blockquote>
<div>asteroids nonfiction
grade 5 dogs
young adult romance
divorce age 10 and up</div></blockquote>
<p>These queries contain information that can best be thought of in
terms of a filter against specific fields (“nonfiction”, “grade
5”, “romance”). Books either match these criteria or they don’t.</p>
<p>These queries may also contain information that can be thought of
in terms of a search (“asteroids”, “dogs”) – books may match
these criteria to a greater or lesser extent.</p>
<dl class="method">
<dt id="core.external_search.QueryParser.add_match_term_filter">
<code class="descname">add_match_term_filter</code><span class="sig-paren">(</span><em>query</em>, <em>field</em>, <em>query_string</em>, <em>matched_portion</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/external_search.html#QueryParser.add_match_term_filter"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.external_search.QueryParser.add_match_term_filter" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a match query that finds documents whose value for <cite>field</cite>
matches <cite>query</cite>.</p>
<p>Add it to <cite>self.filters</cite>, and remove the relevant portion
of <cite>query_string</cite> so it doesn’t get reused.</p>
</dd></dl>

<dl class="method">
<dt id="core.external_search.QueryParser.add_target_age_filter">
<code class="descname">add_target_age_filter</code><span class="sig-paren">(</span><em>query</em>, <em>query_string</em>, <em>matched_portion</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/external_search.html#QueryParser.add_target_age_filter"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.external_search.QueryParser.add_target_age_filter" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a query that finds documents whose value for <cite>target_age</cite>
matches <cite>query</cite>.</p>
<p>Add a filter version of this query to <cite>.match_queries</cite> (so that
all documents outside the target age are filtered out).</p>
<p>Add a boosted version of this query to <cite>.match_queries</cite> (so
that documents that cluster tightly around the target age are
boosted over documents that span a huge age range).</p>
<p>Remove the relevant portion of <cite>query_string</cite> so it doesn’t get
reused.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="core.external_search.SearchBase">
<em class="property">class </em><code class="descclassname">core.external_search.</code><code class="descname">SearchBase</code><a class="reference internal" href="_modules/core/external_search.html#SearchBase"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.external_search.SearchBase" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>A superclass containing helper methods for creating and modifying
Elasticsearch-dsl Query-type objects.</p>
<dl class="classmethod">
<dt id="core.external_search.SearchBase.make_target_age_query">
<em class="property">classmethod </em><code class="descname">make_target_age_query</code><span class="sig-paren">(</span><em>target_age</em>, <em>boost=1.1</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/external_search.html#SearchBase.make_target_age_query"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.external_search.SearchBase.make_target_age_query" title="Permalink to this definition">¶</a></dt>
<dd><p>Create an Elasticsearch query object for a boolean query that
matches works whose target ages overlap (partially or
entirely) the given age range.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>target_age</strong> – A 2-tuple (lower limit, upper limit)</li>
<li><strong>boost</strong> – Boost works that fit precisely into the target
age range by this amount, vis-a-vis works that don’t.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="core.external_search.SearchIndexCoverageProvider">
<em class="property">class </em><code class="descclassname">core.external_search.</code><code class="descname">SearchIndexCoverageProvider</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/external_search.html#SearchIndexCoverageProvider"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.external_search.SearchIndexCoverageProvider" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.coverage.WorkPresentationProvider" title="core.coverage.WorkPresentationProvider"><code class="xref py py-class docutils literal notranslate"><span class="pre">core.coverage.WorkPresentationProvider</span></code></a></p>
<p>Make sure all Works have up-to-date representation in the
search index.</p>
<dl class="attribute">
<dt id="core.external_search.SearchIndexCoverageProvider.DEFAULT_BATCH_SIZE">
<code class="descname">DEFAULT_BATCH_SIZE</code><em class="property"> = 500</em><a class="headerlink" href="#core.external_search.SearchIndexCoverageProvider.DEFAULT_BATCH_SIZE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.external_search.SearchIndexCoverageProvider.OPERATION">
<code class="descname">OPERATION</code><em class="property"> = u'update-search-index'</em><a class="headerlink" href="#core.external_search.SearchIndexCoverageProvider.OPERATION" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.external_search.SearchIndexCoverageProvider.SERVICE_NAME">
<code class="descname">SERVICE_NAME</code><em class="property"> = 'Search index coverage provider'</em><a class="headerlink" href="#core.external_search.SearchIndexCoverageProvider.SERVICE_NAME" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="core.external_search.SearchIndexCoverageProvider.process_batch">
<code class="descname">process_batch</code><span class="sig-paren">(</span><em>works</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/external_search.html#SearchIndexCoverageProvider.process_batch"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.external_search.SearchIndexCoverageProvider.process_batch" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">a mixed list of Works and CoverageFailure objects.</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="core.external_search.SortKeyPagination">
<em class="property">class </em><code class="descclassname">core.external_search.</code><code class="descname">SortKeyPagination</code><span class="sig-paren">(</span><em>last_item_on_previous_page=None</em>, <em>size=50</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/external_search.html#SortKeyPagination"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.external_search.SortKeyPagination" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.lane.Pagination" title="core.lane.Pagination"><code class="xref py py-class docutils literal notranslate"><span class="pre">core.lane.Pagination</span></code></a></p>
<p>An Elasticsearch-specific implementation of Pagination that
paginates search results by tracking where in a sorted list the
previous page left off, rather than using a numeric index into the
list.</p>
<dl class="classmethod">
<dt id="core.external_search.SortKeyPagination.from_request">
<em class="property">classmethod </em><code class="descname">from_request</code><span class="sig-paren">(</span><em>get_arg</em>, <em>default_size=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/external_search.html#SortKeyPagination.from_request"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.external_search.SortKeyPagination.from_request" title="Permalink to this definition">¶</a></dt>
<dd><p>Instantiate a SortKeyPagination object from a Flask request.</p>
</dd></dl>

<dl class="method">
<dt id="core.external_search.SortKeyPagination.items">
<code class="descname">items</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/external_search.html#SortKeyPagination.items"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.external_search.SortKeyPagination.items" title="Permalink to this definition">¶</a></dt>
<dd><p>Yield the URL arguments necessary to convey the current page
state.</p>
</dd></dl>

<dl class="method">
<dt id="core.external_search.SortKeyPagination.modify_database_query">
<code class="descname">modify_database_query</code><span class="sig-paren">(</span><em>qu</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/external_search.html#SortKeyPagination.modify_database_query"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.external_search.SortKeyPagination.modify_database_query" title="Permalink to this definition">¶</a></dt>
<dd><p>Modify the given database query with OFFSET and LIMIT.</p>
</dd></dl>

<dl class="method">
<dt id="core.external_search.SortKeyPagination.modify_search_query">
<code class="descname">modify_search_query</code><span class="sig-paren">(</span><em>search</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/external_search.html#SortKeyPagination.modify_search_query"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.external_search.SortKeyPagination.modify_search_query" title="Permalink to this definition">¶</a></dt>
<dd><p>Modify the given Search object so that it starts
picking up items immediately after the previous page.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>search</strong> – An elasticsearch-dsl Search object.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="core.external_search.SortKeyPagination.next_page">
<code class="descname">next_page</code><a class="headerlink" href="#core.external_search.SortKeyPagination.next_page" title="Permalink to this definition">¶</a></dt>
<dd><p>If possible, create a new SortKeyPagination representing the
next page of results.</p>
</dd></dl>

<dl class="attribute">
<dt id="core.external_search.SortKeyPagination.offset">
<code class="descname">offset</code><a class="headerlink" href="#core.external_search.SortKeyPagination.offset" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="core.external_search.SortKeyPagination.page_loaded">
<code class="descname">page_loaded</code><span class="sig-paren">(</span><em>page</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/external_search.html#SortKeyPagination.page_loaded"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.external_search.SortKeyPagination.page_loaded" title="Permalink to this definition">¶</a></dt>
<dd><p>An actual page of results has been fetched. Keep any internal state
that would be useful to know when reasoning about earlier or
later pages.</p>
<p>Specifically, keep track of the sort value of the last item on
this page, so that self.next_page will create a
SortKeyPagination object capable of generating the subsequent
page.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>page</strong> – A list of elasticsearch-dsl Hit objects.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="core.external_search.SortKeyPagination.pagination_key">
<code class="descname">pagination_key</code><a class="headerlink" href="#core.external_search.SortKeyPagination.pagination_key" title="Permalink to this definition">¶</a></dt>
<dd><p>Create the pagination key for this page.</p>
</dd></dl>

<dl class="attribute">
<dt id="core.external_search.SortKeyPagination.previous_page">
<code class="descname">previous_page</code><a class="headerlink" href="#core.external_search.SortKeyPagination.previous_page" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.external_search.SortKeyPagination.total_size">
<code class="descname">total_size</code><a class="headerlink" href="#core.external_search.SortKeyPagination.total_size" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="core.external_search.WorkSearchResult">
<em class="property">class </em><code class="descclassname">core.external_search.</code><code class="descname">WorkSearchResult</code><span class="sig-paren">(</span><em>work</em>, <em>hit</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/external_search.html#WorkSearchResult"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.external_search.WorkSearchResult" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Wraps a Work object to give extra information obtained from
ElasticSearch.</p>
<p>This object acts just like a Work (though isinstance(x, Work) will
fail), with one exception: you can access the raw ElasticSearch Hit
result as ._hit.</p>
<p>This is useful when a Work needs to be ‘tagged’ with information
obtained through Elasticsearch, such as its ‘last modified’ date
the context of a specific lane.</p>
</dd></dl>

<dl class="function">
<dt id="core.external_search.mock_search_index">
<code class="descclassname">core.external_search.</code><code class="descname">mock_search_index</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwds</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/external_search.html#mock_search_index"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.external_search.mock_search_index" title="Permalink to this definition">¶</a></dt>
<dd><p>Temporarily mock the ExternalSearchIndex implementation
returned by the load() class method.</p>
</dd></dl>

</div>
<div class="section" id="module-core.facets">
<span id="core-facets-module"></span><h2>core.facets module<a class="headerlink" href="#module-core.facets" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="core.facets.FacetConfig">
<em class="property">class </em><code class="descclassname">core.facets.</code><code class="descname">FacetConfig</code><span class="sig-paren">(</span><em>enabled_facets</em>, <em>default_facets</em>, <em>entrypoints=[]</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/facets.html#FacetConfig"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.facets.FacetConfig" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.facets.FacetConstants" title="core.facets.FacetConstants"><code class="xref py py-class docutils literal notranslate"><span class="pre">core.facets.FacetConstants</span></code></a></p>
<p>A class that implements the facet-related methods of
Library, and allows modifications to the enabled
and default facets. For use when a controller needs to
use a facet configuration different from the site-wide
facets.</p>
<dl class="method">
<dt id="core.facets.FacetConfig.default_facet">
<code class="descname">default_facet</code><span class="sig-paren">(</span><em>group_name</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/facets.html#FacetConfig.default_facet"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.facets.FacetConfig.default_facet" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="core.facets.FacetConfig.enable_facet">
<code class="descname">enable_facet</code><span class="sig-paren">(</span><em>group_name</em>, <em>facet</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/facets.html#FacetConfig.enable_facet"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.facets.FacetConfig.enable_facet" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="core.facets.FacetConfig.enabled_facets">
<code class="descname">enabled_facets</code><span class="sig-paren">(</span><em>group_name</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/facets.html#FacetConfig.enabled_facets"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.facets.FacetConfig.enabled_facets" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="classmethod">
<dt id="core.facets.FacetConfig.from_library">
<em class="property">classmethod </em><code class="descname">from_library</code><span class="sig-paren">(</span><em>library</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/facets.html#FacetConfig.from_library"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.facets.FacetConfig.from_library" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="core.facets.FacetConfig.set_default_facet">
<code class="descname">set_default_facet</code><span class="sig-paren">(</span><em>group_name</em>, <em>facet</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/facets.html#FacetConfig.set_default_facet"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.facets.FacetConfig.set_default_facet" title="Permalink to this definition">¶</a></dt>
<dd><p>Add <cite>facet</cite> to the list of possible values for <cite>group_name</cite>, even
if the library does not have that facet configured.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="core.facets.FacetConstants">
<em class="property">class </em><code class="descclassname">core.facets.</code><code class="descname">FacetConstants</code><a class="reference internal" href="_modules/core/facets.html#FacetConstants"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.facets.FacetConstants" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<dl class="attribute">
<dt id="core.facets.FacetConstants.AVAILABILITY_FACETS">
<code class="descname">AVAILABILITY_FACETS</code><em class="property"> = ['now', 'all', 'always']</em><a class="headerlink" href="#core.facets.FacetConstants.AVAILABILITY_FACETS" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.facets.FacetConstants.AVAILABILITY_FACET_GROUP_NAME">
<code class="descname">AVAILABILITY_FACET_GROUP_NAME</code><em class="property"> = 'available'</em><a class="headerlink" href="#core.facets.FacetConstants.AVAILABILITY_FACET_GROUP_NAME" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.facets.FacetConstants.AVAILABLE_ALL">
<code class="descname">AVAILABLE_ALL</code><em class="property"> = 'all'</em><a class="headerlink" href="#core.facets.FacetConstants.AVAILABLE_ALL" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.facets.FacetConstants.AVAILABLE_NOW">
<code class="descname">AVAILABLE_NOW</code><em class="property"> = 'now'</em><a class="headerlink" href="#core.facets.FacetConstants.AVAILABLE_NOW" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.facets.FacetConstants.AVAILABLE_OPEN_ACCESS">
<code class="descname">AVAILABLE_OPEN_ACCESS</code><em class="property"> = 'always'</em><a class="headerlink" href="#core.facets.FacetConstants.AVAILABLE_OPEN_ACCESS" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.facets.FacetConstants.COLLECTION_FACETS">
<code class="descname">COLLECTION_FACETS</code><em class="property"> = ['full', 'featured']</em><a class="headerlink" href="#core.facets.FacetConstants.COLLECTION_FACETS" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.facets.FacetConstants.COLLECTION_FACET_GROUP_NAME">
<code class="descname">COLLECTION_FACET_GROUP_NAME</code><em class="property"> = 'collection'</em><a class="headerlink" href="#core.facets.FacetConstants.COLLECTION_FACET_GROUP_NAME" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.facets.FacetConstants.COLLECTION_FEATURED">
<code class="descname">COLLECTION_FEATURED</code><em class="property"> = 'featured'</em><a class="headerlink" href="#core.facets.FacetConstants.COLLECTION_FEATURED" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.facets.FacetConstants.COLLECTION_FULL">
<code class="descname">COLLECTION_FULL</code><em class="property"> = 'full'</em><a class="headerlink" href="#core.facets.FacetConstants.COLLECTION_FULL" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.facets.FacetConstants.DEFAULT_ENABLED_FACETS">
<code class="descname">DEFAULT_ENABLED_FACETS</code><em class="property"> = {'available': ['all', 'now', 'always'], 'collection': ['full', 'featured'], 'order': ['author', 'title', 'added']}</em><a class="headerlink" href="#core.facets.FacetConstants.DEFAULT_ENABLED_FACETS" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.facets.FacetConstants.DEFAULT_FACET">
<code class="descname">DEFAULT_FACET</code><em class="property"> = {'available': 'all', 'collection': 'full', 'order': 'author'}</em><a class="headerlink" href="#core.facets.FacetConstants.DEFAULT_FACET" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.facets.FacetConstants.ENTRY_POINT_FACET_GROUP_NAME">
<code class="descname">ENTRY_POINT_FACET_GROUP_NAME</code><em class="property"> = 'entrypoint'</em><a class="headerlink" href="#core.facets.FacetConstants.ENTRY_POINT_FACET_GROUP_NAME" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.facets.FacetConstants.ENTRY_POINT_REL">
<code class="descname">ENTRY_POINT_REL</code><em class="property"> = 'http://librarysimplified.org/terms/rel/entrypoint'</em><a class="headerlink" href="#core.facets.FacetConstants.ENTRY_POINT_REL" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.facets.FacetConstants.FACETS_BY_GROUP">
<code class="descname">FACETS_BY_GROUP</code><em class="property"> = {'available': ['now', 'all', 'always'], 'collection': ['full', 'featured'], 'order': ['title', 'author', 'added', 'random']}</em><a class="headerlink" href="#core.facets.FacetConstants.FACETS_BY_GROUP" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.facets.FacetConstants.FACET_DISPLAY_TITLES">
<code class="descname">FACET_DISPLAY_TITLES</code><em class="property"> = {'added': l'Recently Added', 'all': l'All', 'always': l'Yours to keep', 'author': l'Author', 'featured': l'Popular Books', 'full': l'Everything', 'last_update': l'Last Update', 'now': l'Available now', 'random': l'Random', 'series': l'Series Position', 'title': l'Title', 'work_id': l'Work ID'}</em><a class="headerlink" href="#core.facets.FacetConstants.FACET_DISPLAY_TITLES" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.facets.FacetConstants.GROUP_DESCRIPTIONS">
<code class="descname">GROUP_DESCRIPTIONS</code><em class="property"> = {'available': l'Allow patrons to filter availability to', 'collection': l'Allow patrons to filter collection to', 'order': l'Allow patrons to sort by'}</em><a class="headerlink" href="#core.facets.FacetConstants.GROUP_DESCRIPTIONS" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.facets.FacetConstants.GROUP_DISPLAY_TITLES">
<code class="descname">GROUP_DISPLAY_TITLES</code><em class="property"> = {'available': l'Availability', 'collection': l'Collection', 'order': l'Sort by'}</em><a class="headerlink" href="#core.facets.FacetConstants.GROUP_DISPLAY_TITLES" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.facets.FacetConstants.MAX_CACHE_AGE_NAME">
<code class="descname">MAX_CACHE_AGE_NAME</code><em class="property"> = 'max_age'</em><a class="headerlink" href="#core.facets.FacetConstants.MAX_CACHE_AGE_NAME" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.facets.FacetConstants.ORDER_ADDED_TO_COLLECTION">
<code class="descname">ORDER_ADDED_TO_COLLECTION</code><em class="property"> = 'added'</em><a class="headerlink" href="#core.facets.FacetConstants.ORDER_ADDED_TO_COLLECTION" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.facets.FacetConstants.ORDER_ASCENDING">
<code class="descname">ORDER_ASCENDING</code><em class="property"> = 'asc'</em><a class="headerlink" href="#core.facets.FacetConstants.ORDER_ASCENDING" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.facets.FacetConstants.ORDER_AUTHOR">
<code class="descname">ORDER_AUTHOR</code><em class="property"> = 'author'</em><a class="headerlink" href="#core.facets.FacetConstants.ORDER_AUTHOR" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.facets.FacetConstants.ORDER_DESCENDING">
<code class="descname">ORDER_DESCENDING</code><em class="property"> = 'desc'</em><a class="headerlink" href="#core.facets.FacetConstants.ORDER_DESCENDING" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.facets.FacetConstants.ORDER_DESCENDING_BY_DEFAULT">
<code class="descname">ORDER_DESCENDING_BY_DEFAULT</code><em class="property"> = ['added', 'last_update']</em><a class="headerlink" href="#core.facets.FacetConstants.ORDER_DESCENDING_BY_DEFAULT" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.facets.FacetConstants.ORDER_FACETS">
<code class="descname">ORDER_FACETS</code><em class="property"> = ['title', 'author', 'added', 'random']</em><a class="headerlink" href="#core.facets.FacetConstants.ORDER_FACETS" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.facets.FacetConstants.ORDER_FACET_GROUP_NAME">
<code class="descname">ORDER_FACET_GROUP_NAME</code><em class="property"> = 'order'</em><a class="headerlink" href="#core.facets.FacetConstants.ORDER_FACET_GROUP_NAME" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.facets.FacetConstants.ORDER_LAST_UPDATE">
<code class="descname">ORDER_LAST_UPDATE</code><em class="property"> = 'last_update'</em><a class="headerlink" href="#core.facets.FacetConstants.ORDER_LAST_UPDATE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.facets.FacetConstants.ORDER_RANDOM">
<code class="descname">ORDER_RANDOM</code><em class="property"> = 'random'</em><a class="headerlink" href="#core.facets.FacetConstants.ORDER_RANDOM" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.facets.FacetConstants.ORDER_SERIES_POSITION">
<code class="descname">ORDER_SERIES_POSITION</code><em class="property"> = 'series'</em><a class="headerlink" href="#core.facets.FacetConstants.ORDER_SERIES_POSITION" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.facets.FacetConstants.ORDER_TITLE">
<code class="descname">ORDER_TITLE</code><em class="property"> = 'title'</em><a class="headerlink" href="#core.facets.FacetConstants.ORDER_TITLE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.facets.FacetConstants.ORDER_WORK_ID">
<code class="descname">ORDER_WORK_ID</code><em class="property"> = 'work_id'</em><a class="headerlink" href="#core.facets.FacetConstants.ORDER_WORK_ID" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.facets.FacetConstants.SORT_ORDER_TO_ELASTICSEARCH_FIELD_NAME">
<code class="descname">SORT_ORDER_TO_ELASTICSEARCH_FIELD_NAME</code><em class="property"> = {'added': 'licensepools.availability_time', 'author': 'sort_author', 'last_update': 'last_update_time', 'random': 'random', 'series': ['series_position', 'sort_title'], 'title': 'sort_title', 'work_id': '_id'}</em><a class="headerlink" href="#core.facets.FacetConstants.SORT_ORDER_TO_ELASTICSEARCH_FIELD_NAME" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>
<div class="section" id="module-core.lane">
<span id="core-lane-module"></span><h2>core.lane module<a class="headerlink" href="#module-core.lane" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="core.lane.BaseFacets">
<em class="property">class </em><code class="descclassname">core.lane.</code><code class="descname">BaseFacets</code><a class="reference internal" href="_modules/core/lane.html#BaseFacets"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.lane.BaseFacets" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.facets.FacetConstants" title="core.facets.FacetConstants"><code class="xref py py-class docutils literal notranslate"><span class="pre">core.facets.FacetConstants</span></code></a></p>
<p>Basic faceting class that doesn’t modify a search filter at all.</p>
<p>This is intended solely for use as a base class.</p>
<dl class="attribute">
<dt id="core.lane.BaseFacets.CACHED_FEED_TYPE">
<code class="descname">CACHED_FEED_TYPE</code><em class="property"> = None</em><a class="headerlink" href="#core.lane.BaseFacets.CACHED_FEED_TYPE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.lane.BaseFacets.cached">
<code class="descname">cached</code><a class="headerlink" href="#core.lane.BaseFacets.cached" title="Permalink to this definition">¶</a></dt>
<dd><p>This faceting object’s opinion on whether feeds should be cached.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">A boolean, or None for ‘no opinion’.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="core.lane.BaseFacets.facet_groups">
<code class="descname">facet_groups</code><a class="headerlink" href="#core.lane.BaseFacets.facet_groups" title="Permalink to this definition">¶</a></dt>
<dd><p>Yield a list of 4-tuples
(facet group, facet value, new Facets object, selected)
for use in building OPDS facets.</p>
<p>This does not include the ‘entry point’ facet group,
which must be handled separately.</p>
</dd></dl>

<dl class="method">
<dt id="core.lane.BaseFacets.items">
<code class="descname">items</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/lane.html#BaseFacets.items"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.lane.BaseFacets.items" title="Permalink to this definition">¶</a></dt>
<dd><p>Yields a 2-tuple for every active facet setting.</p>
<p>These tuples are used to generate URLs that can identify
specific facet settings, and to distinguish between CachedFeed
objects that represent the same feed with different facet
settings.</p>
</dd></dl>

<dl class="attribute">
<dt id="core.lane.BaseFacets.max_cache_age">
<code class="descname">max_cache_age</code><em class="property"> = None</em><a class="headerlink" href="#core.lane.BaseFacets.max_cache_age" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="core.lane.BaseFacets.modify_database_query">
<code class="descname">modify_database_query</code><span class="sig-paren">(</span><em>_db</em>, <em>qu</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/lane.html#BaseFacets.modify_database_query"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.lane.BaseFacets.modify_database_query" title="Permalink to this definition">¶</a></dt>
<dd><p>If necessary, modify a database query so that resulting
items conform the constraints of this faceting object.</p>
<p>The default behavior is to not modify the query.</p>
</dd></dl>

<dl class="method">
<dt id="core.lane.BaseFacets.modify_search_filter">
<code class="descname">modify_search_filter</code><span class="sig-paren">(</span><em>filter</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/lane.html#BaseFacets.modify_search_filter"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.lane.BaseFacets.modify_search_filter" title="Permalink to this definition">¶</a></dt>
<dd><p>Modify an external_search.Filter object to filter out works
excluded by the business logic of this faceting class.</p>
</dd></dl>

<dl class="attribute">
<dt id="core.lane.BaseFacets.query_string">
<code class="descname">query_string</code><a class="headerlink" href="#core.lane.BaseFacets.query_string" title="Permalink to this definition">¶</a></dt>
<dd><p>A query string fragment that propagates all active facet
settings.</p>
</dd></dl>

<dl class="method">
<dt id="core.lane.BaseFacets.scoring_functions">
<code class="descname">scoring_functions</code><span class="sig-paren">(</span><em>filter</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/lane.html#BaseFacets.scoring_functions"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.lane.BaseFacets.scoring_functions" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a list of ScoringFunction objects that modify how
works in the given WorkList should be ordered.</p>
<p>Most subclasses will not use this because they order
works using the ‘order’ feature.</p>
</dd></dl>

<dl class="classmethod">
<dt id="core.lane.BaseFacets.selectable_entrypoints">
<em class="property">classmethod </em><code class="descname">selectable_entrypoints</code><span class="sig-paren">(</span><em>worklist</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/lane.html#BaseFacets.selectable_entrypoints"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.lane.BaseFacets.selectable_entrypoints" title="Permalink to this definition">¶</a></dt>
<dd><p>Ignore all entry points, even if the WorkList supports them.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="core.lane.DatabaseBackedFacets">
<em class="property">class </em><code class="descclassname">core.lane.</code><code class="descname">DatabaseBackedFacets</code><span class="sig-paren">(</span><em>library</em>, <em>collection</em>, <em>availability</em>, <em>order</em>, <em>order_ascending=None</em>, <em>enabled_facets=None</em>, <em>entrypoint=None</em>, <em>entrypoint_is_default=False</em>, <em>**constructor_kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/lane.html#DatabaseBackedFacets"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.lane.DatabaseBackedFacets" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.lane.Facets" title="core.lane.Facets"><code class="xref py py-class docutils literal notranslate"><span class="pre">core.lane.Facets</span></code></a></p>
<p>A generic faceting object designed for managing queries against the
database. (Other faceting objects are designed for managing
Elasticsearch searches.)</p>
<dl class="attribute">
<dt id="core.lane.DatabaseBackedFacets.ORDER_FACET_TO_DATABASE_FIELD">
<code class="descname">ORDER_FACET_TO_DATABASE_FIELD</code><em class="property"> = {'author': &lt;sqlalchemy.orm.attributes.InstrumentedAttribute object&gt;, 'last_update': &lt;sqlalchemy.orm.attributes.InstrumentedAttribute object&gt;, 'title': &lt;sqlalchemy.orm.attributes.InstrumentedAttribute object&gt;, 'work_id': &lt;sqlalchemy.orm.attributes.InstrumentedAttribute object&gt;}</em><a class="headerlink" href="#core.lane.DatabaseBackedFacets.ORDER_FACET_TO_DATABASE_FIELD" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="classmethod">
<dt id="core.lane.DatabaseBackedFacets.available_facets">
<em class="property">classmethod </em><code class="descname">available_facets</code><span class="sig-paren">(</span><em>config</em>, <em>facet_group_name</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/lane.html#DatabaseBackedFacets.available_facets"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.lane.DatabaseBackedFacets.available_facets" title="Permalink to this definition">¶</a></dt>
<dd><p>Exclude search orders not available through database queries.</p>
</dd></dl>

<dl class="classmethod">
<dt id="core.lane.DatabaseBackedFacets.default_facet">
<em class="property">classmethod </em><code class="descname">default_facet</code><span class="sig-paren">(</span><em>config</em>, <em>facet_group_name</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/lane.html#DatabaseBackedFacets.default_facet"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.lane.DatabaseBackedFacets.default_facet" title="Permalink to this definition">¶</a></dt>
<dd><p>Exclude search orders not available through database queries.</p>
</dd></dl>

<dl class="method">
<dt id="core.lane.DatabaseBackedFacets.modify_database_query">
<code class="descname">modify_database_query</code><span class="sig-paren">(</span><em>_db</em>, <em>qu</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/lane.html#DatabaseBackedFacets.modify_database_query"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.lane.DatabaseBackedFacets.modify_database_query" title="Permalink to this definition">¶</a></dt>
<dd><p>Restrict a query so that it matches only works
that fit the criteria of this faceting object. Ensure
query is appropriately ordered and made distinct.</p>
</dd></dl>

<dl class="method">
<dt id="core.lane.DatabaseBackedFacets.order_by">
<code class="descname">order_by</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/lane.html#DatabaseBackedFacets.order_by"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.lane.DatabaseBackedFacets.order_by" title="Permalink to this definition">¶</a></dt>
<dd><p>Given these Facets, create a complete ORDER BY clause for queries
against WorkModelWithGenre.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="core.lane.DatabaseBackedWorkList">
<em class="property">class </em><code class="descclassname">core.lane.</code><code class="descname">DatabaseBackedWorkList</code><a class="reference internal" href="_modules/core/lane.html#DatabaseBackedWorkList"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.lane.DatabaseBackedWorkList" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.lane.WorkList" title="core.lane.WorkList"><code class="xref py py-class docutils literal notranslate"><span class="pre">core.lane.WorkList</span></code></a></p>
<p>A WorkList that can get its works from the database in addition to
(or possibly instead of) the search index.</p>
<p>Even when works _are_ obtained through the search index, a
DatabaseBackedWorkList is then created to look up the Work objects
for use in an OPDS feed.</p>
<dl class="method">
<dt id="core.lane.DatabaseBackedWorkList.age_range_filter_clauses">
<code class="descname">age_range_filter_clauses</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/lane.html#DatabaseBackedWorkList.age_range_filter_clauses"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.lane.DatabaseBackedWorkList.age_range_filter_clauses" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a clause that filters out all books not classified as
suitable for this DatabaseBackedWorkList’s age range.</p>
</dd></dl>

<dl class="method">
<dt id="core.lane.DatabaseBackedWorkList.audience_filter_clauses">
<code class="descname">audience_filter_clauses</code><span class="sig-paren">(</span><em>_db</em>, <em>qu</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/lane.html#DatabaseBackedWorkList.audience_filter_clauses"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.lane.DatabaseBackedWorkList.audience_filter_clauses" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a SQLAlchemy filter that excludes books whose intended
audience doesn’t match what we’re looking for.</p>
</dd></dl>

<dl class="classmethod">
<dt id="core.lane.DatabaseBackedWorkList.base_query">
<em class="property">classmethod </em><code class="descname">base_query</code><span class="sig-paren">(</span><em>_db</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/lane.html#DatabaseBackedWorkList.base_query"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.lane.DatabaseBackedWorkList.base_query" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a query that contains the joins set up as necessary to
create OPDS feeds.</p>
</dd></dl>

<dl class="method">
<dt id="core.lane.DatabaseBackedWorkList.bibliographic_filter_clauses">
<code class="descname">bibliographic_filter_clauses</code><span class="sig-paren">(</span><em>_db</em>, <em>qu</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/lane.html#DatabaseBackedWorkList.bibliographic_filter_clauses"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.lane.DatabaseBackedWorkList.bibliographic_filter_clauses" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a SQLAlchemy filter that excludes books whose bibliographic
metadata doesn’t match what we’re looking for.</p>
<p>query is either <cite>qu</cite>, or a new query that has been modified to
join against additional tables.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">A 2-tuple (query, clauses).</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="core.lane.DatabaseBackedWorkList.customlist_filter_clauses">
<code class="descname">customlist_filter_clauses</code><span class="sig-paren">(</span><em>qu</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/lane.html#DatabaseBackedWorkList.customlist_filter_clauses"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.lane.DatabaseBackedWorkList.customlist_filter_clauses" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a filter clause that only books that are on one of the
CustomLists allowed by Lane configuration.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">A 3-tuple (query, clauses).</td>
</tr>
</tbody>
</table>
<p><cite>query</cite> is the same query as <cite>qu</cite>, possibly extended with
additional table joins.</p>
<p><cite>clauses</cite> is a list of SQLAlchemy statements for use in a
filter() or case() statement.</p>
</dd></dl>

<dl class="method">
<dt id="core.lane.DatabaseBackedWorkList.genre_filter_clause">
<code class="descname">genre_filter_clause</code><span class="sig-paren">(</span><em>qu</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/lane.html#DatabaseBackedWorkList.genre_filter_clause"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.lane.DatabaseBackedWorkList.genre_filter_clause" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="core.lane.DatabaseBackedWorkList.modify_database_query_hook">
<code class="descname">modify_database_query_hook</code><span class="sig-paren">(</span><em>_db</em>, <em>qu</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/lane.html#DatabaseBackedWorkList.modify_database_query_hook"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.lane.DatabaseBackedWorkList.modify_database_query_hook" title="Permalink to this definition">¶</a></dt>
<dd><p>A hook method allowing subclasses to modify a database query
that’s about to find all the works in this WorkList.</p>
<p>This can avoid the need for complex subclasses of
DatabaseBackedFacets.</p>
</dd></dl>

<dl class="method">
<dt id="core.lane.DatabaseBackedWorkList.only_show_ready_deliverable_works">
<code class="descname">only_show_ready_deliverable_works</code><span class="sig-paren">(</span><em>_db</em>, <em>query</em>, <em>show_suppressed=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/lane.html#DatabaseBackedWorkList.only_show_ready_deliverable_works"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.lane.DatabaseBackedWorkList.only_show_ready_deliverable_works" title="Permalink to this definition">¶</a></dt>
<dd><p>Restrict a query to show only presentation-ready works present in
an appropriate collection which the default client can
fulfill.</p>
<p>Note that this assumes the query has an active join against
LicensePool.</p>
</dd></dl>

<dl class="method">
<dt id="core.lane.DatabaseBackedWorkList.works_from_database">
<code class="descname">works_from_database</code><span class="sig-paren">(</span><em>_db</em>, <em>facets=None</em>, <em>pagination=None</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/lane.html#DatabaseBackedWorkList.works_from_database"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.lane.DatabaseBackedWorkList.works_from_database" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a query against the <cite>works</cite> table that finds Work objects
corresponding to all the Works that belong in this WorkList.</p>
<p>The apply_filters() implementation defines which Works qualify
for membership in a WorkList of this type.</p>
<p>This tends to be slower than WorkList.works, but not all
lanes can be generated through search engine queries.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>_db</strong> – A database connection.</li>
<li><strong>facets</strong> – A faceting object, which may place additional
constraints on WorkList membership.</li>
<li><strong>pagination</strong> – A Pagination object indicating which part of
the WorkList the caller is looking at.</li>
<li><strong>kwargs</strong> – Ignored – only included for compatibility with works().</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">A Query.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="core.lane.DefaultSortOrderFacets">
<em class="property">class </em><code class="descclassname">core.lane.</code><code class="descname">DefaultSortOrderFacets</code><span class="sig-paren">(</span><em>library</em>, <em>collection</em>, <em>availability</em>, <em>order</em>, <em>order_ascending=None</em>, <em>enabled_facets=None</em>, <em>entrypoint=None</em>, <em>entrypoint_is_default=False</em>, <em>**constructor_kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/lane.html#DefaultSortOrderFacets"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.lane.DefaultSortOrderFacets" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.lane.Facets" title="core.lane.Facets"><code class="xref py py-class docutils literal notranslate"><span class="pre">core.lane.Facets</span></code></a></p>
<p>A faceting object that changes the default sort order.</p>
<p>Subclasses must set DEFAULT_SORT_ORDER</p>
<dl class="classmethod">
<dt id="core.lane.DefaultSortOrderFacets.available_facets">
<em class="property">classmethod </em><code class="descname">available_facets</code><span class="sig-paren">(</span><em>config</em>, <em>facet_group_name</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/lane.html#DefaultSortOrderFacets.available_facets"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.lane.DefaultSortOrderFacets.available_facets" title="Permalink to this definition">¶</a></dt>
<dd><p>Make sure the default sort order is the first item
in the list of available sort orders.</p>
</dd></dl>

<dl class="classmethod">
<dt id="core.lane.DefaultSortOrderFacets.default_facet">
<em class="property">classmethod </em><code class="descname">default_facet</code><span class="sig-paren">(</span><em>config</em>, <em>facet_group_name</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/lane.html#DefaultSortOrderFacets.default_facet"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.lane.DefaultSortOrderFacets.default_facet" title="Permalink to this definition">¶</a></dt>
<dd><p>The default value for the given facet group.</p>
<p>The default value must be one of the values returned by available_facets() above.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="core.lane.Facets">
<em class="property">class </em><code class="descclassname">core.lane.</code><code class="descname">Facets</code><span class="sig-paren">(</span><em>library</em>, <em>collection</em>, <em>availability</em>, <em>order</em>, <em>order_ascending=None</em>, <em>enabled_facets=None</em>, <em>entrypoint=None</em>, <em>entrypoint_is_default=False</em>, <em>**constructor_kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/lane.html#Facets"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.lane.Facets" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.lane.FacetsWithEntryPoint" title="core.lane.FacetsWithEntryPoint"><code class="xref py py-class docutils literal notranslate"><span class="pre">core.lane.FacetsWithEntryPoint</span></code></a></p>
<p>A full-fledged facet class that supports complex navigation between
multiple facet groups.</p>
<p>Despite the generic name, this is only used in ‘page’ type OPDS
feeds that list all the works in some WorkList.</p>
<dl class="attribute">
<dt id="core.lane.Facets.ORDER_BY_RELEVANCE">
<code class="descname">ORDER_BY_RELEVANCE</code><em class="property"> = 'relevance'</em><a class="headerlink" href="#core.lane.Facets.ORDER_BY_RELEVANCE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="classmethod">
<dt id="core.lane.Facets.available_facets">
<em class="property">classmethod </em><code class="descname">available_facets</code><span class="sig-paren">(</span><em>config</em>, <em>facet_group_name</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/lane.html#Facets.available_facets"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.lane.Facets.available_facets" title="Permalink to this definition">¶</a></dt>
<dd><p>Which facets are enabled for the given facet group?</p>
<p>You can override this to forcible enable or disable facets
that might not be enabled in library configuration, but you
can’t make up totally new facets.</p>
<p>TODO: This sytem would make more sense if you _could_ make up
totally new facets, maybe because each facet was represented
as a policy object rather than a key to code implemented
elsewhere in this class. Right now this method implies more
flexibility than actually exists.</p>
</dd></dl>

<dl class="classmethod">
<dt id="core.lane.Facets.default">
<em class="property">classmethod </em><code class="descname">default</code><span class="sig-paren">(</span><em>library</em>, <em>collection=None</em>, <em>availability=None</em>, <em>order=None</em>, <em>entrypoint=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/lane.html#Facets.default"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.lane.Facets.default" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="classmethod">
<dt id="core.lane.Facets.default_facet">
<em class="property">classmethod </em><code class="descname">default_facet</code><span class="sig-paren">(</span><em>config</em>, <em>facet_group_name</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/lane.html#Facets.default_facet"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.lane.Facets.default_facet" title="Permalink to this definition">¶</a></dt>
<dd><p>The default value for the given facet group.</p>
<p>The default value must be one of the values returned by available_facets() above.</p>
</dd></dl>

<dl class="attribute">
<dt id="core.lane.Facets.enabled_facets">
<code class="descname">enabled_facets</code><a class="headerlink" href="#core.lane.Facets.enabled_facets" title="Permalink to this definition">¶</a></dt>
<dd><p>Yield a 3-tuple of lists (order, availability, collection)
representing facet values enabled via initialization or configuration</p>
<p>The ‘entry point’ facet group is handled separately, since it
is not always used.</p>
</dd></dl>

<dl class="attribute">
<dt id="core.lane.Facets.facet_groups">
<code class="descname">facet_groups</code><a class="headerlink" href="#core.lane.Facets.facet_groups" title="Permalink to this definition">¶</a></dt>
<dd><p>Yield a list of 4-tuples
(facet group, facet value, new Facets object, selected)
for use in building OPDS facets.</p>
<p>This does not yield anything for the ‘entry point’ facet group,
which must be handled separately.</p>
</dd></dl>

<dl class="classmethod">
<dt id="core.lane.Facets.from_request">
<em class="property">classmethod </em><code class="descname">from_request</code><span class="sig-paren">(</span><em>library</em>, <em>config</em>, <em>get_argument</em>, <em>get_header</em>, <em>worklist</em>, <em>default_entrypoint=None</em>, <em>**extra</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/lane.html#Facets.from_request"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.lane.Facets.from_request" title="Permalink to this definition">¶</a></dt>
<dd><p>Load a faceting object from an HTTP request.</p>
</dd></dl>

<dl class="method">
<dt id="core.lane.Facets.items">
<code class="descname">items</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/lane.html#Facets.items"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.lane.Facets.items" title="Permalink to this definition">¶</a></dt>
<dd><p>Yields a 2-tuple for every active facet setting.</p>
<p>In this class that just means the entrypoint and any max_cache_age.</p>
</dd></dl>

<dl class="method">
<dt id="core.lane.Facets.modify_database_query">
<code class="descname">modify_database_query</code><span class="sig-paren">(</span><em>_db</em>, <em>qu</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/lane.html#Facets.modify_database_query"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.lane.Facets.modify_database_query" title="Permalink to this definition">¶</a></dt>
<dd><p>Restrict a query against Work+LicensePool+Edition so that it
matches only works that fit the criteria of this Faceting object.</p>
<p>Sort order facet cannot be handled in this method, but can be
handled in subclasses that override this method.</p>
</dd></dl>

<dl class="method">
<dt id="core.lane.Facets.modify_search_filter">
<code class="descname">modify_search_filter</code><span class="sig-paren">(</span><em>filter</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/lane.html#Facets.modify_search_filter"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.lane.Facets.modify_search_filter" title="Permalink to this definition">¶</a></dt>
<dd><p>Modify the given external_search.Filter object
so that it reflects the settings of this Facets object.</p>
<p>This is the Elasticsearch equivalent of apply(). However, the
Elasticsearch implementation of (e.g.) the meaning of the
different availabilty statuses is kept in Filter.build().</p>
</dd></dl>

<dl class="method">
<dt id="core.lane.Facets.navigate">
<code class="descname">navigate</code><span class="sig-paren">(</span><em>collection=None</em>, <em>availability=None</em>, <em>order=None</em>, <em>entrypoint=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/lane.html#Facets.navigate"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.lane.Facets.navigate" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a slightly different Facets object from this one.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="core.lane.FacetsWithEntryPoint">
<em class="property">class </em><code class="descclassname">core.lane.</code><code class="descname">FacetsWithEntryPoint</code><span class="sig-paren">(</span><em>entrypoint=None</em>, <em>entrypoint_is_default=False</em>, <em>max_cache_age=None</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/lane.html#FacetsWithEntryPoint"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.lane.FacetsWithEntryPoint" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.lane.BaseFacets" title="core.lane.BaseFacets"><code class="xref py py-class docutils literal notranslate"><span class="pre">core.lane.BaseFacets</span></code></a></p>
<p>Basic Facets class that knows how to filter a query based on a
selected EntryPoint.</p>
<dl class="classmethod">
<dt id="core.lane.FacetsWithEntryPoint.from_request">
<em class="property">classmethod </em><code class="descname">from_request</code><span class="sig-paren">(</span><em>library</em>, <em>facet_config</em>, <em>get_argument</em>, <em>get_header</em>, <em>worklist</em>, <em>default_entrypoint=None</em>, <em>**extra_kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/lane.html#FacetsWithEntryPoint.from_request"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.lane.FacetsWithEntryPoint.from_request" title="Permalink to this definition">¶</a></dt>
<dd><p>Load a faceting object from an HTTP request.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>facet_config</strong> – A Library (or mock of one) that knows
which subset of the available facets are configured.</li>
<li><strong>get_argument</strong> – A callable that takes one argument and
retrieves (or pretends to retrieve) a query string
parameter of that name from an incoming HTTP request.</li>
<li><strong>get_header</strong> – A callable that takes one argument and
retrieves (or pretends to retrieve) an HTTP header
of that name from an incoming HTTP request.</li>
<li><strong>worklist</strong> – A WorkList associated with the current request,
if any.</li>
<li><strong>default_entrypoint</strong> – Select this EntryPoint if the
incoming request does not specify an enabled EntryPoint.
If this is None, the first enabled EntryPoint will be used
as the default.</li>
<li><strong>extra_kwargs</strong> – A dictionary of keyword arguments to pass
into the constructor when a faceting object is instantiated.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">A FacetsWithEntryPoint, or a ProblemDetail if there’s
a problem with the input from the request.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="core.lane.FacetsWithEntryPoint.items">
<code class="descname">items</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/lane.html#FacetsWithEntryPoint.items"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.lane.FacetsWithEntryPoint.items" title="Permalink to this definition">¶</a></dt>
<dd><p>Yields a 2-tuple for every active facet setting.</p>
<p>In this class that just means the entrypoint and any max_cache_age.</p>
</dd></dl>

<dl class="classmethod">
<dt id="core.lane.FacetsWithEntryPoint.load_entrypoint">
<em class="property">classmethod </em><code class="descname">load_entrypoint</code><span class="sig-paren">(</span><em>name</em>, <em>valid_entrypoints</em>, <em>default=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/lane.html#FacetsWithEntryPoint.load_entrypoint"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.lane.FacetsWithEntryPoint.load_entrypoint" title="Permalink to this definition">¶</a></dt>
<dd><p>Look up an EntryPoint by name, assuming it’s valid in the
given WorkList.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>valid_entrypoints</strong> – The EntryPoints that might be
valid. This is probably not the value of
WorkList.selectable_entrypoints, because an EntryPoint
selected in a WorkList remains valid (but not selectable) for
all of its children.</li>
<li><strong>default</strong> – A class to use as the default EntryPoint if
none is specified. If no default is specified, the first
enabled EntryPoint will be used.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">A 2-tuple (EntryPoint class, is_default).</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="classmethod">
<dt id="core.lane.FacetsWithEntryPoint.load_max_cache_age">
<em class="property">classmethod </em><code class="descname">load_max_cache_age</code><span class="sig-paren">(</span><em>value</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/lane.html#FacetsWithEntryPoint.load_max_cache_age"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.lane.FacetsWithEntryPoint.load_max_cache_age" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert a value for the MAX_CACHE_AGE_NAME parameter to a value
that CachedFeed will understand.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>value</strong> – A string.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">For now, either CachedFeed.IGNORE_CACHE or None.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="core.lane.FacetsWithEntryPoint.modify_database_query">
<code class="descname">modify_database_query</code><span class="sig-paren">(</span><em>_db</em>, <em>qu</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/lane.html#FacetsWithEntryPoint.modify_database_query"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.lane.FacetsWithEntryPoint.modify_database_query" title="Permalink to this definition">¶</a></dt>
<dd><p>Modify the given database query so that it reflects this set of
facets.</p>
</dd></dl>

<dl class="method">
<dt id="core.lane.FacetsWithEntryPoint.modify_search_filter">
<code class="descname">modify_search_filter</code><span class="sig-paren">(</span><em>filter</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/lane.html#FacetsWithEntryPoint.modify_search_filter"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.lane.FacetsWithEntryPoint.modify_search_filter" title="Permalink to this definition">¶</a></dt>
<dd><p>Modify the given external_search.Filter object
so that it reflects this set of facets.</p>
</dd></dl>

<dl class="method">
<dt id="core.lane.FacetsWithEntryPoint.navigate">
<code class="descname">navigate</code><span class="sig-paren">(</span><em>entrypoint</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/lane.html#FacetsWithEntryPoint.navigate"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.lane.FacetsWithEntryPoint.navigate" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a very similar FacetsWithEntryPoint that points to
a different EntryPoint.</p>
</dd></dl>

<dl class="classmethod">
<dt id="core.lane.FacetsWithEntryPoint.selectable_entrypoints">
<em class="property">classmethod </em><code class="descname">selectable_entrypoints</code><span class="sig-paren">(</span><em>worklist</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/lane.html#FacetsWithEntryPoint.selectable_entrypoints"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.lane.FacetsWithEntryPoint.selectable_entrypoints" title="Permalink to this definition">¶</a></dt>
<dd><p>Which EntryPoints can be selected for these facets on this
WorkList?</p>
<p>In most cases, there are no selectable EntryPoints; this generally
happens only at the top level.</p>
<p>By default, this is completely determined by the WorkList.
See SearchFacets for an example that changes this.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="core.lane.FeaturedFacets">
<em class="property">class </em><code class="descclassname">core.lane.</code><code class="descname">FeaturedFacets</code><span class="sig-paren">(</span><em>minimum_featured_quality</em>, <em>entrypoint=None</em>, <em>random_seed=None</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/lane.html#FeaturedFacets"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.lane.FeaturedFacets" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.lane.FacetsWithEntryPoint" title="core.lane.FacetsWithEntryPoint"><code class="xref py py-class docutils literal notranslate"><span class="pre">core.lane.FacetsWithEntryPoint</span></code></a></p>
<p>A simple faceting object that configures a query so that the ‘most
featurable’ items are at the front.</p>
<p>This is mainly a convenient thing to pass into
AcquisitionFeed.groups().</p>
<dl class="attribute">
<dt id="core.lane.FeaturedFacets.CACHED_FEED_TYPE">
<code class="descname">CACHED_FEED_TYPE</code><em class="property"> = u'groups'</em><a class="headerlink" href="#core.lane.FeaturedFacets.CACHED_FEED_TYPE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="classmethod">
<dt id="core.lane.FeaturedFacets.default">
<em class="property">classmethod </em><code class="descname">default</code><span class="sig-paren">(</span><em>lane</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/lane.html#FeaturedFacets.default"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.lane.FeaturedFacets.default" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="core.lane.FeaturedFacets.modify_search_filter">
<code class="descname">modify_search_filter</code><span class="sig-paren">(</span><em>filter</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/lane.html#FeaturedFacets.modify_search_filter"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.lane.FeaturedFacets.modify_search_filter" title="Permalink to this definition">¶</a></dt>
<dd><p>Modify the given external_search.Filter object
so that it reflects this set of facets.</p>
</dd></dl>

<dl class="method">
<dt id="core.lane.FeaturedFacets.navigate">
<code class="descname">navigate</code><span class="sig-paren">(</span><em>minimum_featured_quality=None</em>, <em>entrypoint=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/lane.html#FeaturedFacets.navigate"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.lane.FeaturedFacets.navigate" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a slightly different FeaturedFacets object based on this
one.</p>
</dd></dl>

<dl class="method">
<dt id="core.lane.FeaturedFacets.scoring_functions">
<code class="descname">scoring_functions</code><span class="sig-paren">(</span><em>filter</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/lane.html#FeaturedFacets.scoring_functions"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.lane.FeaturedFacets.scoring_functions" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate scoring functions that weight works randomly, but
with ‘more featurable’ works tending to be at the top.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="core.lane.Lane">
<em class="property">class </em><code class="descclassname">core.lane.</code><code class="descname">Lane</code><span class="sig-paren">(</span><em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/lane.html#Lane"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.lane.Lane" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.ext.declarative.api.Base</span></code>, <a class="reference internal" href="#core.lane.DatabaseBackedWorkList" title="core.lane.DatabaseBackedWorkList"><code class="xref py py-class docutils literal notranslate"><span class="pre">core.lane.DatabaseBackedWorkList</span></code></a></p>
<p>A WorkList that draws its search criteria from a row in a
database table.</p>
<p>A Lane corresponds roughly to a section in a branch library or
bookstore. Lanes are the primary means by which patrons discover
books.</p>
<dl class="attribute">
<dt id="core.lane.Lane.MAX_CACHE_AGE">
<code class="descname">MAX_CACHE_AGE</code><em class="property"> = 1200</em><a class="headerlink" href="#core.lane.Lane.MAX_CACHE_AGE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="core.lane.Lane.add_genre">
<code class="descname">add_genre</code><span class="sig-paren">(</span><em>genre</em>, <em>inclusive=True</em>, <em>recursive=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/lane.html#Lane.add_genre"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.lane.Lane.add_genre" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a new LaneGenre for the given genre and
associate it with this Lane.</p>
<p>Mainly used in tests.</p>
</dd></dl>

<dl class="classmethod">
<dt id="core.lane.Lane.affected_by_customlist">
<em class="property">classmethod </em><code class="descname">affected_by_customlist</code><span class="sig-paren">(</span><em>customlist</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/lane.html#Lane.affected_by_customlist"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.lane.Lane.affected_by_customlist" title="Permalink to this definition">¶</a></dt>
<dd><p>Find all Lanes whose membership is partially derived
from the membership of the given CustomList.</p>
</dd></dl>

<dl class="attribute">
<dt id="core.lane.Lane.audiences">
<code class="descname">audiences</code><a class="headerlink" href="#core.lane.Lane.audiences" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.lane.Lane.cachedfeeds">
<code class="descname">cachedfeeds</code><a class="headerlink" href="#core.lane.Lane.cachedfeeds" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.lane.Lane.cachedmarcfiles">
<code class="descname">cachedmarcfiles</code><a class="headerlink" href="#core.lane.Lane.cachedmarcfiles" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.lane.Lane.children">
<code class="descname">children</code><a class="headerlink" href="#core.lane.Lane.children" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.lane.Lane.collection_ids">
<code class="descname">collection_ids</code><a class="headerlink" href="#core.lane.Lane.collection_ids" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.lane.Lane.customlist_ids">
<code class="descname">customlist_ids</code><a class="headerlink" href="#core.lane.Lane.customlist_ids" title="Permalink to this definition">¶</a></dt>
<dd><p>Find the database ID of every CustomList such that a Work filed
in that List should be in this Lane.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">A list of CustomList IDs, possibly empty.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="core.lane.Lane.customlists">
<code class="descname">customlists</code><a class="headerlink" href="#core.lane.Lane.customlists" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.lane.Lane.depth">
<code class="descname">depth</code><a class="headerlink" href="#core.lane.Lane.depth" title="Permalink to this definition">¶</a></dt>
<dd><p>How deep is this lane in this site’s hierarchy?
i.e. how many times do we have to follow .parent before we get None?</p>
</dd></dl>

<dl class="attribute">
<dt id="core.lane.Lane.display_name">
<code class="descname">display_name</code><a class="headerlink" href="#core.lane.Lane.display_name" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.lane.Lane.entrypoints">
<code class="descname">entrypoints</code><a class="headerlink" href="#core.lane.Lane.entrypoints" title="Permalink to this definition">¶</a></dt>
<dd><p>Lanes cannot currently have EntryPoints.</p>
</dd></dl>

<dl class="method">
<dt id="core.lane.Lane.explain">
<code class="descname">explain</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/lane.html#Lane.explain"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.lane.Lane.explain" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a series of human-readable strings to explain a lane’s settings.</p>
</dd></dl>

<dl class="attribute">
<dt id="core.lane.Lane.fiction">
<code class="descname">fiction</code><a class="headerlink" href="#core.lane.Lane.fiction" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.lane.Lane.genre_ids">
<code class="descname">genre_ids</code><a class="headerlink" href="#core.lane.Lane.genre_ids" title="Permalink to this definition">¶</a></dt>
<dd><p>Find the database ID of every Genre such that a Work classified in
that Genre should be in this Lane.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">A list of genre IDs, or None if this Lane does not
consider genres at all.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="core.lane.Lane.genres">
<code class="descname">genres</code><a class="headerlink" href="#core.lane.Lane.genres" title="Permalink to this definition">¶</a></dt>
<dd><p>A descriptor that presents a read/write view of an object attribute.</p>
</dd></dl>

<dl class="method">
<dt id="core.lane.Lane.get_library">
<code class="descname">get_library</code><span class="sig-paren">(</span><em>_db</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/lane.html#Lane.get_library"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.lane.Lane.get_library" title="Permalink to this definition">¶</a></dt>
<dd><p>For compatibility with WorkList.get_library().</p>
</dd></dl>

<dl class="method">
<dt id="core.lane.Lane.groups">
<code class="descname">groups</code><span class="sig-paren">(</span><em>_db</em>, <em>include_sublanes=True</em>, <em>facets=None</em>, <em>search_engine=None</em>, <em>debug=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/lane.html#Lane.groups"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.lane.Lane.groups" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a list of (Work, Lane) 2-tuples
describing a sequence of featured items for this lane and
(optionally) its children.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>facets</strong> – A FeaturedFacets object.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="core.lane.Lane.id">
<code class="descname">id</code><a class="headerlink" href="#core.lane.Lane.id" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.lane.Lane.include_self_in_grouped_feed">
<code class="descname">include_self_in_grouped_feed</code><a class="headerlink" href="#core.lane.Lane.include_self_in_grouped_feed" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.lane.Lane.inherit_parent_restrictions">
<code class="descname">inherit_parent_restrictions</code><a class="headerlink" href="#core.lane.Lane.inherit_parent_restrictions" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.lane.Lane.lane_genres">
<code class="descname">lane_genres</code><a class="headerlink" href="#core.lane.Lane.lane_genres" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.lane.Lane.languages">
<code class="descname">languages</code><a class="headerlink" href="#core.lane.Lane.languages" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.lane.Lane.library_id">
<code class="descname">library_id</code><a class="headerlink" href="#core.lane.Lane.library_id" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.lane.Lane.license_datasource_id">
<code class="descname">license_datasource_id</code><a class="headerlink" href="#core.lane.Lane.license_datasource_id" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.lane.Lane.list_datasource">
<code class="descname">list_datasource</code><a class="headerlink" href="#core.lane.Lane.list_datasource" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.lane.Lane.list_datasource_id">
<code class="descname">list_datasource_id</code><a class="headerlink" href="#core.lane.Lane.list_datasource_id" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.lane.Lane.list_seen_in_previous_days">
<code class="descname">list_seen_in_previous_days</code><a class="headerlink" href="#core.lane.Lane.list_seen_in_previous_days" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="core.lane.Lane.max_cache_age">
<code class="descname">max_cache_age</code><span class="sig-paren">(</span><em>type</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/lane.html#Lane.max_cache_age"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.lane.Lane.max_cache_age" title="Permalink to this definition">¶</a></dt>
<dd><p>Determine how long a feed for this WorkList should be cached
internally.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>type</strong> – The type of feed.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="core.lane.Lane.media">
<code class="descname">media</code><a class="headerlink" href="#core.lane.Lane.media" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.lane.Lane.parent_id">
<code class="descname">parent_id</code><a class="headerlink" href="#core.lane.Lane.parent_id" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.lane.Lane.parentage">
<code class="descname">parentage</code><a class="headerlink" href="#core.lane.Lane.parentage" title="Permalink to this definition">¶</a></dt>
<dd><p>Yield the parent, grandparent, etc. of this Lane.</p>
<p>The Lane may be inside one or more non-Lane WorkLists, but those
WorkLists are not counted in the parentage.</p>
</dd></dl>

<dl class="attribute">
<dt id="core.lane.Lane.priority">
<code class="descname">priority</code><a class="headerlink" href="#core.lane.Lane.priority" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.lane.Lane.root_for_patron_type">
<code class="descname">root_for_patron_type</code><a class="headerlink" href="#core.lane.Lane.root_for_patron_type" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="core.lane.Lane.search">
<code class="descname">search</code><span class="sig-paren">(</span><em>_db</em>, <em>query_string</em>, <em>search_client</em>, <em>pagination=None</em>, <em>facets=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/lane.html#Lane.search"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.lane.Lane.search" title="Permalink to this definition">¶</a></dt>
<dd><p>Find works in this lane that also match a search query.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>_db</strong> – A database connection.</li>
<li><strong>query_string</strong> – Search for this string.</li>
<li><strong>search_client</strong> – An ExternalSearchIndex object.</li>
<li><strong>pagination</strong> – A Pagination object.</li>
<li><strong>facets</strong> – A faceting object, probably a SearchFacets.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="core.lane.Lane.search_target">
<code class="descname">search_target</code><a class="headerlink" href="#core.lane.Lane.search_target" title="Permalink to this definition">¶</a></dt>
<dd><p>Obtain the WorkList that should be searched when someone
initiates a search from this Lane.</p>
</dd></dl>

<dl class="attribute">
<dt id="core.lane.Lane.size">
<code class="descname">size</code><a class="headerlink" href="#core.lane.Lane.size" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.lane.Lane.size_by_entrypoint">
<code class="descname">size_by_entrypoint</code><a class="headerlink" href="#core.lane.Lane.size_by_entrypoint" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.lane.Lane.sublanes">
<code class="descname">sublanes</code><a class="headerlink" href="#core.lane.Lane.sublanes" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.lane.Lane.target_age">
<code class="descname">target_age</code><a class="headerlink" href="#core.lane.Lane.target_age" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="core.lane.Lane.update_size">
<code class="descname">update_size</code><span class="sig-paren">(</span><em>_db</em>, <em>search_engine=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/lane.html#Lane.update_size"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.lane.Lane.update_size" title="Permalink to this definition">¶</a></dt>
<dd><p>Update the stored estimate of the number of Works in this Lane.</p>
</dd></dl>

<dl class="attribute">
<dt id="core.lane.Lane.url_name">
<code class="descname">url_name</code><a class="headerlink" href="#core.lane.Lane.url_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the name of this lane to be used in URLs.</p>
<p>Since most aspects of the lane can change through administrative
action, we use the internal database ID of the lane in URLs.</p>
</dd></dl>

<dl class="attribute">
<dt id="core.lane.Lane.uses_customlists">
<code class="descname">uses_customlists</code><a class="headerlink" href="#core.lane.Lane.uses_customlists" title="Permalink to this definition">¶</a></dt>
<dd><p>Does the works() implementation for this Lane look for works on
CustomLists?</p>
</dd></dl>

<dl class="attribute">
<dt id="core.lane.Lane.visible">
<code class="descname">visible</code><a class="headerlink" href="#core.lane.Lane.visible" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.lane.Lane.visible_children">
<code class="descname">visible_children</code><a class="headerlink" href="#core.lane.Lane.visible_children" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="core.lane.LaneGenre">
<em class="property">class </em><code class="descclassname">core.lane.</code><code class="descname">LaneGenre</code><span class="sig-paren">(</span><em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/lane.html#LaneGenre"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.lane.LaneGenre" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.ext.declarative.api.Base</span></code></p>
<p>Relationship object between Lane and Genre.</p>
<dl class="classmethod">
<dt id="core.lane.LaneGenre.from_genre">
<em class="property">classmethod </em><code class="descname">from_genre</code><span class="sig-paren">(</span><em>genre</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/lane.html#LaneGenre.from_genre"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.lane.LaneGenre.from_genre" title="Permalink to this definition">¶</a></dt>
<dd><p>Used in the Lane.genres association proxy.</p>
</dd></dl>

<dl class="attribute">
<dt id="core.lane.LaneGenre.genre_id">
<code class="descname">genre_id</code><a class="headerlink" href="#core.lane.LaneGenre.genre_id" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.lane.LaneGenre.id">
<code class="descname">id</code><a class="headerlink" href="#core.lane.LaneGenre.id" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.lane.LaneGenre.inclusive">
<code class="descname">inclusive</code><a class="headerlink" href="#core.lane.LaneGenre.inclusive" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.lane.LaneGenre.lane_id">
<code class="descname">lane_id</code><a class="headerlink" href="#core.lane.LaneGenre.lane_id" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.lane.LaneGenre.recursive">
<code class="descname">recursive</code><a class="headerlink" href="#core.lane.LaneGenre.recursive" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="core.lane.Pagination">
<em class="property">class </em><code class="descclassname">core.lane.</code><code class="descname">Pagination</code><span class="sig-paren">(</span><em>offset=0</em>, <em>size=50</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/lane.html#Pagination"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.lane.Pagination" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<dl class="attribute">
<dt id="core.lane.Pagination.DEFAULT_CRAWLABLE_SIZE">
<code class="descname">DEFAULT_CRAWLABLE_SIZE</code><em class="property"> = 100</em><a class="headerlink" href="#core.lane.Pagination.DEFAULT_CRAWLABLE_SIZE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.lane.Pagination.DEFAULT_FEATURED_SIZE">
<code class="descname">DEFAULT_FEATURED_SIZE</code><em class="property"> = 10</em><a class="headerlink" href="#core.lane.Pagination.DEFAULT_FEATURED_SIZE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.lane.Pagination.DEFAULT_SEARCH_SIZE">
<code class="descname">DEFAULT_SEARCH_SIZE</code><em class="property"> = 10</em><a class="headerlink" href="#core.lane.Pagination.DEFAULT_SEARCH_SIZE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.lane.Pagination.DEFAULT_SIZE">
<code class="descname">DEFAULT_SIZE</code><em class="property"> = 50</em><a class="headerlink" href="#core.lane.Pagination.DEFAULT_SIZE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.lane.Pagination.MAX_SIZE">
<code class="descname">MAX_SIZE</code><em class="property"> = 100</em><a class="headerlink" href="#core.lane.Pagination.MAX_SIZE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="classmethod">
<dt id="core.lane.Pagination.default">
<em class="property">classmethod </em><code class="descname">default</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/lane.html#Pagination.default"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.lane.Pagination.default" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.lane.Pagination.first_page">
<code class="descname">first_page</code><a class="headerlink" href="#core.lane.Pagination.first_page" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="classmethod">
<dt id="core.lane.Pagination.from_request">
<em class="property">classmethod </em><code class="descname">from_request</code><span class="sig-paren">(</span><em>get_arg</em>, <em>default_size=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/lane.html#Pagination.from_request"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.lane.Pagination.from_request" title="Permalink to this definition">¶</a></dt>
<dd><p>Instantiate a Pagination object from a Flask request.</p>
</dd></dl>

<dl class="attribute">
<dt id="core.lane.Pagination.has_next_page">
<code class="descname">has_next_page</code><a class="headerlink" href="#core.lane.Pagination.has_next_page" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns boolean reporting whether pagination is done for a query</p>
<p>Either <cite>total_size</cite> or <cite>this_page_size</cite> must be set for this
method to be accurate.</p>
</dd></dl>

<dl class="method">
<dt id="core.lane.Pagination.items">
<code class="descname">items</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/lane.html#Pagination.items"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.lane.Pagination.items" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="core.lane.Pagination.modify_database_query">
<code class="descname">modify_database_query</code><span class="sig-paren">(</span><em>_db</em>, <em>qu</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/lane.html#Pagination.modify_database_query"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.lane.Pagination.modify_database_query" title="Permalink to this definition">¶</a></dt>
<dd><p>Modify the given database query with OFFSET and LIMIT.</p>
</dd></dl>

<dl class="method">
<dt id="core.lane.Pagination.modify_search_query">
<code class="descname">modify_search_query</code><span class="sig-paren">(</span><em>search</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/lane.html#Pagination.modify_search_query"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.lane.Pagination.modify_search_query" title="Permalink to this definition">¶</a></dt>
<dd><p>Modify a Search object so that it retrieves only a single ‘page’
of results.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">A Search object.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="core.lane.Pagination.next_page">
<code class="descname">next_page</code><a class="headerlink" href="#core.lane.Pagination.next_page" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="core.lane.Pagination.page_loaded">
<code class="descname">page_loaded</code><span class="sig-paren">(</span><em>page</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/lane.html#Pagination.page_loaded"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.lane.Pagination.page_loaded" title="Permalink to this definition">¶</a></dt>
<dd><p>An actual page of results has been fetched. Keep any internal state
that would be useful to know when reasoning about earlier or
later pages.</p>
</dd></dl>

<dl class="attribute">
<dt id="core.lane.Pagination.previous_page">
<code class="descname">previous_page</code><a class="headerlink" href="#core.lane.Pagination.previous_page" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.lane.Pagination.query_string">
<code class="descname">query_string</code><a class="headerlink" href="#core.lane.Pagination.query_string" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="classmethod">
<dt id="core.lane.Pagination.size_from_request">
<em class="property">classmethod </em><code class="descname">size_from_request</code><span class="sig-paren">(</span><em>get_arg</em>, <em>default</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/lane.html#Pagination.size_from_request"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.lane.Pagination.size_from_request" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="core.lane.SearchFacets">
<em class="property">class </em><code class="descclassname">core.lane.</code><code class="descname">SearchFacets</code><span class="sig-paren">(</span><em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/lane.html#SearchFacets"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.lane.SearchFacets" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.lane.Facets" title="core.lane.Facets"><code class="xref py py-class docutils literal notranslate"><span class="pre">core.lane.Facets</span></code></a></p>
<p>A Facets object designed to filter search results.</p>
<p>Most search result filtering is handled by WorkList, but this
allows someone to, e.g., search a multi-lingual WorkList in their
preferred language.</p>
<dl class="attribute">
<dt id="core.lane.SearchFacets.DEFAULT_MIN_SCORE">
<code class="descname">DEFAULT_MIN_SCORE</code><em class="property"> = 500</em><a class="headerlink" href="#core.lane.SearchFacets.DEFAULT_MIN_SCORE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="classmethod">
<dt id="core.lane.SearchFacets.default_facet">
<em class="property">classmethod </em><code class="descname">default_facet</code><span class="sig-paren">(</span><em>ignore</em>, <em>group_name</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/lane.html#SearchFacets.default_facet"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.lane.SearchFacets.default_facet" title="Permalink to this definition">¶</a></dt>
<dd><p>The default facet settings for SearchFacets are hard-coded.</p>
<p>By default, we will search the full collection and all
availabilities, and order by match quality rather than any
bibliographic field.</p>
</dd></dl>

<dl class="classmethod">
<dt id="core.lane.SearchFacets.from_request">
<em class="property">classmethod </em><code class="descname">from_request</code><span class="sig-paren">(</span><em>library</em>, <em>config</em>, <em>get_argument</em>, <em>get_header</em>, <em>worklist</em>, <em>default_entrypoint=&lt;class 'core.entrypoint.EverythingEntryPoint'&gt;</em>, <em>**extra</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/lane.html#SearchFacets.from_request"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.lane.SearchFacets.from_request" title="Permalink to this definition">¶</a></dt>
<dd><p>Load a faceting object from an HTTP request.</p>
</dd></dl>

<dl class="method">
<dt id="core.lane.SearchFacets.items">
<code class="descname">items</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/lane.html#SearchFacets.items"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.lane.SearchFacets.items" title="Permalink to this definition">¶</a></dt>
<dd><p>Yields a 2-tuple for every active facet setting.</p>
<p>This means the EntryPoint (handled by the superclass)
as well as possible settings for ‘media’ and “min_score”.</p>
</dd></dl>

<dl class="method">
<dt id="core.lane.SearchFacets.modify_search_filter">
<code class="descname">modify_search_filter</code><span class="sig-paren">(</span><em>filter</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/lane.html#SearchFacets.modify_search_filter"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.lane.SearchFacets.modify_search_filter" title="Permalink to this definition">¶</a></dt>
<dd><p>Modify the given external_search.Filter object
so that it reflects this SearchFacets object.</p>
</dd></dl>

<dl class="method">
<dt id="core.lane.SearchFacets.navigate">
<code class="descname">navigate</code><span class="sig-paren">(</span><em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/lane.html#SearchFacets.navigate"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.lane.SearchFacets.navigate" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a slightly different Facets object from this one.</p>
</dd></dl>

<dl class="classmethod">
<dt id="core.lane.SearchFacets.selectable_entrypoints">
<em class="property">classmethod </em><code class="descname">selectable_entrypoints</code><span class="sig-paren">(</span><em>worklist</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/lane.html#SearchFacets.selectable_entrypoints"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.lane.SearchFacets.selectable_entrypoints" title="Permalink to this definition">¶</a></dt>
<dd><p>If the WorkList has more than one facet, an ‘everything’ facet
is added for search purposes.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="core.lane.SpecificWorkList">
<em class="property">class </em><code class="descclassname">core.lane.</code><code class="descname">SpecificWorkList</code><span class="sig-paren">(</span><em>work_ids</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/lane.html#SpecificWorkList"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.lane.SpecificWorkList" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.lane.DatabaseBackedWorkList" title="core.lane.DatabaseBackedWorkList"><code class="xref py py-class docutils literal notranslate"><span class="pre">core.lane.DatabaseBackedWorkList</span></code></a></p>
<p>A WorkList that only finds specific works, identified by ID.</p>
<dl class="method">
<dt id="core.lane.SpecificWorkList.modify_database_query_hook">
<code class="descname">modify_database_query_hook</code><span class="sig-paren">(</span><em>_db</em>, <em>qu</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/lane.html#SpecificWorkList.modify_database_query_hook"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.lane.SpecificWorkList.modify_database_query_hook" title="Permalink to this definition">¶</a></dt>
<dd><p>A hook method allowing subclasses to modify a database query
that’s about to find all the works in this WorkList.</p>
<p>This can avoid the need for complex subclasses of
DatabaseBackedFacets.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="core.lane.WorkList">
<em class="property">class </em><code class="descclassname">core.lane.</code><code class="descname">WorkList</code><a class="reference internal" href="_modules/core/lane.html#WorkList"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.lane.WorkList" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>An object that can obtain a list of Work objects for use
in generating an OPDS feed.</p>
<p>By default, these Work objects come from a search index.</p>
<dl class="attribute">
<dt id="core.lane.WorkList.CACHED_FEED_TYPE">
<code class="descname">CACHED_FEED_TYPE</code><em class="property"> = None</em><a class="headerlink" href="#core.lane.WorkList.CACHED_FEED_TYPE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.lane.WorkList.MAX_CACHE_AGE">
<code class="descname">MAX_CACHE_AGE</code><em class="property"> = 600</em><a class="headerlink" href="#core.lane.WorkList.MAX_CACHE_AGE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="core.lane.WorkList.append_child">
<code class="descname">append_child</code><span class="sig-paren">(</span><em>child</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/lane.html#WorkList.append_child"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.lane.WorkList.append_child" title="Permalink to this definition">¶</a></dt>
<dd><p>Add one child to the list of children in this WorkList.</p>
<p>This hook method can be overridden to modify the child’s
configuration so as to make it fit with what the parent is
offering.</p>
</dd></dl>

<dl class="attribute">
<dt id="core.lane.WorkList.audience_key">
<code class="descname">audience_key</code><a class="headerlink" href="#core.lane.WorkList.audience_key" title="Permalink to this definition">¶</a></dt>
<dd><p>Translates audiences list into url-safe string</p>
</dd></dl>

<dl class="attribute">
<dt id="core.lane.WorkList.customlist_ids">
<code class="descname">customlist_ids</code><a class="headerlink" href="#core.lane.WorkList.customlist_ids" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the custom list IDs.</p>
</dd></dl>

<dl class="attribute">
<dt id="core.lane.WorkList.display_name_for_all">
<code class="descname">display_name_for_all</code><a class="headerlink" href="#core.lane.WorkList.display_name_for_all" title="Permalink to this definition">¶</a></dt>
<dd><p>The display name to use when referring to the set of all books in
this WorkList, as opposed to the WorkList itself.</p>
</dd></dl>

<dl class="method">
<dt id="core.lane.WorkList.filter">
<code class="descname">filter</code><span class="sig-paren">(</span><em>_db</em>, <em>facets</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/lane.html#WorkList.filter"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.lane.WorkList.filter" title="Permalink to this definition">¶</a></dt>
<dd><p>Helper method to instantiate a Filter object for this WorkList.</p>
<p>Using this ensures that modify_search_filter_hook() is always
called.</p>
</dd></dl>

<dl class="attribute">
<dt id="core.lane.WorkList.full_identifier">
<code class="descname">full_identifier</code><a class="headerlink" href="#core.lane.WorkList.full_identifier" title="Permalink to this definition">¶</a></dt>
<dd><p>A human-readable identifier for this WorkList that
captures its position within the heirarchy.</p>
</dd></dl>

<dl class="method">
<dt id="core.lane.WorkList.get_customlists">
<code class="descname">get_customlists</code><span class="sig-paren">(</span><em>_db</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/lane.html#WorkList.get_customlists"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.lane.WorkList.get_customlists" title="Permalink to this definition">¶</a></dt>
<dd><p>Get customlists associated with the Worklist.</p>
</dd></dl>

<dl class="method">
<dt id="core.lane.WorkList.get_library">
<code class="descname">get_library</code><span class="sig-paren">(</span><em>_db</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/lane.html#WorkList.get_library"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.lane.WorkList.get_library" title="Permalink to this definition">¶</a></dt>
<dd><p>Find the Library object associated with this WorkList.</p>
</dd></dl>

<dl class="method">
<dt id="core.lane.WorkList.groups">
<code class="descname">groups</code><span class="sig-paren">(</span><em>_db</em>, <em>include_sublanes=True</em>, <em>facets=None</em>, <em>search_engine=None</em>, <em>debug=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/lane.html#WorkList.groups"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.lane.WorkList.groups" title="Permalink to this definition">¶</a></dt>
<dd><p>Extract a list of samples from each child of this WorkList.  This
can be used to create a grouped acquisition feed for the WorkList.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>facets</strong> – A FeaturedFacets object that may restrict the works on view.</li>
<li><strong>search_engine</strong> – An ExternalSearchIndex to use when
asking for the featured works in a given WorkList.</li>
<li><strong>debug</strong> – A debug argument passed into <cite>search_engine</cite> when
running the search.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Yield:</th><td class="field-body"><p class="first last">A sequence of (Work, WorkList) 2-tuples, with each
WorkList representing the child WorkList in which the Work is
found.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="core.lane.WorkList.has_visible_children">
<code class="descname">has_visible_children</code><a class="headerlink" href="#core.lane.WorkList.has_visible_children" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.lane.WorkList.hierarchy">
<code class="descname">hierarchy</code><a class="headerlink" href="#core.lane.WorkList.hierarchy" title="Permalink to this definition">¶</a></dt>
<dd><p>The portion of the WorkList hierarchy that culminates in this
WorkList.</p>
</dd></dl>

<dl class="attribute">
<dt id="core.lane.WorkList.inherit_parent_restrictions">
<code class="descname">inherit_parent_restrictions</code><a class="headerlink" href="#core.lane.WorkList.inherit_parent_restrictions" title="Permalink to this definition">¶</a></dt>
<dd><p>Since a WorkList has no parent, it cannot inherit any restrictions
from its parent. This method is defined for compatibility
with Lane.</p>
</dd></dl>

<dl class="method">
<dt id="core.lane.WorkList.inherited_value">
<code class="descname">inherited_value</code><span class="sig-paren">(</span><em>k</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/lane.html#WorkList.inherited_value"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.lane.WorkList.inherited_value" title="Permalink to this definition">¶</a></dt>
<dd><p>Try to find this WorkList’s value for the given key (e.g. ‘fiction’
or ‘audiences’).</p>
<p>If it’s not set, try to inherit a value from the WorkList’s
parent. This only works if this WorkList has a parent and is
configured to inherit values from its parent.</p>
<p>Note that inheritance works differently for genre_ids and
customlist_ids – use inherited_values() for that.</p>
</dd></dl>

<dl class="method">
<dt id="core.lane.WorkList.inherited_values">
<code class="descname">inherited_values</code><span class="sig-paren">(</span><em>k</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/lane.html#WorkList.inherited_values"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.lane.WorkList.inherited_values" title="Permalink to this definition">¶</a></dt>
<dd><p>Find the values for the given key (e.g. ‘genre_ids’ or
‘customlist_ids’) imposed by this WorkList and its parentage.</p>
<p>This is for values like .genre_ids and .customlist_ids, where
each member of the WorkList hierarchy can impose a restriction
on query results, and the effects of the restrictions are
additive.</p>
</dd></dl>

<dl class="method">
<dt id="core.lane.WorkList.initialize">
<code class="descname">initialize</code><span class="sig-paren">(</span><em>library</em>, <em>display_name=None</em>, <em>genres=None</em>, <em>audiences=None</em>, <em>languages=None</em>, <em>media=None</em>, <em>customlists=None</em>, <em>list_datasource=None</em>, <em>list_seen_in_previous_days=None</em>, <em>children=None</em>, <em>priority=None</em>, <em>entrypoints=None</em>, <em>fiction=None</em>, <em>license_datasource=None</em>, <em>target_age=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/lane.html#WorkList.initialize"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.lane.WorkList.initialize" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize with basic data.</p>
<p>This is not a constructor, to avoid conflicts with <cite>Lane</cite>, an
ORM object that subclasses this object but does not use this
initialization code.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>library</strong> – Only Works available in this Library will be
included in lists.</li>
<li><strong>display_name</strong> – Name to display for this WorkList in the
user interface.</li>
<li><strong>genres</strong> – Only Works classified under one of these Genres
will be included in lists.</li>
<li><strong>audiences</strong> – Only Works classified under one of these audiences
will be included in lists.</li>
<li><strong>languages</strong> – Only Works in one of these languages will be
included in lists.</li>
<li><strong>media</strong> – Only Works in one of these media will be included
in lists.</li>
<li><strong>fiction</strong> – Only Works with this fiction status will be included
in lists.</li>
<li><strong>target_age</strong> – Only Works targeted at readers in this age range
will be included in lists.</li>
<li><strong>license_datasource</strong> – Only Works with a LicensePool from this
DataSource will be included in lists.</li>
<li><strong>customlists</strong> – Only Works included on one of these CustomLists
will be included in lists.</li>
<li><strong>list_datasource</strong> – Only Works included on a CustomList
associated with this DataSource will be included in
lists. This overrides any specific CustomLists provided in
<cite>customlists</cite>.</li>
<li><strong>list_seen_in_previous_days</strong> – Only Works that were added
to a matching CustomList within this number of days will be
included in lists.</li>
<li><strong>children</strong> – This WorkList has children, which are also
WorkLists.</li>
<li><strong>priority</strong> – A number indicating where this WorkList should
show up in relation to its siblings when it is the child of
some other WorkList.</li>
<li><strong>entrypoints</strong> – A list of EntryPoint classes representing
different ways of slicing up this WorkList.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="core.lane.WorkList.language_key">
<code class="descname">language_key</code><a class="headerlink" href="#core.lane.WorkList.language_key" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a string identifying the languages used in this WorkList.
This will usually be in the form of ‘eng,spa’ (English and Spanish).</p>
</dd></dl>

<dl class="method">
<dt id="core.lane.WorkList.max_cache_age">
<code class="descname">max_cache_age</code><span class="sig-paren">(</span><em>type</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/lane.html#WorkList.max_cache_age"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.lane.WorkList.max_cache_age" title="Permalink to this definition">¶</a></dt>
<dd><p>Determine how long a feed for this WorkList should be cached
internally.</p>
</dd></dl>

<dl class="method">
<dt id="core.lane.WorkList.modify_search_filter_hook">
<code class="descname">modify_search_filter_hook</code><span class="sig-paren">(</span><em>filter</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/lane.html#WorkList.modify_search_filter_hook"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.lane.WorkList.modify_search_filter_hook" title="Permalink to this definition">¶</a></dt>
<dd><p>A hook method allowing subclasses to modify a Filter
object that’s about to find all the works in this WorkList.</p>
<p>This can avoid the need for complex subclasses of Facets.</p>
</dd></dl>

<dl class="method">
<dt id="core.lane.WorkList.overview_facets">
<code class="descname">overview_facets</code><span class="sig-paren">(</span><em>_db</em>, <em>facets</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/lane.html#WorkList.overview_facets"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.lane.WorkList.overview_facets" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert a generic FeaturedFacets to some other faceting object,
suitable for showing an overview of this WorkList in a grouped
feed.</p>
</dd></dl>

<dl class="attribute">
<dt id="core.lane.WorkList.parent">
<code class="descname">parent</code><a class="headerlink" href="#core.lane.WorkList.parent" title="Permalink to this definition">¶</a></dt>
<dd><p>A WorkList has no parent. This method is defined for compatibility
with Lane.</p>
</dd></dl>

<dl class="attribute">
<dt id="core.lane.WorkList.parentage">
<code class="descname">parentage</code><a class="headerlink" href="#core.lane.WorkList.parentage" title="Permalink to this definition">¶</a></dt>
<dd><p>WorkLists have no parentage. This method is defined for compatibility
with Lane.</p>
</dd></dl>

<dl class="method">
<dt id="core.lane.WorkList.search">
<code class="descname">search</code><span class="sig-paren">(</span><em>_db</em>, <em>query</em>, <em>search_client</em>, <em>pagination=None</em>, <em>facets=None</em>, <em>debug=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/lane.html#WorkList.search"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.lane.WorkList.search" title="Permalink to this definition">¶</a></dt>
<dd><p>Find works in this WorkList that match a search query.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>_db</strong> – A database connection.</li>
<li><strong>query</strong> – Search for this string.</li>
<li><strong>search_client</strong> – An ExternalSearchIndex object.</li>
<li><strong>pagination</strong> – A Pagination object.</li>
<li><strong>facets</strong> – A faceting object, probably a SearchFacets.</li>
<li><strong>debug</strong> – Pass in True to see a summary of results returned
from the search index.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="core.lane.WorkList.search_target">
<code class="descname">search_target</code><a class="headerlink" href="#core.lane.WorkList.search_target" title="Permalink to this definition">¶</a></dt>
<dd><p>By default, a WorkList is searchable.</p>
</dd></dl>

<dl class="classmethod">
<dt id="core.lane.WorkList.top_level_for_library">
<em class="property">classmethod </em><code class="descname">top_level_for_library</code><span class="sig-paren">(</span><em>_db</em>, <em>library</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/lane.html#WorkList.top_level_for_library"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.lane.WorkList.top_level_for_library" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a WorkList representing this library’s collection
as a whole.</p>
<p>If no top-level visible lanes are configured, the WorkList
will be configured to show every book in the collection.</p>
<p>If a single top-level Lane is configured, it will returned as
the WorkList.</p>
<p>Otherwise, a WorkList containing the visible top-level lanes
is returned.</p>
</dd></dl>

<dl class="attribute">
<dt id="core.lane.WorkList.unique_key">
<code class="descname">unique_key</code><a class="headerlink" href="#core.lane.WorkList.unique_key" title="Permalink to this definition">¶</a></dt>
<dd><p>A string key that uniquely describes this WorkList within
its Library.</p>
<p>This is used when caching feeds for this WorkList. For Lanes,
the lane_id is used instead.</p>
</dd></dl>

<dl class="attribute">
<dt id="core.lane.WorkList.uses_customlists">
<code class="descname">uses_customlists</code><a class="headerlink" href="#core.lane.WorkList.uses_customlists" title="Permalink to this definition">¶</a></dt>
<dd><p>Does the works() implementation for this WorkList look for works on
CustomLists?</p>
</dd></dl>

<dl class="attribute">
<dt id="core.lane.WorkList.visible">
<code class="descname">visible</code><em class="property"> = True</em><a class="headerlink" href="#core.lane.WorkList.visible" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.lane.WorkList.visible_children">
<code class="descname">visible_children</code><a class="headerlink" href="#core.lane.WorkList.visible_children" title="Permalink to this definition">¶</a></dt>
<dd><p>A WorkList’s children can be used to create a grouped acquisition
feed for that WorkList.</p>
</dd></dl>

<dl class="method">
<dt id="core.lane.WorkList.works">
<code class="descname">works</code><span class="sig-paren">(</span><em>_db</em>, <em>facets=None</em>, <em>pagination=None</em>, <em>search_engine=None</em>, <em>debug=False</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/lane.html#WorkList.works"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.lane.WorkList.works" title="Permalink to this definition">¶</a></dt>
<dd><p>Use a search engine to obtain Work or Work-like objects that belong
in this WorkList.</p>
<p>Compare DatabaseBackedWorkList.works_from_database, which uses
a database query to obtain the same Work objects.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>_db</strong> – A database connection.</li>
<li><strong>facets</strong> – A Facets object which may put additional
constraints on WorkList membership.</li>
<li><strong>pagination</strong> – A Pagination object indicating which part of
the WorkList the caller is looking at, and/or a limit on the
number of works to fetch.</li>
<li><strong>kwargs</strong> – Different implementations may fetch the
list of works from different sources and may need different
keyword arguments.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">A list of Work or Work-like objects, or a database query
that generates such a list when executed.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="core.lane.WorkList.works_for_hits">
<code class="descname">works_for_hits</code><span class="sig-paren">(</span><em>_db</em>, <em>hits</em>, <em>facets=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/lane.html#WorkList.works_for_hits"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.lane.WorkList.works_for_hits" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert a list of search results into Work objects.</p>
<p>This works by calling works_for_resultsets() on a list
containing a single list of search results.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>_db</strong> – A database connection</li>
<li><strong>hits</strong> – A list of Hit objects from ElasticSearch.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">A list of Work or (if the search results include
script fields), WorkSearchResult objects.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="core.lane.WorkList.works_for_resultsets">
<code class="descname">works_for_resultsets</code><span class="sig-paren">(</span><em>_db</em>, <em>resultsets</em>, <em>facets=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/lane.html#WorkList.works_for_resultsets"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.lane.WorkList.works_for_resultsets" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert a list of lists of Hit objects into a list
of lists of Work objects.</p>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="core.lane.configuration_relevant_lifecycle_event">
<code class="descclassname">core.lane.</code><code class="descname">configuration_relevant_lifecycle_event</code><span class="sig-paren">(</span><em>mapper</em>, <em>connection</em>, <em>target</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/lane.html#configuration_relevant_lifecycle_event"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.lane.configuration_relevant_lifecycle_event" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="core.lane.configuration_relevant_update">
<code class="descclassname">core.lane.</code><code class="descname">configuration_relevant_update</code><span class="sig-paren">(</span><em>mapper</em>, <em>connection</em>, <em>target</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/lane.html#configuration_relevant_update"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.lane.configuration_relevant_update" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="module-core.local_analytics_provider">
<span id="core-local-analytics-provider-module"></span><h2>core.local_analytics_provider module<a class="headerlink" href="#module-core.local_analytics_provider" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="core.local_analytics_provider.LocalAnalyticsProvider">
<em class="property">class </em><code class="descclassname">core.local_analytics_provider.</code><code class="descname">LocalAnalyticsProvider</code><span class="sig-paren">(</span><em>integration</em>, <em>library=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/local_analytics_provider.html#LocalAnalyticsProvider"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.local_analytics_provider.LocalAnalyticsProvider" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<dl class="attribute">
<dt id="core.local_analytics_provider.LocalAnalyticsProvider.CARDINALITY">
<code class="descname">CARDINALITY</code><em class="property"> = 1</em><a class="headerlink" href="#core.local_analytics_provider.LocalAnalyticsProvider.CARDINALITY" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.local_analytics_provider.LocalAnalyticsProvider.DESCRIPTION">
<code class="descname">DESCRIPTION</code><em class="property"> = l'Store analytics events in the 'circulationevents' database table.'</em><a class="headerlink" href="#core.local_analytics_provider.LocalAnalyticsProvider.DESCRIPTION" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.local_analytics_provider.LocalAnalyticsProvider.LOCATION_SOURCE">
<code class="descname">LOCATION_SOURCE</code><em class="property"> = 'location_source'</em><a class="headerlink" href="#core.local_analytics_provider.LocalAnalyticsProvider.LOCATION_SOURCE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.local_analytics_provider.LocalAnalyticsProvider.LOCATION_SOURCE_DISABLED">
<code class="descname">LOCATION_SOURCE_DISABLED</code><em class="property"> = ''</em><a class="headerlink" href="#core.local_analytics_provider.LocalAnalyticsProvider.LOCATION_SOURCE_DISABLED" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.local_analytics_provider.LocalAnalyticsProvider.LOCATION_SOURCE_NEIGHBORHOOD">
<code class="descname">LOCATION_SOURCE_NEIGHBORHOOD</code><em class="property"> = 'neighborhood'</em><a class="headerlink" href="#core.local_analytics_provider.LocalAnalyticsProvider.LOCATION_SOURCE_NEIGHBORHOOD" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.local_analytics_provider.LocalAnalyticsProvider.NAME">
<code class="descname">NAME</code><em class="property"> = l'Local Analytics'</em><a class="headerlink" href="#core.local_analytics_provider.LocalAnalyticsProvider.NAME" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.local_analytics_provider.LocalAnalyticsProvider.SETTINGS">
<code class="descname">SETTINGS</code><em class="property"> = [{'description': l'Local analytics events may have a geographic location associated with them. How should the location be determined?&lt;p&gt;Note: to use the patron's neighborhood as the event location, you must also tell your patron authentication mechanism how to &lt;i&gt;gather&lt;/i&gt; a patron's neighborhood information.', 'default': '', 'label': l'Geographic location of events', 'key': 'location_source', 'type': 'select', 'options': [{'key': '', 'label': l'Disable this feature.'}, {'key': 'neighborhood', 'label': l'Use the patron's neighborhood as the event location.'}]}]</em><a class="headerlink" href="#core.local_analytics_provider.LocalAnalyticsProvider.SETTINGS" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="core.local_analytics_provider.LocalAnalyticsProvider.collect_event">
<code class="descname">collect_event</code><span class="sig-paren">(</span><em>library</em>, <em>license_pool</em>, <em>event_type</em>, <em>time</em>, <em>old_value=None</em>, <em>new_value=None</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/local_analytics_provider.html#LocalAnalyticsProvider.collect_event"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.local_analytics_provider.LocalAnalyticsProvider.collect_event" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="classmethod">
<dt id="core.local_analytics_provider.LocalAnalyticsProvider.initialize">
<em class="property">classmethod </em><code class="descname">initialize</code><span class="sig-paren">(</span><em>_db</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/local_analytics_provider.html#LocalAnalyticsProvider.initialize"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.local_analytics_provider.LocalAnalyticsProvider.initialize" title="Permalink to this definition">¶</a></dt>
<dd><p>Find or create a local analytics service.</p>
</dd></dl>

</dd></dl>

<dl class="attribute">
<dt id="core.local_analytics_provider.Provider">
<code class="descclassname">core.local_analytics_provider.</code><code class="descname">Provider</code><a class="headerlink" href="#core.local_analytics_provider.Provider" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <a class="reference internal" href="#core.local_analytics_provider.LocalAnalyticsProvider" title="core.local_analytics_provider.LocalAnalyticsProvider"><code class="xref py py-class docutils literal notranslate"><span class="pre">core.local_analytics_provider.LocalAnalyticsProvider</span></code></a></p>
</dd></dl>

</div>
<div class="section" id="module-core.log">
<span id="core-log-module"></span><h2>core.log module<a class="headerlink" href="#module-core.log" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="core.log.CloudwatchLogs">
<em class="property">class </em><code class="descclassname">core.log.</code><code class="descname">CloudwatchLogs</code><a class="reference internal" href="_modules/core/log.html#CloudwatchLogs"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.log.CloudwatchLogs" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.log.Logger" title="core.log.Logger"><code class="xref py py-class docutils literal notranslate"><span class="pre">core.log.Logger</span></code></a></p>
<dl class="attribute">
<dt id="core.log.CloudwatchLogs.CREATE_GROUP">
<code class="descname">CREATE_GROUP</code><em class="property"> = 'create_group'</em><a class="headerlink" href="#core.log.CloudwatchLogs.CREATE_GROUP" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.log.CloudwatchLogs.DEFAULT_CREATE_GROUP">
<code class="descname">DEFAULT_CREATE_GROUP</code><em class="property"> = 'TRUE'</em><a class="headerlink" href="#core.log.CloudwatchLogs.DEFAULT_CREATE_GROUP" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.log.CloudwatchLogs.DEFAULT_INTERVAL">
<code class="descname">DEFAULT_INTERVAL</code><em class="property"> = 60</em><a class="headerlink" href="#core.log.CloudwatchLogs.DEFAULT_INTERVAL" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.log.CloudwatchLogs.DEFAULT_REGION">
<code class="descname">DEFAULT_REGION</code><em class="property"> = 'us-west-2'</em><a class="headerlink" href="#core.log.CloudwatchLogs.DEFAULT_REGION" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.log.CloudwatchLogs.GROUP">
<code class="descname">GROUP</code><em class="property"> = 'group'</em><a class="headerlink" href="#core.log.CloudwatchLogs.GROUP" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.log.CloudwatchLogs.INTERVAL">
<code class="descname">INTERVAL</code><em class="property"> = 'interval'</em><a class="headerlink" href="#core.log.CloudwatchLogs.INTERVAL" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.log.CloudwatchLogs.NAME">
<code class="descname">NAME</code><em class="property"> = 'AWS Cloudwatch Logs'</em><a class="headerlink" href="#core.log.CloudwatchLogs.NAME" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.log.CloudwatchLogs.REGION">
<code class="descname">REGION</code><em class="property"> = 'region'</em><a class="headerlink" href="#core.log.CloudwatchLogs.REGION" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.log.CloudwatchLogs.REGIONS">
<code class="descname">REGIONS</code><em class="property"> = [{'key': 'us-east-2', 'label': l'US East (Ohio)'}, {'key': 'us-east-1', 'label': l'US East (N. Virginia)'}, {'key': 'us-west-1', 'label': l'US West (N. California)'}, {'key': 'us-west-2', 'label': l'US West (Oregon)'}, {'key': 'ap-south-1', 'label': l'Asia Pacific (Mumbai)'}, {'key': 'ap-northeast-3', 'label': l'Asia Pacific (Osaka-Local)'}, {'key': 'ap-northeast-2', 'label': l'Asia Pacific (Seoul)'}, {'key': 'ap-southeast-1', 'label': l'Asia Pacific (Singapore)'}, {'key': 'ap-southeast-2', 'label': l'Asia Pacific (Sydney)'}, {'key': 'ap-northeast-1', 'label': l'Asia Pacific (Tokyo)'}, {'key': 'ca-central-1', 'label': l'Canada (Central)'}, {'key': 'cn-north-1', 'label': l'China (Beijing)'}, {'key': 'cn-northwest-1', 'label': l'China (Ningxia)'}, {'key': 'eu-central-1', 'label': l'EU (Frankfurt)'}, {'key': 'eu-west-1', 'label': l'EU (Ireland)'}, {'key': 'eu-west-2', 'label': l'EU (London)'}, {'key': 'eu-west-3', 'label': l'EU (Paris)'}, {'key': 'sa-east-1', 'label': l'South America (Sao Paulo)'}]</em><a class="headerlink" href="#core.log.CloudwatchLogs.REGIONS" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.log.CloudwatchLogs.SETTINGS">
<code class="descname">SETTINGS</code><em class="property"> = [{'default': 'simplified', 'required': True, 'key': 'group', 'label': l'Log Group'}, {'default': 'simplified', 'required': True, 'key': 'stream', 'label': l'Log Stream'}, {'default': 60, 'required': True, 'key': 'interval', 'label': l'Update Interval Seconds'}, {'default': 'us-west-2', 'required': True, 'label': l'AWS Region', 'key': 'region', 'type': 'select', 'options': [{'key': 'us-east-2', 'label': l'US East (Ohio)'}, {'key': 'us-east-1', 'label': l'US East (N. Virginia)'}, {'key': 'us-west-1', 'label': l'US West (N. California)'}, {'key': 'us-west-2', 'label': l'US West (Oregon)'}, {'key': 'ap-south-1', 'label': l'Asia Pacific (Mumbai)'}, {'key': 'ap-northeast-3', 'label': l'Asia Pacific (Osaka-Local)'}, {'key': 'ap-northeast-2', 'label': l'Asia Pacific (Seoul)'}, {'key': 'ap-southeast-1', 'label': l'Asia Pacific (Singapore)'}, {'key': 'ap-southeast-2', 'label': l'Asia Pacific (Sydney)'}, {'key': 'ap-northeast-1', 'label': l'Asia Pacific (Tokyo)'}, {'key': 'ca-central-1', 'label': l'Canada (Central)'}, {'key': 'cn-north-1', 'label': l'China (Beijing)'}, {'key': 'cn-northwest-1', 'label': l'China (Ningxia)'}, {'key': 'eu-central-1', 'label': l'EU (Frankfurt)'}, {'key': 'eu-west-1', 'label': l'EU (Ireland)'}, {'key': 'eu-west-2', 'label': l'EU (London)'}, {'key': 'eu-west-3', 'label': l'EU (Paris)'}, {'key': 'sa-east-1', 'label': l'South America (Sao Paulo)'}]}, {'default': True, 'required': True, 'label': l'Automatically Create Log Group', 'key': 'create_group', 'type': 'select', 'options': [{'key': 'TRUE', 'label': l'Yes'}, {'key': 'FALSE', 'label': l'No'}]}]</em><a class="headerlink" href="#core.log.CloudwatchLogs.SETTINGS" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.log.CloudwatchLogs.SITEWIDE">
<code class="descname">SITEWIDE</code><em class="property"> = True</em><a class="headerlink" href="#core.log.CloudwatchLogs.SITEWIDE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.log.CloudwatchLogs.STREAM">
<code class="descname">STREAM</code><em class="property"> = 'stream'</em><a class="headerlink" href="#core.log.CloudwatchLogs.STREAM" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="classmethod">
<dt id="core.log.CloudwatchLogs.from_configuration">
<em class="property">classmethod </em><code class="descname">from_configuration</code><span class="sig-paren">(</span><em>_db</em>, <em>testing=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/log.html#CloudwatchLogs.from_configuration"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.log.CloudwatchLogs.from_configuration" title="Permalink to this definition">¶</a></dt>
<dd><p>Should be implemented in each logging class.</p>
</dd></dl>

<dl class="classmethod">
<dt id="core.log.CloudwatchLogs.get_handler">
<em class="property">classmethod </em><code class="descname">get_handler</code><span class="sig-paren">(</span><em>settings</em>, <em>testing=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/log.html#CloudwatchLogs.get_handler"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.log.CloudwatchLogs.get_handler" title="Permalink to this definition">¶</a></dt>
<dd><p>Turn ExternalIntegration into a log handler.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="core.log.JSONFormatter">
<em class="property">class </em><code class="descclassname">core.log.</code><code class="descname">JSONFormatter</code><span class="sig-paren">(</span><em>app_name</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/log.html#JSONFormatter"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.log.JSONFormatter" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">logging.Formatter</span></code></p>
<dl class="method">
<dt id="core.log.JSONFormatter.format">
<code class="descname">format</code><span class="sig-paren">(</span><em>record</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/log.html#JSONFormatter.format"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.log.JSONFormatter.format" title="Permalink to this definition">¶</a></dt>
<dd><p>Format the specified record as text.</p>
<p>The record’s attribute dictionary is used as the operand to a
string formatting operation which yields the returned string.
Before formatting the dictionary, a couple of preparatory steps
are carried out. The message attribute of the record is computed
using LogRecord.getMessage(). If the formatting string uses the
time (as determined by a call to usesTime(), formatTime() is
called to format the event time. If there is exception information,
it is formatted using formatException() and appended to the message.</p>
</dd></dl>

<dl class="attribute">
<dt id="core.log.JSONFormatter.fqdn">
<code class="descname">fqdn</code><em class="property"> = 'localhost'</em><a class="headerlink" href="#core.log.JSONFormatter.fqdn" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.log.JSONFormatter.hostname">
<code class="descname">hostname</code><em class="property"> = 'travis-job-0e209759-00b6-4b97-8b47-7e1afef26b53'</em><a class="headerlink" href="#core.log.JSONFormatter.hostname" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="core.log.LogConfiguration">
<em class="property">class </em><code class="descclassname">core.log.</code><code class="descname">LogConfiguration</code><a class="reference internal" href="_modules/core/log.html#LogConfiguration"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.log.LogConfiguration" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Configures the active Python logging handlers based on logging
configuration from the database.</p>
<dl class="attribute">
<dt id="core.log.LogConfiguration.DATABASE_LOG_LEVEL">
<code class="descname">DATABASE_LOG_LEVEL</code><em class="property"> = 'database_log_level'</em><a class="headerlink" href="#core.log.LogConfiguration.DATABASE_LOG_LEVEL" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.log.LogConfiguration.DEBUG">
<code class="descname">DEBUG</code><em class="property"> = 'DEBUG'</em><a class="headerlink" href="#core.log.LogConfiguration.DEBUG" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.log.LogConfiguration.DEFAULT_APP_NAME">
<code class="descname">DEFAULT_APP_NAME</code><em class="property"> = 'simplified'</em><a class="headerlink" href="#core.log.LogConfiguration.DEFAULT_APP_NAME" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.log.LogConfiguration.DEFAULT_DATABASE_LOG_LEVEL">
<code class="descname">DEFAULT_DATABASE_LOG_LEVEL</code><em class="property"> = 'WARN'</em><a class="headerlink" href="#core.log.LogConfiguration.DEFAULT_DATABASE_LOG_LEVEL" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.log.LogConfiguration.DEFAULT_LOG_LEVEL">
<code class="descname">DEFAULT_LOG_LEVEL</code><em class="property"> = 'INFO'</em><a class="headerlink" href="#core.log.LogConfiguration.DEFAULT_LOG_LEVEL" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.log.LogConfiguration.ERROR">
<code class="descname">ERROR</code><em class="property"> = 'ERROR'</em><a class="headerlink" href="#core.log.LogConfiguration.ERROR" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.log.LogConfiguration.INFO">
<code class="descname">INFO</code><em class="property"> = 'INFO'</em><a class="headerlink" href="#core.log.LogConfiguration.INFO" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.log.LogConfiguration.LOG_APP_NAME">
<code class="descname">LOG_APP_NAME</code><em class="property"> = 'log_app'</em><a class="headerlink" href="#core.log.LogConfiguration.LOG_APP_NAME" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.log.LogConfiguration.LOG_LEVEL">
<code class="descname">LOG_LEVEL</code><em class="property"> = 'log_level'</em><a class="headerlink" href="#core.log.LogConfiguration.LOG_LEVEL" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.log.LogConfiguration.LOG_LEVEL_UI">
<code class="descname">LOG_LEVEL_UI</code><em class="property"> = [{'value': l'Debug', 'key': 'DEBUG'}, {'value': l'Info', 'key': 'INFO'}, {'value': l'Warn', 'key': 'WARN'}, {'value': l'Error', 'key': 'ERROR'}]</em><a class="headerlink" href="#core.log.LogConfiguration.LOG_LEVEL_UI" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.log.LogConfiguration.SITEWIDE_SETTINGS">
<code class="descname">SITEWIDE_SETTINGS</code><em class="property"> = [{'default': 'INFO', 'type': 'select', 'options': [{'value': l'Debug', 'key': 'DEBUG'}, {'value': l'Info', 'key': 'INFO'}, {'value': l'Warn', 'key': 'WARN'}, {'value': l'Error', 'key': 'ERROR'}], 'key': 'log_level', 'label': l'Log Level'}, {'default': 'simplified', 'description': l'Log messages originating from this application will be tagged with this name. If you run multiple instances, giving each one a different application name will help you determine which instance is having problems.', 'key': 'log_app', 'label': l'Log Application name'}, {'description': l'Database logs are extremely verbose, so unless you're diagnosing a database-related problem, it's a good idea to set a higher log level for database messages.', 'default': 'WARN', 'label': l'Database Log Level', 'key': 'database_log_level', 'type': 'select', 'options': [{'value': l'Debug', 'key': 'DEBUG'}, {'value': l'Info', 'key': 'INFO'}, {'value': l'Warn', 'key': 'WARN'}, {'value': l'Error', 'key': 'ERROR'}]}]</em><a class="headerlink" href="#core.log.LogConfiguration.SITEWIDE_SETTINGS" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.log.LogConfiguration.WARN">
<code class="descname">WARN</code><em class="property"> = 'WARN'</em><a class="headerlink" href="#core.log.LogConfiguration.WARN" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="classmethod">
<dt id="core.log.LogConfiguration.from_configuration">
<em class="property">classmethod </em><code class="descname">from_configuration</code><span class="sig-paren">(</span><em>_db</em>, <em>testing=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/log.html#LogConfiguration.from_configuration"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.log.LogConfiguration.from_configuration" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the logging policy as configured in the database.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>_db</strong> – A database connection. If None, the default
logging policy will be used.</li>
<li><strong>testing</strong> – A boolean indicating whether a unit test is
happening right now. If True, the database configuration will
be ignored in favor of a known test-friendly policy. (It’s
okay to pass in False during a test <em>of this method</em>.)</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">A 3-tuple (internal_log_level, database_log_level,
handlers). <cite>internal_log_level</cite> is the log level to be used
for most log messages. <cite>database_log_level</cite> is the log level
to be applied to the loggers for the database connector and
other verbose third-party libraries. <cite>handlers</cite> is a list of
Handler objects that will be associated with the top-level
logger.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="classmethod">
<dt id="core.log.LogConfiguration.initialize">
<em class="property">classmethod </em><code class="descname">initialize</code><span class="sig-paren">(</span><em>_db</em>, <em>testing=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/log.html#LogConfiguration.initialize"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.log.LogConfiguration.initialize" title="Permalink to this definition">¶</a></dt>
<dd><p>Make the logging handlers reflect the current logging rules
as configured in the database.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>_db</strong> – A database connection. If this is None, the default logging
configuration will be used.</li>
<li><strong>testing</strong> – True if unit tests are currently running; otherwise False.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="core.log.Logger">
<em class="property">class </em><code class="descclassname">core.log.</code><code class="descname">Logger</code><a class="reference internal" href="_modules/core/log.html#Logger"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.log.Logger" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Abstract base class for logging</p>
<dl class="attribute">
<dt id="core.log.Logger.DEFAULT_APP_NAME">
<code class="descname">DEFAULT_APP_NAME</code><em class="property"> = 'simplified'</em><a class="headerlink" href="#core.log.Logger.DEFAULT_APP_NAME" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.log.Logger.DEFAULT_MESSAGE_TEMPLATE">
<code class="descname">DEFAULT_MESSAGE_TEMPLATE</code><em class="property"> = '%(asctime)s:%(name)s:%(levelname)s:%(filename)s:%(message)s'</em><a class="headerlink" href="#core.log.Logger.DEFAULT_MESSAGE_TEMPLATE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.log.Logger.JSON_LOG_FORMAT">
<code class="descname">JSON_LOG_FORMAT</code><em class="property"> = 'json'</em><a class="headerlink" href="#core.log.Logger.JSON_LOG_FORMAT" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.log.Logger.TEXT_LOG_FORMAT">
<code class="descname">TEXT_LOG_FORMAT</code><em class="property"> = 'text'</em><a class="headerlink" href="#core.log.Logger.TEXT_LOG_FORMAT" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="classmethod">
<dt id="core.log.Logger.from_configuration">
<em class="property">classmethod </em><code class="descname">from_configuration</code><span class="sig-paren">(</span><em>_db</em>, <em>testing=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/log.html#Logger.from_configuration"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.log.Logger.from_configuration" title="Permalink to this definition">¶</a></dt>
<dd><p>Should be implemented in each logging class.</p>
</dd></dl>

<dl class="classmethod">
<dt id="core.log.Logger.set_formatter">
<em class="property">classmethod </em><code class="descname">set_formatter</code><span class="sig-paren">(</span><em>handler</em>, <em>app_name=None</em>, <em>log_format=None</em>, <em>message_template=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/log.html#Logger.set_formatter"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.log.Logger.set_formatter" title="Permalink to this definition">¶</a></dt>
<dd><p>Tell the given <cite>handler</cite> to format its log messages in a
certain way.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="core.log.Loggly">
<em class="property">class </em><code class="descclassname">core.log.</code><code class="descname">Loggly</code><a class="reference internal" href="_modules/core/log.html#Loggly"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.log.Loggly" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.log.Logger" title="core.log.Logger"><code class="xref py py-class docutils literal notranslate"><span class="pre">core.log.Logger</span></code></a></p>
<dl class="attribute">
<dt id="core.log.Loggly.DEFAULT_LOGGLY_URL">
<code class="descname">DEFAULT_LOGGLY_URL</code><em class="property"> = 'https://logs-01.loggly.com/inputs/%(token)s/tag/python/'</em><a class="headerlink" href="#core.log.Loggly.DEFAULT_LOGGLY_URL" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.log.Loggly.NAME">
<code class="descname">NAME</code><em class="property"> = 'Loggly'</em><a class="headerlink" href="#core.log.Loggly.NAME" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.log.Loggly.PASSWORD">
<code class="descname">PASSWORD</code><em class="property"> = 'password'</em><a class="headerlink" href="#core.log.Loggly.PASSWORD" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.log.Loggly.SETTINGS">
<code class="descname">SETTINGS</code><em class="property"> = [{'required': True, 'key': 'user', 'label': l'Username'}, {'required': True, 'key': 'password', 'label': l'Password'}, {'format': 'url', 'required': True, 'key': 'url', 'label': l'URL'}]</em><a class="headerlink" href="#core.log.Loggly.SETTINGS" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.log.Loggly.SITEWIDE">
<code class="descname">SITEWIDE</code><em class="property"> = True</em><a class="headerlink" href="#core.log.Loggly.SITEWIDE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.log.Loggly.URL">
<code class="descname">URL</code><em class="property"> = 'url'</em><a class="headerlink" href="#core.log.Loggly.URL" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.log.Loggly.USER">
<code class="descname">USER</code><em class="property"> = 'user'</em><a class="headerlink" href="#core.log.Loggly.USER" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="classmethod">
<dt id="core.log.Loggly.from_configuration">
<em class="property">classmethod </em><code class="descname">from_configuration</code><span class="sig-paren">(</span><em>_db</em>, <em>testing=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/log.html#Loggly.from_configuration"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.log.Loggly.from_configuration" title="Permalink to this definition">¶</a></dt>
<dd><p>Should be implemented in each logging class.</p>
</dd></dl>

<dl class="classmethod">
<dt id="core.log.Loggly.loggly_handler">
<em class="property">classmethod </em><code class="descname">loggly_handler</code><span class="sig-paren">(</span><em>externalintegration</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/log.html#Loggly.loggly_handler"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.log.Loggly.loggly_handler" title="Permalink to this definition">¶</a></dt>
<dd><p>Turn a Loggly ExternalIntegration into a log handler.</p>
</dd></dl>

<dl class="classmethod">
<dt id="core.log.Loggly.set_formatter">
<em class="property">classmethod </em><code class="descname">set_formatter</code><span class="sig-paren">(</span><em>handler</em>, <em>app_name</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/log.html#Loggly.set_formatter"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.log.Loggly.set_formatter" title="Permalink to this definition">¶</a></dt>
<dd><p>Tell the given <cite>handler</cite> to format its log messages in a
certain way.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="core.log.StringFormatter">
<em class="property">class </em><code class="descclassname">core.log.</code><code class="descname">StringFormatter</code><span class="sig-paren">(</span><em>fmt=None</em>, <em>datefmt=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/log.html#StringFormatter"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.log.StringFormatter" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">logging.Formatter</span></code></p>
<p>Encode all output as a string.</p>
<p>In Python 2, this means a UTF-8 bytestring. In Python 3, it means a
Unicode string.</p>
<dl class="method">
<dt id="core.log.StringFormatter.format">
<code class="descname">format</code><span class="sig-paren">(</span><em>record</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/log.html#StringFormatter.format"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.log.StringFormatter.format" title="Permalink to this definition">¶</a></dt>
<dd><p>Format the specified record as text.</p>
<p>The record’s attribute dictionary is used as the operand to a
string formatting operation which yields the returned string.
Before formatting the dictionary, a couple of preparatory steps
are carried out. The message attribute of the record is computed
using LogRecord.getMessage(). If the formatting string uses the
time (as determined by a call to usesTime(), formatTime() is
called to format the event time. If there is exception information,
it is formatted using formatException() and appended to the message.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="core.log.SysLogger">
<em class="property">class </em><code class="descclassname">core.log.</code><code class="descname">SysLogger</code><a class="reference internal" href="_modules/core/log.html#SysLogger"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.log.SysLogger" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.log.Logger" title="core.log.Logger"><code class="xref py py-class docutils literal notranslate"><span class="pre">core.log.Logger</span></code></a></p>
<dl class="attribute">
<dt id="core.log.SysLogger.LOG_FORMAT">
<code class="descname">LOG_FORMAT</code><em class="property"> = 'log_format'</em><a class="headerlink" href="#core.log.SysLogger.LOG_FORMAT" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.log.SysLogger.LOG_MESSAGE_TEMPLATE">
<code class="descname">LOG_MESSAGE_TEMPLATE</code><em class="property"> = 'message_template'</em><a class="headerlink" href="#core.log.SysLogger.LOG_MESSAGE_TEMPLATE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.log.SysLogger.NAME">
<code class="descname">NAME</code><em class="property"> = 'sysLog'</em><a class="headerlink" href="#core.log.SysLogger.NAME" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.log.SysLogger.SETTINGS">
<code class="descname">SETTINGS</code><em class="property"> = [{'type': 'select', 'options': [{'key': 'json', 'label': l'json'}, {'key': 'text', 'label': l'text'}], 'key': 'log_format', 'label': l'Log Format'}, {'default': '%(asctime)s:%(name)s:%(levelname)s:%(filename)s:%(message)s', 'required': True, 'key': 'message_template', 'label': l'template'}]</em><a class="headerlink" href="#core.log.SysLogger.SETTINGS" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.log.SysLogger.SITEWIDE">
<code class="descname">SITEWIDE</code><em class="property"> = True</em><a class="headerlink" href="#core.log.SysLogger.SITEWIDE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="classmethod">
<dt id="core.log.SysLogger.from_configuration">
<em class="property">classmethod </em><code class="descname">from_configuration</code><span class="sig-paren">(</span><em>_db</em>, <em>testing=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/log.html#SysLogger.from_configuration"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.log.SysLogger.from_configuration" title="Permalink to this definition">¶</a></dt>
<dd><p>Should be implemented in each logging class.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-core.marc">
<span id="core-marc-module"></span><h2>core.marc module<a class="headerlink" href="#module-core.marc" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="core.marc.Annotator">
<em class="property">class </em><code class="descclassname">core.marc.</code><code class="descname">Annotator</code><a class="reference internal" href="_modules/core/marc.html#Annotator"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.marc.Annotator" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>The Annotator knows how to add information about a Work to
a MARC record.</p>
<dl class="attribute">
<dt id="core.marc.Annotator.AUDIENCE_TERMS">
<code class="descname">AUDIENCE_TERMS</code><em class="property"> = {'Adult': 'General', 'Adults Only': 'Adult', 'Children': 'Juvenile', 'Young Adult': 'Adolescent'}</em><a class="headerlink" href="#core.marc.Annotator.AUDIENCE_TERMS" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.marc.Annotator.FORMAT_TERMS">
<code class="descname">FORMAT_TERMS</code><em class="property"> = {(u'application/epub+zip', None): 'EPUB eBook', (u'application/epub+zip', u'application/vnd.adobe.adept+xml'): 'Adobe EPUB eBook', (u'application/pdf', None): 'PDF eBook', (u'application/pdf', u'application/vnd.adobe.adept+xml'): 'Adobe PDF eBook'}</em><a class="headerlink" href="#core.marc.Annotator.FORMAT_TERMS" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="classmethod">
<dt id="core.marc.Annotator.add_audience">
<em class="property">classmethod </em><code class="descname">add_audience</code><span class="sig-paren">(</span><em>record</em>, <em>work</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/marc.html#Annotator.add_audience"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.marc.Annotator.add_audience" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="classmethod">
<dt id="core.marc.Annotator.add_contributors">
<em class="property">classmethod </em><code class="descname">add_contributors</code><span class="sig-paren">(</span><em>record</em>, <em>edition</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/marc.html#Annotator.add_contributors"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.marc.Annotator.add_contributors" title="Permalink to this definition">¶</a></dt>
<dd><p>Create contributor fields for this edition.</p>
<p>TODO: Use canonical names from LoC.</p>
</dd></dl>

<dl class="classmethod">
<dt id="core.marc.Annotator.add_control_fields">
<em class="property">classmethod </em><code class="descname">add_control_fields</code><span class="sig-paren">(</span><em>record</em>, <em>identifier</em>, <em>pool</em>, <em>edition</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/marc.html#Annotator.add_control_fields"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.marc.Annotator.add_control_fields" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="classmethod">
<dt id="core.marc.Annotator.add_distributor">
<em class="property">classmethod </em><code class="descname">add_distributor</code><span class="sig-paren">(</span><em>record</em>, <em>pool</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/marc.html#Annotator.add_distributor"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.marc.Annotator.add_distributor" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="classmethod">
<dt id="core.marc.Annotator.add_ebooks_subject">
<em class="property">classmethod </em><code class="descname">add_ebooks_subject</code><span class="sig-paren">(</span><em>record</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/marc.html#Annotator.add_ebooks_subject"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.marc.Annotator.add_ebooks_subject" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="classmethod">
<dt id="core.marc.Annotator.add_formats">
<em class="property">classmethod </em><code class="descname">add_formats</code><span class="sig-paren">(</span><em>record</em>, <em>pool</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/marc.html#Annotator.add_formats"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.marc.Annotator.add_formats" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="classmethod">
<dt id="core.marc.Annotator.add_isbn">
<em class="property">classmethod </em><code class="descname">add_isbn</code><span class="sig-paren">(</span><em>record</em>, <em>identifier</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/marc.html#Annotator.add_isbn"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.marc.Annotator.add_isbn" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="classmethod">
<dt id="core.marc.Annotator.add_marc_organization_code">
<em class="property">classmethod </em><code class="descname">add_marc_organization_code</code><span class="sig-paren">(</span><em>record</em>, <em>marc_org</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/marc.html#Annotator.add_marc_organization_code"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.marc.Annotator.add_marc_organization_code" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="classmethod">
<dt id="core.marc.Annotator.add_physical_description">
<em class="property">classmethod </em><code class="descname">add_physical_description</code><span class="sig-paren">(</span><em>record</em>, <em>edition</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/marc.html#Annotator.add_physical_description"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.marc.Annotator.add_physical_description" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="classmethod">
<dt id="core.marc.Annotator.add_publisher">
<em class="property">classmethod </em><code class="descname">add_publisher</code><span class="sig-paren">(</span><em>record</em>, <em>edition</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/marc.html#Annotator.add_publisher"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.marc.Annotator.add_publisher" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="classmethod">
<dt id="core.marc.Annotator.add_series">
<em class="property">classmethod </em><code class="descname">add_series</code><span class="sig-paren">(</span><em>record</em>, <em>edition</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/marc.html#Annotator.add_series"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.marc.Annotator.add_series" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="classmethod">
<dt id="core.marc.Annotator.add_simplified_genres">
<em class="property">classmethod </em><code class="descname">add_simplified_genres</code><span class="sig-paren">(</span><em>record</em>, <em>work</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/marc.html#Annotator.add_simplified_genres"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.marc.Annotator.add_simplified_genres" title="Permalink to this definition">¶</a></dt>
<dd><p>Create subject fields for this work.</p>
</dd></dl>

<dl class="classmethod">
<dt id="core.marc.Annotator.add_summary">
<em class="property">classmethod </em><code class="descname">add_summary</code><span class="sig-paren">(</span><em>record</em>, <em>work</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/marc.html#Annotator.add_summary"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.marc.Annotator.add_summary" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="classmethod">
<dt id="core.marc.Annotator.add_system_details">
<em class="property">classmethod </em><code class="descname">add_system_details</code><span class="sig-paren">(</span><em>record</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/marc.html#Annotator.add_system_details"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.marc.Annotator.add_system_details" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="classmethod">
<dt id="core.marc.Annotator.add_title">
<em class="property">classmethod </em><code class="descname">add_title</code><span class="sig-paren">(</span><em>record</em>, <em>edition</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/marc.html#Annotator.add_title"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.marc.Annotator.add_title" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="core.marc.Annotator.annotate_work_record">
<code class="descname">annotate_work_record</code><span class="sig-paren">(</span><em>work</em>, <em>active_license_pool</em>, <em>edition</em>, <em>identifier</em>, <em>record</em>, <em>integration=None</em>, <em>updated=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/marc.html#Annotator.annotate_work_record"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.marc.Annotator.annotate_work_record" title="Permalink to this definition">¶</a></dt>
<dd><p>Add metadata from this work to a MARC record.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Work:</th><td class="field-body">The Work whose record is being annotated.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Active_license_pool:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body">Of all the LicensePools associated with this
Work, the client has expressed interest in this one.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Edition:</th><td class="field-body">The Edition to use when associating bibliographic
metadata with this entry.</td>
</tr>
<tr class="field-even field"><th class="field-name">Identifier:</th><td class="field-body">Of all the Identifiers associated with this
Work, the client has expressed interest in this one.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>record</strong> – A MARCRecord object to be annotated.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="classmethod">
<dt id="core.marc.Annotator.leader">
<em class="property">classmethod </em><code class="descname">leader</code><span class="sig-paren">(</span><em>work</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/marc.html#Annotator.leader"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.marc.Annotator.leader" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.marc.Annotator.marc_cache_field">
<code class="descname">marc_cache_field</code><em class="property"> = 'marc_record'</em><a class="headerlink" href="#core.marc.Annotator.marc_cache_field" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="core.marc.MARCExporter">
<em class="property">class </em><code class="descclassname">core.marc.</code><code class="descname">MARCExporter</code><span class="sig-paren">(</span><em>_db</em>, <em>library</em>, <em>integration</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/marc.html#MARCExporter"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.marc.MARCExporter" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Turn a work into a record for a MARC file.</p>
<dl class="attribute">
<dt id="core.marc.MARCExporter.DEFAULT_MIRROR_INTEGRATION">
<code class="descname">DEFAULT_MIRROR_INTEGRATION</code><em class="property"> = {'key': u'NO_MIRROR', 'label': l'None - Do not mirror MARC files'}</em><a class="headerlink" href="#core.marc.MARCExporter.DEFAULT_MIRROR_INTEGRATION" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.marc.MARCExporter.DEFAULT_UPDATE_FREQUENCY">
<code class="descname">DEFAULT_UPDATE_FREQUENCY</code><em class="property"> = 30</em><a class="headerlink" href="#core.marc.MARCExporter.DEFAULT_UPDATE_FREQUENCY" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.marc.MARCExporter.DESCRIPTION">
<code class="descname">DESCRIPTION</code><em class="property"> = l'Export metadata into MARC files that can be imported into an ILS manually.'</em><a class="headerlink" href="#core.marc.MARCExporter.DESCRIPTION" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.marc.MARCExporter.INCLUDE_SIMPLIFIED_GENRES">
<code class="descname">INCLUDE_SIMPLIFIED_GENRES</code><em class="property"> = u'include_simplified_genres'</em><a class="headerlink" href="#core.marc.MARCExporter.INCLUDE_SIMPLIFIED_GENRES" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.marc.MARCExporter.INCLUDE_SUMMARY">
<code class="descname">INCLUDE_SUMMARY</code><em class="property"> = u'include_summary'</em><a class="headerlink" href="#core.marc.MARCExporter.INCLUDE_SUMMARY" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.marc.MARCExporter.LIBRARY_SETTINGS">
<code class="descname">LIBRARY_SETTINGS</code><em class="property"> = [{'default': 30, 'type': 'number', 'description': l'The circulation manager will wait this number of days between generating MARC files.', 'key': 'marc_update_frequency', 'label': l'Update frequency (in days)'}, {'description': l'MARC organization codes are assigned by the Library of Congress.', 'key': 'marc_organization_code', 'label': l'The MARC organization code for this library (003 field).'}, {'description': l'If using a library registry that provides a web catalog, this can be left blank.', 'key': u'marc_web_client_url', 'label': l'The base URL for the web catalog for this library, for the 856 field.'}, {'default': 'false', 'type': 'select', 'options': [{'key': 'false', 'label': l'Do not include summaries'}, {'key': 'true', 'label': l'Include summaries'}], 'key': u'include_summary', 'label': l'Include summaries in MARC records (520 field)'}, {'default': 'false', 'type': 'select', 'options': [{'key': 'false', 'label': l'Do not include Library Simplified genres'}, {'key': 'true', 'label': l'Include Library Simplified genres'}], 'key': u'include_simplified_genres', 'label': l'Include Library Simplified genres in MARC records (650 fields)'}]</em><a class="headerlink" href="#core.marc.MARCExporter.LIBRARY_SETTINGS" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.marc.MARCExporter.MARC_ORGANIZATION_CODE">
<code class="descname">MARC_ORGANIZATION_CODE</code><em class="property"> = 'marc_organization_code'</em><a class="headerlink" href="#core.marc.MARCExporter.MARC_ORGANIZATION_CODE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.marc.MARCExporter.NAME">
<code class="descname">NAME</code><em class="property"> = u'MARC Export'</em><a class="headerlink" href="#core.marc.MARCExporter.NAME" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.marc.MARCExporter.NO_MIRROR_INTEGRATION">
<code class="descname">NO_MIRROR_INTEGRATION</code><em class="property"> = u'NO_MIRROR'</em><a class="headerlink" href="#core.marc.MARCExporter.NO_MIRROR_INTEGRATION" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.marc.MARCExporter.SETTING">
<code class="descname">SETTING</code><em class="property"> = {'description': l'Storage protocol to use for uploading generated MARC files. The service must already be configured under 'Storage Services'.', 'key': 'mirror_integration_id', 'label': l'MARC Mirror', 'options': [{'key': u'NO_MIRROR', 'label': l'None - Do not mirror MARC files'}], 'type': 'select'}</em><a class="headerlink" href="#core.marc.MARCExporter.SETTING" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.marc.MARCExporter.UPDATE_FREQUENCY">
<code class="descname">UPDATE_FREQUENCY</code><em class="property"> = 'marc_update_frequency'</em><a class="headerlink" href="#core.marc.MARCExporter.UPDATE_FREQUENCY" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.marc.MARCExporter.WEB_CLIENT_URL">
<code class="descname">WEB_CLIENT_URL</code><em class="property"> = u'marc_web_client_url'</em><a class="headerlink" href="#core.marc.MARCExporter.WEB_CLIENT_URL" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="classmethod">
<dt id="core.marc.MARCExporter.create_record">
<em class="property">classmethod </em><code class="descname">create_record</code><span class="sig-paren">(</span><em>work</em>, <em>annotator</em>, <em>force_create=False</em>, <em>integration=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/marc.html#MARCExporter.create_record"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.marc.MARCExporter.create_record" title="Permalink to this definition">¶</a></dt>
<dd><p>Build a complete MARC record for a given work.</p>
</dd></dl>

<dl class="classmethod">
<dt id="core.marc.MARCExporter.from_config">
<em class="property">classmethod </em><code class="descname">from_config</code><span class="sig-paren">(</span><em>library</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/marc.html#MARCExporter.from_config"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.marc.MARCExporter.from_config" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="classmethod">
<dt id="core.marc.MARCExporter.get_storage_settings">
<em class="property">classmethod </em><code class="descname">get_storage_settings</code><span class="sig-paren">(</span><em>_db</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/marc.html#MARCExporter.get_storage_settings"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.marc.MARCExporter.get_storage_settings" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="core.marc.MARCExporter.records">
<code class="descname">records</code><span class="sig-paren">(</span><em>lane</em>, <em>annotator</em>, <em>mirror_integration</em>, <em>start_time=None</em>, <em>force_refresh=False</em>, <em>mirror=None</em>, <em>search_engine=None</em>, <em>query_batch_size=500</em>, <em>upload_batch_size=7500</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/marc.html#MARCExporter.records"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.marc.MARCExporter.records" title="Permalink to this definition">¶</a></dt>
<dd><p>Create and export a MARC file for the books in a lane.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>lane</strong> – The Lane to export books from.</li>
<li><strong>annotator</strong> – The Annotator to use when creating MARC records.</li>
<li><strong>mirror_integration</strong> – The mirror integration to use for MARC files.</li>
<li><strong>start_time</strong> – Only include records that were created or modified after this time.</li>
<li><strong>force_refresh</strong> – Create new records even when cached records are available.</li>
<li><strong>mirror</strong> – Optional mirror to use instead of loading one from configuration.</li>
<li><strong>query_batch_size</strong> – Number of works to retrieve with a single Elasticsearch query.</li>
<li><strong>upload_batch_size</strong> – Number of records to mirror at a time. This is different
from query_batch_size because S3 enforces a minimum size of 5MB for all parts
of a multipart upload except the last, but 5MB of records would be too many
works for a single query.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="core.marc.MARCExporterFacets">
<em class="property">class </em><code class="descclassname">core.marc.</code><code class="descname">MARCExporterFacets</code><span class="sig-paren">(</span><em>start_time</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/marc.html#MARCExporterFacets"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.marc.MARCExporterFacets" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.lane.BaseFacets" title="core.lane.BaseFacets"><code class="xref py py-class docutils literal notranslate"><span class="pre">core.lane.BaseFacets</span></code></a></p>
<p>A faceting object used to configure the search engine so that
it only works updated since a certain time.</p>
<dl class="method">
<dt id="core.marc.MARCExporterFacets.modify_search_filter">
<code class="descname">modify_search_filter</code><span class="sig-paren">(</span><em>filter</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/marc.html#MARCExporterFacets.modify_search_filter"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.marc.MARCExporterFacets.modify_search_filter" title="Permalink to this definition">¶</a></dt>
<dd><p>Modify an external_search.Filter object to filter out works
excluded by the business logic of this faceting class.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-core.metadata_layer">
<span id="core-metadata-layer-module"></span><h2>core.metadata_layer module<a class="headerlink" href="#module-core.metadata_layer" title="Permalink to this headline">¶</a></h2>
<p>An abstract way of representing incoming metadata and applying it
to Identifiers and Editions.</p>
<p>This acts as an intermediary between the third-party integrations
(which have this information in idiosyncratic formats) and the
model. Doing a third-party integration should be as simple as putting
the information into this format.</p>
<dl class="exception">
<dt id="core.metadata_layer.CSVFormatError">
<em class="property">exception </em><code class="descclassname">core.metadata_layer.</code><code class="descname">CSVFormatError</code><a class="reference internal" href="_modules/core/metadata_layer.html#CSVFormatError"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.metadata_layer.CSVFormatError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">_csv.Error</span></code></p>
</dd></dl>

<dl class="class">
<dt id="core.metadata_layer.CSVMetadataImporter">
<em class="property">class </em><code class="descclassname">core.metadata_layer.</code><code class="descname">CSVMetadataImporter</code><span class="sig-paren">(</span><em>data_source_name, title_field='title', language_field='language', default_language='eng', medium_field='medium', default_medium=u'Book', series_field='series', publisher_field='publisher', imprint_field='imprint', issued_field='issued', published_field=['published', 'publication year'], identifier_fields={u'Axis 360 ID': ('axis 360 id', 0.75), u'Bibliotheca ID': ('3m id', 0.75), u'ISBN': ('isbn', 0.75), u'Overdrive ID': ('overdrive id', 0.75)}, subject_fields={'age': ('schema:typicalAgeRange', 100.0), 'audience': ('schema:audience', 100.0), 'tags': ('tag', 100.0)}, sort_author_field='file author as', display_author_field=['author', 'display author as']</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/metadata_layer.html#CSVMetadataImporter"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.metadata_layer.CSVMetadataImporter" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Turn a CSV file into a list of Metadata objects.</p>
<dl class="attribute">
<dt id="core.metadata_layer.CSVMetadataImporter.DEFAULT_IDENTIFIER_FIELD_NAMES">
<code class="descname">DEFAULT_IDENTIFIER_FIELD_NAMES</code><em class="property"> = {u'Axis 360 ID': ('axis 360 id', 0.75), u'Bibliotheca ID': ('3m id', 0.75), u'ISBN': ('isbn', 0.75), u'Overdrive ID': ('overdrive id', 0.75)}</em><a class="headerlink" href="#core.metadata_layer.CSVMetadataImporter.DEFAULT_IDENTIFIER_FIELD_NAMES" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.metadata_layer.CSVMetadataImporter.DEFAULT_SUBJECT_FIELD_NAMES">
<code class="descname">DEFAULT_SUBJECT_FIELD_NAMES</code><em class="property"> = {'age': ('schema:typicalAgeRange', 100.0), 'audience': ('schema:audience', 100.0), 'tags': ('tag', 100.0)}</em><a class="headerlink" href="#core.metadata_layer.CSVMetadataImporter.DEFAULT_SUBJECT_FIELD_NAMES" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.metadata_layer.CSVMetadataImporter.IDENTIFIER_PRECEDENCE">
<code class="descname">IDENTIFIER_PRECEDENCE</code><em class="property"> = [u'Axis 360 ID', u'Overdrive ID', u'Bibliotheca ID', u'ISBN']</em><a class="headerlink" href="#core.metadata_layer.CSVMetadataImporter.IDENTIFIER_PRECEDENCE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.metadata_layer.CSVMetadataImporter.identifier_field_names">
<code class="descname">identifier_field_names</code><a class="headerlink" href="#core.metadata_layer.CSVMetadataImporter.identifier_field_names" title="Permalink to this definition">¶</a></dt>
<dd><p>All potential field names that would identify an identifier.</p>
</dd></dl>

<dl class="method">
<dt id="core.metadata_layer.CSVMetadataImporter.list_field">
<code class="descname">list_field</code><span class="sig-paren">(</span><em>row</em>, <em>names</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/metadata_layer.html#CSVMetadataImporter.list_field"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.metadata_layer.CSVMetadataImporter.list_field" title="Permalink to this definition">¶</a></dt>
<dd><p>Parse a string into a list by splitting on commas.</p>
</dd></dl>

<dl class="attribute">
<dt id="core.metadata_layer.CSVMetadataImporter.log">
<code class="descname">log</code><em class="property"> = &lt;logging.Logger object&gt;</em><a class="headerlink" href="#core.metadata_layer.CSVMetadataImporter.log" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="core.metadata_layer.CSVMetadataImporter.row_to_metadata">
<code class="descname">row_to_metadata</code><span class="sig-paren">(</span><em>row</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/metadata_layer.html#CSVMetadataImporter.row_to_metadata"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.metadata_layer.CSVMetadataImporter.row_to_metadata" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="core.metadata_layer.CSVMetadataImporter.to_metadata">
<code class="descname">to_metadata</code><span class="sig-paren">(</span><em>dictreader</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/metadata_layer.html#CSVMetadataImporter.to_metadata"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.metadata_layer.CSVMetadataImporter.to_metadata" title="Permalink to this definition">¶</a></dt>
<dd><p>Turn the CSV file in <cite>dictreader</cite> into a sequence of Metadata.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Yield:</th><td class="field-body">A sequence of Metadata objects.</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="core.metadata_layer.CirculationData">
<em class="property">class </em><code class="descclassname">core.metadata_layer.</code><code class="descname">CirculationData</code><span class="sig-paren">(</span><em>data_source</em>, <em>primary_identifier</em>, <em>licenses_owned=None</em>, <em>licenses_available=None</em>, <em>licenses_reserved=None</em>, <em>patrons_in_hold_queue=None</em>, <em>formats=None</em>, <em>default_rights_uri=None</em>, <em>links=None</em>, <em>licenses=None</em>, <em>last_checked=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/metadata_layer.html#CirculationData"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.metadata_layer.CirculationData" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.metadata_layer.MetaToModelUtility" title="core.metadata_layer.MetaToModelUtility"><code class="xref py py-class docutils literal notranslate"><span class="pre">core.metadata_layer.MetaToModelUtility</span></code></a></p>
<p>Information about actual copies of a book that can be delivered to
patrons.</p>
<p>As distinct from Metadata, which is a container for information
about a book.</p>
<dl class="docutils">
<dt>Basically,</dt>
<dd>Metadata : Edition :: CirculationData : Licensepool</dd>
</dl>
<dl class="method">
<dt id="core.metadata_layer.CirculationData.apply">
<code class="descname">apply</code><span class="sig-paren">(</span><em>_db</em>, <em>collection</em>, <em>replace=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/metadata_layer.html#CirculationData.apply"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.metadata_layer.CirculationData.apply" title="Permalink to this definition">¶</a></dt>
<dd><p>Update the title with this CirculationData’s information.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>collection</strong> – A Collection representing actual copies of
this title. Availability information (e.g. number of copies)
will be associated with a LicensePool in this Collection. If
this is not present, only delivery information (e.g. format
information and open-access downloads) will be processed.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="core.metadata_layer.CirculationData.data_source">
<code class="descname">data_source</code><span class="sig-paren">(</span><em>_db</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/metadata_layer.html#CirculationData.data_source"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.metadata_layer.CirculationData.data_source" title="Permalink to this definition">¶</a></dt>
<dd><p>Find the DataSource associated with this circulation information.</p>
</dd></dl>

<dl class="attribute">
<dt id="core.metadata_layer.CirculationData.has_open_access_link">
<code class="descname">has_open_access_link</code><a class="headerlink" href="#core.metadata_layer.CirculationData.has_open_access_link" title="Permalink to this definition">¶</a></dt>
<dd><p>Does this Circulation object have an associated open-access link?</p>
</dd></dl>

<dl class="method">
<dt id="core.metadata_layer.CirculationData.license_pool">
<code class="descname">license_pool</code><span class="sig-paren">(</span><em>_db</em>, <em>collection</em>, <em>analytics=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/metadata_layer.html#CirculationData.license_pool"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.metadata_layer.CirculationData.license_pool" title="Permalink to this definition">¶</a></dt>
<dd><p>Find or create a LicensePool object for this CirculationData.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>collection</strong> – The LicensePool object will be associated with
the given Collection.</li>
<li><strong>analytics</strong> – If the LicensePool is newly created, the event
will be tracked with this.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="core.metadata_layer.CirculationData.links">
<code class="descname">links</code><a class="headerlink" href="#core.metadata_layer.CirculationData.links" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.metadata_layer.CirculationData.log">
<code class="descname">log</code><em class="property"> = &lt;logging.Logger object&gt;</em><a class="headerlink" href="#core.metadata_layer.CirculationData.log" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="core.metadata_layer.CirculationData.primary_identifier">
<code class="descname">primary_identifier</code><span class="sig-paren">(</span><em>_db</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/metadata_layer.html#CirculationData.primary_identifier"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.metadata_layer.CirculationData.primary_identifier" title="Permalink to this definition">¶</a></dt>
<dd><p>Find the Identifier associated with this circulation information.</p>
</dd></dl>

<dl class="method">
<dt id="core.metadata_layer.CirculationData.set_default_rights_uri">
<code class="descname">set_default_rights_uri</code><span class="sig-paren">(</span><em>data_source_name</em>, <em>default_rights_uri=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/metadata_layer.html#CirculationData.set_default_rights_uri"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.metadata_layer.CirculationData.set_default_rights_uri" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="core.metadata_layer.ContributorData">
<em class="property">class </em><code class="descclassname">core.metadata_layer.</code><code class="descname">ContributorData</code><span class="sig-paren">(</span><em>sort_name=None</em>, <em>display_name=None</em>, <em>family_name=None</em>, <em>wikipedia_name=None</em>, <em>roles=None</em>, <em>lc=None</em>, <em>viaf=None</em>, <em>biography=None</em>, <em>aliases=None</em>, <em>extra=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/metadata_layer.html#ContributorData"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.metadata_layer.ContributorData" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<dl class="method">
<dt id="core.metadata_layer.ContributorData.apply">
<code class="descname">apply</code><span class="sig-paren">(</span><em>destination</em>, <em>replace=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/metadata_layer.html#ContributorData.apply"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.metadata_layer.ContributorData.apply" title="Permalink to this definition">¶</a></dt>
<dd><p>Update the passed-in Contributor-type object with this
ContributorData’s information.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Param:</th><td class="field-body">destination – the Contributor or ContributorData object to
write this ContributorData object’s metadata to.</td>
</tr>
<tr class="field-even field"><th class="field-name">Param:</th><td class="field-body">replace – Replacement policy (not currently used).</td>
</tr>
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">the possibly changed Contributor object and a flag of whether it’s been changed.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="classmethod">
<dt id="core.metadata_layer.ContributorData.display_name_to_sort_name_from_existing_contributor">
<em class="property">classmethod </em><code class="descname">display_name_to_sort_name_from_existing_contributor</code><span class="sig-paren">(</span><em>_db</em>, <em>display_name</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/metadata_layer.html#ContributorData.display_name_to_sort_name_from_existing_contributor"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.metadata_layer.ContributorData.display_name_to_sort_name_from_existing_contributor" title="Permalink to this definition">¶</a></dt>
<dd><p>Find the sort name for this book’s author, assuming it’s easy.</p>
<p>‘Easy’ means we already have an established sort name for a
Contributor with this exact display name.</p>
<p>If it’s not easy, this will be taken care of later with a call to
the metadata wrangler’s author canonicalization service.</p>
<p>If we have a copy of this book in our collection (the only
time an external list item is relevant), this will probably be
easy.</p>
</dd></dl>

<dl class="method">
<dt id="core.metadata_layer.ContributorData.display_name_to_sort_name_through_canonicalizer">
<code class="descname">display_name_to_sort_name_through_canonicalizer</code><span class="sig-paren">(</span><em>_db</em>, <em>identifiers</em>, <em>metadata_client</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/metadata_layer.html#ContributorData.display_name_to_sort_name_through_canonicalizer"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.metadata_layer.ContributorData.display_name_to_sort_name_through_canonicalizer" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="core.metadata_layer.ContributorData.find_sort_name">
<code class="descname">find_sort_name</code><span class="sig-paren">(</span><em>_db</em>, <em>identifiers</em>, <em>metadata_client</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/metadata_layer.html#ContributorData.find_sort_name"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.metadata_layer.ContributorData.find_sort_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Try as hard as possible to find this person’s sort name.</p>
</dd></dl>

<dl class="classmethod">
<dt id="core.metadata_layer.ContributorData.from_contribution">
<em class="property">classmethod </em><code class="descname">from_contribution</code><span class="sig-paren">(</span><em>contribution</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/metadata_layer.html#ContributorData.from_contribution"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.metadata_layer.ContributorData.from_contribution" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a ContributorData object from a data-model Contribution
object.</p>
</dd></dl>

<dl class="classmethod">
<dt id="core.metadata_layer.ContributorData.lookup">
<em class="property">classmethod </em><code class="descname">lookup</code><span class="sig-paren">(</span><em>_db</em>, <em>sort_name=None</em>, <em>display_name=None</em>, <em>lc=None</em>, <em>viaf=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/metadata_layer.html#ContributorData.lookup"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.metadata_layer.ContributorData.lookup" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a (potentially synthetic) ContributorData based on
the best available information in the database.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">A ContributorData.</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="core.metadata_layer.FormatData">
<em class="property">class </em><code class="descclassname">core.metadata_layer.</code><code class="descname">FormatData</code><span class="sig-paren">(</span><em>content_type</em>, <em>drm_scheme</em>, <em>link=None</em>, <em>rights_uri=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/metadata_layer.html#FormatData"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.metadata_layer.FormatData" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
</dd></dl>

<dl class="class">
<dt id="core.metadata_layer.IdentifierData">
<em class="property">class </em><code class="descclassname">core.metadata_layer.</code><code class="descname">IdentifierData</code><span class="sig-paren">(</span><em>type</em>, <em>identifier</em>, <em>weight=1</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/metadata_layer.html#IdentifierData"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.metadata_layer.IdentifierData" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<dl class="method">
<dt id="core.metadata_layer.IdentifierData.load">
<code class="descname">load</code><span class="sig-paren">(</span><em>_db</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/metadata_layer.html#IdentifierData.load"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.metadata_layer.IdentifierData.load" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="core.metadata_layer.LicenseData">
<em class="property">class </em><code class="descclassname">core.metadata_layer.</code><code class="descname">LicenseData</code><span class="sig-paren">(</span><em>identifier</em>, <em>checkout_url</em>, <em>status_url</em>, <em>expires=None</em>, <em>remaining_checkouts=None</em>, <em>concurrent_checkouts=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/metadata_layer.html#LicenseData"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.metadata_layer.LicenseData" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
</dd></dl>

<dl class="class">
<dt id="core.metadata_layer.LinkData">
<em class="property">class </em><code class="descclassname">core.metadata_layer.</code><code class="descname">LinkData</code><span class="sig-paren">(</span><em>rel</em>, <em>href=None</em>, <em>media_type=None</em>, <em>content=None</em>, <em>thumbnail=None</em>, <em>rights_uri=None</em>, <em>rights_explanation=None</em>, <em>original=None</em>, <em>transformation_settings=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/metadata_layer.html#LinkData"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.metadata_layer.LinkData" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<dl class="attribute">
<dt id="core.metadata_layer.LinkData.guessed_media_type">
<code class="descname">guessed_media_type</code><a class="headerlink" href="#core.metadata_layer.LinkData.guessed_media_type" title="Permalink to this definition">¶</a></dt>
<dd><p>If the media type of a link is unknown, take a guess.</p>
</dd></dl>

<dl class="method">
<dt id="core.metadata_layer.LinkData.mirror_type">
<code class="descname">mirror_type</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/metadata_layer.html#LinkData.mirror_type"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.metadata_layer.LinkData.mirror_type" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the type of mirror that should be used for the link.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="core.metadata_layer.MARCExtractor">
<em class="property">class </em><code class="descclassname">core.metadata_layer.</code><code class="descname">MARCExtractor</code><a class="reference internal" href="_modules/core/metadata_layer.html#MARCExtractor"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.metadata_layer.MARCExtractor" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Transform a MARC file into a list of Metadata objects.</p>
<p>This is not totally general, but it’s a good start.</p>
<dl class="attribute">
<dt id="core.metadata_layer.MARCExtractor.END_OF_AUTHOR_NAME_RES">
<code class="descname">END_OF_AUTHOR_NAME_RES</code><em class="property"> = [&lt;_sre.SRE_Pattern object&gt;, &lt;_sre.SRE_Pattern object&gt;, &lt;_sre.SRE_Pattern object&gt;, &lt;_sre.SRE_Pattern object&gt;]</em><a class="headerlink" href="#core.metadata_layer.MARCExtractor.END_OF_AUTHOR_NAME_RES" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="classmethod">
<dt id="core.metadata_layer.MARCExtractor.name_cleanup">
<em class="property">classmethod </em><code class="descname">name_cleanup</code><span class="sig-paren">(</span><em>name</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/metadata_layer.html#MARCExtractor.name_cleanup"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.metadata_layer.MARCExtractor.name_cleanup" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="classmethod">
<dt id="core.metadata_layer.MARCExtractor.parse">
<em class="property">classmethod </em><code class="descname">parse</code><span class="sig-paren">(</span><em>file</em>, <em>data_source_name</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/metadata_layer.html#MARCExtractor.parse"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.metadata_layer.MARCExtractor.parse" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="classmethod">
<dt id="core.metadata_layer.MARCExtractor.parse_year">
<em class="property">classmethod </em><code class="descname">parse_year</code><span class="sig-paren">(</span><em>value</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/metadata_layer.html#MARCExtractor.parse_year"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.metadata_layer.MARCExtractor.parse_year" title="Permalink to this definition">¶</a></dt>
<dd><p>Handle a publication year that may not be in the right format.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="core.metadata_layer.MeasurementData">
<em class="property">class </em><code class="descclassname">core.metadata_layer.</code><code class="descname">MeasurementData</code><span class="sig-paren">(</span><em>quantity_measured</em>, <em>value</em>, <em>weight=1</em>, <em>taken_at=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/metadata_layer.html#MeasurementData"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.metadata_layer.MeasurementData" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
</dd></dl>

<dl class="class">
<dt id="core.metadata_layer.MetaToModelUtility">
<em class="property">class </em><code class="descclassname">core.metadata_layer.</code><code class="descname">MetaToModelUtility</code><a class="reference internal" href="_modules/core/metadata_layer.html#MetaToModelUtility"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.metadata_layer.MetaToModelUtility" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Contains functionality common to both CirculationData and Metadata.</p>
<dl class="attribute">
<dt id="core.metadata_layer.MetaToModelUtility.log">
<code class="descname">log</code><em class="property"> = &lt;logging.Logger object&gt;</em><a class="headerlink" href="#core.metadata_layer.MetaToModelUtility.log" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="core.metadata_layer.MetaToModelUtility.mirror_link">
<code class="descname">mirror_link</code><span class="sig-paren">(</span><em>model_object</em>, <em>data_source</em>, <em>link</em>, <em>link_obj</em>, <em>policy</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/metadata_layer.html#MetaToModelUtility.mirror_link"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.metadata_layer.MetaToModelUtility.mirror_link" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve a copy of the given link and make sure it gets
mirrored. If it’s a full-size image, create a thumbnail and
mirror that too.</p>
<p>The model_object can be either a pool or an edition.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="core.metadata_layer.Metadata">
<em class="property">class </em><code class="descclassname">core.metadata_layer.</code><code class="descname">Metadata</code><span class="sig-paren">(</span><em>data_source</em>, <em>title=None</em>, <em>subtitle=None</em>, <em>sort_title=None</em>, <em>language=None</em>, <em>medium=None</em>, <em>series=None</em>, <em>series_position=None</em>, <em>publisher=None</em>, <em>imprint=None</em>, <em>issued=None</em>, <em>published=None</em>, <em>primary_identifier=None</em>, <em>identifiers=None</em>, <em>recommendations=None</em>, <em>subjects=None</em>, <em>contributors=None</em>, <em>measurements=None</em>, <em>links=None</em>, <em>data_source_last_updated=None</em>, <em>circulation=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/metadata_layer.html#Metadata"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.metadata_layer.Metadata" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.metadata_layer.MetaToModelUtility" title="core.metadata_layer.MetaToModelUtility"><code class="xref py py-class docutils literal notranslate"><span class="pre">core.metadata_layer.MetaToModelUtility</span></code></a></p>
<p>A (potentially partial) set of metadata for a published work.</p>
<dl class="attribute">
<dt id="core.metadata_layer.Metadata.BASIC_EDITION_FIELDS">
<code class="descname">BASIC_EDITION_FIELDS</code><em class="property"> = ['title', 'sort_title', 'subtitle', 'language', 'medium', 'series', 'series_position', 'publisher', 'imprint', 'issued', 'published']</em><a class="headerlink" href="#core.metadata_layer.Metadata.BASIC_EDITION_FIELDS" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.metadata_layer.Metadata.REL_REQUIRES_FULL_RECALCULATION">
<code class="descname">REL_REQUIRES_FULL_RECALCULATION</code><em class="property"> = [u'http://schema.org/description']</em><a class="headerlink" href="#core.metadata_layer.Metadata.REL_REQUIRES_FULL_RECALCULATION" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.metadata_layer.Metadata.REL_REQUIRES_NEW_PRESENTATION_EDITION">
<code class="descname">REL_REQUIRES_NEW_PRESENTATION_EDITION</code><em class="property"> = [u'http://opds-spec.org/image', u'http://opds-spec.org/image/thumbnail']</em><a class="headerlink" href="#core.metadata_layer.Metadata.REL_REQUIRES_NEW_PRESENTATION_EDITION" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="core.metadata_layer.Metadata.apply">
<code class="descname">apply</code><span class="sig-paren">(</span><em>edition</em>, <em>collection</em>, <em>metadata_client=None</em>, <em>replace=None</em>, <em>replace_identifiers=False</em>, <em>replace_subjects=False</em>, <em>replace_contributions=False</em>, <em>replace_links=False</em>, <em>replace_formats=False</em>, <em>replace_rights=False</em>, <em>force=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/metadata_layer.html#Metadata.apply"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.metadata_layer.Metadata.apply" title="Permalink to this definition">¶</a></dt>
<dd><p>Apply this metadata to the given edition.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">(edition, made_core_changes), where edition is the newly-updated object, and made_core_changes
answers the question: were any edition core fields harmed in the making of this update?
So, if title changed, return True.
New: If contributors changed, this is now considered a core change,
so work.simple_opds_feed refresh can be triggered.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="core.metadata_layer.Metadata.associate_with_identifiers_based_on_permanent_work_id">
<code class="descname">associate_with_identifiers_based_on_permanent_work_id</code><span class="sig-paren">(</span><em>_db</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/metadata_layer.html#Metadata.associate_with_identifiers_based_on_permanent_work_id"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.metadata_layer.Metadata.associate_with_identifiers_based_on_permanent_work_id" title="Permalink to this definition">¶</a></dt>
<dd><p>Try to associate this object’s primary identifier with
the primary identifiers of Editions in the database which share
a permanent work ID.</p>
</dd></dl>

<dl class="method">
<dt id="core.metadata_layer.Metadata.calculate_permanent_work_id">
<code class="descname">calculate_permanent_work_id</code><span class="sig-paren">(</span><em>_db</em>, <em>metadata_client</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/metadata_layer.html#Metadata.calculate_permanent_work_id"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.metadata_layer.Metadata.calculate_permanent_work_id" title="Permalink to this definition">¶</a></dt>
<dd><p>Try to calculate a permanent work ID from this metadata.</p>
<p>This may require asking a metadata wrangler to turn a display name
into a sort name–thus the <cite>metadata_client</cite> argument.</p>
</dd></dl>

<dl class="method">
<dt id="core.metadata_layer.Metadata.consolidate_identifiers">
<code class="descname">consolidate_identifiers</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/metadata_layer.html#Metadata.consolidate_identifiers"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.metadata_layer.Metadata.consolidate_identifiers" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="core.metadata_layer.Metadata.data_source">
<code class="descname">data_source</code><span class="sig-paren">(</span><em>_db</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/metadata_layer.html#Metadata.data_source"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.metadata_layer.Metadata.data_source" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="core.metadata_layer.Metadata.edition">
<code class="descname">edition</code><span class="sig-paren">(</span><em>_db</em>, <em>create_if_not_exists=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/metadata_layer.html#Metadata.edition"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.metadata_layer.Metadata.edition" title="Permalink to this definition">¶</a></dt>
<dd><p>Find or create the edition described by this Metadata object.</p>
</dd></dl>

<dl class="method">
<dt id="core.metadata_layer.Metadata.filter_recommendations">
<code class="descname">filter_recommendations</code><span class="sig-paren">(</span><em>_db</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/metadata_layer.html#Metadata.filter_recommendations"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.metadata_layer.Metadata.filter_recommendations" title="Permalink to this definition">¶</a></dt>
<dd><p>Filters out recommended identifiers that don’t exist in the db.
Any IdentifierData objects will be replaced with Identifiers.</p>
</dd></dl>

<dl class="classmethod">
<dt id="core.metadata_layer.Metadata.from_edition">
<em class="property">classmethod </em><code class="descname">from_edition</code><span class="sig-paren">(</span><em>edition</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/metadata_layer.html#Metadata.from_edition"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.metadata_layer.Metadata.from_edition" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a basic Metadata object for the given Edition.</p>
<p>This doesn’t contain everything but it contains enough
information to run guess_license_pools.</p>
</dd></dl>

<dl class="method">
<dt id="core.metadata_layer.Metadata.guess_license_pools">
<code class="descname">guess_license_pools</code><span class="sig-paren">(</span><em>_db</em>, <em>metadata_client</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/metadata_layer.html#Metadata.guess_license_pools"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.metadata_layer.Metadata.guess_license_pools" title="Permalink to this definition">¶</a></dt>
<dd><p>Try to find existing license pools for this Metadata.</p>
</dd></dl>

<dl class="attribute">
<dt id="core.metadata_layer.Metadata.links">
<code class="descname">links</code><a class="headerlink" href="#core.metadata_layer.Metadata.links" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.metadata_layer.Metadata.log">
<code class="descname">log</code><em class="property"> = &lt;logging.Logger object&gt;</em><a class="headerlink" href="#core.metadata_layer.Metadata.log" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="core.metadata_layer.Metadata.make_thumbnail">
<code class="descname">make_thumbnail</code><span class="sig-paren">(</span><em>data_source</em>, <em>link</em>, <em>link_obj</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/metadata_layer.html#Metadata.make_thumbnail"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.metadata_layer.Metadata.make_thumbnail" title="Permalink to this definition">¶</a></dt>
<dd><p>Make sure a Hyperlink representing an image is connected
to its thumbnail.</p>
</dd></dl>

<dl class="method">
<dt id="core.metadata_layer.Metadata.normalize_contributors">
<code class="descname">normalize_contributors</code><span class="sig-paren">(</span><em>metadata_client</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/metadata_layer.html#Metadata.normalize_contributors"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.metadata_layer.Metadata.normalize_contributors" title="Permalink to this definition">¶</a></dt>
<dd><p>Make sure that all contributors without a .sort_name get one.</p>
</dd></dl>

<dl class="attribute">
<dt id="core.metadata_layer.Metadata.primary_author">
<code class="descname">primary_author</code><a class="headerlink" href="#core.metadata_layer.Metadata.primary_author" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="core.metadata_layer.Metadata.update">
<code class="descname">update</code><span class="sig-paren">(</span><em>metadata</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/metadata_layer.html#Metadata.update"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.metadata_layer.Metadata.update" title="Permalink to this definition">¶</a></dt>
<dd><p>Update this Metadata object with values from the given Metadata
object.</p>
<p>TODO: We might want to take a policy object as an argument.</p>
</dd></dl>

<dl class="method">
<dt id="core.metadata_layer.Metadata.update_contributions">
<code class="descname">update_contributions</code><span class="sig-paren">(</span><em>_db</em>, <em>edition</em>, <em>metadata_client=None</em>, <em>replace=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/metadata_layer.html#Metadata.update_contributions"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.metadata_layer.Metadata.update_contributions" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="core.metadata_layer.ReplacementPolicy">
<em class="property">class </em><code class="descclassname">core.metadata_layer.</code><code class="descname">ReplacementPolicy</code><span class="sig-paren">(</span><em>identifiers=False</em>, <em>subjects=False</em>, <em>contributions=False</em>, <em>links=False</em>, <em>formats=False</em>, <em>rights=False</em>, <em>link_content=False</em>, <em>mirrors=None</em>, <em>content_modifier=None</em>, <em>analytics=None</em>, <em>http_get=None</em>, <em>even_if_not_apparently_updated=False</em>, <em>presentation_calculation_policy=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/metadata_layer.html#ReplacementPolicy"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.metadata_layer.ReplacementPolicy" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>How serious should we be about overwriting old metadata with
this new metadata?</p>
<dl class="classmethod">
<dt id="core.metadata_layer.ReplacementPolicy.append_only">
<em class="property">classmethod </em><code class="descname">append_only</code><span class="sig-paren">(</span><em>**args</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/metadata_layer.html#ReplacementPolicy.append_only"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.metadata_layer.ReplacementPolicy.append_only" title="Permalink to this definition">¶</a></dt>
<dd><p>Don’t overwrite any information, just append it.</p>
<p>This should probably never be used.</p>
</dd></dl>

<dl class="classmethod">
<dt id="core.metadata_layer.ReplacementPolicy.from_license_source">
<em class="property">classmethod </em><code class="descname">from_license_source</code><span class="sig-paren">(</span><em>_db</em>, <em>**args</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/metadata_layer.html#ReplacementPolicy.from_license_source"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.metadata_layer.ReplacementPolicy.from_license_source" title="Permalink to this definition">¶</a></dt>
<dd><p>When gathering data from the license source, overwrite all old data
from this source with new data from the same source. Also
overwrite an old rights status with an updated status and update
the list of available formats. Log availability changes to the
configured analytics services.</p>
</dd></dl>

<dl class="classmethod">
<dt id="core.metadata_layer.ReplacementPolicy.from_metadata_source">
<em class="property">classmethod </em><code class="descname">from_metadata_source</code><span class="sig-paren">(</span><em>**args</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/metadata_layer.html#ReplacementPolicy.from_metadata_source"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.metadata_layer.ReplacementPolicy.from_metadata_source" title="Permalink to this definition">¶</a></dt>
<dd><p>When gathering data from a metadata source, overwrite all old data
from this source, but do not overwrite the rights status or
the available formats. License sources are the authority on rights
and formats, and metadata sources have no say in the matter.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="core.metadata_layer.SubjectData">
<em class="property">class </em><code class="descclassname">core.metadata_layer.</code><code class="descname">SubjectData</code><span class="sig-paren">(</span><em>type</em>, <em>identifier</em>, <em>name=None</em>, <em>weight=1</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/metadata_layer.html#SubjectData"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.metadata_layer.SubjectData" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<dl class="attribute">
<dt id="core.metadata_layer.SubjectData.key">
<code class="descname">key</code><a class="headerlink" href="#core.metadata_layer.SubjectData.key" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="core.metadata_layer.TimestampData">
<em class="property">class </em><code class="descclassname">core.metadata_layer.</code><code class="descname">TimestampData</code><span class="sig-paren">(</span><em>start=None</em>, <em>finish=None</em>, <em>achievements=None</em>, <em>counter=None</em>, <em>exception=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/metadata_layer.html#TimestampData"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.metadata_layer.TimestampData" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<dl class="attribute">
<dt id="core.metadata_layer.TimestampData.CLEAR_VALUE">
<code class="descname">CLEAR_VALUE</code><em class="property"> = &lt;object object&gt;</em><a class="headerlink" href="#core.metadata_layer.TimestampData.CLEAR_VALUE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="core.metadata_layer.TimestampData.apply">
<code class="descname">apply</code><span class="sig-paren">(</span><em>_db</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/metadata_layer.html#TimestampData.apply"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.metadata_layer.TimestampData.apply" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="core.metadata_layer.TimestampData.collection">
<code class="descname">collection</code><span class="sig-paren">(</span><em>_db</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/metadata_layer.html#TimestampData.collection"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.metadata_layer.TimestampData.collection" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="core.metadata_layer.TimestampData.finalize">
<code class="descname">finalize</code><span class="sig-paren">(</span><em>service</em>, <em>service_type</em>, <em>collection</em>, <em>start=None</em>, <em>finish=None</em>, <em>achievements=None</em>, <em>counter=None</em>, <em>exception=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/metadata_layer.html#TimestampData.finalize"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.metadata_layer.TimestampData.finalize" title="Permalink to this definition">¶</a></dt>
<dd><p>Finalize any values that were not set during the constructor.</p>
<p>This is intended to be run by the code that originally ran the
service.</p>
<p>The given values for <cite>start</cite>, <cite>finish</cite>, <cite>achievements</cite>,
<cite>counter</cite>, and <cite>exception</cite> will be used only if the service
did not specify its own values for those fields.</p>
</dd></dl>

<dl class="attribute">
<dt id="core.metadata_layer.TimestampData.is_complete">
<code class="descname">is_complete</code><a class="headerlink" href="#core.metadata_layer.TimestampData.is_complete" title="Permalink to this definition">¶</a></dt>
<dd><p>Does this TimestampData represent an operation that has
completed?</p>
<p>An operation is completed if it has failed, or if the time of its
completion is known.</p>
</dd></dl>

<dl class="attribute">
<dt id="core.metadata_layer.TimestampData.is_failure">
<code class="descname">is_failure</code><a class="headerlink" href="#core.metadata_layer.TimestampData.is_failure" title="Permalink to this definition">¶</a></dt>
<dd><p>Does this TimestampData represent an unrecoverable failure?</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-core.mirror">
<span id="core-mirror-module"></span><h2>core.mirror module<a class="headerlink" href="#module-core.mirror" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="core.mirror.MirrorUploader">
<em class="property">class </em><code class="descclassname">core.mirror.</code><code class="descname">MirrorUploader</code><span class="sig-paren">(</span><em>integration</em>, <em>host</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/mirror.html#MirrorUploader"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.mirror.MirrorUploader" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Handles the job of uploading a representation’s content to
a mirror that we control.</p>
<dl class="attribute">
<dt id="core.mirror.MirrorUploader.IMPLEMENTATION_REGISTRY">
<code class="descname">IMPLEMENTATION_REGISTRY</code><em class="property"> = {u'Amazon S3': &lt;class 'core.s3.S3Uploader'&gt;, u'MinIO': &lt;class 'core.s3.MinIOUploader'&gt;}</em><a class="headerlink" href="#core.mirror.MirrorUploader.IMPLEMENTATION_REGISTRY" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.mirror.MirrorUploader.STORAGE_GOAL">
<code class="descname">STORAGE_GOAL</code><em class="property"> = u'storage'</em><a class="headerlink" href="#core.mirror.MirrorUploader.STORAGE_GOAL" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="core.mirror.MirrorUploader.book_url">
<code class="descname">book_url</code><span class="sig-paren">(</span><em>identifier</em>, <em>extension='.epub'</em>, <em>open_access=True</em>, <em>data_source=None</em>, <em>title=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/mirror.html#MirrorUploader.book_url"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.mirror.MirrorUploader.book_url" title="Permalink to this definition">¶</a></dt>
<dd><p>The URL of the hosted EPUB file for the given identifier.</p>
<p>This does not upload anything to the URL, but it is expected
that calling mirror() on a certain Representation object will
make that representation end up at that URL.</p>
</dd></dl>

<dl class="method">
<dt id="core.mirror.MirrorUploader.cover_image_url">
<code class="descname">cover_image_url</code><span class="sig-paren">(</span><em>data_source</em>, <em>identifier</em>, <em>filename=None</em>, <em>scaled_size=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/mirror.html#MirrorUploader.cover_image_url"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.mirror.MirrorUploader.cover_image_url" title="Permalink to this definition">¶</a></dt>
<dd><p>The URL of the hosted cover image for the given identifier.</p>
<p>This does not upload anything to the URL, but it is expected
that calling mirror() on a certain Representation object will
make that representation end up at that URL.</p>
</dd></dl>

<dl class="method">
<dt id="core.mirror.MirrorUploader.do_upload">
<code class="descname">do_upload</code><span class="sig-paren">(</span><em>representation</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/mirror.html#MirrorUploader.do_upload"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.mirror.MirrorUploader.do_upload" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="classmethod">
<dt id="core.mirror.MirrorUploader.for_collection">
<em class="property">classmethod </em><code class="descname">for_collection</code><span class="sig-paren">(</span><em>collection</em>, <em>purpose</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/mirror.html#MirrorUploader.for_collection"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.mirror.MirrorUploader.for_collection" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a MirrorUploader for the given Collection.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>collection</strong> – Use the mirror configuration for this Collection.</li>
<li><strong>purpose</strong> – Use the purpose of the mirror configuration.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">A MirrorUploader, or None if the Collection has no
mirror integration.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="classmethod">
<dt id="core.mirror.MirrorUploader.implementation">
<em class="property">classmethod </em><code class="descname">implementation</code><span class="sig-paren">(</span><em>integration</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/mirror.html#MirrorUploader.implementation"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.mirror.MirrorUploader.implementation" title="Permalink to this definition">¶</a></dt>
<dd><p>Instantiate the appropriate implementation of MirrorUploader
for the given ExternalIntegration.</p>
</dd></dl>

<dl class="classmethod">
<dt id="core.mirror.MirrorUploader.integration_by_name">
<em class="property">classmethod </em><code class="descname">integration_by_name</code><span class="sig-paren">(</span><em>_db</em>, <em>storage_name=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/mirror.html#MirrorUploader.integration_by_name"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.mirror.MirrorUploader.integration_by_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Find the ExternalIntegration for the mirror by storage name.</p>
</dd></dl>

<dl class="method">
<dt id="core.mirror.MirrorUploader.is_self_url">
<code class="descname">is_self_url</code><span class="sig-paren">(</span><em>url</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/mirror.html#MirrorUploader.is_self_url"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.mirror.MirrorUploader.is_self_url" title="Permalink to this definition">¶</a></dt>
<dd><p>Determines whether the URL has the mirror’s host or a custom domain</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>url</strong> (<em>string</em>) – The URL</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">Boolean value indicating whether the URL has the mirror’s host or a custom domain</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">bool</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="classmethod">
<dt id="core.mirror.MirrorUploader.mirror">
<em class="property">classmethod </em><code class="descname">mirror</code><span class="sig-paren">(</span><em>_db</em>, <em>storage_name=None</em>, <em>integration=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/mirror.html#MirrorUploader.mirror"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.mirror.MirrorUploader.mirror" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a MirrorUploader from an integration or storage name.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>storage_name</strong> – The name of the storage integration.</li>
<li><strong>integration</strong> – The external integration.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">A MirrorUploader.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Raise:</th><td class="field-body"><p class="first last">CannotLoadConfiguration if no integration with
goal==STORAGE_GOAL is configured.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="core.mirror.MirrorUploader.mirror_batch">
<code class="descname">mirror_batch</code><span class="sig-paren">(</span><em>representations</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/mirror.html#MirrorUploader.mirror_batch"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.mirror.MirrorUploader.mirror_batch" title="Permalink to this definition">¶</a></dt>
<dd><p>Mirror a batch of Representations at once.</p>
</dd></dl>

<dl class="method">
<dt id="core.mirror.MirrorUploader.mirror_one">
<code class="descname">mirror_one</code><span class="sig-paren">(</span><em>representation</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/mirror.html#MirrorUploader.mirror_one"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.mirror.MirrorUploader.mirror_one" title="Permalink to this definition">¶</a></dt>
<dd><p>Mirror a single Representation.</p>
</dd></dl>

<dl class="method">
<dt id="core.mirror.MirrorUploader.sign_url">
<code class="descname">sign_url</code><span class="sig-paren">(</span><em>url</em>, <em>expiration=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/mirror.html#MirrorUploader.sign_url"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.mirror.MirrorUploader.sign_url" title="Permalink to this definition">¶</a></dt>
<dd><p>Signs a URL and make it expirable</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>url</strong> (<em>string</em>) – URL</li>
<li><strong>expiration</strong> (<em>int</em>) – (Optional) Time in seconds for the presigned URL to remain valid.
Default value depends on a specific implementation</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">Signed expirable link</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">string</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="core.mirror.MirrorUploader.split_url">
<code class="descname">split_url</code><span class="sig-paren">(</span><em>url</em>, <em>unquote=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/mirror.html#MirrorUploader.split_url"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.mirror.MirrorUploader.split_url" title="Permalink to this definition">¶</a></dt>
<dd><p>Splits the URL into the components: container (bucket) and file path</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>url</strong> (<em>string</em>) – URL</li>
<li><strong>unquote</strong> (<em>bool</em>) – Boolean value indicating whether it’s required to unquote URL elements</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">Tuple (bucket, file path)</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">Tuple[string, string]</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-core.mock_analytics_provider">
<span id="core-mock-analytics-provider-module"></span><h2>core.mock_analytics_provider module<a class="headerlink" href="#module-core.mock_analytics_provider" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="core.mock_analytics_provider.MockAnalyticsProvider">
<em class="property">class </em><code class="descclassname">core.mock_analytics_provider.</code><code class="descname">MockAnalyticsProvider</code><span class="sig-paren">(</span><em>integration=None</em>, <em>library=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/mock_analytics_provider.html#MockAnalyticsProvider"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.mock_analytics_provider.MockAnalyticsProvider" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>A mock analytics provider that keeps track of how many times it’s called.</p>
<dl class="method">
<dt id="core.mock_analytics_provider.MockAnalyticsProvider.collect_event">
<code class="descname">collect_event</code><span class="sig-paren">(</span><em>library</em>, <em>lp</em>, <em>event_type</em>, <em>time=None</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/mock_analytics_provider.html#MockAnalyticsProvider.collect_event"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.mock_analytics_provider.MockAnalyticsProvider.collect_event" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="attribute">
<dt id="core.mock_analytics_provider.Provider">
<code class="descclassname">core.mock_analytics_provider.</code><code class="descname">Provider</code><a class="headerlink" href="#core.mock_analytics_provider.Provider" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <a class="reference internal" href="#core.mock_analytics_provider.MockAnalyticsProvider" title="core.mock_analytics_provider.MockAnalyticsProvider"><code class="xref py py-class docutils literal notranslate"><span class="pre">core.mock_analytics_provider.MockAnalyticsProvider</span></code></a></p>
</dd></dl>

</div>
<div class="section" id="module-core.monitor">
<span id="core-monitor-module"></span><h2>core.monitor module<a class="headerlink" href="#module-core.monitor" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="core.monitor.CachedFeedReaper">
<em class="property">class </em><code class="descclassname">core.monitor.</code><code class="descname">CachedFeedReaper</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/monitor.html#CachedFeedReaper"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.monitor.CachedFeedReaper" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.monitor.ReaperMonitor" title="core.monitor.ReaperMonitor"><code class="xref py py-class docutils literal notranslate"><span class="pre">core.monitor.ReaperMonitor</span></code></a></p>
<p>Removed cached feeds older than thirty days.</p>
<dl class="attribute">
<dt id="core.monitor.CachedFeedReaper.MAX_AGE">
<code class="descname">MAX_AGE</code><em class="property"> = 30</em><a class="headerlink" href="#core.monitor.CachedFeedReaper.MAX_AGE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.monitor.CachedFeedReaper.MODEL_CLASS">
<code class="descname">MODEL_CLASS</code><a class="headerlink" href="#core.monitor.CachedFeedReaper.MODEL_CLASS" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <a class="reference internal" href="core.model.html#core.model.cachedfeed.CachedFeed" title="core.model.cachedfeed.CachedFeed"><code class="xref py py-class docutils literal notranslate"><span class="pre">core.model.cachedfeed.CachedFeed</span></code></a></p>
</dd></dl>

<dl class="attribute">
<dt id="core.monitor.CachedFeedReaper.TIMESTAMP_FIELD">
<code class="descname">TIMESTAMP_FIELD</code><em class="property"> = 'timestamp'</em><a class="headerlink" href="#core.monitor.CachedFeedReaper.TIMESTAMP_FIELD" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="core.monitor.CirculationEventLocationScrubber">
<em class="property">class </em><code class="descclassname">core.monitor.</code><code class="descname">CirculationEventLocationScrubber</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/monitor.html#CirculationEventLocationScrubber"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.monitor.CirculationEventLocationScrubber" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.monitor.ScrubberMonitor" title="core.monitor.ScrubberMonitor"><code class="xref py py-class docutils literal notranslate"><span class="pre">core.monitor.ScrubberMonitor</span></code></a></p>
<p>Scrub location information from old CirculationEvents.</p>
<dl class="attribute">
<dt id="core.monitor.CirculationEventLocationScrubber.MAX_AGE">
<code class="descname">MAX_AGE</code><em class="property"> = 365</em><a class="headerlink" href="#core.monitor.CirculationEventLocationScrubber.MAX_AGE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.monitor.CirculationEventLocationScrubber.MODEL_CLASS">
<code class="descname">MODEL_CLASS</code><a class="headerlink" href="#core.monitor.CirculationEventLocationScrubber.MODEL_CLASS" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <a class="reference internal" href="core.model.html#core.model.circulationevent.CirculationEvent" title="core.model.circulationevent.CirculationEvent"><code class="xref py py-class docutils literal notranslate"><span class="pre">core.model.circulationevent.CirculationEvent</span></code></a></p>
</dd></dl>

<dl class="attribute">
<dt id="core.monitor.CirculationEventLocationScrubber.SCRUB_FIELD">
<code class="descname">SCRUB_FIELD</code><em class="property"> = 'location'</em><a class="headerlink" href="#core.monitor.CirculationEventLocationScrubber.SCRUB_FIELD" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.monitor.CirculationEventLocationScrubber.TIMESTAMP_FIELD">
<code class="descname">TIMESTAMP_FIELD</code><em class="property"> = 'start'</em><a class="headerlink" href="#core.monitor.CirculationEventLocationScrubber.TIMESTAMP_FIELD" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="core.monitor.CollectionMonitor">
<em class="property">class </em><code class="descclassname">core.monitor.</code><code class="descname">CollectionMonitor</code><span class="sig-paren">(</span><em>_db</em>, <em>collection</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/monitor.html#CollectionMonitor"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.monitor.CollectionMonitor" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.monitor.Monitor" title="core.monitor.Monitor"><code class="xref py py-class docutils literal notranslate"><span class="pre">core.monitor.Monitor</span></code></a></p>
<p>A Monitor that does something for all Collections that come
from a certain provider.</p>
<p>This class is designed to be subclassed rather than instantiated
directly. Subclasses must define SERVICE_NAME and
PROTOCOL. Subclasses may define replacement values for
DEFAULT_START_TIME and DEFAULT_COUNTER.</p>
<dl class="attribute">
<dt id="core.monitor.CollectionMonitor.PROTOCOL">
<code class="descname">PROTOCOL</code><em class="property"> = None</em><a class="headerlink" href="#core.monitor.CollectionMonitor.PROTOCOL" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="classmethod">
<dt id="core.monitor.CollectionMonitor.all">
<em class="property">classmethod </em><code class="descname">all</code><span class="sig-paren">(</span><em>_db</em>, <em>**constructor_kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/monitor.html#CollectionMonitor.all"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.monitor.CollectionMonitor.all" title="Permalink to this definition">¶</a></dt>
<dd><p>Yield a sequence of CollectionMonitor objects: one for every
Collection associated with cls.PROTOCOL.</p>
<p>Monitors that have no Timestamp will be yielded first. After
that, Monitors with older values for Timestamp.start will be
yielded before Monitors with newer values.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>constructor_kwargs</strong> – These keyword arguments will be passed
into the CollectionMonitor constructor.</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="core.monitor.CollectionReaper">
<em class="property">class </em><code class="descclassname">core.monitor.</code><code class="descname">CollectionReaper</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/monitor.html#CollectionReaper"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.monitor.CollectionReaper" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.monitor.ReaperMonitor" title="core.monitor.ReaperMonitor"><code class="xref py py-class docutils literal notranslate"><span class="pre">core.monitor.ReaperMonitor</span></code></a></p>
<p>Remove collections that have been marked for deletion.</p>
<dl class="attribute">
<dt id="core.monitor.CollectionReaper.MODEL_CLASS">
<code class="descname">MODEL_CLASS</code><a class="headerlink" href="#core.monitor.CollectionReaper.MODEL_CLASS" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <a class="reference internal" href="core.model.html#core.model.collection.Collection" title="core.model.collection.Collection"><code class="xref py py-class docutils literal notranslate"><span class="pre">core.model.collection.Collection</span></code></a></p>
</dd></dl>

<dl class="method">
<dt id="core.monitor.CollectionReaper.delete">
<code class="descname">delete</code><span class="sig-paren">(</span><em>collection</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/monitor.html#CollectionReaper.delete"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.monitor.CollectionReaper.delete" title="Permalink to this definition">¶</a></dt>
<dd><p>Delete a Collection from the database.</p>
<p>Database deletion of a Collection might take a really long
time, so we call a special method that will do the deletion
incrementally and can pick up where it left off if there’s a
failure.</p>
</dd></dl>

<dl class="attribute">
<dt id="core.monitor.CollectionReaper.where_clause">
<code class="descname">where_clause</code><a class="headerlink" href="#core.monitor.CollectionReaper.where_clause" title="Permalink to this definition">¶</a></dt>
<dd><p>A SQLAlchemy clause that identifies the database rows to be reaped.</p>
</dd></dl>

</dd></dl>

<dl class="exception">
<dt id="core.monitor.CoverageProvidersFailed">
<em class="property">exception </em><code class="descclassname">core.monitor.</code><code class="descname">CoverageProvidersFailed</code><span class="sig-paren">(</span><em>failed_providers</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/monitor.html#CoverageProvidersFailed"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.monitor.CoverageProvidersFailed" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">exceptions.Exception</span></code></p>
<p>We tried to run CoverageProviders on a Work’s identifier,
but some of the providers failed.</p>
</dd></dl>

<dl class="class">
<dt id="core.monitor.CredentialReaper">
<em class="property">class </em><code class="descclassname">core.monitor.</code><code class="descname">CredentialReaper</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/monitor.html#CredentialReaper"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.monitor.CredentialReaper" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.monitor.ReaperMonitor" title="core.monitor.ReaperMonitor"><code class="xref py py-class docutils literal notranslate"><span class="pre">core.monitor.ReaperMonitor</span></code></a></p>
<p>Remove Credentials that expired more than a day ago.</p>
<dl class="attribute">
<dt id="core.monitor.CredentialReaper.MAX_AGE">
<code class="descname">MAX_AGE</code><em class="property"> = 1</em><a class="headerlink" href="#core.monitor.CredentialReaper.MAX_AGE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.monitor.CredentialReaper.MODEL_CLASS">
<code class="descname">MODEL_CLASS</code><a class="headerlink" href="#core.monitor.CredentialReaper.MODEL_CLASS" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <a class="reference internal" href="core.model.html#core.model.credential.Credential" title="core.model.credential.Credential"><code class="xref py py-class docutils literal notranslate"><span class="pre">core.model.credential.Credential</span></code></a></p>
</dd></dl>

<dl class="attribute">
<dt id="core.monitor.CredentialReaper.TIMESTAMP_FIELD">
<code class="descname">TIMESTAMP_FIELD</code><em class="property"> = 'expires'</em><a class="headerlink" href="#core.monitor.CredentialReaper.TIMESTAMP_FIELD" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="core.monitor.CustomListEntrySweepMonitor">
<em class="property">class </em><code class="descclassname">core.monitor.</code><code class="descname">CustomListEntrySweepMonitor</code><span class="sig-paren">(</span><em>_db</em>, <em>collection=None</em>, <em>batch_size=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/monitor.html#CustomListEntrySweepMonitor"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.monitor.CustomListEntrySweepMonitor" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.monitor.SweepMonitor" title="core.monitor.SweepMonitor"><code class="xref py py-class docutils literal notranslate"><span class="pre">core.monitor.SweepMonitor</span></code></a></p>
<p>A Monitor that does something to every CustomListEntry.</p>
<dl class="attribute">
<dt id="core.monitor.CustomListEntrySweepMonitor.MODEL_CLASS">
<code class="descname">MODEL_CLASS</code><a class="headerlink" href="#core.monitor.CustomListEntrySweepMonitor.MODEL_CLASS" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <a class="reference internal" href="core.model.html#core.model.customlist.CustomListEntry" title="core.model.customlist.CustomListEntry"><code class="xref py py-class docutils literal notranslate"><span class="pre">core.model.customlist.CustomListEntry</span></code></a></p>
</dd></dl>

<dl class="method">
<dt id="core.monitor.CustomListEntrySweepMonitor.scope_to_collection">
<code class="descname">scope_to_collection</code><span class="sig-paren">(</span><em>qu</em>, <em>collection</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/monitor.html#CustomListEntrySweepMonitor.scope_to_collection"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.monitor.CustomListEntrySweepMonitor.scope_to_collection" title="Permalink to this definition">¶</a></dt>
<dd><p>Restrict the query to only find CustomListEntries whose
Work is in the given Collection.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="core.monitor.CustomListEntryWorkUpdateMonitor">
<em class="property">class </em><code class="descclassname">core.monitor.</code><code class="descname">CustomListEntryWorkUpdateMonitor</code><span class="sig-paren">(</span><em>_db</em>, <em>collection=None</em>, <em>batch_size=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/monitor.html#CustomListEntryWorkUpdateMonitor"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.monitor.CustomListEntryWorkUpdateMonitor" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.monitor.CustomListEntrySweepMonitor" title="core.monitor.CustomListEntrySweepMonitor"><code class="xref py py-class docutils literal notranslate"><span class="pre">core.monitor.CustomListEntrySweepMonitor</span></code></a></p>
<p>Set or reset the Work associated with each custom list entry.</p>
<dl class="attribute">
<dt id="core.monitor.CustomListEntryWorkUpdateMonitor.DEFAULT_BATCH_SIZE">
<code class="descname">DEFAULT_BATCH_SIZE</code><em class="property"> = 100</em><a class="headerlink" href="#core.monitor.CustomListEntryWorkUpdateMonitor.DEFAULT_BATCH_SIZE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.monitor.CustomListEntryWorkUpdateMonitor.SERVICE_NAME">
<code class="descname">SERVICE_NAME</code><em class="property"> = 'Update Works for custom list entries'</em><a class="headerlink" href="#core.monitor.CustomListEntryWorkUpdateMonitor.SERVICE_NAME" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="core.monitor.CustomListEntryWorkUpdateMonitor.process_item">
<code class="descname">process_item</code><span class="sig-paren">(</span><em>item</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/monitor.html#CustomListEntryWorkUpdateMonitor.process_item"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.monitor.CustomListEntryWorkUpdateMonitor.process_item" title="Permalink to this definition">¶</a></dt>
<dd><p>Do the work that needs to be done for a given item.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="core.monitor.EditionSweepMonitor">
<em class="property">class </em><code class="descclassname">core.monitor.</code><code class="descname">EditionSweepMonitor</code><span class="sig-paren">(</span><em>_db</em>, <em>collection=None</em>, <em>batch_size=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/monitor.html#EditionSweepMonitor"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.monitor.EditionSweepMonitor" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.monitor.SweepMonitor" title="core.monitor.SweepMonitor"><code class="xref py py-class docutils literal notranslate"><span class="pre">core.monitor.SweepMonitor</span></code></a></p>
<p>A Monitor that does something to every Edition.</p>
<dl class="attribute">
<dt id="core.monitor.EditionSweepMonitor.MODEL_CLASS">
<code class="descname">MODEL_CLASS</code><a class="headerlink" href="#core.monitor.EditionSweepMonitor.MODEL_CLASS" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <a class="reference internal" href="core.model.html#core.model.edition.Edition" title="core.model.edition.Edition"><code class="xref py py-class docutils literal notranslate"><span class="pre">core.model.edition.Edition</span></code></a></p>
</dd></dl>

<dl class="method">
<dt id="core.monitor.EditionSweepMonitor.scope_to_collection">
<code class="descname">scope_to_collection</code><span class="sig-paren">(</span><em>qu</em>, <em>collection</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/monitor.html#EditionSweepMonitor.scope_to_collection"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.monitor.EditionSweepMonitor.scope_to_collection" title="Permalink to this definition">¶</a></dt>
<dd><p>Restrict the query to only find Editions whose
primary Identifier is licensed to the given Collection.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="core.monitor.IdentifierSweepMonitor">
<em class="property">class </em><code class="descclassname">core.monitor.</code><code class="descname">IdentifierSweepMonitor</code><span class="sig-paren">(</span><em>_db</em>, <em>collection=None</em>, <em>batch_size=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/monitor.html#IdentifierSweepMonitor"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.monitor.IdentifierSweepMonitor" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.monitor.SweepMonitor" title="core.monitor.SweepMonitor"><code class="xref py py-class docutils literal notranslate"><span class="pre">core.monitor.SweepMonitor</span></code></a></p>
<p>A Monitor that does some work for every Identifier.</p>
<dl class="attribute">
<dt id="core.monitor.IdentifierSweepMonitor.MODEL_CLASS">
<code class="descname">MODEL_CLASS</code><a class="headerlink" href="#core.monitor.IdentifierSweepMonitor.MODEL_CLASS" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <a class="reference internal" href="core.model.html#core.model.identifier.Identifier" title="core.model.identifier.Identifier"><code class="xref py py-class docutils literal notranslate"><span class="pre">core.model.identifier.Identifier</span></code></a></p>
</dd></dl>

<dl class="method">
<dt id="core.monitor.IdentifierSweepMonitor.scope_to_collection">
<code class="descname">scope_to_collection</code><span class="sig-paren">(</span><em>qu</em>, <em>collection</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/monitor.html#IdentifierSweepMonitor.scope_to_collection"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.monitor.IdentifierSweepMonitor.scope_to_collection" title="Permalink to this definition">¶</a></dt>
<dd><p>Only find Identifiers licensed through the given Collection.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="core.monitor.MakePresentationReadyMonitor">
<em class="property">class </em><code class="descclassname">core.monitor.</code><code class="descname">MakePresentationReadyMonitor</code><span class="sig-paren">(</span><em>_db</em>, <em>coverage_providers</em>, <em>collection=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/monitor.html#MakePresentationReadyMonitor"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.monitor.MakePresentationReadyMonitor" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.monitor.NotPresentationReadyWorkSweepMonitor" title="core.monitor.NotPresentationReadyWorkSweepMonitor"><code class="xref py py-class docutils literal notranslate"><span class="pre">core.monitor.NotPresentationReadyWorkSweepMonitor</span></code></a></p>
<p>A monitor that makes works presentation ready.</p>
<p>By default this works by passing the work’s active edition into
ensure_coverage() for each of a list of CoverageProviders. If all
the ensure_coverage() calls succeed, presentation of the work is
calculated and the work is marked presentation ready.</p>
<dl class="attribute">
<dt id="core.monitor.MakePresentationReadyMonitor.SERVICE_NAME">
<code class="descname">SERVICE_NAME</code><em class="property"> = 'Make Works Presentation Ready'</em><a class="headerlink" href="#core.monitor.MakePresentationReadyMonitor.SERVICE_NAME" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="core.monitor.MakePresentationReadyMonitor.prepare">
<code class="descname">prepare</code><span class="sig-paren">(</span><em>work</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/monitor.html#MakePresentationReadyMonitor.prepare"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.monitor.MakePresentationReadyMonitor.prepare" title="Permalink to this definition">¶</a></dt>
<dd><p>Try to make a single Work presentation-ready.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Raises:</th><td class="field-body"><a class="reference internal" href="#core.monitor.CoverageProvidersFailed" title="core.monitor.CoverageProvidersFailed"><strong>CoverageProvidersFailed</strong></a> – If we can’t make a Work
presentation-ready because one or more CoverageProviders
failed.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="core.monitor.MakePresentationReadyMonitor.process_item">
<code class="descname">process_item</code><span class="sig-paren">(</span><em>work</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/monitor.html#MakePresentationReadyMonitor.process_item"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.monitor.MakePresentationReadyMonitor.process_item" title="Permalink to this definition">¶</a></dt>
<dd><p>Do the work necessary to make one Work presentation-ready,
and handle exceptions.</p>
</dd></dl>

<dl class="method">
<dt id="core.monitor.MakePresentationReadyMonitor.run">
<code class="descname">run</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/monitor.html#MakePresentationReadyMonitor.run"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.monitor.MakePresentationReadyMonitor.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Before doing anything, consolidate works.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="core.monitor.Monitor">
<em class="property">class </em><code class="descclassname">core.monitor.</code><code class="descname">Monitor</code><span class="sig-paren">(</span><em>_db</em>, <em>collection=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/monitor.html#Monitor"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.monitor.Monitor" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>A Monitor is responsible for running some piece of code on a
regular basis. A Monitor has an associated Timestamp that tracks
the last time it successfully ran; it may use this information on
its next run to cover the intervening span of time.</p>
<p>A Monitor will run to completion and then stop. To repeatedly run
a Monitor, you’ll need to repeatedly invoke it from some external
source such as a cron job.</p>
<p>This class is designed to be subclassed rather than instantiated
directly. Subclasses must define SERVICE_NAME. Subclasses may
define replacement values for DEFAULT_START_TIME and
DEFAULT_COUNTER.</p>
<p>Although any Monitor may be associated with a Collection, it’s
most useful to subclass CollectionMonitor if you’re writing code
that needs to be run on every Collection of a certain type.</p>
<dl class="attribute">
<dt id="core.monitor.Monitor.DEFAULT_COUNTER">
<code class="descname">DEFAULT_COUNTER</code><em class="property"> = None</em><a class="headerlink" href="#core.monitor.Monitor.DEFAULT_COUNTER" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.monitor.Monitor.DEFAULT_START_TIME">
<code class="descname">DEFAULT_START_TIME</code><em class="property"> = datetime.timedelta(0, 60)</em><a class="headerlink" href="#core.monitor.Monitor.DEFAULT_START_TIME" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.monitor.Monitor.NEVER">
<code class="descname">NEVER</code><em class="property"> = &lt;object object&gt;</em><a class="headerlink" href="#core.monitor.Monitor.NEVER" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.monitor.Monitor.ONE_MINUTE_AGO">
<code class="descname">ONE_MINUTE_AGO</code><em class="property"> = datetime.timedelta(0, 60)</em><a class="headerlink" href="#core.monitor.Monitor.ONE_MINUTE_AGO" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.monitor.Monitor.ONE_YEAR_AGO">
<code class="descname">ONE_YEAR_AGO</code><em class="property"> = datetime.timedelta(365)</em><a class="headerlink" href="#core.monitor.Monitor.ONE_YEAR_AGO" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.monitor.Monitor.SERVICE_NAME">
<code class="descname">SERVICE_NAME</code><em class="property"> = None</em><a class="headerlink" href="#core.monitor.Monitor.SERVICE_NAME" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="core.monitor.Monitor.cleanup">
<code class="descname">cleanup</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/monitor.html#Monitor.cleanup"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.monitor.Monitor.cleanup" title="Permalink to this definition">¶</a></dt>
<dd><p>Do any work that needs to be done at the end, once the main work
has completed successfully.</p>
</dd></dl>

<dl class="attribute">
<dt id="core.monitor.Monitor.collection">
<code class="descname">collection</code><a class="headerlink" href="#core.monitor.Monitor.collection" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve the Collection object associated with this
Monitor.</p>
</dd></dl>

<dl class="attribute">
<dt id="core.monitor.Monitor.initial_start_time">
<code class="descname">initial_start_time</code><a class="headerlink" href="#core.monitor.Monitor.initial_start_time" title="Permalink to this definition">¶</a></dt>
<dd><p>The time that should be used as the ‘start time’ the first
time this Monitor is run.</p>
</dd></dl>

<dl class="attribute">
<dt id="core.monitor.Monitor.log">
<code class="descname">log</code><a class="headerlink" href="#core.monitor.Monitor.log" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="core.monitor.Monitor.run">
<code class="descname">run</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/monitor.html#Monitor.run"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.monitor.Monitor.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Do all the work that has piled up since the
last time the Monitor ran to completion.</p>
</dd></dl>

<dl class="method">
<dt id="core.monitor.Monitor.run_once">
<code class="descname">run_once</code><span class="sig-paren">(</span><em>progress</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/monitor.html#Monitor.run_once"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.monitor.Monitor.run_once" title="Permalink to this definition">¶</a></dt>
<dd><p>Do the actual work of the Monitor.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>progress</strong> – A TimestampData representing the
work done by the Monitor up to this point.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">A TimestampData representing how you want the
Monitor’s entry in the <cite>timestamps</cite> table to look like
from this point on.  NOTE: Modifying the incoming
<cite>progress</cite> and returning it is generally a bad idea,
because the incoming <cite>progress</cite> is full of old
data. Instead, return a new TimestampData containing data
for only the fields you want to set.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="core.monitor.Monitor.timestamp">
<code class="descname">timestamp</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/monitor.html#Monitor.timestamp"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.monitor.Monitor.timestamp" title="Permalink to this definition">¶</a></dt>
<dd><p>Find or create a Timestamp for this Monitor.</p>
<p>This does not use TimestampData because it relies on checking
whether a Timestamp already exists in the database.</p>
<p>A new timestamp will have .finish set to None, since the first
run is presumably in progress.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="core.monitor.NotPresentationReadyWorkSweepMonitor">
<em class="property">class </em><code class="descclassname">core.monitor.</code><code class="descname">NotPresentationReadyWorkSweepMonitor</code><span class="sig-paren">(</span><em>_db</em>, <em>collection=None</em>, <em>batch_size=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/monitor.html#NotPresentationReadyWorkSweepMonitor"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.monitor.NotPresentationReadyWorkSweepMonitor" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.monitor.WorkSweepMonitor" title="core.monitor.WorkSweepMonitor"><code class="xref py py-class docutils literal notranslate"><span class="pre">core.monitor.WorkSweepMonitor</span></code></a></p>
<p>A Monitor that does something to every Work that is not
presentation-ready.</p>
<dl class="method">
<dt id="core.monitor.NotPresentationReadyWorkSweepMonitor.item_query">
<code class="descname">item_query</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/monitor.html#NotPresentationReadyWorkSweepMonitor.item_query"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.monitor.NotPresentationReadyWorkSweepMonitor.item_query" title="Permalink to this definition">¶</a></dt>
<dd><p>Find the items that need to be processed in the sweep.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">A query object.</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="core.monitor.OPDSEntryCacheMonitor">
<em class="property">class </em><code class="descclassname">core.monitor.</code><code class="descname">OPDSEntryCacheMonitor</code><span class="sig-paren">(</span><em>_db</em>, <em>collection=None</em>, <em>batch_size=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/monitor.html#OPDSEntryCacheMonitor"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.monitor.OPDSEntryCacheMonitor" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.monitor.PresentationReadyWorkSweepMonitor" title="core.monitor.PresentationReadyWorkSweepMonitor"><code class="xref py py-class docutils literal notranslate"><span class="pre">core.monitor.PresentationReadyWorkSweepMonitor</span></code></a></p>
<p>A Monitor that recalculates the OPDS entries for every
presentation-ready Work.</p>
<p>This is different from the OPDSEntryWorkCoverageProvider,
which only processes works that are missing a WorkCoverageRecord
with the ‘generate-opds’ operation.</p>
<dl class="attribute">
<dt id="core.monitor.OPDSEntryCacheMonitor.SERVICE_NAME">
<code class="descname">SERVICE_NAME</code><em class="property"> = 'ODPS Entry Cache Monitor'</em><a class="headerlink" href="#core.monitor.OPDSEntryCacheMonitor.SERVICE_NAME" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="core.monitor.OPDSEntryCacheMonitor.process_item">
<code class="descname">process_item</code><span class="sig-paren">(</span><em>work</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/monitor.html#OPDSEntryCacheMonitor.process_item"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.monitor.OPDSEntryCacheMonitor.process_item" title="Permalink to this definition">¶</a></dt>
<dd><p>Do the work that needs to be done for a given item.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="core.monitor.PatronNeighborhoodScrubber">
<em class="property">class </em><code class="descclassname">core.monitor.</code><code class="descname">PatronNeighborhoodScrubber</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/monitor.html#PatronNeighborhoodScrubber"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.monitor.PatronNeighborhoodScrubber" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.monitor.ScrubberMonitor" title="core.monitor.ScrubberMonitor"><code class="xref py py-class docutils literal notranslate"><span class="pre">core.monitor.ScrubberMonitor</span></code></a></p>
<p>Scrub cached neighborhood information from patrons who haven’t been
seen in a while.</p>
<dl class="attribute">
<dt id="core.monitor.PatronNeighborhoodScrubber.MAX_AGE">
<code class="descname">MAX_AGE</code><em class="property"> = datetime.timedelta(0, 43200)</em><a class="headerlink" href="#core.monitor.PatronNeighborhoodScrubber.MAX_AGE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.monitor.PatronNeighborhoodScrubber.MODEL_CLASS">
<code class="descname">MODEL_CLASS</code><a class="headerlink" href="#core.monitor.PatronNeighborhoodScrubber.MODEL_CLASS" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <a class="reference internal" href="core.model.html#core.model.patron.Patron" title="core.model.patron.Patron"><code class="xref py py-class docutils literal notranslate"><span class="pre">core.model.patron.Patron</span></code></a></p>
</dd></dl>

<dl class="attribute">
<dt id="core.monitor.PatronNeighborhoodScrubber.SCRUB_FIELD">
<code class="descname">SCRUB_FIELD</code><em class="property"> = 'cached_neighborhood'</em><a class="headerlink" href="#core.monitor.PatronNeighborhoodScrubber.SCRUB_FIELD" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.monitor.PatronNeighborhoodScrubber.TIMESTAMP_FIELD">
<code class="descname">TIMESTAMP_FIELD</code><em class="property"> = 'last_external_sync'</em><a class="headerlink" href="#core.monitor.PatronNeighborhoodScrubber.TIMESTAMP_FIELD" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="core.monitor.PatronRecordReaper">
<em class="property">class </em><code class="descclassname">core.monitor.</code><code class="descname">PatronRecordReaper</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/monitor.html#PatronRecordReaper"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.monitor.PatronRecordReaper" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.monitor.ReaperMonitor" title="core.monitor.ReaperMonitor"><code class="xref py py-class docutils literal notranslate"><span class="pre">core.monitor.ReaperMonitor</span></code></a></p>
<p>Remove patron records that expired more than 60 days ago</p>
<dl class="attribute">
<dt id="core.monitor.PatronRecordReaper.MAX_AGE">
<code class="descname">MAX_AGE</code><em class="property"> = 60</em><a class="headerlink" href="#core.monitor.PatronRecordReaper.MAX_AGE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.monitor.PatronRecordReaper.MODEL_CLASS">
<code class="descname">MODEL_CLASS</code><a class="headerlink" href="#core.monitor.PatronRecordReaper.MODEL_CLASS" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <a class="reference internal" href="core.model.html#core.model.patron.Patron" title="core.model.patron.Patron"><code class="xref py py-class docutils literal notranslate"><span class="pre">core.model.patron.Patron</span></code></a></p>
</dd></dl>

<dl class="attribute">
<dt id="core.monitor.PatronRecordReaper.TIMESTAMP_FIELD">
<code class="descname">TIMESTAMP_FIELD</code><em class="property"> = 'authorization_expires'</em><a class="headerlink" href="#core.monitor.PatronRecordReaper.TIMESTAMP_FIELD" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="core.monitor.PermanentWorkIDRefreshMonitor">
<em class="property">class </em><code class="descclassname">core.monitor.</code><code class="descname">PermanentWorkIDRefreshMonitor</code><span class="sig-paren">(</span><em>_db</em>, <em>collection=None</em>, <em>batch_size=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/monitor.html#PermanentWorkIDRefreshMonitor"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.monitor.PermanentWorkIDRefreshMonitor" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.monitor.EditionSweepMonitor" title="core.monitor.EditionSweepMonitor"><code class="xref py py-class docutils literal notranslate"><span class="pre">core.monitor.EditionSweepMonitor</span></code></a></p>
<p>A monitor that calculates or recalculates the permanent work ID for
every edition.</p>
<dl class="attribute">
<dt id="core.monitor.PermanentWorkIDRefreshMonitor.SERVICE_NAME">
<code class="descname">SERVICE_NAME</code><em class="property"> = 'Permanent work ID refresh'</em><a class="headerlink" href="#core.monitor.PermanentWorkIDRefreshMonitor.SERVICE_NAME" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="core.monitor.PermanentWorkIDRefreshMonitor.process_item">
<code class="descname">process_item</code><span class="sig-paren">(</span><em>edition</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/monitor.html#PermanentWorkIDRefreshMonitor.process_item"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.monitor.PermanentWorkIDRefreshMonitor.process_item" title="Permalink to this definition">¶</a></dt>
<dd><p>Do the work that needs to be done for a given item.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="core.monitor.PresentationReadyWorkSweepMonitor">
<em class="property">class </em><code class="descclassname">core.monitor.</code><code class="descname">PresentationReadyWorkSweepMonitor</code><span class="sig-paren">(</span><em>_db</em>, <em>collection=None</em>, <em>batch_size=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/monitor.html#PresentationReadyWorkSweepMonitor"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.monitor.PresentationReadyWorkSweepMonitor" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.monitor.WorkSweepMonitor" title="core.monitor.WorkSweepMonitor"><code class="xref py py-class docutils literal notranslate"><span class="pre">core.monitor.WorkSweepMonitor</span></code></a></p>
<p>A Monitor that does something to every presentation-ready Work.</p>
<dl class="method">
<dt id="core.monitor.PresentationReadyWorkSweepMonitor.item_query">
<code class="descname">item_query</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/monitor.html#PresentationReadyWorkSweepMonitor.item_query"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.monitor.PresentationReadyWorkSweepMonitor.item_query" title="Permalink to this definition">¶</a></dt>
<dd><p>Find the items that need to be processed in the sweep.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">A query object.</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="core.monitor.ReaperMonitor">
<em class="property">class </em><code class="descclassname">core.monitor.</code><code class="descname">ReaperMonitor</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/monitor.html#ReaperMonitor"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.monitor.ReaperMonitor" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.monitor.Monitor" title="core.monitor.Monitor"><code class="xref py py-class docutils literal notranslate"><span class="pre">core.monitor.Monitor</span></code></a></p>
<p>A Monitor that deletes database rows that have expired but
have no other process to delete them.</p>
<p>A subclass of ReaperMonitor MUST define values for the following
constants:
* MODEL_CLASS - The model class this monitor is reaping, e.g. Credential.
* TIMESTAMP_FIELD - Within the model class, the DateTime field to be
used when deciding which rows to deleting,
e.g. ‘expires’. The reaper will be more efficient if there’s
an index on this field.
* MAX_AGE - A datetime.timedelta or number of days representing
the time that must pass before an item can be safely deleted.</p>
<p>A subclass of ReaperMonitor MAY define values for the following constants:
* BATCH_SIZE - The number of rows to fetch for deletion in a single
batch. The default is 1000.</p>
<p>If your model class has fields that might contain a lot of data
and aren’t important to the reaping process, put their field names
into a list called LARGE_FIELDS and the Reaper will avoid fetching
that information, improving performance.</p>
<dl class="attribute">
<dt id="core.monitor.ReaperMonitor.BATCH_SIZE">
<code class="descname">BATCH_SIZE</code><em class="property"> = 1000</em><a class="headerlink" href="#core.monitor.ReaperMonitor.BATCH_SIZE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.monitor.ReaperMonitor.MAX_AGE">
<code class="descname">MAX_AGE</code><em class="property"> = None</em><a class="headerlink" href="#core.monitor.ReaperMonitor.MAX_AGE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.monitor.ReaperMonitor.MODEL_CLASS">
<code class="descname">MODEL_CLASS</code><em class="property"> = None</em><a class="headerlink" href="#core.monitor.ReaperMonitor.MODEL_CLASS" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.monitor.ReaperMonitor.REGISTRY">
<code class="descname">REGISTRY</code><em class="property"> = [&lt;class 'core.monitor.CachedFeedReaper'&gt;, &lt;class 'core.monitor.CredentialReaper'&gt;, &lt;class 'core.monitor.PatronRecordReaper'&gt;, &lt;class 'core.monitor.WorkReaper'&gt;, &lt;class 'core.monitor.CollectionReaper'&gt;, &lt;class 'core.monitor.CirculationEventLocationScrubber'&gt;, &lt;class 'core.monitor.PatronNeighborhoodScrubber'&gt;, &lt;class 'api.monitor.LoanReaper'&gt;, &lt;class 'api.monitor.HoldReaper'&gt;, &lt;class 'api.monitor.IdlingAnnotationReaper'&gt;]</em><a class="headerlink" href="#core.monitor.ReaperMonitor.REGISTRY" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.monitor.ReaperMonitor.TIMESTAMP_FIELD">
<code class="descname">TIMESTAMP_FIELD</code><em class="property"> = None</em><a class="headerlink" href="#core.monitor.ReaperMonitor.TIMESTAMP_FIELD" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.monitor.ReaperMonitor.cutoff">
<code class="descname">cutoff</code><a class="headerlink" href="#core.monitor.ReaperMonitor.cutoff" title="Permalink to this definition">¶</a></dt>
<dd><p>Items with a timestamp earlier than this time will be reaped.</p>
</dd></dl>

<dl class="method">
<dt id="core.monitor.ReaperMonitor.delete">
<code class="descname">delete</code><span class="sig-paren">(</span><em>row</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/monitor.html#ReaperMonitor.delete"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.monitor.ReaperMonitor.delete" title="Permalink to this definition">¶</a></dt>
<dd><p>Delete a row from the database.</p>
<p>CAUTION: If you override this method such that it doesn’t
actually delete the database row, then run_once() may enter an
infinite loop.</p>
</dd></dl>

<dl class="method">
<dt id="core.monitor.ReaperMonitor.query">
<code class="descname">query</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/monitor.html#ReaperMonitor.query"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.monitor.ReaperMonitor.query" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="core.monitor.ReaperMonitor.run_once">
<code class="descname">run_once</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/monitor.html#ReaperMonitor.run_once"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.monitor.ReaperMonitor.run_once" title="Permalink to this definition">¶</a></dt>
<dd><p>Do the actual work of the Monitor.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>progress</strong> – A TimestampData representing the
work done by the Monitor up to this point.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">A TimestampData representing how you want the
Monitor’s entry in the <cite>timestamps</cite> table to look like
from this point on.  NOTE: Modifying the incoming
<cite>progress</cite> and returning it is generally a bad idea,
because the incoming <cite>progress</cite> is full of old
data. Instead, return a new TimestampData containing data
for only the fields you want to set.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="core.monitor.ReaperMonitor.timestamp_field">
<code class="descname">timestamp_field</code><a class="headerlink" href="#core.monitor.ReaperMonitor.timestamp_field" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.monitor.ReaperMonitor.where_clause">
<code class="descname">where_clause</code><a class="headerlink" href="#core.monitor.ReaperMonitor.where_clause" title="Permalink to this definition">¶</a></dt>
<dd><p>A SQLAlchemy clause that identifies the database rows to be reaped.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="core.monitor.ScrubberMonitor">
<em class="property">class </em><code class="descclassname">core.monitor.</code><code class="descname">ScrubberMonitor</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/monitor.html#ScrubberMonitor"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.monitor.ScrubberMonitor" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.monitor.ReaperMonitor" title="core.monitor.ReaperMonitor"><code class="xref py py-class docutils literal notranslate"><span class="pre">core.monitor.ReaperMonitor</span></code></a></p>
<p>Scrub information from the database.</p>
<p>Unlike the other ReaperMonitors, this class doesn’t delete rows
from the database – it only clears out specific data fields.</p>
<p>In addition to the constants required for ReaperMonitor, a
subclass of ScrubberMonitor MUST define a value for the following
constant:</p>
<ul class="simple">
<li>SCRUB_FIELD - The field whose value will be set to None when a row
is scrubbed.</li>
</ul>
<dl class="method">
<dt id="core.monitor.ScrubberMonitor.run_once">
<code class="descname">run_once</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/monitor.html#ScrubberMonitor.run_once"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.monitor.ScrubberMonitor.run_once" title="Permalink to this definition">¶</a></dt>
<dd><p>Find all rows that need to be scrubbed, and scrub them.</p>
</dd></dl>

<dl class="attribute">
<dt id="core.monitor.ScrubberMonitor.scrub_field">
<code class="descname">scrub_field</code><a class="headerlink" href="#core.monitor.ScrubberMonitor.scrub_field" title="Permalink to this definition">¶</a></dt>
<dd><p>Find the SQLAlchemy representation of the model field to be
scrubbed.</p>
</dd></dl>

<dl class="attribute">
<dt id="core.monitor.ScrubberMonitor.where_clause">
<code class="descname">where_clause</code><a class="headerlink" href="#core.monitor.ScrubberMonitor.where_clause" title="Permalink to this definition">¶</a></dt>
<dd><p>Find rows that are older than MAX_AGE _and_ which have a non-null
SCRUB_FIELD. If the field is already null, there’s no need to
scrub it.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="core.monitor.SubjectSweepMonitor">
<em class="property">class </em><code class="descclassname">core.monitor.</code><code class="descname">SubjectSweepMonitor</code><span class="sig-paren">(</span><em>_db</em>, <em>subject_type=None</em>, <em>filter_string=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/monitor.html#SubjectSweepMonitor"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.monitor.SubjectSweepMonitor" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.monitor.SweepMonitor" title="core.monitor.SweepMonitor"><code class="xref py py-class docutils literal notranslate"><span class="pre">core.monitor.SweepMonitor</span></code></a></p>
<p>A Monitor that does some work for every Subject.</p>
<dl class="attribute">
<dt id="core.monitor.SubjectSweepMonitor.DEFAULT_BATCH_SIZE">
<code class="descname">DEFAULT_BATCH_SIZE</code><em class="property"> = 500</em><a class="headerlink" href="#core.monitor.SubjectSweepMonitor.DEFAULT_BATCH_SIZE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.monitor.SubjectSweepMonitor.MODEL_CLASS">
<code class="descname">MODEL_CLASS</code><a class="headerlink" href="#core.monitor.SubjectSweepMonitor.MODEL_CLASS" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <a class="reference internal" href="core.model.html#core.model.classification.Subject" title="core.model.classification.Subject"><code class="xref py py-class docutils literal notranslate"><span class="pre">core.model.classification.Subject</span></code></a></p>
</dd></dl>

<dl class="method">
<dt id="core.monitor.SubjectSweepMonitor.item_query">
<code class="descname">item_query</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/monitor.html#SubjectSweepMonitor.item_query"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.monitor.SubjectSweepMonitor.item_query" title="Permalink to this definition">¶</a></dt>
<dd><p>Find only Subjects that match the given filters.</p>
</dd></dl>

<dl class="method">
<dt id="core.monitor.SubjectSweepMonitor.scope_to_collection">
<code class="descname">scope_to_collection</code><span class="sig-paren">(</span><em>qu</em>, <em>collection</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/monitor.html#SubjectSweepMonitor.scope_to_collection"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.monitor.SubjectSweepMonitor.scope_to_collection" title="Permalink to this definition">¶</a></dt>
<dd><p>Refuse to scope this query to a Collection.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="core.monitor.SweepMonitor">
<em class="property">class </em><code class="descclassname">core.monitor.</code><code class="descname">SweepMonitor</code><span class="sig-paren">(</span><em>_db</em>, <em>collection=None</em>, <em>batch_size=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/monitor.html#SweepMonitor"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.monitor.SweepMonitor" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.monitor.CollectionMonitor" title="core.monitor.CollectionMonitor"><code class="xref py py-class docutils literal notranslate"><span class="pre">core.monitor.CollectionMonitor</span></code></a></p>
<p>A monitor that does some work for every item in a database table,
then stops.</p>
<p>Progress through the table is stored in the Timestamp, so that if
the Monitor crashes, the next time the Monitor is run, it starts
at the item that caused the crash, rather than starting from the
beginning of the table.</p>
<dl class="attribute">
<dt id="core.monitor.SweepMonitor.COMPLETION_LOG_LEVEL">
<code class="descname">COMPLETION_LOG_LEVEL</code><em class="property"> = 20</em><a class="headerlink" href="#core.monitor.SweepMonitor.COMPLETION_LOG_LEVEL" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.monitor.SweepMonitor.DEFAULT_BATCH_SIZE">
<code class="descname">DEFAULT_BATCH_SIZE</code><em class="property"> = 100</em><a class="headerlink" href="#core.monitor.SweepMonitor.DEFAULT_BATCH_SIZE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.monitor.SweepMonitor.DEFAULT_COUNTER">
<code class="descname">DEFAULT_COUNTER</code><em class="property"> = 0</em><a class="headerlink" href="#core.monitor.SweepMonitor.DEFAULT_COUNTER" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.monitor.SweepMonitor.MODEL_CLASS">
<code class="descname">MODEL_CLASS</code><em class="property"> = None</em><a class="headerlink" href="#core.monitor.SweepMonitor.MODEL_CLASS" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="core.monitor.SweepMonitor.fetch_batch">
<code class="descname">fetch_batch</code><span class="sig-paren">(</span><em>offset</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/monitor.html#SweepMonitor.fetch_batch"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.monitor.SweepMonitor.fetch_batch" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve one batch of work from the database.</p>
</dd></dl>

<dl class="method">
<dt id="core.monitor.SweepMonitor.item_query">
<code class="descname">item_query</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/monitor.html#SweepMonitor.item_query"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.monitor.SweepMonitor.item_query" title="Permalink to this definition">¶</a></dt>
<dd><p>Find the items that need to be processed in the sweep.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">A query object.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="core.monitor.SweepMonitor.process_batch">
<code class="descname">process_batch</code><span class="sig-paren">(</span><em>offset</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/monitor.html#SweepMonitor.process_batch"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.monitor.SweepMonitor.process_batch" title="Permalink to this definition">¶</a></dt>
<dd><p>Process one batch of work.</p>
</dd></dl>

<dl class="method">
<dt id="core.monitor.SweepMonitor.process_item">
<code class="descname">process_item</code><span class="sig-paren">(</span><em>item</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/monitor.html#SweepMonitor.process_item"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.monitor.SweepMonitor.process_item" title="Permalink to this definition">¶</a></dt>
<dd><p>Do the work that needs to be done for a given item.</p>
</dd></dl>

<dl class="method">
<dt id="core.monitor.SweepMonitor.process_items">
<code class="descname">process_items</code><span class="sig-paren">(</span><em>items</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/monitor.html#SweepMonitor.process_items"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.monitor.SweepMonitor.process_items" title="Permalink to this definition">¶</a></dt>
<dd><p>Process a list of items.</p>
</dd></dl>

<dl class="method">
<dt id="core.monitor.SweepMonitor.run_once">
<code class="descname">run_once</code><span class="sig-paren">(</span><em>*ignore</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/monitor.html#SweepMonitor.run_once"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.monitor.SweepMonitor.run_once" title="Permalink to this definition">¶</a></dt>
<dd><p>Do the actual work of the Monitor.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>progress</strong> – A TimestampData representing the
work done by the Monitor up to this point.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">A TimestampData representing how you want the
Monitor’s entry in the <cite>timestamps</cite> table to look like
from this point on.  NOTE: Modifying the incoming
<cite>progress</cite> and returning it is generally a bad idea,
because the incoming <cite>progress</cite> is full of old
data. Instead, return a new TimestampData containing data
for only the fields you want to set.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="core.monitor.SweepMonitor.scope_to_collection">
<code class="descname">scope_to_collection</code><span class="sig-paren">(</span><em>qu</em>, <em>collection</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/monitor.html#SweepMonitor.scope_to_collection"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.monitor.SweepMonitor.scope_to_collection" title="Permalink to this definition">¶</a></dt>
<dd><p>Restrict the given query so that it only finds items
associated with the given collection.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>qu</strong> – A query object.</li>
<li><strong>collection</strong> – A Collection object, presumed to not be None.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="core.monitor.TimelineMonitor">
<em class="property">class </em><code class="descclassname">core.monitor.</code><code class="descname">TimelineMonitor</code><span class="sig-paren">(</span><em>_db</em>, <em>collection=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/monitor.html#TimelineMonitor"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.monitor.TimelineMonitor" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.monitor.Monitor" title="core.monitor.Monitor"><code class="xref py py-class docutils literal notranslate"><span class="pre">core.monitor.Monitor</span></code></a></p>
<p>A monitor that needs to process everything that happened between
two specific times.</p>
<p>This Monitor uses <cite>Timestamp.start</cite> and <cite>Timestamp.finish</cite> to describe
the span of time covered in the most recent run, not the time it
actually took to run.</p>
<dl class="attribute">
<dt id="core.monitor.TimelineMonitor.OVERLAP">
<code class="descname">OVERLAP</code><em class="property"> = datetime.timedelta(0, 300)</em><a class="headerlink" href="#core.monitor.TimelineMonitor.OVERLAP" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="core.monitor.TimelineMonitor.catch_up_from">
<code class="descname">catch_up_from</code><span class="sig-paren">(</span><em>start</em>, <em>cutoff</em>, <em>progress</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/monitor.html#TimelineMonitor.catch_up_from"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.monitor.TimelineMonitor.catch_up_from" title="Permalink to this definition">¶</a></dt>
<dd><p>Make sure all events between <cite>start</cite> and <cite>cutoff</cite> are covered.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>start</strong> – Start looking for events that happened at this
time.</li>
<li><strong>cutoff</strong> – You’re not responsible for events that happened
after this time.</li>
<li><strong>progress</strong> – A TimestampData representing the progress so
far. Unlike with run_once(), you are encouraged to can
modify this in place, for instance to set .achievements.
However, you cannot change .start and .finish – any
changes will be overwritten by run_once().</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="core.monitor.TimelineMonitor.run_once">
<code class="descname">run_once</code><span class="sig-paren">(</span><em>progress</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/monitor.html#TimelineMonitor.run_once"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.monitor.TimelineMonitor.run_once" title="Permalink to this definition">¶</a></dt>
<dd><p>Do the actual work of the Monitor.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>progress</strong> – A TimestampData representing the
work done by the Monitor up to this point.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">A TimestampData representing how you want the
Monitor’s entry in the <cite>timestamps</cite> table to look like
from this point on.  NOTE: Modifying the incoming
<cite>progress</cite> and returning it is generally a bad idea,
because the incoming <cite>progress</cite> is full of old
data. Instead, return a new TimestampData containing data
for only the fields you want to set.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="classmethod">
<dt id="core.monitor.TimelineMonitor.slice_timespan">
<em class="property">classmethod </em><code class="descname">slice_timespan</code><span class="sig-paren">(</span><em>start</em>, <em>cutoff</em>, <em>increment</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/monitor.html#TimelineMonitor.slice_timespan"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.monitor.TimelineMonitor.slice_timespan" title="Permalink to this definition">¶</a></dt>
<dd><p>Slice a span of time into segments no large than [increment].</p>
<p>This lets you divide up a task like “gather the entire
circulation history for a collection” into chunks of one day.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>start</strong> – A datetime.</li>
<li><strong>cutoff</strong> – A datetime.</li>
<li><strong>increment</strong> – A timedelta.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="core.monitor.WorkReaper">
<em class="property">class </em><code class="descclassname">core.monitor.</code><code class="descname">WorkReaper</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/monitor.html#WorkReaper"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.monitor.WorkReaper" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.monitor.ReaperMonitor" title="core.monitor.ReaperMonitor"><code class="xref py py-class docutils literal notranslate"><span class="pre">core.monitor.ReaperMonitor</span></code></a></p>
<p>Remove Works that have no associated LicensePools.</p>
<p>Unlike other reapers, no timestamp is relevant. As soon as a Work
loses its last LicensePool it can be removed.</p>
<dl class="attribute">
<dt id="core.monitor.WorkReaper.MODEL_CLASS">
<code class="descname">MODEL_CLASS</code><a class="headerlink" href="#core.monitor.WorkReaper.MODEL_CLASS" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <a class="reference internal" href="core.model.html#core.model.work.Work" title="core.model.work.Work"><code class="xref py py-class docutils literal notranslate"><span class="pre">core.model.work.Work</span></code></a></p>
</dd></dl>

<dl class="method">
<dt id="core.monitor.WorkReaper.delete">
<code class="descname">delete</code><span class="sig-paren">(</span><em>work</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/monitor.html#WorkReaper.delete"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.monitor.WorkReaper.delete" title="Permalink to this definition">¶</a></dt>
<dd><p>Delete work from elasticsearch and database.</p>
</dd></dl>

<dl class="method">
<dt id="core.monitor.WorkReaper.query">
<code class="descname">query</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/monitor.html#WorkReaper.query"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.monitor.WorkReaper.query" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="core.monitor.WorkSweepMonitor">
<em class="property">class </em><code class="descclassname">core.monitor.</code><code class="descname">WorkSweepMonitor</code><span class="sig-paren">(</span><em>_db</em>, <em>collection=None</em>, <em>batch_size=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/monitor.html#WorkSweepMonitor"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.monitor.WorkSweepMonitor" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.monitor.SweepMonitor" title="core.monitor.SweepMonitor"><code class="xref py py-class docutils literal notranslate"><span class="pre">core.monitor.SweepMonitor</span></code></a></p>
<p>A Monitor that does something to every Work.</p>
<dl class="attribute">
<dt id="core.monitor.WorkSweepMonitor.MODEL_CLASS">
<code class="descname">MODEL_CLASS</code><a class="headerlink" href="#core.monitor.WorkSweepMonitor.MODEL_CLASS" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <a class="reference internal" href="core.model.html#core.model.work.Work" title="core.model.work.Work"><code class="xref py py-class docutils literal notranslate"><span class="pre">core.model.work.Work</span></code></a></p>
</dd></dl>

<dl class="method">
<dt id="core.monitor.WorkSweepMonitor.scope_to_collection">
<code class="descname">scope_to_collection</code><span class="sig-paren">(</span><em>qu</em>, <em>collection</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/monitor.html#WorkSweepMonitor.scope_to_collection"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.monitor.WorkSweepMonitor.scope_to_collection" title="Permalink to this definition">¶</a></dt>
<dd><p>Restrict the query to only find Works found in the given
Collection.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-core.opds">
<span id="core-opds-module"></span><h2>core.opds module<a class="headerlink" href="#module-core.opds" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="core.opds.AcquisitionFeed">
<em class="property">class </em><code class="descclassname">core.opds.</code><code class="descname">AcquisitionFeed</code><span class="sig-paren">(</span><em>_db</em>, <em>title</em>, <em>url</em>, <em>works</em>, <em>annotator=None</em>, <em>precomposed_entries=[]</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds.html#AcquisitionFeed"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.opds.AcquisitionFeed" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="core.util.html#core.util.opds_writer.OPDSFeed" title="core.util.opds_writer.OPDSFeed"><code class="xref py py-class docutils literal notranslate"><span class="pre">core.util.opds_writer.OPDSFeed</span></code></a></p>
<dl class="attribute">
<dt id="core.opds.AcquisitionFeed.CURRENT_ENTRYPOINT_ATTRIBUTE">
<code class="descname">CURRENT_ENTRYPOINT_ATTRIBUTE</code><em class="property"> = '{http://librarysimplified.org/terms/}entryPoint'</em><a class="headerlink" href="#core.opds.AcquisitionFeed.CURRENT_ENTRYPOINT_ATTRIBUTE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.opds.AcquisitionFeed.FACET_REL">
<code class="descname">FACET_REL</code><em class="property"> = 'http://opds-spec.org/facet'</em><a class="headerlink" href="#core.opds.AcquisitionFeed.FACET_REL" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="classmethod">
<dt id="core.opds.AcquisitionFeed.acquisition_link">
<em class="property">classmethod </em><code class="descname">acquisition_link</code><span class="sig-paren">(</span><em>rel</em>, <em>href</em>, <em>types</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds.html#AcquisitionFeed.acquisition_link"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.opds.AcquisitionFeed.acquisition_link" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="core.opds.AcquisitionFeed.add_breadcrumb_links">
<code class="descname">add_breadcrumb_links</code><span class="sig-paren">(</span><em>lane</em>, <em>entrypoint=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds.html#AcquisitionFeed.add_breadcrumb_links"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.opds.AcquisitionFeed.add_breadcrumb_links" title="Permalink to this definition">¶</a></dt>
<dd><p>Add information necessary to find your current place in the
site’s navigation.</p>
<p>A link with rel=”start” points to the start of the site</p>
<p>A &lt;simplified:entrypoint&gt; section describes the current entry point.</p>
<p>A &lt;simplified:breadcrumbs&gt; section contains a sequence of
breadcrumb links.</p>
</dd></dl>

<dl class="method">
<dt id="core.opds.AcquisitionFeed.add_breadcrumbs">
<code class="descname">add_breadcrumbs</code><span class="sig-paren">(</span><em>lane</em>, <em>include_lane=False</em>, <em>entrypoint=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds.html#AcquisitionFeed.add_breadcrumbs"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.opds.AcquisitionFeed.add_breadcrumbs" title="Permalink to this definition">¶</a></dt>
<dd><p>Add list of ancestor links in a breadcrumbs element.</p>
<p>TODO: The switchover from “no entry point” to “entry point” needs
its own breadcrumb link.</p>
</dd></dl>

<dl class="method">
<dt id="core.opds.AcquisitionFeed.add_entry">
<code class="descname">add_entry</code><span class="sig-paren">(</span><em>work</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds.html#AcquisitionFeed.add_entry"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.opds.AcquisitionFeed.add_entry" title="Permalink to this definition">¶</a></dt>
<dd><p>Attempt to create an OPDS &lt;entry&gt;. If successful, append it to
the feed.</p>
</dd></dl>

<dl class="classmethod">
<dt id="core.opds.AcquisitionFeed.add_entrypoint_links">
<em class="property">classmethod </em><code class="descname">add_entrypoint_links</code><span class="sig-paren">(</span><em>feed</em>, <em>url_generator</em>, <em>entrypoints</em>, <em>selected_entrypoint</em>, <em>group_name='Formats'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds.html#AcquisitionFeed.add_entrypoint_links"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.opds.AcquisitionFeed.add_entrypoint_links" title="Permalink to this definition">¶</a></dt>
<dd><p>Add links to a feed forming an OPDS facet group for a set of
EntryPoints.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>feed</strong> – A lxml Tag object.</li>
<li><strong>url_generator</strong> – A callable that returns the entry point
URL when passed an EntryPoint.</li>
<li><strong>entrypoints</strong> – A list of all EntryPoints in the facet group.</li>
<li><strong>selected_entrypoint</strong> – The current EntryPoint, if selected.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="core.opds.AcquisitionFeed.as_error_response">
<code class="descname">as_error_response</code><span class="sig-paren">(</span><em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds.html#AcquisitionFeed.as_error_response"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.opds.AcquisitionFeed.as_error_response" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert this feed into an OPDSFEedResponse that should be treated
by intermediaries as an error – that is, treated as private
and not cached.</p>
</dd></dl>

<dl class="method">
<dt id="core.opds.AcquisitionFeed.as_response">
<code class="descname">as_response</code><span class="sig-paren">(</span><em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds.html#AcquisitionFeed.as_response"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.opds.AcquisitionFeed.as_response" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert this feed into an OPDSFEedResponse.</p>
</dd></dl>

<dl class="method">
<dt id="core.opds.AcquisitionFeed.create_entry">
<code class="descname">create_entry</code><span class="sig-paren">(</span><em>work</em>, <em>even_if_no_license_pool=False</em>, <em>force_create=False</em>, <em>use_cache=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds.html#AcquisitionFeed.create_entry"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.opds.AcquisitionFeed.create_entry" title="Permalink to this definition">¶</a></dt>
<dd><p>Turn a work into an entry for an acquisition feed.</p>
</dd></dl>

<dl class="classmethod">
<dt id="core.opds.AcquisitionFeed.error_message">
<em class="property">classmethod </em><code class="descname">error_message</code><span class="sig-paren">(</span><em>identifier</em>, <em>error_status</em>, <em>error_message</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds.html#AcquisitionFeed.error_message"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.opds.AcquisitionFeed.error_message" title="Permalink to this definition">¶</a></dt>
<dd><p>Turn an error result into an OPDSMessage suitable for
adding to a feed.</p>
</dd></dl>

<dl class="classmethod">
<dt id="core.opds.AcquisitionFeed.facet_link">
<em class="property">classmethod </em><code class="descname">facet_link</code><span class="sig-paren">(</span><em>href</em>, <em>title</em>, <em>facet_group_name</em>, <em>is_active</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds.html#AcquisitionFeed.facet_link"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.opds.AcquisitionFeed.facet_link" title="Permalink to this definition">¶</a></dt>
<dd><p>Build a set of attributes for a facet link.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>href</strong> – Destination of the link.</li>
<li><strong>title</strong> – Human-readable description of the facet.</li>
<li><strong>facet_group_name</strong> – The facet group to which the facet belongs,
e.g. “Sort By”.</li>
<li><strong>is_active</strong> – True if this is the client’s currently
selected facet.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">A dictionary of attributes, suitable for passing as
keyword arguments into OPDSFeed.add_link_to_feed.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="classmethod">
<dt id="core.opds.AcquisitionFeed.facet_links">
<em class="property">classmethod </em><code class="descname">facet_links</code><span class="sig-paren">(</span><em>annotator</em>, <em>facets</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds.html#AcquisitionFeed.facet_links"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.opds.AcquisitionFeed.facet_links" title="Permalink to this definition">¶</a></dt>
<dd><p>Create links for this feed’s navigational facet groups.</p>
<p>This does not create links for the entry point facet group,
because those links should only be present in certain
circumstances, and this method doesn’t know if those
circumstances apply. You need to decide whether to call
add_entrypoint_links in addition to calling this method.</p>
</dd></dl>

<dl class="classmethod">
<dt id="core.opds.AcquisitionFeed.format_types">
<em class="property">classmethod </em><code class="descname">format_types</code><span class="sig-paren">(</span><em>delivery_mechanism</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds.html#AcquisitionFeed.format_types"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.opds.AcquisitionFeed.format_types" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate a set of types suitable for passing into
acquisition_link().</p>
</dd></dl>

<dl class="classmethod">
<dt id="core.opds.AcquisitionFeed.from_query">
<em class="property">classmethod </em><code class="descname">from_query</code><span class="sig-paren">(</span><em>query</em>, <em>_db</em>, <em>feed_name</em>, <em>url</em>, <em>pagination</em>, <em>url_fn</em>, <em>annotator</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds.html#AcquisitionFeed.from_query"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.opds.AcquisitionFeed.from_query" title="Permalink to this definition">¶</a></dt>
<dd><p>Build  a feed representing one page of a given list. Currently used for
creating an OPDS feed for a custom list and not cached.</p>
<p>TODO: This is used by the circulation manager admin interface.
Investigate changing the code that uses this to use the search
index – this is inefficient and creates an alternate code path
that may harbor bugs.</p>
<p>TODO: This cannot currently return OPDSFeedResponse because the
admin interface modifies the feed after it’s generated.</p>
</dd></dl>

<dl class="classmethod">
<dt id="core.opds.AcquisitionFeed.groups">
<em class="property">classmethod </em><code class="descname">groups</code><span class="sig-paren">(</span><em>_db</em>, <em>title</em>, <em>url</em>, <em>worklist</em>, <em>annotator</em>, <em>facets=None</em>, <em>max_age=None</em>, <em>search_engine=None</em>, <em>search_debug=False</em>, <em>**response_kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds.html#AcquisitionFeed.groups"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.opds.AcquisitionFeed.groups" title="Permalink to this definition">¶</a></dt>
<dd><p>The acquisition feed for ‘featured’ items from a given lane’s
sublanes, organized into per-lane groups.</p>
<p>NOTE: If the lane has no sublanes, a grouped feed will
probably be unsatisfying. Call page() instead with an
appropriate Facets object.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>facets</strong> – A GroupsFacet object.</li>
<li><strong>response_kwargs</strong> – Extra keyword arguments to pass into
the OPDSFeedResponse constructor.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">An OPDSFeedResponse containing the feed.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="classmethod">
<dt id="core.opds.AcquisitionFeed.indirect_acquisition">
<em class="property">classmethod </em><code class="descname">indirect_acquisition</code><span class="sig-paren">(</span><em>indirect_types</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds.html#AcquisitionFeed.indirect_acquisition"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.opds.AcquisitionFeed.indirect_acquisition" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="classmethod">
<dt id="core.opds.AcquisitionFeed.license_tags">
<em class="property">classmethod </em><code class="descname">license_tags</code><span class="sig-paren">(</span><em>license_pool</em>, <em>loan</em>, <em>hold</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds.html#AcquisitionFeed.license_tags"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.opds.AcquisitionFeed.license_tags" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="classmethod">
<dt id="core.opds.AcquisitionFeed.link">
<em class="property">classmethod </em><code class="descname">link</code><span class="sig-paren">(</span><em>rel</em>, <em>href</em>, <em>type</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds.html#AcquisitionFeed.link"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.opds.AcquisitionFeed.link" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="classmethod">
<dt id="core.opds.AcquisitionFeed.minimal_opds_entry">
<em class="property">classmethod </em><code class="descname">minimal_opds_entry</code><span class="sig-paren">(</span><em>identifier</em>, <em>cover</em>, <em>description</em>, <em>quality</em>, <em>most_recent_update=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds.html#AcquisitionFeed.minimal_opds_entry"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.opds.AcquisitionFeed.minimal_opds_entry" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="classmethod">
<dt id="core.opds.AcquisitionFeed.page">
<em class="property">classmethod </em><code class="descname">page</code><span class="sig-paren">(</span><em>_db</em>, <em>title</em>, <em>url</em>, <em>worklist</em>, <em>annotator</em>, <em>facets=None</em>, <em>pagination=None</em>, <em>max_age=None</em>, <em>search_engine=None</em>, <em>search_debug=False</em>, <em>**response_kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds.html#AcquisitionFeed.page"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.opds.AcquisitionFeed.page" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a feed representing one page of works from a given lane.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>response_kwargs</strong> – Extra keyword arguments to pass into
the OPDSFeedResponse constructor.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">An OPDSFeedResponse containing the feed.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="classmethod">
<dt id="core.opds.AcquisitionFeed.search">
<em class="property">classmethod </em><code class="descname">search</code><span class="sig-paren">(</span><em>_db</em>, <em>title</em>, <em>url</em>, <em>lane</em>, <em>search_engine</em>, <em>query</em>, <em>pagination=None</em>, <em>facets=None</em>, <em>annotator=None</em>, <em>**response_kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds.html#AcquisitionFeed.search"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.opds.AcquisitionFeed.search" title="Permalink to this definition">¶</a></dt>
<dd><p>Run a search against the given search engine and return
the results as a Flask Response.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>_db</strong> – A database connection</li>
<li><strong>title</strong> – The title of the resulting OPDS feed.</li>
<li><strong>url</strong> – The URL from which the feed will be served.</li>
<li><strong>search_engine</strong> – An ExternalSearchIndex.</li>
<li><strong>query</strong> – The search query</li>
<li><strong>pagination</strong> – A Pagination</li>
<li><strong>facets</strong> – A Facets</li>
<li><strong>annotator</strong> – An Annotator</li>
<li><strong>response_kwargs</strong> – Keyword arguments to pass into the OPDSFeedResponse
constructor.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">An ODPSFeedResponse</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="core.opds.AcquisitionFeed.show_current_entrypoint">
<code class="descname">show_current_entrypoint</code><span class="sig-paren">(</span><em>entrypoint</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds.html#AcquisitionFeed.show_current_entrypoint"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.opds.AcquisitionFeed.show_current_entrypoint" title="Permalink to this definition">¶</a></dt>
<dd><p>Annotate this given feed with a simplified:entryPoint
attribute pointing to the current entrypoint’s TYPE_URI.</p>
<p>This gives clients an overall picture of the type of works in
the feed, and a way to distinguish between one EntryPoint
and another.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>entrypoint</strong> – An EntryPoint.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="classmethod">
<dt id="core.opds.AcquisitionFeed.single_entry">
<em class="property">classmethod </em><code class="descname">single_entry</code><span class="sig-paren">(</span><em>_db</em>, <em>work</em>, <em>annotator</em>, <em>force_create=False</em>, <em>raw=False</em>, <em>**response_kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds.html#AcquisitionFeed.single_entry"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.opds.AcquisitionFeed.single_entry" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a single-entry OPDS document for one specific work.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>_db</strong> – A database connection.</li>
<li><strong>work</strong> – A Work</li>
<li><strong>work</strong> – An Annotator</li>
<li><strong>force_create</strong> – Create the OPDS entry from scratch even
if there’s already a cached one.</li>
<li><strong>raw</strong> – If this is False (the default), a Flask Response will be returned,
ready to be sent over the network. Otherwise an object representing
the underlying OPDS entry will be returned.</li>
<li><strong>response_kwargs</strong> – These keyword arguments will be passed into the Response
constructor, if it is invoked.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">A Response, if <cite>raw</cite> is false. Otherwise, an OPDSMessage
or an etree._Element – whatever was returned by
OPDSFeed.create_entry.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="core.opds.Annotator">
<em class="property">class </em><code class="descclassname">core.opds.</code><code class="descname">Annotator</code><a class="reference internal" href="_modules/core/opds.html#Annotator"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.opds.Annotator" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>The Annotator knows how to present an OPDS feed in a specific
application context.</p>
<dl class="classmethod">
<dt id="core.opds.Annotator.active_licensepool_for">
<em class="property">classmethod </em><code class="descname">active_licensepool_for</code><span class="sig-paren">(</span><em>work</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds.html#Annotator.active_licensepool_for"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.opds.Annotator.active_licensepool_for" title="Permalink to this definition">¶</a></dt>
<dd><p>Which license pool would be/has been used to issue a license for
this work?</p>
</dd></dl>

<dl class="classmethod">
<dt id="core.opds.Annotator.annotate_feed">
<em class="property">classmethod </em><code class="descname">annotate_feed</code><span class="sig-paren">(</span><em>feed</em>, <em>lane</em>, <em>list=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds.html#Annotator.annotate_feed"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.opds.Annotator.annotate_feed" title="Permalink to this definition">¶</a></dt>
<dd><p>Make any custom modifications necessary to integrate this
OPDS feed into the application’s workflow.</p>
</dd></dl>

<dl class="method">
<dt id="core.opds.Annotator.annotate_work_entry">
<code class="descname">annotate_work_entry</code><span class="sig-paren">(</span><em>work</em>, <em>active_license_pool</em>, <em>edition</em>, <em>identifier</em>, <em>feed</em>, <em>entry</em>, <em>updated=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds.html#Annotator.annotate_work_entry"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.opds.Annotator.annotate_work_entry" title="Permalink to this definition">¶</a></dt>
<dd><p>Make any custom modifications necessary to integrate this
OPDS entry into the application’s workflow.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Work:</th><td class="field-body"><p class="first">The Work whose OPDS entry is being annotated.</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Active_license_pool:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body"><p class="first">Of all the LicensePools associated with this
Work, the client has expressed interest in this one.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Edition:</th><td class="field-body"><p class="first">The Edition to use when associating bibliographic
metadata with this entry. You will probably not need to use
this, because bibliographic metadata was associated with
the entry when it was created.</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Identifier:</th><td class="field-body"><p class="first">Of all the Identifiers associated with this
Work, the client has expressed interest in this one.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>feed</strong> – An OPDSFeed – the feed in which this entry will be
situated.</li>
<li><strong>entry</strong> – An lxml Element object, the entry that will be added
to the feed.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="classmethod">
<dt id="core.opds.Annotator.authors">
<em class="property">classmethod </em><code class="descname">authors</code><span class="sig-paren">(</span><em>work</em>, <em>edition</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds.html#Annotator.authors"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.opds.Annotator.authors" title="Permalink to this definition">¶</a></dt>
<dd><p>Create one or more &lt;author&gt; and &lt;contributor&gt; tags for the given
Work.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>work</strong> – The Work under consideration.</li>
<li><strong>edition</strong> – The Edition to use as a reference
for bibliographic information, including the list of
Contributions.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="classmethod">
<dt id="core.opds.Annotator.categories">
<em class="property">classmethod </em><code class="descname">categories</code><span class="sig-paren">(</span><em>work</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds.html#Annotator.categories"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.opds.Annotator.categories" title="Permalink to this definition">¶</a></dt>
<dd><p>Return all relevant classifications of this work.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">A dictionary mapping ‘scheme’ URLs to dictionaries of
attribute-value pairs.</td>
</tr>
</tbody>
</table>
<p>Notable attributes: ‘term’, ‘label’, ‘<a class="reference external" href="http://schema.org/ratingValue">http://schema.org/ratingValue</a>’</p>
</dd></dl>

<dl class="classmethod">
<dt id="core.opds.Annotator.content">
<em class="property">classmethod </em><code class="descname">content</code><span class="sig-paren">(</span><em>work</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds.html#Annotator.content"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.opds.Annotator.content" title="Permalink to this definition">¶</a></dt>
<dd><p>Return an HTML summary of this work.</p>
</dd></dl>

<dl class="classmethod">
<dt id="core.opds.Annotator.contributor_tag">
<em class="property">classmethod </em><code class="descname">contributor_tag</code><span class="sig-paren">(</span><em>contribution</em>, <em>state</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds.html#Annotator.contributor_tag"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.opds.Annotator.contributor_tag" title="Permalink to this definition">¶</a></dt>
<dd><p>Build an &lt;author&gt; or &lt;contributor&gt; tag for a Contribution.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>contribution</strong> – A Contribution.</li>
<li><strong>state</strong> – A defaultdict of sets, which may be used to keep
track of what happened during previous calls to
contributor_tag for a given Work.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">A Tag, or None if creating a Tag for this Contribution
would be redundant or of low value.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="classmethod">
<dt id="core.opds.Annotator.cover_links">
<em class="property">classmethod </em><code class="descname">cover_links</code><span class="sig-paren">(</span><em>work</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds.html#Annotator.cover_links"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.opds.Annotator.cover_links" title="Permalink to this definition">¶</a></dt>
<dd><p>Return all links to be used as cover links for this work.</p>
<p>In a distribution application, each work will have only one
link. In a content server-type application, each work may have
a large number of links.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">A 2-tuple (thumbnail_links, full_links)</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="classmethod">
<dt id="core.opds.Annotator.default_lane_url">
<em class="property">classmethod </em><code class="descname">default_lane_url</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds.html#Annotator.default_lane_url"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.opds.Annotator.default_lane_url" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="classmethod">
<dt id="core.opds.Annotator.facet_url">
<em class="property">classmethod </em><code class="descname">facet_url</code><span class="sig-paren">(</span><em>facets</em>, <em>facet=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds.html#Annotator.facet_url"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.opds.Annotator.facet_url" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="classmethod">
<dt id="core.opds.Annotator.featured_feed_url">
<em class="property">classmethod </em><code class="descname">featured_feed_url</code><span class="sig-paren">(</span><em>lane</em>, <em>order=None</em>, <em>facets=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds.html#Annotator.featured_feed_url"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.opds.Annotator.featured_feed_url" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="classmethod">
<dt id="core.opds.Annotator.feed_url">
<em class="property">classmethod </em><code class="descname">feed_url</code><span class="sig-paren">(</span><em>lane</em>, <em>facets=None</em>, <em>pagination=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds.html#Annotator.feed_url"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.opds.Annotator.feed_url" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="classmethod">
<dt id="core.opds.Annotator.group_uri">
<em class="property">classmethod </em><code class="descname">group_uri</code><span class="sig-paren">(</span><em>work</em>, <em>license_pool</em>, <em>identifier</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds.html#Annotator.group_uri"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.opds.Annotator.group_uri" title="Permalink to this definition">¶</a></dt>
<dd><p>The URI to be associated with this Work when making it part of
a grouped feed.</p>
<p>By default, this does nothing. See circulation/LibraryAnnotator
for a subclass that does something.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">A 2-tuple (URI, title)</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="classmethod">
<dt id="core.opds.Annotator.groups_url">
<em class="property">classmethod </em><code class="descname">groups_url</code><span class="sig-paren">(</span><em>lane</em>, <em>facets=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds.html#Annotator.groups_url"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.opds.Annotator.groups_url" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="classmethod">
<dt id="core.opds.Annotator.lane_id">
<em class="property">classmethod </em><code class="descname">lane_id</code><span class="sig-paren">(</span><em>lane</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds.html#Annotator.lane_id"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.opds.Annotator.lane_id" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="classmethod">
<dt id="core.opds.Annotator.lane_url">
<em class="property">classmethod </em><code class="descname">lane_url</code><span class="sig-paren">(</span><em>lane</em>, <em>facets=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds.html#Annotator.lane_url"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.opds.Annotator.lane_url" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="classmethod">
<dt id="core.opds.Annotator.navigation_url">
<em class="property">classmethod </em><code class="descname">navigation_url</code><span class="sig-paren">(</span><em>lane</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds.html#Annotator.navigation_url"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.opds.Annotator.navigation_url" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.opds.Annotator.opds_cache_field">
<code class="descname">opds_cache_field</code><em class="property"> = 'simple_opds_entry'</em><a class="headerlink" href="#core.opds.Annotator.opds_cache_field" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="classmethod">
<dt id="core.opds.Annotator.permalink_for">
<em class="property">classmethod </em><code class="descname">permalink_for</code><span class="sig-paren">(</span><em>work</em>, <em>license_pool</em>, <em>identifier</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds.html#Annotator.permalink_for"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.opds.Annotator.permalink_for" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate a permanent link a client can follow for information about
this entry, and only this entry.</p>
<p>Note that permalink is distinct from the Atom &lt;id&gt;,
which is always the identifier’s URN.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">A 2-tuple (URL, media type). If a single value is
returned, the media type will be presumed to be that of an
OPDS entry.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="classmethod">
<dt id="core.opds.Annotator.rating_tag">
<em class="property">classmethod </em><code class="descname">rating_tag</code><span class="sig-paren">(</span><em>type_uri</em>, <em>value</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds.html#Annotator.rating_tag"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.opds.Annotator.rating_tag" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate a schema:Rating tag for the given type and value.</p>
</dd></dl>

<dl class="classmethod">
<dt id="core.opds.Annotator.search_url">
<em class="property">classmethod </em><code class="descname">search_url</code><span class="sig-paren">(</span><em>lane</em>, <em>query</em>, <em>pagination</em>, <em>facets=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds.html#Annotator.search_url"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.opds.Annotator.search_url" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="classmethod">
<dt id="core.opds.Annotator.series">
<em class="property">classmethod </em><code class="descname">series</code><span class="sig-paren">(</span><em>series_name</em>, <em>series_position</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds.html#Annotator.series"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.opds.Annotator.series" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate a schema:Series tag for the given name and position.</p>
</dd></dl>

<dl class="method">
<dt id="core.opds.Annotator.sort_works_for_groups_feed">
<code class="descname">sort_works_for_groups_feed</code><span class="sig-paren">(</span><em>works</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds.html#Annotator.sort_works_for_groups_feed"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.opds.Annotator.sort_works_for_groups_feed" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="classmethod">
<dt id="core.opds.Annotator.work_id">
<em class="property">classmethod </em><code class="descname">work_id</code><span class="sig-paren">(</span><em>work</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds.html#Annotator.work_id"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.opds.Annotator.work_id" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="core.opds.LookupAcquisitionFeed">
<em class="property">class </em><code class="descclassname">core.opds.</code><code class="descname">LookupAcquisitionFeed</code><span class="sig-paren">(</span><em>_db</em>, <em>title</em>, <em>url</em>, <em>works</em>, <em>annotator=None</em>, <em>precomposed_entries=[]</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds.html#LookupAcquisitionFeed"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.opds.LookupAcquisitionFeed" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.opds.AcquisitionFeed" title="core.opds.AcquisitionFeed"><code class="xref py py-class docutils literal notranslate"><span class="pre">core.opds.AcquisitionFeed</span></code></a></p>
<p>Used when the user has requested a lookup of a specific identifier,
which may be different from the identifier used by the Work’s
default LicensePool.</p>
<dl class="method">
<dt id="core.opds.LookupAcquisitionFeed.create_entry">
<code class="descname">create_entry</code><span class="sig-paren">(</span><em>work</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds.html#LookupAcquisitionFeed.create_entry"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.opds.LookupAcquisitionFeed.create_entry" title="Permalink to this definition">¶</a></dt>
<dd><p>Turn an Identifier and a Work into an entry for an acquisition
feed.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="core.opds.NavigationFacets">
<em class="property">class </em><code class="descclassname">core.opds.</code><code class="descname">NavigationFacets</code><span class="sig-paren">(</span><em>minimum_featured_quality</em>, <em>entrypoint=None</em>, <em>random_seed=None</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds.html#NavigationFacets"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.opds.NavigationFacets" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.lane.FeaturedFacets" title="core.lane.FeaturedFacets"><code class="xref py py-class docutils literal notranslate"><span class="pre">core.lane.FeaturedFacets</span></code></a></p>
<dl class="attribute">
<dt id="core.opds.NavigationFacets.CACHED_FEED_TYPE">
<code class="descname">CACHED_FEED_TYPE</code><em class="property"> = u'navigation'</em><a class="headerlink" href="#core.opds.NavigationFacets.CACHED_FEED_TYPE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="core.opds.NavigationFeed">
<em class="property">class </em><code class="descclassname">core.opds.</code><code class="descname">NavigationFeed</code><span class="sig-paren">(</span><em>title</em>, <em>url</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds.html#NavigationFeed"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.opds.NavigationFeed" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="core.util.html#core.util.opds_writer.OPDSFeed" title="core.util.opds_writer.OPDSFeed"><code class="xref py py-class docutils literal notranslate"><span class="pre">core.util.opds_writer.OPDSFeed</span></code></a></p>
<dl class="method">
<dt id="core.opds.NavigationFeed.add_entry">
<code class="descname">add_entry</code><span class="sig-paren">(</span><em>url</em>, <em>title</em>, <em>type='application/atom+xml;profile=opds-catalog;kind=navigation'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds.html#NavigationFeed.add_entry"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.opds.NavigationFeed.add_entry" title="Permalink to this definition">¶</a></dt>
<dd><p>Create an OPDS navigation entry for a URL.</p>
</dd></dl>

<dl class="classmethod">
<dt id="core.opds.NavigationFeed.navigation">
<em class="property">classmethod </em><code class="descname">navigation</code><span class="sig-paren">(</span><em>_db</em>, <em>title</em>, <em>url</em>, <em>worklist</em>, <em>annotator</em>, <em>facets=None</em>, <em>max_age=None</em>, <em>**response_kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds.html#NavigationFeed.navigation"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.opds.NavigationFeed.navigation" title="Permalink to this definition">¶</a></dt>
<dd><p>The navigation feed with links to a given lane’s sublanes.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>response_kwargs</strong> – Extra keyword arguments to pass into
the OPDSFeedResponse constructor.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">A Response</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="core.opds.TestAnnotator">
<em class="property">class </em><code class="descclassname">core.opds.</code><code class="descname">TestAnnotator</code><a class="reference internal" href="_modules/core/opds.html#TestAnnotator"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.opds.TestAnnotator" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.opds.Annotator" title="core.opds.Annotator"><code class="xref py py-class docutils literal notranslate"><span class="pre">core.opds.Annotator</span></code></a></p>
<dl class="classmethod">
<dt id="core.opds.TestAnnotator.default_lane_url">
<em class="property">classmethod </em><code class="descname">default_lane_url</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds.html#TestAnnotator.default_lane_url"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.opds.TestAnnotator.default_lane_url" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="classmethod">
<dt id="core.opds.TestAnnotator.facet_url">
<em class="property">classmethod </em><code class="descname">facet_url</code><span class="sig-paren">(</span><em>facets</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds.html#TestAnnotator.facet_url"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.opds.TestAnnotator.facet_url" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="classmethod">
<dt id="core.opds.TestAnnotator.feed_url">
<em class="property">classmethod </em><code class="descname">feed_url</code><span class="sig-paren">(</span><em>lane</em>, <em>facets=None</em>, <em>pagination=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds.html#TestAnnotator.feed_url"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.opds.TestAnnotator.feed_url" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="classmethod">
<dt id="core.opds.TestAnnotator.groups_url">
<em class="property">classmethod </em><code class="descname">groups_url</code><span class="sig-paren">(</span><em>lane</em>, <em>facets=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds.html#TestAnnotator.groups_url"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.opds.TestAnnotator.groups_url" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="classmethod">
<dt id="core.opds.TestAnnotator.lane_url">
<em class="property">classmethod </em><code class="descname">lane_url</code><span class="sig-paren">(</span><em>lane</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds.html#TestAnnotator.lane_url"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.opds.TestAnnotator.lane_url" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="classmethod">
<dt id="core.opds.TestAnnotator.navigation_url">
<em class="property">classmethod </em><code class="descname">navigation_url</code><span class="sig-paren">(</span><em>lane</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds.html#TestAnnotator.navigation_url"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.opds.TestAnnotator.navigation_url" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="classmethod">
<dt id="core.opds.TestAnnotator.search_url">
<em class="property">classmethod </em><code class="descname">search_url</code><span class="sig-paren">(</span><em>lane</em>, <em>query</em>, <em>pagination</em>, <em>facets=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds.html#TestAnnotator.search_url"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.opds.TestAnnotator.search_url" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="classmethod">
<dt id="core.opds.TestAnnotator.top_level_title">
<em class="property">classmethod </em><code class="descname">top_level_title</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds.html#TestAnnotator.top_level_title"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.opds.TestAnnotator.top_level_title" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="core.opds.TestAnnotatorWithGroup">
<em class="property">class </em><code class="descclassname">core.opds.</code><code class="descname">TestAnnotatorWithGroup</code><a class="reference internal" href="_modules/core/opds.html#TestAnnotatorWithGroup"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.opds.TestAnnotatorWithGroup" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.opds.TestAnnotator" title="core.opds.TestAnnotator"><code class="xref py py-class docutils literal notranslate"><span class="pre">core.opds.TestAnnotator</span></code></a></p>
<dl class="method">
<dt id="core.opds.TestAnnotatorWithGroup.group_uri">
<code class="descname">group_uri</code><span class="sig-paren">(</span><em>work</em>, <em>license_pool</em>, <em>identifier</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds.html#TestAnnotatorWithGroup.group_uri"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.opds.TestAnnotatorWithGroup.group_uri" title="Permalink to this definition">¶</a></dt>
<dd><p>The URI to be associated with this Work when making it part of
a grouped feed.</p>
<p>By default, this does nothing. See circulation/LibraryAnnotator
for a subclass that does something.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">A 2-tuple (URI, title)</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="core.opds.TestAnnotatorWithGroup.group_uri_for_lane">
<code class="descname">group_uri_for_lane</code><span class="sig-paren">(</span><em>lane</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds.html#TestAnnotatorWithGroup.group_uri_for_lane"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.opds.TestAnnotatorWithGroup.group_uri_for_lane" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="core.opds.TestAnnotatorWithGroup.top_level_title">
<code class="descname">top_level_title</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds.html#TestAnnotatorWithGroup.top_level_title"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.opds.TestAnnotatorWithGroup.top_level_title" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="core.opds.TestUnfulfillableAnnotator">
<em class="property">class </em><code class="descclassname">core.opds.</code><code class="descname">TestUnfulfillableAnnotator</code><a class="reference internal" href="_modules/core/opds.html#TestUnfulfillableAnnotator"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.opds.TestUnfulfillableAnnotator" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.opds.TestAnnotator" title="core.opds.TestAnnotator"><code class="xref py py-class docutils literal notranslate"><span class="pre">core.opds.TestAnnotator</span></code></a></p>
<p>Raise an UnfulfillableWork exception when asked to annotate an entry.</p>
<dl class="method">
<dt id="core.opds.TestUnfulfillableAnnotator.annotate_work_entry">
<code class="descname">annotate_work_entry</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds.html#TestUnfulfillableAnnotator.annotate_work_entry"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.opds.TestUnfulfillableAnnotator.annotate_work_entry" title="Permalink to this definition">¶</a></dt>
<dd><p>Make any custom modifications necessary to integrate this
OPDS entry into the application’s workflow.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Work:</th><td class="field-body"><p class="first">The Work whose OPDS entry is being annotated.</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Active_license_pool:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body"><p class="first">Of all the LicensePools associated with this
Work, the client has expressed interest in this one.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Edition:</th><td class="field-body"><p class="first">The Edition to use when associating bibliographic
metadata with this entry. You will probably not need to use
this, because bibliographic metadata was associated with
the entry when it was created.</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Identifier:</th><td class="field-body"><p class="first">Of all the Identifiers associated with this
Work, the client has expressed interest in this one.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>feed</strong> – An OPDSFeed – the feed in which this entry will be
situated.</li>
<li><strong>entry</strong> – An lxml Element object, the entry that will be added
to the feed.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="exception">
<dt id="core.opds.UnfulfillableWork">
<em class="property">exception </em><code class="descclassname">core.opds.</code><code class="descname">UnfulfillableWork</code><a class="reference internal" href="_modules/core/opds.html#UnfulfillableWork"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.opds.UnfulfillableWork" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">exceptions.Exception</span></code></p>
<p>Raise this exception when it turns out a Work currently cannot be
fulfilled through any means, <em>and</em> this is a problem sufficient to
cancel the creation of an &lt;entry&gt; for the Work.</p>
<p>For commercial works, this might be because the collection
contains no licenses. For open-access works, it might be because
none of the delivery mechanisms could be mirrored.</p>
</dd></dl>

<dl class="class">
<dt id="core.opds.VerboseAnnotator">
<em class="property">class </em><code class="descclassname">core.opds.</code><code class="descname">VerboseAnnotator</code><a class="reference internal" href="_modules/core/opds.html#VerboseAnnotator"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.opds.VerboseAnnotator" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.opds.Annotator" title="core.opds.Annotator"><code class="xref py py-class docutils literal notranslate"><span class="pre">core.opds.Annotator</span></code></a></p>
<p>The default Annotator for machine-to-machine integration.</p>
<p>This Annotator describes all categories and authors for the book
in great detail.</p>
<dl class="classmethod">
<dt id="core.opds.VerboseAnnotator.add_ratings">
<em class="property">classmethod </em><code class="descname">add_ratings</code><span class="sig-paren">(</span><em>work</em>, <em>entry</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds.html#VerboseAnnotator.add_ratings"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.opds.VerboseAnnotator.add_ratings" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a quality rating to the work.</p>
</dd></dl>

<dl class="method">
<dt id="core.opds.VerboseAnnotator.annotate_work_entry">
<code class="descname">annotate_work_entry</code><span class="sig-paren">(</span><em>work</em>, <em>active_license_pool</em>, <em>edition</em>, <em>identifier</em>, <em>feed</em>, <em>entry</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds.html#VerboseAnnotator.annotate_work_entry"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.opds.VerboseAnnotator.annotate_work_entry" title="Permalink to this definition">¶</a></dt>
<dd><p>Make any custom modifications necessary to integrate this
OPDS entry into the application’s workflow.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Work:</th><td class="field-body"><p class="first">The Work whose OPDS entry is being annotated.</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Active_license_pool:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body"><p class="first">Of all the LicensePools associated with this
Work, the client has expressed interest in this one.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Edition:</th><td class="field-body"><p class="first">The Edition to use when associating bibliographic
metadata with this entry. You will probably not need to use
this, because bibliographic metadata was associated with
the entry when it was created.</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Identifier:</th><td class="field-body"><p class="first">Of all the Identifiers associated with this
Work, the client has expressed interest in this one.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>feed</strong> – An OPDSFeed – the feed in which this entry will be
situated.</li>
<li><strong>entry</strong> – An lxml Element object, the entry that will be added
to the feed.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="classmethod">
<dt id="core.opds.VerboseAnnotator.authors">
<em class="property">classmethod </em><code class="descname">authors</code><span class="sig-paren">(</span><em>work</em>, <em>edition</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds.html#VerboseAnnotator.authors"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.opds.VerboseAnnotator.authors" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a detailed &lt;author&gt; tag for each author.</p>
</dd></dl>

<dl class="classmethod">
<dt id="core.opds.VerboseAnnotator.categories">
<em class="property">classmethod </em><code class="descname">categories</code><span class="sig-paren">(</span><em>work</em>, <em>policy=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds.html#VerboseAnnotator.categories"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.opds.VerboseAnnotator.categories" title="Permalink to this definition">¶</a></dt>
<dd><p>Send out _all_ categories for the work.</p>
<p>(So long as the category type has a URI associated with it in
Subject.uri_lookup.)</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>policy</strong> – A PresentationCalculationPolicy to
use when deciding how deep to go when finding equivalent
identifiers for the work.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="classmethod">
<dt id="core.opds.VerboseAnnotator.detailed_author">
<em class="property">classmethod </em><code class="descname">detailed_author</code><span class="sig-paren">(</span><em>contributor</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds.html#VerboseAnnotator.detailed_author"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.opds.VerboseAnnotator.detailed_author" title="Permalink to this definition">¶</a></dt>
<dd><p>Turn a Contributor into a detailed &lt;author&gt; tag.</p>
</dd></dl>

<dl class="attribute">
<dt id="core.opds.VerboseAnnotator.opds_cache_field">
<code class="descname">opds_cache_field</code><em class="property"> = 'verbose_opds_entry'</em><a class="headerlink" href="#core.opds.VerboseAnnotator.opds_cache_field" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>
<div class="section" id="module-core.opds_import">
<span id="core-opds-import-module"></span><h2>core.opds_import module<a class="headerlink" href="#module-core.opds_import" title="Permalink to this headline">¶</a></h2>
<dl class="exception">
<dt id="core.opds_import.AccessNotAuthenticated">
<em class="property">exception </em><code class="descclassname">core.opds_import.</code><code class="descname">AccessNotAuthenticated</code><a class="reference internal" href="_modules/core/opds_import.html#AccessNotAuthenticated"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.opds_import.AccessNotAuthenticated" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">exceptions.Exception</span></code></p>
<p>No authentication is configured for this service</p>
</dd></dl>

<dl class="class">
<dt id="core.opds_import.MetadataWranglerOPDSLookup">
<em class="property">class </em><code class="descclassname">core.opds_import.</code><code class="descname">MetadataWranglerOPDSLookup</code><span class="sig-paren">(</span><em>url</em>, <em>shared_secret=None</em>, <em>collection=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds_import.html#MetadataWranglerOPDSLookup"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.opds_import.MetadataWranglerOPDSLookup" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.opds_import.SimplifiedOPDSLookup" title="core.opds_import.SimplifiedOPDSLookup"><code class="xref py py-class docutils literal notranslate"><span class="pre">core.opds_import.SimplifiedOPDSLookup</span></code></a>, <a class="reference internal" href="#core.selftest.HasSelfTests" title="core.selftest.HasSelfTests"><code class="xref py py-class docutils literal notranslate"><span class="pre">core.selftest.HasSelfTests</span></code></a></p>
<dl class="attribute">
<dt id="core.opds_import.MetadataWranglerOPDSLookup.ADD_ENDPOINT">
<code class="descname">ADD_ENDPOINT</code><em class="property"> = 'add'</em><a class="headerlink" href="#core.opds_import.MetadataWranglerOPDSLookup.ADD_ENDPOINT" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.opds_import.MetadataWranglerOPDSLookup.ADD_WITH_METADATA_ENDPOINT">
<code class="descname">ADD_WITH_METADATA_ENDPOINT</code><em class="property"> = 'add_with_metadata'</em><a class="headerlink" href="#core.opds_import.MetadataWranglerOPDSLookup.ADD_WITH_METADATA_ENDPOINT" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.opds_import.MetadataWranglerOPDSLookup.CANONICALIZE_ENDPOINT">
<code class="descname">CANONICALIZE_ENDPOINT</code><em class="property"> = 'canonical-author-name'</em><a class="headerlink" href="#core.opds_import.MetadataWranglerOPDSLookup.CANONICALIZE_ENDPOINT" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.opds_import.MetadataWranglerOPDSLookup.CARDINALITY">
<code class="descname">CARDINALITY</code><em class="property"> = 1</em><a class="headerlink" href="#core.opds_import.MetadataWranglerOPDSLookup.CARDINALITY" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.opds_import.MetadataWranglerOPDSLookup.METADATA_NEEDED_ENDPOINT">
<code class="descname">METADATA_NEEDED_ENDPOINT</code><em class="property"> = 'metadata_needed'</em><a class="headerlink" href="#core.opds_import.MetadataWranglerOPDSLookup.METADATA_NEEDED_ENDPOINT" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.opds_import.MetadataWranglerOPDSLookup.NAME">
<code class="descname">NAME</code><em class="property"> = l'Library Simplified Metadata Wrangler'</em><a class="headerlink" href="#core.opds_import.MetadataWranglerOPDSLookup.NAME" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.opds_import.MetadataWranglerOPDSLookup.PROTOCOL">
<code class="descname">PROTOCOL</code><em class="property"> = u'Metadata Wrangler'</em><a class="headerlink" href="#core.opds_import.MetadataWranglerOPDSLookup.PROTOCOL" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.opds_import.MetadataWranglerOPDSLookup.REMOVE_ENDPOINT">
<code class="descname">REMOVE_ENDPOINT</code><em class="property"> = 'remove'</em><a class="headerlink" href="#core.opds_import.MetadataWranglerOPDSLookup.REMOVE_ENDPOINT" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.opds_import.MetadataWranglerOPDSLookup.SETTINGS">
<code class="descname">SETTINGS</code><em class="property"> = [{'default': 'http://metadata.librarysimplified.org/', 'format': 'url', 'required': True, 'key': u'url', 'label': l'URL'}]</em><a class="headerlink" href="#core.opds_import.MetadataWranglerOPDSLookup.SETTINGS" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.opds_import.MetadataWranglerOPDSLookup.SITEWIDE">
<code class="descname">SITEWIDE</code><em class="property"> = True</em><a class="headerlink" href="#core.opds_import.MetadataWranglerOPDSLookup.SITEWIDE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.opds_import.MetadataWranglerOPDSLookup.UPDATES_ENDPOINT">
<code class="descname">UPDATES_ENDPOINT</code><em class="property"> = 'updates'</em><a class="headerlink" href="#core.opds_import.MetadataWranglerOPDSLookup.UPDATES_ENDPOINT" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="core.opds_import.MetadataWranglerOPDSLookup.add">
<code class="descname">add</code><span class="sig-paren">(</span><em>identifiers</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds_import.html#MetadataWranglerOPDSLookup.add"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.opds_import.MetadataWranglerOPDSLookup.add" title="Permalink to this definition">¶</a></dt>
<dd><p>Add items to an authenticated Metadata Wrangler Collection</p>
</dd></dl>

<dl class="method">
<dt id="core.opds_import.MetadataWranglerOPDSLookup.add_args">
<code class="descname">add_args</code><span class="sig-paren">(</span><em>url</em>, <em>arg_string</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds_import.html#MetadataWranglerOPDSLookup.add_args"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.opds_import.MetadataWranglerOPDSLookup.add_args" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="core.opds_import.MetadataWranglerOPDSLookup.add_with_metadata">
<code class="descname">add_with_metadata</code><span class="sig-paren">(</span><em>feed</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds_import.html#MetadataWranglerOPDSLookup.add_with_metadata"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.opds_import.MetadataWranglerOPDSLookup.add_with_metadata" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a feed of items with metadata to an authenticated Metadata Wrangler Collection.</p>
</dd></dl>

<dl class="attribute">
<dt id="core.opds_import.MetadataWranglerOPDSLookup.authenticated">
<code class="descname">authenticated</code><a class="headerlink" href="#core.opds_import.MetadataWranglerOPDSLookup.authenticated" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.opds_import.MetadataWranglerOPDSLookup.authorization">
<code class="descname">authorization</code><a class="headerlink" href="#core.opds_import.MetadataWranglerOPDSLookup.authorization" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="core.opds_import.MetadataWranglerOPDSLookup.canonicalize_author_name">
<code class="descname">canonicalize_author_name</code><span class="sig-paren">(</span><em>identifier</em>, <em>working_display_name</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds_import.html#MetadataWranglerOPDSLookup.canonicalize_author_name"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.opds_import.MetadataWranglerOPDSLookup.canonicalize_author_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Attempt to find the canonical name for the author of a book.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>identifier</strong> – an ISBN-type Identifier.</li>
<li><strong>working_display_name</strong> – The display name of the author
(i.e. the name format human being used as opposed to the name
that goes into library records).</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="classmethod">
<dt id="core.opds_import.MetadataWranglerOPDSLookup.external_integration">
<em class="property">classmethod </em><code class="descname">external_integration</code><span class="sig-paren">(</span><em>_db</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds_import.html#MetadataWranglerOPDSLookup.external_integration"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.opds_import.MetadataWranglerOPDSLookup.external_integration" title="Permalink to this definition">¶</a></dt>
<dd><p>Locate the ExternalIntegration associated with this object.
The status of the self-tests will be stored as a ConfigurationSetting
on this ExternalIntegration.</p>
<p>By default, there is no way to get from an object to its
ExternalIntegration, and self-test status will not be stored.</p>
</dd></dl>

<dl class="classmethod">
<dt id="core.opds_import.MetadataWranglerOPDSLookup.from_config">
<em class="property">classmethod </em><code class="descname">from_config</code><span class="sig-paren">(</span><em>_db</em>, <em>collection=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds_import.html#MetadataWranglerOPDSLookup.from_config"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.opds_import.MetadataWranglerOPDSLookup.from_config" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="core.opds_import.MetadataWranglerOPDSLookup.get_collection_url">
<code class="descname">get_collection_url</code><span class="sig-paren">(</span><em>endpoint</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds_import.html#MetadataWranglerOPDSLookup.get_collection_url"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.opds_import.MetadataWranglerOPDSLookup.get_collection_url" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.opds_import.MetadataWranglerOPDSLookup.lookup_endpoint">
<code class="descname">lookup_endpoint</code><a class="headerlink" href="#core.opds_import.MetadataWranglerOPDSLookup.lookup_endpoint" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="core.opds_import.MetadataWranglerOPDSLookup.metadata_needed">
<code class="descname">metadata_needed</code><span class="sig-paren">(</span><em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds_import.html#MetadataWranglerOPDSLookup.metadata_needed"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.opds_import.MetadataWranglerOPDSLookup.metadata_needed" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a feed of items that need additional metadata to be processed
by the Metadata Wrangler.</p>
</dd></dl>

<dl class="method">
<dt id="core.opds_import.MetadataWranglerOPDSLookup.remove">
<code class="descname">remove</code><span class="sig-paren">(</span><em>identifiers</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds_import.html#MetadataWranglerOPDSLookup.remove"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.opds_import.MetadataWranglerOPDSLookup.remove" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove items from an authenticated Metadata Wrangler Collection</p>
</dd></dl>

<dl class="method">
<dt id="core.opds_import.MetadataWranglerOPDSLookup.updates">
<code class="descname">updates</code><span class="sig-paren">(</span><em>last_update_time</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds_import.html#MetadataWranglerOPDSLookup.updates"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.opds_import.MetadataWranglerOPDSLookup.updates" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve updated items from an authenticated Metadata
Wrangler Collection</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>last_update_time</strong> – DateTime representing the last time
an update was fetched. May be None.</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="core.opds_import.MockMetadataWranglerOPDSLookup">
<em class="property">class </em><code class="descclassname">core.opds_import.</code><code class="descname">MockMetadataWranglerOPDSLookup</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds_import.html#MockMetadataWranglerOPDSLookup"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.opds_import.MockMetadataWranglerOPDSLookup" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.opds_import.MockSimplifiedOPDSLookup" title="core.opds_import.MockSimplifiedOPDSLookup"><code class="xref py py-class docutils literal notranslate"><span class="pre">core.opds_import.MockSimplifiedOPDSLookup</span></code></a>, <a class="reference internal" href="#core.opds_import.MetadataWranglerOPDSLookup" title="core.opds_import.MetadataWranglerOPDSLookup"><code class="xref py py-class docutils literal notranslate"><span class="pre">core.opds_import.MetadataWranglerOPDSLookup</span></code></a></p>
</dd></dl>

<dl class="class">
<dt id="core.opds_import.MockSimplifiedOPDSLookup">
<em class="property">class </em><code class="descclassname">core.opds_import.</code><code class="descname">MockSimplifiedOPDSLookup</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds_import.html#MockSimplifiedOPDSLookup"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.opds_import.MockSimplifiedOPDSLookup" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.opds_import.SimplifiedOPDSLookup" title="core.opds_import.SimplifiedOPDSLookup"><code class="xref py py-class docutils literal notranslate"><span class="pre">core.opds_import.SimplifiedOPDSLookup</span></code></a></p>
<dl class="method">
<dt id="core.opds_import.MockSimplifiedOPDSLookup.queue_response">
<code class="descname">queue_response</code><span class="sig-paren">(</span><em>status_code</em>, <em>headers={}</em>, <em>content=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds_import.html#MockSimplifiedOPDSLookup.queue_response"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.opds_import.MockSimplifiedOPDSLookup.queue_response" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="core.opds_import.OPDSImportMonitor">
<em class="property">class </em><code class="descclassname">core.opds_import.</code><code class="descname">OPDSImportMonitor</code><span class="sig-paren">(</span><em>_db</em>, <em>collection</em>, <em>import_class</em>, <em>force_reimport=False</em>, <em>**import_class_kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds_import.html#OPDSImportMonitor"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.opds_import.OPDSImportMonitor" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.monitor.CollectionMonitor" title="core.monitor.CollectionMonitor"><code class="xref py py-class docutils literal notranslate"><span class="pre">core.monitor.CollectionMonitor</span></code></a>, <a class="reference internal" href="#core.selftest.HasSelfTests" title="core.selftest.HasSelfTests"><code class="xref py py-class docutils literal notranslate"><span class="pre">core.selftest.HasSelfTests</span></code></a></p>
<p>Periodically monitor a Collection’s OPDS archive feed and import
every title it mentions.</p>
<dl class="attribute">
<dt id="core.opds_import.OPDSImportMonitor.DEFAULT_START_TIME">
<code class="descname">DEFAULT_START_TIME</code><em class="property"> = &lt;object object&gt;</em><a class="headerlink" href="#core.opds_import.OPDSImportMonitor.DEFAULT_START_TIME" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.opds_import.OPDSImportMonitor.PROTOCOL">
<code class="descname">PROTOCOL</code><em class="property"> = u'OPDS Import'</em><a class="headerlink" href="#core.opds_import.OPDSImportMonitor.PROTOCOL" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.opds_import.OPDSImportMonitor.SERVICE_NAME">
<code class="descname">SERVICE_NAME</code><em class="property"> = 'OPDS Import Monitor'</em><a class="headerlink" href="#core.opds_import.OPDSImportMonitor.SERVICE_NAME" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="core.opds_import.OPDSImportMonitor.data_source">
<code class="descname">data_source</code><span class="sig-paren">(</span><em>collection</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds_import.html#OPDSImportMonitor.data_source"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.opds_import.OPDSImportMonitor.data_source" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the data source name for the given collection.</p>
<p>By default, this URL is stored as a setting on the collection, but
subclasses may hard-code it.</p>
</dd></dl>

<dl class="method">
<dt id="core.opds_import.OPDSImportMonitor.external_integration">
<code class="descname">external_integration</code><span class="sig-paren">(</span><em>_db</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds_import.html#OPDSImportMonitor.external_integration"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.opds_import.OPDSImportMonitor.external_integration" title="Permalink to this definition">¶</a></dt>
<dd><p>Locate the ExternalIntegration associated with this object.
The status of the self-tests will be stored as a ConfigurationSetting
on this ExternalIntegration.</p>
<p>By default, there is no way to get from an object to its
ExternalIntegration, and self-test status will not be stored.</p>
</dd></dl>

<dl class="method">
<dt id="core.opds_import.OPDSImportMonitor.feed_contains_new_data">
<code class="descname">feed_contains_new_data</code><span class="sig-paren">(</span><em>feed</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds_import.html#OPDSImportMonitor.feed_contains_new_data"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.opds_import.OPDSImportMonitor.feed_contains_new_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Does the given feed contain any entries that haven’t been imported
yet?</p>
</dd></dl>

<dl class="method">
<dt id="core.opds_import.OPDSImportMonitor.follow_one_link">
<code class="descname">follow_one_link</code><span class="sig-paren">(</span><em>url</em>, <em>do_get=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds_import.html#OPDSImportMonitor.follow_one_link"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.opds_import.OPDSImportMonitor.follow_one_link" title="Permalink to this definition">¶</a></dt>
<dd><p>Download a representation of a URL and extract the useful
information.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">A 2-tuple (next_links, feed). <cite>next_links</cite> is a list of
additional links that need to be followed. <cite>feed</cite> is the content
that needs to be imported.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="core.opds_import.OPDSImportMonitor.identifier_needs_import">
<code class="descname">identifier_needs_import</code><span class="sig-paren">(</span><em>identifier</em>, <em>last_updated_remote</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds_import.html#OPDSImportMonitor.identifier_needs_import"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.opds_import.OPDSImportMonitor.identifier_needs_import" title="Permalink to this definition">¶</a></dt>
<dd><p>Does the remote side have new information about this Identifier?</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>identifier</strong> – An Identifier.</li>
<li><strong>last_update_remote</strong> – The last time the remote side updated
the OPDS entry for this Identifier.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="core.opds_import.OPDSImportMonitor.import_one_feed">
<code class="descname">import_one_feed</code><span class="sig-paren">(</span><em>feed</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds_import.html#OPDSImportMonitor.import_one_feed"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.opds_import.OPDSImportMonitor.import_one_feed" title="Permalink to this definition">¶</a></dt>
<dd><p>Import every book mentioned in an OPDS feed.</p>
</dd></dl>

<dl class="method">
<dt id="core.opds_import.OPDSImportMonitor.opds_url">
<code class="descname">opds_url</code><span class="sig-paren">(</span><em>collection</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds_import.html#OPDSImportMonitor.opds_url"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.opds_import.OPDSImportMonitor.opds_url" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the OPDS import URL for the given collection.</p>
<p>By default, this URL is stored as the external account ID, but
subclasses may override this.</p>
</dd></dl>

<dl class="method">
<dt id="core.opds_import.OPDSImportMonitor.run_once">
<code class="descname">run_once</code><span class="sig-paren">(</span><em>progress_ignore</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds_import.html#OPDSImportMonitor.run_once"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.opds_import.OPDSImportMonitor.run_once" title="Permalink to this definition">¶</a></dt>
<dd><p>Do the actual work of the Monitor.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>progress</strong> – A TimestampData representing the
work done by the Monitor up to this point.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">A TimestampData representing how you want the
Monitor’s entry in the <cite>timestamps</cite> table to look like
from this point on.  NOTE: Modifying the incoming
<cite>progress</cite> and returning it is generally a bad idea,
because the incoming <cite>progress</cite> is full of old
data. Instead, return a new TimestampData containing data
for only the fields you want to set.</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="core.opds_import.OPDSImporter">
<em class="property">class </em><code class="descclassname">core.opds_import.</code><code class="descname">OPDSImporter</code><span class="sig-paren">(</span><em>_db</em>, <em>collection</em>, <em>data_source_name=None</em>, <em>identifier_mapping=None</em>, <em>http_get=None</em>, <em>metadata_client=None</em>, <em>content_modifier=None</em>, <em>map_from_collection=None</em>, <em>mirrors=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds_import.html#OPDSImporter"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.opds_import.OPDSImporter" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Imports editions and license pools from an OPDS feed.
Creates Edition, LicensePool and Work rows in the database, if those
don’t already exist.</p>
<p>Should be used when a circulation server asks for data from
our internal content server, and also when our content server asks for data
from external content servers.</p>
<dl class="attribute">
<dt id="core.opds_import.OPDSImporter.BASE_SETTINGS">
<code class="descname">BASE_SETTINGS</code><em class="property"> = [{'format': 'url', 'required': True, 'key': u'external_account_id', 'label': l'URL'}, {'required': True, 'key': u'data_source', 'label': l'Data source name'}]</em><a class="headerlink" href="#core.opds_import.OPDSImporter.BASE_SETTINGS" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.opds_import.OPDSImporter.COULD_NOT_CREATE_LICENSE_POOL">
<code class="descname">COULD_NOT_CREATE_LICENSE_POOL</code><em class="property"> = 'No existing license pool for this identifier and no way of creating one.'</em><a class="headerlink" href="#core.opds_import.OPDSImporter.COULD_NOT_CREATE_LICENSE_POOL" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.opds_import.OPDSImporter.DESCRIPTION">
<code class="descname">DESCRIPTION</code><em class="property"> = l'Import books from a publicly-accessible OPDS feed.'</em><a class="headerlink" href="#core.opds_import.OPDSImporter.DESCRIPTION" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.opds_import.OPDSImporter.NAME">
<code class="descname">NAME</code><em class="property"> = u'OPDS Import'</em><a class="headerlink" href="#core.opds_import.OPDSImporter.NAME" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.opds_import.OPDSImporter.PARSER_CLASS">
<code class="descname">PARSER_CLASS</code><a class="headerlink" href="#core.opds_import.OPDSImporter.PARSER_CLASS" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <a class="reference internal" href="#core.opds_import.OPDSXMLParser" title="core.opds_import.OPDSXMLParser"><code class="xref py py-class docutils literal notranslate"><span class="pre">OPDSXMLParser</span></code></a></p>
</dd></dl>

<dl class="attribute">
<dt id="core.opds_import.OPDSImporter.SETTINGS">
<code class="descname">SETTINGS</code><em class="property"> = [{'format': 'url', 'required': True, 'key': u'external_account_id', 'label': l'URL'}, {'required': True, 'key': u'data_source', 'label': l'Data source name'}, {'description': l'If HTTP Basic authentication is required to access the OPDS feed (it usually isn't), enter the username here.', 'key': u'username', 'label': l'Username'}, {'description': l'If HTTP Basic authentication is required to access the OPDS feed (it usually isn't), enter the password here.', 'key': u'password', 'label': l'Password'}]</em><a class="headerlink" href="#core.opds_import.OPDSImporter.SETTINGS" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.opds_import.OPDSImporter.SUCCESS_STATUS_CODES">
<code class="descname">SUCCESS_STATUS_CODES</code><em class="property"> = None</em><a class="headerlink" href="#core.opds_import.OPDSImporter.SUCCESS_STATUS_CODES" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="core.opds_import.OPDSImporter.assert_importable_content">
<code class="descname">assert_importable_content</code><span class="sig-paren">(</span><em>feed</em>, <em>feed_url</em>, <em>max_get_attempts=5</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds_import.html#OPDSImporter.assert_importable_content"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.opds_import.OPDSImporter.assert_importable_content" title="Permalink to this definition">¶</a></dt>
<dd><p>Raise an exception if the given feed contains nothing that can,
even theoretically, be turned into a LicensePool.</p>
<p>By default, this means the feed must link to open-access content
that can actually be retrieved.</p>
</dd></dl>

<dl class="method">
<dt id="core.opds_import.OPDSImporter.build_identifier_mapping">
<code class="descname">build_identifier_mapping</code><span class="sig-paren">(</span><em>external_urns</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds_import.html#OPDSImporter.build_identifier_mapping"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.opds_import.OPDSImporter.build_identifier_mapping" title="Permalink to this definition">¶</a></dt>
<dd><p>Uses the given Collection and a list of URNs to reverse
engineer an identifier mapping.</p>
<p>NOTE: It would be better if .identifier_mapping weren’t
instance data, since a single OPDSImporter might import
multiple pages of a feed. However, the code as written should
work.</p>
</dd></dl>

<dl class="classmethod">
<dt id="core.opds_import.OPDSImporter.combine">
<em class="property">classmethod </em><code class="descname">combine</code><span class="sig-paren">(</span><em>d1</em>, <em>d2</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds_import.html#OPDSImporter.combine"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.opds_import.OPDSImporter.combine" title="Permalink to this definition">¶</a></dt>
<dd><p>Combine two dictionaries that can be used as keyword arguments to
the Metadata constructor.</p>
</dd></dl>

<dl class="classmethod">
<dt id="core.opds_import.OPDSImporter.consolidate_links">
<em class="property">classmethod </em><code class="descname">consolidate_links</code><span class="sig-paren">(</span><em>links</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds_import.html#OPDSImporter.consolidate_links"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.opds_import.OPDSImporter.consolidate_links" title="Permalink to this definition">¶</a></dt>
<dd><p>Try to match up links with their thumbnails.</p>
<p>If link n is an image and link n+1 is a thumbnail, then the
thumbnail is assumed to be the thumbnail of the image.</p>
<p>Similarly if link n is a thumbnail and link n+1 is an image.</p>
</dd></dl>

<dl class="classmethod">
<dt id="core.opds_import.OPDSImporter.coveragefailure_from_message">
<em class="property">classmethod </em><code class="descname">coveragefailure_from_message</code><span class="sig-paren">(</span><em>data_source</em>, <em>message</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds_import.html#OPDSImporter.coveragefailure_from_message"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.opds_import.OPDSImporter.coveragefailure_from_message" title="Permalink to this definition">¶</a></dt>
<dd><p>Turn a &lt;simplified:message&gt; tag into a CoverageFailure.</p>
</dd></dl>

<dl class="classmethod">
<dt id="core.opds_import.OPDSImporter.coveragefailures_from_messages">
<em class="property">classmethod </em><code class="descname">coveragefailures_from_messages</code><span class="sig-paren">(</span><em>data_source</em>, <em>parser</em>, <em>feed_tag</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds_import.html#OPDSImporter.coveragefailures_from_messages"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.opds_import.OPDSImporter.coveragefailures_from_messages" title="Permalink to this definition">¶</a></dt>
<dd><p>Extract CoverageFailure objects from a parsed OPDS document. This
allows us to determine the fate of books which could not
become &lt;entry&gt; tags.</p>
</dd></dl>

<dl class="classmethod">
<dt id="core.opds_import.OPDSImporter.data_detail_for_feedparser_entry">
<em class="property">classmethod </em><code class="descname">data_detail_for_feedparser_entry</code><span class="sig-paren">(</span><em>entry</em>, <em>data_source</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds_import.html#OPDSImporter.data_detail_for_feedparser_entry"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.opds_import.OPDSImporter.data_detail_for_feedparser_entry" title="Permalink to this definition">¶</a></dt>
<dd><p>Turn an entry dictionary created by feedparser into dictionaries of data
that can be used as keyword arguments to the Metadata and CirculationData constructors.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">A 3-tuple (identifier, kwargs for Metadata constructor, failure)</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="core.opds_import.OPDSImporter.data_source">
<code class="descname">data_source</code><a class="headerlink" href="#core.opds_import.OPDSImporter.data_source" title="Permalink to this definition">¶</a></dt>
<dd><p>Look up or create a DataSource object representing the
source of this OPDS feed.</p>
</dd></dl>

<dl class="classmethod">
<dt id="core.opds_import.OPDSImporter.detail_for_elementtree_entry">
<em class="property">classmethod </em><code class="descname">detail_for_elementtree_entry</code><span class="sig-paren">(</span><em>parser</em>, <em>entry_tag</em>, <em>data_source</em>, <em>feed_url=None</em>, <em>do_get=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds_import.html#OPDSImporter.detail_for_elementtree_entry"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.opds_import.OPDSImporter.detail_for_elementtree_entry" title="Permalink to this definition">¶</a></dt>
<dd><p>Turn an &lt;atom:entry&gt; tag into a dictionary of metadata that can be
used as keyword arguments to the Metadata contructor.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">A 2-tuple (identifier, kwargs)</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="classmethod">
<dt id="core.opds_import.OPDSImporter.extract_contributor">
<em class="property">classmethod </em><code class="descname">extract_contributor</code><span class="sig-paren">(</span><em>parser</em>, <em>author_tag</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds_import.html#OPDSImporter.extract_contributor"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.opds_import.OPDSImporter.extract_contributor" title="Permalink to this definition">¶</a></dt>
<dd><p>Turn an &lt;atom:author&gt; tag into a ContributorData object.</p>
</dd></dl>

<dl class="classmethod">
<dt id="core.opds_import.OPDSImporter.extract_data_from_feedparser">
<em class="property">classmethod </em><code class="descname">extract_data_from_feedparser</code><span class="sig-paren">(</span><em>feed</em>, <em>data_source</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds_import.html#OPDSImporter.extract_data_from_feedparser"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.opds_import.OPDSImporter.extract_data_from_feedparser" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="core.opds_import.OPDSImporter.extract_feed_data">
<code class="descname">extract_feed_data</code><span class="sig-paren">(</span><em>feed</em>, <em>feed_url=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds_import.html#OPDSImporter.extract_feed_data"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.opds_import.OPDSImporter.extract_feed_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Turn an OPDS feed into lists of Metadata and CirculationData objects,
with associated messages and next_links.</p>
</dd></dl>

<dl class="classmethod">
<dt id="core.opds_import.OPDSImporter.extract_identifier">
<em class="property">classmethod </em><code class="descname">extract_identifier</code><span class="sig-paren">(</span><em>identifier_tag</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds_import.html#OPDSImporter.extract_identifier"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.opds_import.OPDSImporter.extract_identifier" title="Permalink to this definition">¶</a></dt>
<dd><p>Turn a &lt;dcterms:identifier&gt; tag into an IdentifierData object.</p>
</dd></dl>

<dl class="classmethod">
<dt id="core.opds_import.OPDSImporter.extract_last_update_dates">
<em class="property">classmethod </em><code class="descname">extract_last_update_dates</code><span class="sig-paren">(</span><em>feed</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds_import.html#OPDSImporter.extract_last_update_dates"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.opds_import.OPDSImporter.extract_last_update_dates" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="classmethod">
<dt id="core.opds_import.OPDSImporter.extract_link">
<em class="property">classmethod </em><code class="descname">extract_link</code><span class="sig-paren">(</span><em>link_tag</em>, <em>feed_url=None</em>, <em>entry_rights_uri=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds_import.html#OPDSImporter.extract_link"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.opds_import.OPDSImporter.extract_link" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert a &lt;link&gt; tag into a LinkData object.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>feed_url</strong> – The URL to the enclosing feed, for use in resolving
relative links.</li>
<li><strong>entry_rights_uri</strong> – A URI describing the rights advertised
in the entry. Unless this specific link says otherwise, we
will assume that the representation on the other end of the link
if made available on these terms.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="classmethod">
<dt id="core.opds_import.OPDSImporter.extract_measurement">
<em class="property">classmethod </em><code class="descname">extract_measurement</code><span class="sig-paren">(</span><em>rating_tag</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds_import.html#OPDSImporter.extract_measurement"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.opds_import.OPDSImporter.extract_measurement" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="classmethod">
<dt id="core.opds_import.OPDSImporter.extract_medium">
<em class="property">classmethod </em><code class="descname">extract_medium</code><span class="sig-paren">(</span><em>entry_tag</em>, <em>default=u'Book'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds_import.html#OPDSImporter.extract_medium"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.opds_import.OPDSImporter.extract_medium" title="Permalink to this definition">¶</a></dt>
<dd><p>Derive a value for Edition.medium from schema:additionalType or
from a &lt;dcterms:format&gt; subtag.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>entry_tag</strong> – A &lt;atom:entry&gt; tag.</li>
<li><strong>default</strong> – The value to use if nothing is found.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="classmethod">
<dt id="core.opds_import.OPDSImporter.extract_messages">
<em class="property">classmethod </em><code class="descname">extract_messages</code><span class="sig-paren">(</span><em>parser</em>, <em>feed_tag</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds_import.html#OPDSImporter.extract_messages"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.opds_import.OPDSImporter.extract_messages" title="Permalink to this definition">¶</a></dt>
<dd><p>Extract &lt;simplified:message&gt; tags from an OPDS feed and convert
them into OPDSMessage objects.</p>
</dd></dl>

<dl class="classmethod">
<dt id="core.opds_import.OPDSImporter.extract_metadata_from_elementtree">
<em class="property">classmethod </em><code class="descname">extract_metadata_from_elementtree</code><span class="sig-paren">(</span><em>feed</em>, <em>data_source</em>, <em>feed_url=None</em>, <em>do_get=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds_import.html#OPDSImporter.extract_metadata_from_elementtree"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.opds_import.OPDSImporter.extract_metadata_from_elementtree" title="Permalink to this definition">¶</a></dt>
<dd><p>Parse the OPDS as XML and extract all author and subject
information, as well as ratings and medium.</p>
<p>All the stuff that Feedparser can’t handle so we have to use lxml.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">a dictionary mapping IDs to dictionaries. The inner
dictionary can be used as keyword arguments to the Metadata
constructor.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="classmethod">
<dt id="core.opds_import.OPDSImporter.extract_next_links">
<em class="property">classmethod </em><code class="descname">extract_next_links</code><span class="sig-paren">(</span><em>feed</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds_import.html#OPDSImporter.extract_next_links"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.opds_import.OPDSImporter.extract_next_links" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="classmethod">
<dt id="core.opds_import.OPDSImporter.extract_series">
<em class="property">classmethod </em><code class="descname">extract_series</code><span class="sig-paren">(</span><em>series_tag</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds_import.html#OPDSImporter.extract_series"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.opds_import.OPDSImporter.extract_series" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="classmethod">
<dt id="core.opds_import.OPDSImporter.extract_subject">
<em class="property">classmethod </em><code class="descname">extract_subject</code><span class="sig-paren">(</span><em>parser</em>, <em>category_tag</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds_import.html#OPDSImporter.extract_subject"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.opds_import.OPDSImporter.extract_subject" title="Permalink to this definition">¶</a></dt>
<dd><p>Turn an &lt;atom:category&gt; tag into a SubjectData object.</p>
</dd></dl>

<dl class="classmethod">
<dt id="core.opds_import.OPDSImporter.get_medium_from_links">
<em class="property">classmethod </em><code class="descname">get_medium_from_links</code><span class="sig-paren">(</span><em>links</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds_import.html#OPDSImporter.get_medium_from_links"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.opds_import.OPDSImporter.get_medium_from_links" title="Permalink to this definition">¶</a></dt>
<dd><p>Get medium if derivable from information in an acquisition link.</p>
</dd></dl>

<dl class="method">
<dt id="core.opds_import.OPDSImporter.handle_failure">
<code class="descname">handle_failure</code><span class="sig-paren">(</span><em>urn</em>, <em>failure</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds_import.html#OPDSImporter.handle_failure"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.opds_import.OPDSImporter.handle_failure" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert a URN and a failure message that came in through
an OPDS feed into an Identifier and a CoverageFailure object.</p>
<p>The Identifier may not be the one designated by <cite>urn</cite> (if it’s
found in self.identifier_mapping) and the ‘failure’ may turn out not
to be a CoverageFailure at all – if it’s an Identifier, that means
that what a normal OPDSImporter would consider ‘failure’ is
considered success.</p>
</dd></dl>

<dl class="method">
<dt id="core.opds_import.OPDSImporter.import_edition_from_metadata">
<code class="descname">import_edition_from_metadata</code><span class="sig-paren">(</span><em>metadata</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds_import.html#OPDSImporter.import_edition_from_metadata"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.opds_import.OPDSImporter.import_edition_from_metadata" title="Permalink to this definition">¶</a></dt>
<dd><p>For the passed-in Metadata object, see if can find or create an Edition
in the database. Also create a LicensePool if the Metadata has
CirculationData in it.</p>
</dd></dl>

<dl class="method">
<dt id="core.opds_import.OPDSImporter.import_from_feed">
<code class="descname">import_from_feed</code><span class="sig-paren">(</span><em>feed</em>, <em>feed_url=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds_import.html#OPDSImporter.import_from_feed"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.opds_import.OPDSImporter.import_from_feed" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="classmethod">
<dt id="core.opds_import.OPDSImporter.last_update_date_for_feedparser_entry">
<em class="property">classmethod </em><code class="descname">last_update_date_for_feedparser_entry</code><span class="sig-paren">(</span><em>entry</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds_import.html#OPDSImporter.last_update_date_for_feedparser_entry"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.opds_import.OPDSImporter.last_update_date_for_feedparser_entry" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="classmethod">
<dt id="core.opds_import.OPDSImporter.make_link_data">
<em class="property">classmethod </em><code class="descname">make_link_data</code><span class="sig-paren">(</span><em>rel</em>, <em>href=None</em>, <em>media_type=None</em>, <em>rights_uri=None</em>, <em>content=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds_import.html#OPDSImporter.make_link_data"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.opds_import.OPDSImporter.make_link_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Hook method for creating a LinkData object.</p>
<p>Intended to be overridden in subclasses.</p>
</dd></dl>

<dl class="classmethod">
<dt id="core.opds_import.OPDSImporter.rights_uri">
<em class="property">classmethod </em><code class="descname">rights_uri</code><span class="sig-paren">(</span><em>rights_string</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds_import.html#OPDSImporter.rights_uri"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.opds_import.OPDSImporter.rights_uri" title="Permalink to this definition">¶</a></dt>
<dd><p>Determine the URI that best encapsulates the rights status of
the downloads associated with this book.</p>
</dd></dl>

<dl class="classmethod">
<dt id="core.opds_import.OPDSImporter.rights_uri_from_entry_tag">
<em class="property">classmethod </em><code class="descname">rights_uri_from_entry_tag</code><span class="sig-paren">(</span><em>entry</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds_import.html#OPDSImporter.rights_uri_from_entry_tag"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.opds_import.OPDSImporter.rights_uri_from_entry_tag" title="Permalink to this definition">¶</a></dt>
<dd><p>Extract a rights string from an lxml &lt;entry&gt; tag.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">A rights URI.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="classmethod">
<dt id="core.opds_import.OPDSImporter.rights_uri_from_feedparser_entry">
<em class="property">classmethod </em><code class="descname">rights_uri_from_feedparser_entry</code><span class="sig-paren">(</span><em>entry</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds_import.html#OPDSImporter.rights_uri_from_feedparser_entry"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.opds_import.OPDSImporter.rights_uri_from_feedparser_entry" title="Permalink to this definition">¶</a></dt>
<dd><p>Extract a rights URI from a parsed feedparser entry.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">A rights URI.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="core.opds_import.OPDSImporter.update_work_for_edition">
<code class="descname">update_work_for_edition</code><span class="sig-paren">(</span><em>edition</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds_import.html#OPDSImporter.update_work_for_edition"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.opds_import.OPDSImporter.update_work_for_edition" title="Permalink to this definition">¶</a></dt>
<dd><p>If possible, ensure that there is a presentation-ready Work for the
given edition’s primary identifier.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="core.opds_import.OPDSXMLParser">
<em class="property">class </em><code class="descclassname">core.opds_import.</code><code class="descname">OPDSXMLParser</code><a class="reference internal" href="_modules/core/opds_import.html#OPDSXMLParser"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.opds_import.OPDSXMLParser" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="core.util.html#core.util.xmlparser.XMLParser" title="core.util.xmlparser.XMLParser"><code class="xref py py-class docutils literal notranslate"><span class="pre">core.util.xmlparser.XMLParser</span></code></a></p>
<dl class="attribute">
<dt id="core.opds_import.OPDSXMLParser.NAMESPACES">
<code class="descname">NAMESPACES</code><em class="property"> = {'app': 'http://www.w3.org/2007/app', 'atom': 'http://www.w3.org/2005/Atom', 'dc': 'http://purl.org/dc/elements/1.1/', 'dcterms': 'http://purl.org/dc/terms/', 'drm': 'http://librarysimplified.org/terms/drm', 'opds': 'http://opds-spec.org/2010/catalog', 'schema': 'http://schema.org/', 'simplified': 'http://librarysimplified.org/terms/'}</em><a class="headerlink" href="#core.opds_import.OPDSXMLParser.NAMESPACES" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="core.opds_import.SimplifiedOPDSLookup">
<em class="property">class </em><code class="descclassname">core.opds_import.</code><code class="descname">SimplifiedOPDSLookup</code><span class="sig-paren">(</span><em>base_url</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds_import.html#SimplifiedOPDSLookup"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.opds_import.SimplifiedOPDSLookup" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Tiny integration class for the Simplified ‘lookup’ protocol.</p>
<dl class="attribute">
<dt id="core.opds_import.SimplifiedOPDSLookup.LOOKUP_ENDPOINT">
<code class="descname">LOOKUP_ENDPOINT</code><em class="property"> = 'lookup'</em><a class="headerlink" href="#core.opds_import.SimplifiedOPDSLookup.LOOKUP_ENDPOINT" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="classmethod">
<dt id="core.opds_import.SimplifiedOPDSLookup.check_content_type">
<em class="property">classmethod </em><code class="descname">check_content_type</code><span class="sig-paren">(</span><em>response</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds_import.html#SimplifiedOPDSLookup.check_content_type"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.opds_import.SimplifiedOPDSLookup.check_content_type" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="classmethod">
<dt id="core.opds_import.SimplifiedOPDSLookup.from_protocol">
<em class="property">classmethod </em><code class="descname">from_protocol</code><span class="sig-paren">(</span><em>_db</em>, <em>protocol</em>, <em>goal=u'licenses'</em>, <em>library=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds_import.html#SimplifiedOPDSLookup.from_protocol"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.opds_import.SimplifiedOPDSLookup.from_protocol" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="core.opds_import.SimplifiedOPDSLookup.lookup">
<code class="descname">lookup</code><span class="sig-paren">(</span><em>identifiers</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds_import.html#SimplifiedOPDSLookup.lookup"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.opds_import.SimplifiedOPDSLookup.lookup" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve an OPDS feed with metadata for the given identifiers.</p>
</dd></dl>

<dl class="attribute">
<dt id="core.opds_import.SimplifiedOPDSLookup.lookup_endpoint">
<code class="descname">lookup_endpoint</code><a class="headerlink" href="#core.opds_import.SimplifiedOPDSLookup.lookup_endpoint" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="core.opds_import.SimplifiedOPDSLookup.urn_args">
<code class="descname">urn_args</code><span class="sig-paren">(</span><em>identifiers</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opds_import.html#SimplifiedOPDSLookup.urn_args"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.opds_import.SimplifiedOPDSLookup.urn_args" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>
<div class="section" id="module-core.opensearch">
<span id="core-opensearch-module"></span><h2>core.opensearch module<a class="headerlink" href="#module-core.opensearch" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="core.opensearch.OpenSearchDocument">
<em class="property">class </em><code class="descclassname">core.opensearch.</code><code class="descname">OpenSearchDocument</code><a class="reference internal" href="_modules/core/opensearch.html#OpenSearchDocument"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.opensearch.OpenSearchDocument" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Generates OpenSearch documents.</p>
<dl class="attribute">
<dt id="core.opensearch.OpenSearchDocument.TEMPLATE">
<code class="descname">TEMPLATE</code><em class="property"> = '&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n &lt;OpenSearchDescription xmlns=&quot;http://a9.com/-/spec/opensearch/1.1/&quot;&gt;\n   &lt;ShortName&gt;%(name)s&lt;/ShortName&gt;\n   &lt;Description&gt;%(description)s&lt;/Description&gt;\n   &lt;Tags&gt;%(tags)s&lt;/Tags&gt;\n   &lt;Url type=&quot;application/atom+xml;profile=opds-catalog&quot; template=&quot;%(url_template)s&quot;/&gt;\n &lt;/OpenSearchDescription&gt;'</em><a class="headerlink" href="#core.opensearch.OpenSearchDocument.TEMPLATE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="classmethod">
<dt id="core.opensearch.OpenSearchDocument.escape_entities">
<em class="property">classmethod </em><code class="descname">escape_entities</code><span class="sig-paren">(</span><em>info</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opensearch.html#OpenSearchDocument.escape_entities"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.opensearch.OpenSearchDocument.escape_entities" title="Permalink to this definition">¶</a></dt>
<dd><p>Escape ampersands in the given dictionary’s values.</p>
</dd></dl>

<dl class="classmethod">
<dt id="core.opensearch.OpenSearchDocument.for_lane">
<em class="property">classmethod </em><code class="descname">for_lane</code><span class="sig-paren">(</span><em>lane</em>, <em>base_url</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opensearch.html#OpenSearchDocument.for_lane"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.opensearch.OpenSearchDocument.for_lane" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="classmethod">
<dt id="core.opensearch.OpenSearchDocument.search_info">
<em class="property">classmethod </em><code class="descname">search_info</code><span class="sig-paren">(</span><em>lane</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opensearch.html#OpenSearchDocument.search_info"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.opensearch.OpenSearchDocument.search_info" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="classmethod">
<dt id="core.opensearch.OpenSearchDocument.url_template">
<em class="property">classmethod </em><code class="descname">url_template</code><span class="sig-paren">(</span><em>base_url</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/opensearch.html#OpenSearchDocument.url_template"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.opensearch.OpenSearchDocument.url_template" title="Permalink to this definition">¶</a></dt>
<dd><p>Turn a base URL into an OpenSearch URL template.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-core.overdrive">
<span id="core-overdrive-module"></span><h2>core.overdrive module<a class="headerlink" href="#module-core.overdrive" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="core.overdrive.MockOverdriveAPI">
<em class="property">class </em><code class="descclassname">core.overdrive.</code><code class="descname">MockOverdriveAPI</code><span class="sig-paren">(</span><em>_db</em>, <em>collection</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/overdrive.html#MockOverdriveAPI"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.overdrive.MockOverdriveAPI" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.overdrive.OverdriveAPI" title="core.overdrive.OverdriveAPI"><code class="xref py py-class docutils literal notranslate"><span class="pre">core.overdrive.OverdriveAPI</span></code></a></p>
<dl class="method">
<dt id="core.overdrive.MockOverdriveAPI.mock_access_token_response">
<code class="descname">mock_access_token_response</code><span class="sig-paren">(</span><em>credential</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/overdrive.html#MockOverdriveAPI.mock_access_token_response"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.overdrive.MockOverdriveAPI.mock_access_token_response" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="classmethod">
<dt id="core.overdrive.MockOverdriveAPI.mock_collection">
<em class="property">classmethod </em><code class="descname">mock_collection</code><span class="sig-paren">(</span><em>_db</em>, <em>library=None</em>, <em>name='Test Overdrive Collection'</em>, <em>client_key=u'a'</em>, <em>client_secret=u'b'</em>, <em>library_id=u'c'</em>, <em>website_id='d'</em>, <em>ils_name='e'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/overdrive.html#MockOverdriveAPI.mock_collection"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.overdrive.MockOverdriveAPI.mock_collection" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a mock Overdrive collection for use in tests.</p>
</dd></dl>

<dl class="method">
<dt id="core.overdrive.MockOverdriveAPI.mock_collection_token">
<code class="descname">mock_collection_token</code><span class="sig-paren">(</span><em>token</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/overdrive.html#MockOverdriveAPI.mock_collection_token"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.overdrive.MockOverdriveAPI.mock_collection_token" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="core.overdrive.MockOverdriveAPI.queue_collection_token">
<code class="descname">queue_collection_token</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/overdrive.html#MockOverdriveAPI.queue_collection_token"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.overdrive.MockOverdriveAPI.queue_collection_token" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="core.overdrive.MockOverdriveAPI.queue_response">
<code class="descname">queue_response</code><span class="sig-paren">(</span><em>status_code</em>, <em>headers={}</em>, <em>content=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/overdrive.html#MockOverdriveAPI.queue_response"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.overdrive.MockOverdriveAPI.queue_response" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="core.overdrive.MockOverdriveAPI.token_post">
<code class="descname">token_post</code><span class="sig-paren">(</span><em>url</em>, <em>payload</em>, <em>headers={}</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/overdrive.html#MockOverdriveAPI.token_post"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.overdrive.MockOverdriveAPI.token_post" title="Permalink to this definition">¶</a></dt>
<dd><p>Mock the request for an OAuth token.</p>
<p>We mock the method by looking at the access_token_response
property, rather than inserting a mock response in the queue,
because only the first MockOverdriveAPI instantiation in a
given test actually makes this call. By mocking the response
to this method separately we remove the need to figure out
whether to queue a response in a given test.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="core.overdrive.OverdriveAPI">
<em class="property">class </em><code class="descclassname">core.overdrive.</code><code class="descname">OverdriveAPI</code><span class="sig-paren">(</span><em>_db</em>, <em>collection</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/overdrive.html#OverdriveAPI"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.overdrive.OverdriveAPI" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<dl class="attribute">
<dt id="core.overdrive.OverdriveAPI.ADVANTAGE_LIBRARY_ENDPOINT">
<code class="descname">ADVANTAGE_LIBRARY_ENDPOINT</code><em class="property"> = '%(host)s/v1/libraries/%(parent_library_id)s/advantageAccounts/%(library_id)s'</em><a class="headerlink" href="#core.overdrive.OverdriveAPI.ADVANTAGE_LIBRARY_ENDPOINT" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.overdrive.OverdriveAPI.ALL_PRODUCTS_ENDPOINT">
<code class="descname">ALL_PRODUCTS_ENDPOINT</code><em class="property"> = '%(host)s/v1/collections/%(collection_token)s/products?sort=%(sort)s'</em><a class="headerlink" href="#core.overdrive.OverdriveAPI.ALL_PRODUCTS_ENDPOINT" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.overdrive.OverdriveAPI.AVAILABILITY_ENDPOINT">
<code class="descname">AVAILABILITY_ENDPOINT</code><em class="property"> = '%(host)s/v1/collections/%(collection_token)s/products/%(product_id)s/availability'</em><a class="headerlink" href="#core.overdrive.OverdriveAPI.AVAILABILITY_ENDPOINT" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.overdrive.OverdriveAPI.CHECKOUTS_ENDPOINT">
<code class="descname">CHECKOUTS_ENDPOINT</code><em class="property"> = '%(patron_host)s/v1/patrons/me/checkouts'</em><a class="headerlink" href="#core.overdrive.OverdriveAPI.CHECKOUTS_ENDPOINT" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.overdrive.OverdriveAPI.CHECKOUT_ENDPOINT">
<code class="descname">CHECKOUT_ENDPOINT</code><em class="property"> = '%(patron_host)s/v1/patrons/me/checkouts/%(overdrive_id)s'</em><a class="headerlink" href="#core.overdrive.OverdriveAPI.CHECKOUT_ENDPOINT" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.overdrive.OverdriveAPI.DEFAULT_READABLE_FORMATS">
<code class="descname">DEFAULT_READABLE_FORMATS</code><em class="property"> = set(['audiobook-overdrive', 'ebook-epub-adobe', 'ebook-epub-open', 'ebook-pdf-open'])</em><a class="headerlink" href="#core.overdrive.OverdriveAPI.DEFAULT_READABLE_FORMATS" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.overdrive.OverdriveAPI.EVENTS_ENDPOINT">
<code class="descname">EVENTS_ENDPOINT</code><em class="property"> = '%(host)s/v1/collections/%(collection_token)s/products?lastUpdateTime=%(lastupdatetime)s&amp;sort=%(sort)s&amp;limit=%(limit)s'</em><a class="headerlink" href="#core.overdrive.OverdriveAPI.EVENTS_ENDPOINT" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.overdrive.OverdriveAPI.EVENT_DELAY">
<code class="descname">EVENT_DELAY</code><em class="property"> = datetime.timedelta(0, 7200)</em><a class="headerlink" href="#core.overdrive.OverdriveAPI.EVENT_DELAY" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.overdrive.OverdriveAPI.EVENT_SOURCE">
<code class="descname">EVENT_SOURCE</code><em class="property"> = 'Overdrive'</em><a class="headerlink" href="#core.overdrive.OverdriveAPI.EVENT_SOURCE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.overdrive.OverdriveAPI.FORMATS">
<code class="descname">FORMATS</code><em class="property"> = ['ebook-epub-open', 'ebook-epub-adobe', 'ebook-pdf-adobe', 'ebook-pdf-open', 'audiobook-overdrive']</em><a class="headerlink" href="#core.overdrive.OverdriveAPI.FORMATS" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.overdrive.OverdriveAPI.FORMATS_ENDPOINT">
<code class="descname">FORMATS_ENDPOINT</code><em class="property"> = '%(patron_host)s/v1/patrons/me/checkouts/%(overdrive_id)s/formats'</em><a class="headerlink" href="#core.overdrive.OverdriveAPI.FORMATS_ENDPOINT" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.overdrive.OverdriveAPI.HOLDS_ENDPOINT">
<code class="descname">HOLDS_ENDPOINT</code><em class="property"> = '%(patron_host)s/v1/patrons/me/holds'</em><a class="headerlink" href="#core.overdrive.OverdriveAPI.HOLDS_ENDPOINT" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.overdrive.OverdriveAPI.HOLD_ENDPOINT">
<code class="descname">HOLD_ENDPOINT</code><em class="property"> = '%(patron_host)s/v1/patrons/me/holds/%(product_id)s'</em><a class="headerlink" href="#core.overdrive.OverdriveAPI.HOLD_ENDPOINT" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.overdrive.OverdriveAPI.HOSTS">
<code class="descname">HOSTS</code><em class="property"> = {'production': {'host': 'https://api.overdrive.com', 'oauth_host': 'https://oauth.overdrive.com', 'oauth_patron_host': 'https://oauth-patron.overdrive.com', 'patron_host': 'https://patron.api.overdrive.com'}, 'testing': {'host': 'https://integration.api.overdrive.com', 'oauth_host': 'https://oauth.overdrive.com', 'oauth_patron_host': 'https://oauth-patron.overdrive.com', 'patron_host': 'https://integration-patron.api.overdrive.com'}}</em><a class="headerlink" href="#core.overdrive.OverdriveAPI.HOSTS" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.overdrive.OverdriveAPI.ILS_NAME_DEFAULT">
<code class="descname">ILS_NAME_DEFAULT</code><em class="property"> = u'default'</em><a class="headerlink" href="#core.overdrive.OverdriveAPI.ILS_NAME_DEFAULT" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.overdrive.OverdriveAPI.ILS_NAME_KEY">
<code class="descname">ILS_NAME_KEY</code><em class="property"> = u'ils_name'</em><a class="headerlink" href="#core.overdrive.OverdriveAPI.ILS_NAME_KEY" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.overdrive.OverdriveAPI.INCOMPATIBLE_PLATFORM_FORMATS">
<code class="descname">INCOMPATIBLE_PLATFORM_FORMATS</code><em class="property"> = set(['ebook-kindle'])</em><a class="headerlink" href="#core.overdrive.OverdriveAPI.INCOMPATIBLE_PLATFORM_FORMATS" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.overdrive.OverdriveAPI.LIBRARY_ENDPOINT">
<code class="descname">LIBRARY_ENDPOINT</code><em class="property"> = '%(host)s/v1/libraries/%(library_id)s'</em><a class="headerlink" href="#core.overdrive.OverdriveAPI.LIBRARY_ENDPOINT" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.overdrive.OverdriveAPI.MAX_CREDENTIAL_AGE">
<code class="descname">MAX_CREDENTIAL_AGE</code><em class="property"> = 3000</em><a class="headerlink" href="#core.overdrive.OverdriveAPI.MAX_CREDENTIAL_AGE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.overdrive.OverdriveAPI.METADATA_ENDPOINT">
<code class="descname">METADATA_ENDPOINT</code><em class="property"> = '%(host)s/v1/collections/%(collection_token)s/products/%(item_id)s/metadata'</em><a class="headerlink" href="#core.overdrive.OverdriveAPI.METADATA_ENDPOINT" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.overdrive.OverdriveAPI.ME_ENDPOINT">
<code class="descname">ME_ENDPOINT</code><em class="property"> = '%(patron_host)s/v1/patrons/me'</em><a class="headerlink" href="#core.overdrive.OverdriveAPI.ME_ENDPOINT" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.overdrive.OverdriveAPI.OVERDRIVE_READ_FORMAT">
<code class="descname">OVERDRIVE_READ_FORMAT</code><em class="property"> = 'ebook-overdrive'</em><a class="headerlink" href="#core.overdrive.OverdriveAPI.OVERDRIVE_READ_FORMAT" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.overdrive.OverdriveAPI.PAGE_SIZE_LIMIT">
<code class="descname">PAGE_SIZE_LIMIT</code><em class="property"> = 300</em><a class="headerlink" href="#core.overdrive.OverdriveAPI.PAGE_SIZE_LIMIT" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.overdrive.OverdriveAPI.PATRON_INFORMATION_ENDPOINT">
<code class="descname">PATRON_INFORMATION_ENDPOINT</code><em class="property"> = '%(patron_host)s/v1/patrons/me'</em><a class="headerlink" href="#core.overdrive.OverdriveAPI.PATRON_INFORMATION_ENDPOINT" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.overdrive.OverdriveAPI.PATRON_TOKEN_ENDPOINT">
<code class="descname">PATRON_TOKEN_ENDPOINT</code><em class="property"> = '%(oauth_patron_host)s/patrontoken'</em><a class="headerlink" href="#core.overdrive.OverdriveAPI.PATRON_TOKEN_ENDPOINT" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.overdrive.OverdriveAPI.PRODUCTION_SERVERS">
<code class="descname">PRODUCTION_SERVERS</code><em class="property"> = 'production'</em><a class="headerlink" href="#core.overdrive.OverdriveAPI.PRODUCTION_SERVERS" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.overdrive.OverdriveAPI.SERVER_NICKNAME">
<code class="descname">SERVER_NICKNAME</code><em class="property"> = 'server_nickname'</em><a class="headerlink" href="#core.overdrive.OverdriveAPI.SERVER_NICKNAME" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.overdrive.OverdriveAPI.TESTING_SERVERS">
<code class="descname">TESTING_SERVERS</code><em class="property"> = 'testing'</em><a class="headerlink" href="#core.overdrive.OverdriveAPI.TESTING_SERVERS" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.overdrive.OverdriveAPI.TIME_FORMAT">
<code class="descname">TIME_FORMAT</code><em class="property"> = '%Y-%m-%dT%H:%M:%SZ'</em><a class="headerlink" href="#core.overdrive.OverdriveAPI.TIME_FORMAT" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.overdrive.OverdriveAPI.TOKEN_ENDPOINT">
<code class="descname">TOKEN_ENDPOINT</code><em class="property"> = '%(oauth_host)s/token'</em><a class="headerlink" href="#core.overdrive.OverdriveAPI.TOKEN_ENDPOINT" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.overdrive.OverdriveAPI.WEBSITE_ID">
<code class="descname">WEBSITE_ID</code><em class="property"> = u'website_id'</em><a class="headerlink" href="#core.overdrive.OverdriveAPI.WEBSITE_ID" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="core.overdrive.OverdriveAPI.all_ids">
<code class="descname">all_ids</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/overdrive.html#OverdriveAPI.all_ids"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.overdrive.OverdriveAPI.all_ids" title="Permalink to this definition">¶</a></dt>
<dd><p>Get IDs for every book in the system, with the most recently added
ones at the front.</p>
</dd></dl>

<dl class="method">
<dt id="core.overdrive.OverdriveAPI.check_creds">
<code class="descname">check_creds</code><span class="sig-paren">(</span><em>force_refresh=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/overdrive.html#OverdriveAPI.check_creds"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.overdrive.OverdriveAPI.check_creds" title="Permalink to this definition">¶</a></dt>
<dd><p>If the Bearer Token has expired, update it.</p>
</dd></dl>

<dl class="attribute">
<dt id="core.overdrive.OverdriveAPI.collection">
<code class="descname">collection</code><a class="headerlink" href="#core.overdrive.OverdriveAPI.collection" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.overdrive.OverdriveAPI.collection_token">
<code class="descname">collection_token</code><a class="headerlink" href="#core.overdrive.OverdriveAPI.collection_token" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the token representing this particular Overdrive collection.</p>
<p>As a side effect, this will verify that the Overdrive
credentials are working.</p>
</dd></dl>

<dl class="method">
<dt id="core.overdrive.OverdriveAPI.credential_object">
<code class="descname">credential_object</code><span class="sig-paren">(</span><em>refresh</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/overdrive.html#OverdriveAPI.credential_object"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.overdrive.OverdriveAPI.credential_object" title="Permalink to this definition">¶</a></dt>
<dd><p>Look up the Credential object that allows us to use
the Overdrive API.</p>
</dd></dl>

<dl class="method">
<dt id="core.overdrive.OverdriveAPI.endpoint">
<code class="descname">endpoint</code><span class="sig-paren">(</span><em>url</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/overdrive.html#OverdriveAPI.endpoint"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.overdrive.OverdriveAPI.endpoint" title="Permalink to this definition">¶</a></dt>
<dd><p>Create the URL to an Overdrive API endpoint.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>url</strong> – A template for the URL.</li>
<li><strong>kwargs</strong> – Arguments to be interpolated into the template.
The server hostname will be interpolated automatically; you
don’t have to pass it in.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="core.overdrive.OverdriveAPI.get">
<code class="descname">get</code><span class="sig-paren">(</span><em>url</em>, <em>extra_headers</em>, <em>exception_on_401=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/overdrive.html#OverdriveAPI.get"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.overdrive.OverdriveAPI.get" title="Permalink to this definition">¶</a></dt>
<dd><p>Make an HTTP GET request using the active Bearer Token.</p>
</dd></dl>

<dl class="method">
<dt id="core.overdrive.OverdriveAPI.get_advantage_accounts">
<code class="descname">get_advantage_accounts</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/overdrive.html#OverdriveAPI.get_advantage_accounts"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.overdrive.OverdriveAPI.get_advantage_accounts" title="Permalink to this definition">¶</a></dt>
<dd><p>Find all the Overdrive Advantage accounts managed by this library.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Yield:</th><td class="field-body">A sequence of OverdriveAdvantageAccount objects.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="core.overdrive.OverdriveAPI.get_library">
<code class="descname">get_library</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/overdrive.html#OverdriveAPI.get_library"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.overdrive.OverdriveAPI.get_library" title="Permalink to this definition">¶</a></dt>
<dd><p>Get basic information about the collection, including
a link to the titles in the collection.</p>
</dd></dl>

<dl class="attribute">
<dt id="core.overdrive.OverdriveAPI.host">
<code class="descname">host</code><em class="property"> = {'host': 'https://integration.api.overdrive.com', 'oauth_host': 'https://oauth.overdrive.com', 'oauth_patron_host': 'https://oauth-patron.overdrive.com', 'patron_host': 'https://integration-patron.api.overdrive.com'}</em><a class="headerlink" href="#core.overdrive.OverdriveAPI.host" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="core.overdrive.OverdriveAPI.ils_name">
<code class="descname">ils_name</code><span class="sig-paren">(</span><em>library</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/overdrive.html#OverdriveAPI.ils_name"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.overdrive.OverdriveAPI.ils_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Determine the ILS name to use for the given Library.</p>
</dd></dl>

<dl class="classmethod">
<dt id="core.overdrive.OverdriveAPI.ils_name_setting">
<em class="property">classmethod </em><code class="descname">ils_name_setting</code><span class="sig-paren">(</span><em>_db</em>, <em>collection</em>, <em>library</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/overdrive.html#OverdriveAPI.ils_name_setting"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.overdrive.OverdriveAPI.ils_name_setting" title="Permalink to this definition">¶</a></dt>
<dd><p>Find the ConfigurationSetting controlling the ILS name
for the given collection and library.</p>
</dd></dl>

<dl class="attribute">
<dt id="core.overdrive.OverdriveAPI.lock">
<code class="descname">lock</code><em class="property"> = &lt;_RLock owner=None count=0&gt;</em><a class="headerlink" href="#core.overdrive.OverdriveAPI.lock" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.overdrive.OverdriveAPI.log">
<code class="descname">log</code><em class="property"> = &lt;logging.Logger object&gt;</em><a class="headerlink" href="#core.overdrive.OverdriveAPI.log" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="classmethod">
<dt id="core.overdrive.OverdriveAPI.make_link_safe">
<em class="property">classmethod </em><code class="descname">make_link_safe</code><span class="sig-paren">(</span><em>url</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/overdrive.html#OverdriveAPI.make_link_safe"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.overdrive.OverdriveAPI.make_link_safe" title="Permalink to this definition">¶</a></dt>
<dd><p>Turn a server-provided link into a link the server will accept!</p>
<p>This is completely obnoxious and I have complained about it to
Overdrive.</p>
</dd></dl>

<dl class="method">
<dt id="core.overdrive.OverdriveAPI.metadata_lookup">
<code class="descname">metadata_lookup</code><span class="sig-paren">(</span><em>identifier</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/overdrive.html#OverdriveAPI.metadata_lookup"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.overdrive.OverdriveAPI.metadata_lookup" title="Permalink to this definition">¶</a></dt>
<dd><p>Look up metadata for an Overdrive identifier.</p>
</dd></dl>

<dl class="method">
<dt id="core.overdrive.OverdriveAPI.metadata_lookup_obj">
<code class="descname">metadata_lookup_obj</code><span class="sig-paren">(</span><em>identifier</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/overdrive.html#OverdriveAPI.metadata_lookup_obj"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.overdrive.OverdriveAPI.metadata_lookup_obj" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="core.overdrive.OverdriveAPI.recently_changed_ids">
<code class="descname">recently_changed_ids</code><span class="sig-paren">(</span><em>start</em>, <em>cutoff</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/overdrive.html#OverdriveAPI.recently_changed_ids"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.overdrive.OverdriveAPI.recently_changed_ids" title="Permalink to this definition">¶</a></dt>
<dd><p>Get IDs of books whose status has changed between the start time
and now.</p>
</dd></dl>

<dl class="method">
<dt id="core.overdrive.OverdriveAPI.refresh_creds">
<code class="descname">refresh_creds</code><span class="sig-paren">(</span><em>credential</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/overdrive.html#OverdriveAPI.refresh_creds"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.overdrive.OverdriveAPI.refresh_creds" title="Permalink to this definition">¶</a></dt>
<dd><p>Fetch a new Bearer Token and update the given Credential object.</p>
</dd></dl>

<dl class="attribute">
<dt id="core.overdrive.OverdriveAPI.source">
<code class="descname">source</code><a class="headerlink" href="#core.overdrive.OverdriveAPI.source" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.overdrive.OverdriveAPI.token">
<code class="descname">token</code><a class="headerlink" href="#core.overdrive.OverdriveAPI.token" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="core.overdrive.OverdriveAPI.token_post">
<code class="descname">token_post</code><span class="sig-paren">(</span><em>url</em>, <em>payload</em>, <em>headers={}</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/overdrive.html#OverdriveAPI.token_post"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.overdrive.OverdriveAPI.token_post" title="Permalink to this definition">¶</a></dt>
<dd><p>Make an HTTP POST request for purposes of getting an OAuth token.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="core.overdrive.OverdriveAdvantageAccount">
<em class="property">class </em><code class="descclassname">core.overdrive.</code><code class="descname">OverdriveAdvantageAccount</code><span class="sig-paren">(</span><em>parent_library_id</em>, <em>library_id</em>, <em>name</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/overdrive.html#OverdriveAdvantageAccount"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.overdrive.OverdriveAdvantageAccount" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Holder and parser for data associated with Overdrive Advantage.</p>
<dl class="classmethod">
<dt id="core.overdrive.OverdriveAdvantageAccount.from_representation">
<em class="property">classmethod </em><code class="descname">from_representation</code><span class="sig-paren">(</span><em>content</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/overdrive.html#OverdriveAdvantageAccount.from_representation"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.overdrive.OverdriveAdvantageAccount.from_representation" title="Permalink to this definition">¶</a></dt>
<dd><p>Turn the representation of an advantageAccounts link into a list of
OverdriveAdvantageAccount objects.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>content</strong> – The data obtained by following an advantageAccounts
link.</td>
</tr>
<tr class="field-even field"><th class="field-name">Yield:</th><td class="field-body">A sequence of OverdriveAdvantageAccount objects.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="core.overdrive.OverdriveAdvantageAccount.to_collection">
<code class="descname">to_collection</code><span class="sig-paren">(</span><em>_db</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/overdrive.html#OverdriveAdvantageAccount.to_collection"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.overdrive.OverdriveAdvantageAccount.to_collection" title="Permalink to this definition">¶</a></dt>
<dd><p>Find or create a Collection object for this Overdrive Advantage
account.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">a 2-tuple of Collections (primary Overdrive
collection, Overdrive Advantage collection)</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="core.overdrive.OverdriveBibliographicCoverageProvider">
<em class="property">class </em><code class="descclassname">core.overdrive.</code><code class="descname">OverdriveBibliographicCoverageProvider</code><span class="sig-paren">(</span><em>collection</em>, <em>api_class=&lt;class 'core.overdrive.OverdriveAPI'&gt;</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/overdrive.html#OverdriveBibliographicCoverageProvider"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.overdrive.OverdriveBibliographicCoverageProvider" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.coverage.BibliographicCoverageProvider" title="core.coverage.BibliographicCoverageProvider"><code class="xref py py-class docutils literal notranslate"><span class="pre">core.coverage.BibliographicCoverageProvider</span></code></a></p>
<p>Fill in bibliographic metadata for Overdrive records.</p>
<p>This will occasionally fill in some availability information for a
single Collection, but we rely on Monitors to keep availability
information up to date for all Collections.</p>
<dl class="attribute">
<dt id="core.overdrive.OverdriveBibliographicCoverageProvider.DATA_SOURCE_NAME">
<code class="descname">DATA_SOURCE_NAME</code><em class="property"> = u'Overdrive'</em><a class="headerlink" href="#core.overdrive.OverdriveBibliographicCoverageProvider.DATA_SOURCE_NAME" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.overdrive.OverdriveBibliographicCoverageProvider.INPUT_IDENTIFIER_TYPES">
<code class="descname">INPUT_IDENTIFIER_TYPES</code><em class="property"> = u'Overdrive ID'</em><a class="headerlink" href="#core.overdrive.OverdriveBibliographicCoverageProvider.INPUT_IDENTIFIER_TYPES" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.overdrive.OverdriveBibliographicCoverageProvider.PROTOCOL">
<code class="descname">PROTOCOL</code><em class="property"> = u'Overdrive'</em><a class="headerlink" href="#core.overdrive.OverdriveBibliographicCoverageProvider.PROTOCOL" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.overdrive.OverdriveBibliographicCoverageProvider.SERVICE_NAME">
<code class="descname">SERVICE_NAME</code><em class="property"> = 'Overdrive Bibliographic Coverage Provider'</em><a class="headerlink" href="#core.overdrive.OverdriveBibliographicCoverageProvider.SERVICE_NAME" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="core.overdrive.OverdriveBibliographicCoverageProvider.metadata_pre_hook">
<code class="descname">metadata_pre_hook</code><span class="sig-paren">(</span><em>metadata</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/overdrive.html#OverdriveBibliographicCoverageProvider.metadata_pre_hook"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.overdrive.OverdriveBibliographicCoverageProvider.metadata_pre_hook" title="Permalink to this definition">¶</a></dt>
<dd><p>A hook method that allows subclasses to modify a Metadata
object derived from Overdrive before it’s applied.</p>
</dd></dl>

<dl class="method">
<dt id="core.overdrive.OverdriveBibliographicCoverageProvider.process_item">
<code class="descname">process_item</code><span class="sig-paren">(</span><em>identifier</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/overdrive.html#OverdriveBibliographicCoverageProvider.process_item"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.overdrive.OverdriveBibliographicCoverageProvider.process_item" title="Permalink to this definition">¶</a></dt>
<dd><p>Do the work necessary to give coverage to one specific item.</p>
<p>Since this is where the actual work happens, this is not
implemented in IdentifierCoverageProvider or
WorkCoverageProvider, and must be handled in a subclass.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="core.overdrive.OverdriveRepresentationExtractor">
<em class="property">class </em><code class="descclassname">core.overdrive.</code><code class="descname">OverdriveRepresentationExtractor</code><a class="reference internal" href="_modules/core/overdrive.html#OverdriveRepresentationExtractor"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.overdrive.OverdriveRepresentationExtractor" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Extract useful information from Overdrive’s JSON representations.</p>
<dl class="attribute">
<dt id="core.overdrive.OverdriveRepresentationExtractor.DATE_FORMAT">
<code class="descname">DATE_FORMAT</code><em class="property"> = '%Y-%m-%d'</em><a class="headerlink" href="#core.overdrive.OverdriveRepresentationExtractor.DATE_FORMAT" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="classmethod">
<dt id="core.overdrive.OverdriveRepresentationExtractor.availability_link_list">
<em class="property">classmethod </em><code class="descname">availability_link_list</code><span class="sig-paren">(</span><em>book_list</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/overdrive.html#OverdriveRepresentationExtractor.availability_link_list"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.overdrive.OverdriveRepresentationExtractor.availability_link_list" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">A list of dictionaries with keys <cite>id</cite>, <cite>title</cite>, <cite>availability_link</cite>.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="classmethod">
<dt id="core.overdrive.OverdriveRepresentationExtractor.book_info_to_circulation">
<em class="property">classmethod </em><code class="descname">book_info_to_circulation</code><span class="sig-paren">(</span><em>book</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/overdrive.html#OverdriveRepresentationExtractor.book_info_to_circulation"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.overdrive.OverdriveRepresentationExtractor.book_info_to_circulation" title="Permalink to this definition">¶</a></dt>
<dd><p>Note:  The json data passed into this method is from a different file/stream
from the json data that goes into the book_info_to_metadata() method.</p>
</dd></dl>

<dl class="classmethod">
<dt id="core.overdrive.OverdriveRepresentationExtractor.book_info_to_metadata">
<em class="property">classmethod </em><code class="descname">book_info_to_metadata</code><span class="sig-paren">(</span><em>book</em>, <em>include_bibliographic=True</em>, <em>include_formats=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/overdrive.html#OverdriveRepresentationExtractor.book_info_to_metadata"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.overdrive.OverdriveRepresentationExtractor.book_info_to_metadata" title="Permalink to this definition">¶</a></dt>
<dd><p>Turn Overdrive’s JSON representation of a book into a Metadata
object.</p>
<p>Note:  The json data passed into this method is from a different file/stream
from the json data that goes into the book_info_to_circulation() method.</p>
</dd></dl>

<dl class="attribute">
<dt id="core.overdrive.OverdriveRepresentationExtractor.format_data_for_overdrive_format">
<code class="descname">format_data_for_overdrive_format</code><em class="property"> = {'audiobook-mp3': ('application/x-od-media', u'Overdrive DRM'), 'audiobook-overdrive': [(u'application/vnd.overdrive.circulation.api+json;profile=audiobook', u'Libby DRM'), (u'Streaming Audio', u'Streaming')], 'ebook-epub-adobe': (u'application/epub+zip', u'application/vnd.adobe.adept+xml'), 'ebook-epub-open': (u'application/epub+zip', None), 'ebook-kindle': (u'Kindle via Amazon', u'Kindle DRM'), 'ebook-overdrive': [(u'application/vnd.overdrive.circulation.api+json;profile=ebook', u'Libby DRM'), (u'Streaming Text', u'Streaming')], 'ebook-pdf-adobe': (u'application/pdf', u'application/vnd.adobe.adept+xml'), 'ebook-pdf-open': (u'application/pdf', None), 'music-mp3': ('application/x-od-media', u'Overdrive DRM'), 'periodicals-nook': (u'Nook via B&amp;N', u'Nook DRM'), 'video-streaming': (u'Streaming Video', u'Streaming')}</em><a class="headerlink" href="#core.overdrive.OverdriveRepresentationExtractor.format_data_for_overdrive_format" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.overdrive.OverdriveRepresentationExtractor.ignorable_overdrive_formats">
<code class="descname">ignorable_overdrive_formats</code><em class="property"> = set([])</em><a class="headerlink" href="#core.overdrive.OverdriveRepresentationExtractor.ignorable_overdrive_formats" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="classmethod">
<dt id="core.overdrive.OverdriveRepresentationExtractor.image_link_to_linkdata">
<em class="property">classmethod </em><code class="descname">image_link_to_linkdata</code><span class="sig-paren">(</span><em>link</em>, <em>rel</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/overdrive.html#OverdriveRepresentationExtractor.image_link_to_linkdata"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.overdrive.OverdriveRepresentationExtractor.image_link_to_linkdata" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="classmethod">
<dt id="core.overdrive.OverdriveRepresentationExtractor.internal_formats">
<em class="property">classmethod </em><code class="descname">internal_formats</code><span class="sig-paren">(</span><em>overdrive_format</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/overdrive.html#OverdriveRepresentationExtractor.internal_formats"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.overdrive.OverdriveRepresentationExtractor.internal_formats" title="Permalink to this definition">¶</a></dt>
<dd><p>Yield all internal formats for the given Overdrive format.</p>
<p>Some Overdrive formats become multiple internal formats.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Yield:</th><td class="field-body">A sequence of (content type, DRM system) 2-tuples</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="classmethod">
<dt id="core.overdrive.OverdriveRepresentationExtractor.link">
<em class="property">classmethod </em><code class="descname">link</code><span class="sig-paren">(</span><em>page</em>, <em>rel</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/overdrive.html#OverdriveRepresentationExtractor.link"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.overdrive.OverdriveRepresentationExtractor.link" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.overdrive.OverdriveRepresentationExtractor.log">
<code class="descname">log</code><em class="property"> = &lt;logging.Logger object&gt;</em><a class="headerlink" href="#core.overdrive.OverdriveRepresentationExtractor.log" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.overdrive.OverdriveRepresentationExtractor.overdrive_medium_to_simplified_medium">
<code class="descname">overdrive_medium_to_simplified_medium</code><em class="property"> = {'Audiobook': u'Audio', 'Music': u'Music', 'Periodicals': u'Periodical', 'Video': u'Video', 'eBook': u'Book'}</em><a class="headerlink" href="#core.overdrive.OverdriveRepresentationExtractor.overdrive_medium_to_simplified_medium" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.overdrive.OverdriveRepresentationExtractor.overdrive_role_to_simplified_role">
<code class="descname">overdrive_role_to_simplified_role</code><em class="property"> = {'actor': u'Actor', 'adapter': u'Adapter', 'artist': u'Artist', 'associated name': u'Associated name', 'author': u'Author', 'author of afterword': u'Afterword Author', 'author of foreword': u'Foreword Author', 'author of introduction': u'Introduction Author', 'book producer': u'Producer', 'cast member': u'Actor', 'collaborator': u'Collaborator', 'colophon': u'Colophon Author', 'compiler': u'Compiler', 'composer': u'Composer', 'contributor': u'Contributor', 'copyright holder': u'Copyright holder', 'designer': u'Designer', 'director': u'Director', 'editor': u'Editor', 'engineer': u'Engineer', 'etc.': u'Unknown', 'executive producer': u'Executive Producer', 'illustrator': u'Illustrator', 'lyricist': u'Lyricist', 'musician': u'Musician', 'narrator': u'Narrator', 'other': u'Unknown', 'performer': u'Performer', 'photographer': u'Photographer', 'producer': u'Producer', 'transcriber': u'Transcriber', 'translator': u'Translator'}</em><a class="headerlink" href="#core.overdrive.OverdriveRepresentationExtractor.overdrive_role_to_simplified_role" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="classmethod">
<dt id="core.overdrive.OverdriveRepresentationExtractor.parse_roles">
<em class="property">classmethod </em><code class="descname">parse_roles</code><span class="sig-paren">(</span><em>id</em>, <em>rolestring</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/overdrive.html#OverdriveRepresentationExtractor.parse_roles"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.overdrive.OverdriveRepresentationExtractor.parse_roles" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>
<div class="section" id="module-core.problem_details">
<span id="core-problem-details-module"></span><h2>core.problem_details module<a class="headerlink" href="#module-core.problem_details" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-core.s3">
<span id="core-s3-module"></span><h2>core.s3 module<a class="headerlink" href="#module-core.s3" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="core.s3.MinIOUploader">
<em class="property">class </em><code class="descclassname">core.s3.</code><code class="descname">MinIOUploader</code><span class="sig-paren">(</span><em>integration</em>, <em>client_class=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/s3.html#MinIOUploader"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.s3.MinIOUploader" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.s3.S3Uploader" title="core.s3.S3Uploader"><code class="xref py py-class docutils literal notranslate"><span class="pre">core.s3.S3Uploader</span></code></a></p>
<dl class="attribute">
<dt id="core.s3.MinIOUploader.ENDPOINT_URL">
<code class="descname">ENDPOINT_URL</code><em class="property"> = 'ENDPOINT_URL'</em><a class="headerlink" href="#core.s3.MinIOUploader.ENDPOINT_URL" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.s3.MinIOUploader.NAME">
<code class="descname">NAME</code><em class="property"> = u'MinIO'</em><a class="headerlink" href="#core.s3.MinIOUploader.NAME" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.s3.MinIOUploader.SETTINGS">
<code class="descname">SETTINGS</code><em class="property"> = [{'required': True, 'description': l'MinIO's endpoint URL', 'key': 'ENDPOINT_URL', 'label': l'Endpoint URL'}, {'key': u'username', 'label': l'Access Key'}, {'description': l'If the &lt;em&gt;Access Key&lt;/em&gt; and &lt;em&gt;Secret Key&lt;/em&gt; are not given here credentials will be used as outlined in the &lt;a href='https://boto3.amazonaws.com/v1/documentation/api/latest/guide/configuration.html#configuring-credentials'&gt;Boto3 documenation&lt;/a&gt;. If &lt;em&gt;Access Key&lt;/em&gt; is given, &lt;em&gt;Secrent Key&lt;/em&gt; must also be given.', 'key': u'password', 'label': l'Secret Key'}, {'description': l'All book cover images encountered will be mirrored to this S3 bucket. Large images will be scaled down, and the scaled-down copies will also be uploaded to this bucket. &lt;p&gt;The bucket must already exist&amp;mdash;it will not be created automatically.&lt;/p&gt;', 'key': u'book_covers_bucket', 'label': l'Book Covers Bucket'}, {'description': l'All open-access books encountered will be uploaded to this S3 bucket. &lt;p&gt;The bucket must already exist&amp;mdash;it will not be created automatically.&lt;/p&gt;', 'key': u'open_access_content_bucket', 'label': l'Open Access Content Bucket'}, {'description': l'Self-hosted books will be uploaded to this S3 bucket. &lt;p&gt;The bucket must already exist&amp;mdash;it will not be created automatically.&lt;/p&gt;', 'key': u'protected_content_bucket', 'label': l'Protected Access Content Bucket'}, {'description': l'All generated MARC files will be uploaded to this S3 bucket. &lt;p&gt;The bucket must already exist&amp;mdash;it will not be created automatically.&lt;/p&gt;', 'key': u'marc_bucket', 'label': l'MARC File Bucket'}, {'description': l'S3 region which will be used for storing the content.', 'default': u'us-east-1', 'label': l'S3 region', 'key': u's3_region', 'type': 'select', 'options': [{'key': u'af-south-1', 'label': u'af-south-1'}, {'key': u'ap-east-1', 'label': u'ap-east-1'}, {'key': u'ap-northeast-1', 'label': u'ap-northeast-1'}, {'key': u'ap-northeast-2', 'label': u'ap-northeast-2'}, {'key': u'ap-south-1', 'label': u'ap-south-1'}, {'key': u'ap-southeast-1', 'label': u'ap-southeast-1'}, {'key': u'ap-southeast-2', 'label': u'ap-southeast-2'}, {'key': u'ca-central-1', 'label': u'ca-central-1'}, {'key': u'eu-central-1', 'label': u'eu-central-1'}, {'key': u'eu-north-1', 'label': u'eu-north-1'}, {'key': u'eu-south-1', 'label': u'eu-south-1'}, {'key': u'eu-west-1', 'label': u'eu-west-1'}, {'key': u'eu-west-2', 'label': u'eu-west-2'}, {'key': u'eu-west-3', 'label': u'eu-west-3'}, {'key': u'me-south-1', 'label': u'me-south-1'}, {'key': u'sa-east-1', 'label': u'sa-east-1'}, {'key': u'us-east-1', 'label': u'us-east-1'}, {'key': u'us-east-2', 'label': u'us-east-2'}, {'key': u'us-west-1', 'label': u'us-west-1'}, {'key': u'us-west-2', 'label': u'us-west-2'}]}, {'description': l'Buckets created after September 30, 2020, will support only virtual hosted-style requests. Path-style requests will continue to be supported for buckets created on or before this date. For more information, see &lt;a href='https://aws.amazon.com/blogs/aws/amazon-s3-path-deprecation-plan-the-rest-of-the-story/'&gt;Amazon S3 Path Deprecation Plan - The Rest of the Story&lt;/a&gt;.', 'default': 'virtual', 'label': l'S3 addressing style', 'key': u's3_addressing_style', 'type': 'select', 'options': [{'key': 'virtual', 'label': l'Virtual'}, {'key': 'path', 'label': l'Path'}, {'key': 'auto', 'label': l'Auto'}]}, {'default': 3600, 'type': 'number', 'description': l'Time in seconds for the presigned URL to remain valid', 'key': u's3_presigned_url_expiration', 'label': l'S3 presigned URL expiration'}, {'description': l'A file mirrored to S3 is available at &lt;code&gt;http://{bucket}.s3.{region}.amazonaws.com/{filename}&lt;/code&gt;. If you've set up your DNS so that http://[bucket]/ or https://[bucket]/ points to the appropriate S3 bucket, you can configure this S3 integration to shorten the URLs. &lt;p&gt;If you haven't set up your S3 buckets, don't change this from the default -- you'll get URLs that don't work.&lt;/p&gt;', 'default': u'identity', 'label': l'URL format', 'key': u'bucket_name_transform', 'type': 'select', 'options': [{'key': u'identity', 'label': l'S3 Default: https://{bucket}.s3.{region}.amazonaws.com/{file}'}, {'key': u'https', 'label': l'HTTPS: https://{bucket}/{file}'}, {'key': u'http', 'label': l'HTTP: http://{bucket}/{file}'}]}]</em><a class="headerlink" href="#core.s3.MinIOUploader.SETTINGS" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="core.s3.MockS3Client">
<em class="property">class </em><code class="descclassname">core.s3.</code><code class="descname">MockS3Client</code><span class="sig-paren">(</span><em>service</em>, <em>region_name</em>, <em>aws_access_key_id</em>, <em>aws_secret_access_key</em>, <em>config=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/s3.html#MockS3Client"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.s3.MockS3Client" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>This pool lets us test the real S3Uploader class with a mocked-up
boto3 client.</p>
<dl class="method">
<dt id="core.s3.MockS3Client.abort_multipart_upload">
<code class="descname">abort_multipart_upload</code><span class="sig-paren">(</span><em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/s3.html#MockS3Client.abort_multipart_upload"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.s3.MockS3Client.abort_multipart_upload" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="core.s3.MockS3Client.complete_multipart_upload">
<code class="descname">complete_multipart_upload</code><span class="sig-paren">(</span><em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/s3.html#MockS3Client.complete_multipart_upload"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.s3.MockS3Client.complete_multipart_upload" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="core.s3.MockS3Client.create_multipart_upload">
<code class="descname">create_multipart_upload</code><span class="sig-paren">(</span><em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/s3.html#MockS3Client.create_multipart_upload"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.s3.MockS3Client.create_multipart_upload" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="core.s3.MockS3Client.generate_presigned_url">
<code class="descname">generate_presigned_url</code><span class="sig-paren">(</span><em>ClientMethod</em>, <em>Params=None</em>, <em>ExpiresIn=3600</em>, <em>HttpMethod=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/s3.html#MockS3Client.generate_presigned_url"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.s3.MockS3Client.generate_presigned_url" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="core.s3.MockS3Client.upload_fileobj">
<code class="descname">upload_fileobj</code><span class="sig-paren">(</span><em>Fileobj</em>, <em>Bucket</em>, <em>Key</em>, <em>ExtraArgs=None</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/s3.html#MockS3Client.upload_fileobj"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.s3.MockS3Client.upload_fileobj" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="core.s3.MockS3Client.upload_part">
<code class="descname">upload_part</code><span class="sig-paren">(</span><em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/s3.html#MockS3Client.upload_part"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.s3.MockS3Client.upload_part" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="core.s3.MockS3Uploader">
<em class="property">class </em><code class="descclassname">core.s3.</code><code class="descname">MockS3Uploader</code><span class="sig-paren">(</span><em>fail=False</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/s3.html#MockS3Uploader"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.s3.MockS3Uploader" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.s3.S3Uploader" title="core.s3.S3Uploader"><code class="xref py py-class docutils literal notranslate"><span class="pre">core.s3.S3Uploader</span></code></a></p>
<p>A dummy uploader for use in tests.</p>
<dl class="attribute">
<dt id="core.s3.MockS3Uploader.buckets">
<code class="descname">buckets</code><em class="property"> = {u'book_covers_bucket': 'test-cover-bucket', u'marc_bucket': 'test-marc-bucket', u'open_access_content_bucket': 'test-content-bucket', u'protected_content_bucket': 'test-content-bucket'}</em><a class="headerlink" href="#core.s3.MockS3Uploader.buckets" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="core.s3.MockS3Uploader.mirror_one">
<code class="descname">mirror_one</code><span class="sig-paren">(</span><em>representation</em>, <em>mirror_to</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/s3.html#MockS3Uploader.mirror_one"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.s3.MockS3Uploader.mirror_one" title="Permalink to this definition">¶</a></dt>
<dd><p>Mirror a single representation to the given URL.</p>
</dd></dl>

<dl class="method">
<dt id="core.s3.MockS3Uploader.multipart_upload">
<code class="descname">multipart_upload</code><span class="sig-paren">(</span><em>**kwds</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/s3.html#MockS3Uploader.multipart_upload"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.s3.MockS3Uploader.multipart_upload" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="core.s3.MultipartS3Upload">
<em class="property">class </em><code class="descclassname">core.s3.</code><code class="descname">MultipartS3Upload</code><span class="sig-paren">(</span><em>uploader</em>, <em>representation</em>, <em>mirror_to</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/s3.html#MultipartS3Upload"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.s3.MultipartS3Upload" title="Permalink to this definition">¶</a></dt>
<dd><dl class="method">
<dt id="core.s3.MultipartS3Upload.abort">
<code class="descname">abort</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/s3.html#MultipartS3Upload.abort"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.s3.MultipartS3Upload.abort" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="core.s3.MultipartS3Upload.complete">
<code class="descname">complete</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/s3.html#MultipartS3Upload.complete"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.s3.MultipartS3Upload.complete" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="core.s3.MultipartS3Upload.upload_part">
<code class="descname">upload_part</code><span class="sig-paren">(</span><em>content</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/s3.html#MultipartS3Upload.upload_part"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.s3.MultipartS3Upload.upload_part" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="core.s3.S3AddressingStyle">
<em class="property">class </em><code class="descclassname">core.s3.</code><code class="descname">S3AddressingStyle</code><a class="reference internal" href="_modules/core/s3.html#S3AddressingStyle"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.s3.S3AddressingStyle" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">enum.Enum</span></code></p>
<p>Enumeration of different addressing styles supported by boto</p>
<dl class="attribute">
<dt id="core.s3.S3AddressingStyle.AUTO">
<code class="descname">AUTO</code><em class="property"> = 'auto'</em><a class="headerlink" href="#core.s3.S3AddressingStyle.AUTO" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.s3.S3AddressingStyle.PATH">
<code class="descname">PATH</code><em class="property"> = 'path'</em><a class="headerlink" href="#core.s3.S3AddressingStyle.PATH" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.s3.S3AddressingStyle.VIRTUAL">
<code class="descname">VIRTUAL</code><em class="property"> = 'virtual'</em><a class="headerlink" href="#core.s3.S3AddressingStyle.VIRTUAL" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="core.s3.S3Uploader">
<em class="property">class </em><code class="descclassname">core.s3.</code><code class="descname">S3Uploader</code><span class="sig-paren">(</span><em>integration</em>, <em>client_class=None</em>, <em>host='amazonaws.com'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/s3.html#S3Uploader"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.s3.S3Uploader" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.mirror.MirrorUploader" title="core.mirror.MirrorUploader"><code class="xref py py-class docutils literal notranslate"><span class="pre">core.mirror.MirrorUploader</span></code></a></p>
<dl class="attribute">
<dt id="core.s3.S3Uploader.BOOK_COVERS_BUCKET_KEY">
<code class="descname">BOOK_COVERS_BUCKET_KEY</code><em class="property"> = u'book_covers_bucket'</em><a class="headerlink" href="#core.s3.S3Uploader.BOOK_COVERS_BUCKET_KEY" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.s3.S3Uploader.MARC_BUCKET_KEY">
<code class="descname">MARC_BUCKET_KEY</code><em class="property"> = u'marc_bucket'</em><a class="headerlink" href="#core.s3.S3Uploader.MARC_BUCKET_KEY" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.s3.S3Uploader.NAME">
<code class="descname">NAME</code><em class="property"> = u'Amazon S3'</em><a class="headerlink" href="#core.s3.S3Uploader.NAME" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.s3.S3Uploader.OA_CONTENT_BUCKET_KEY">
<code class="descname">OA_CONTENT_BUCKET_KEY</code><em class="property"> = u'open_access_content_bucket'</em><a class="headerlink" href="#core.s3.S3Uploader.OA_CONTENT_BUCKET_KEY" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.s3.S3Uploader.PROTECTED_CONTENT_BUCKET_KEY">
<code class="descname">PROTECTED_CONTENT_BUCKET_KEY</code><em class="property"> = u'protected_content_bucket'</em><a class="headerlink" href="#core.s3.S3Uploader.PROTECTED_CONTENT_BUCKET_KEY" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.s3.S3Uploader.S3_ADDRESSING_STYLE">
<code class="descname">S3_ADDRESSING_STYLE</code><em class="property"> = u's3_addressing_style'</em><a class="headerlink" href="#core.s3.S3Uploader.S3_ADDRESSING_STYLE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.s3.S3Uploader.S3_DEFAULT_ADDRESSING_STYLE">
<code class="descname">S3_DEFAULT_ADDRESSING_STYLE</code><em class="property"> = 'virtual'</em><a class="headerlink" href="#core.s3.S3Uploader.S3_DEFAULT_ADDRESSING_STYLE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.s3.S3Uploader.S3_DEFAULT_PRESIGNED_URL_EXPIRATION">
<code class="descname">S3_DEFAULT_PRESIGNED_URL_EXPIRATION</code><em class="property"> = 3600</em><a class="headerlink" href="#core.s3.S3Uploader.S3_DEFAULT_PRESIGNED_URL_EXPIRATION" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.s3.S3Uploader.S3_DEFAULT_REGION">
<code class="descname">S3_DEFAULT_REGION</code><em class="property"> = u'us-east-1'</em><a class="headerlink" href="#core.s3.S3Uploader.S3_DEFAULT_REGION" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.s3.S3Uploader.S3_HOST">
<code class="descname">S3_HOST</code><em class="property"> = 'amazonaws.com'</em><a class="headerlink" href="#core.s3.S3Uploader.S3_HOST" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.s3.S3Uploader.S3_PRESIGNED_URL_EXPIRATION">
<code class="descname">S3_PRESIGNED_URL_EXPIRATION</code><em class="property"> = u's3_presigned_url_expiration'</em><a class="headerlink" href="#core.s3.S3Uploader.S3_PRESIGNED_URL_EXPIRATION" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.s3.S3Uploader.S3_REGION">
<code class="descname">S3_REGION</code><em class="property"> = u's3_region'</em><a class="headerlink" href="#core.s3.S3Uploader.S3_REGION" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.s3.S3Uploader.SETTINGS">
<code class="descname">SETTINGS</code><em class="property"> = [{'key': u'username', 'label': l'Access Key'}, {'description': l'If the &lt;em&gt;Access Key&lt;/em&gt; and &lt;em&gt;Secret Key&lt;/em&gt; are not given here credentials will be used as outlined in the &lt;a href='https://boto3.amazonaws.com/v1/documentation/api/latest/guide/configuration.html#configuring-credentials'&gt;Boto3 documenation&lt;/a&gt;. If &lt;em&gt;Access Key&lt;/em&gt; is given, &lt;em&gt;Secrent Key&lt;/em&gt; must also be given.', 'key': u'password', 'label': l'Secret Key'}, {'description': l'All book cover images encountered will be mirrored to this S3 bucket. Large images will be scaled down, and the scaled-down copies will also be uploaded to this bucket. &lt;p&gt;The bucket must already exist&amp;mdash;it will not be created automatically.&lt;/p&gt;', 'key': u'book_covers_bucket', 'label': l'Book Covers Bucket'}, {'description': l'All open-access books encountered will be uploaded to this S3 bucket. &lt;p&gt;The bucket must already exist&amp;mdash;it will not be created automatically.&lt;/p&gt;', 'key': u'open_access_content_bucket', 'label': l'Open Access Content Bucket'}, {'description': l'Self-hosted books will be uploaded to this S3 bucket. &lt;p&gt;The bucket must already exist&amp;mdash;it will not be created automatically.&lt;/p&gt;', 'key': u'protected_content_bucket', 'label': l'Protected Access Content Bucket'}, {'description': l'All generated MARC files will be uploaded to this S3 bucket. &lt;p&gt;The bucket must already exist&amp;mdash;it will not be created automatically.&lt;/p&gt;', 'key': u'marc_bucket', 'label': l'MARC File Bucket'}, {'description': l'S3 region which will be used for storing the content.', 'default': u'us-east-1', 'label': l'S3 region', 'key': u's3_region', 'type': 'select', 'options': [{'key': u'af-south-1', 'label': u'af-south-1'}, {'key': u'ap-east-1', 'label': u'ap-east-1'}, {'key': u'ap-northeast-1', 'label': u'ap-northeast-1'}, {'key': u'ap-northeast-2', 'label': u'ap-northeast-2'}, {'key': u'ap-south-1', 'label': u'ap-south-1'}, {'key': u'ap-southeast-1', 'label': u'ap-southeast-1'}, {'key': u'ap-southeast-2', 'label': u'ap-southeast-2'}, {'key': u'ca-central-1', 'label': u'ca-central-1'}, {'key': u'eu-central-1', 'label': u'eu-central-1'}, {'key': u'eu-north-1', 'label': u'eu-north-1'}, {'key': u'eu-south-1', 'label': u'eu-south-1'}, {'key': u'eu-west-1', 'label': u'eu-west-1'}, {'key': u'eu-west-2', 'label': u'eu-west-2'}, {'key': u'eu-west-3', 'label': u'eu-west-3'}, {'key': u'me-south-1', 'label': u'me-south-1'}, {'key': u'sa-east-1', 'label': u'sa-east-1'}, {'key': u'us-east-1', 'label': u'us-east-1'}, {'key': u'us-east-2', 'label': u'us-east-2'}, {'key': u'us-west-1', 'label': u'us-west-1'}, {'key': u'us-west-2', 'label': u'us-west-2'}]}, {'description': l'Buckets created after September 30, 2020, will support only virtual hosted-style requests. Path-style requests will continue to be supported for buckets created on or before this date. For more information, see &lt;a href='https://aws.amazon.com/blogs/aws/amazon-s3-path-deprecation-plan-the-rest-of-the-story/'&gt;Amazon S3 Path Deprecation Plan - The Rest of the Story&lt;/a&gt;.', 'default': 'virtual', 'label': l'S3 addressing style', 'key': u's3_addressing_style', 'type': 'select', 'options': [{'key': 'virtual', 'label': l'Virtual'}, {'key': 'path', 'label': l'Path'}, {'key': 'auto', 'label': l'Auto'}]}, {'default': 3600, 'type': 'number', 'description': l'Time in seconds for the presigned URL to remain valid', 'key': u's3_presigned_url_expiration', 'label': l'S3 presigned URL expiration'}, {'description': l'A file mirrored to S3 is available at &lt;code&gt;http://{bucket}.s3.{region}.amazonaws.com/{filename}&lt;/code&gt;. If you've set up your DNS so that http://[bucket]/ or https://[bucket]/ points to the appropriate S3 bucket, you can configure this S3 integration to shorten the URLs. &lt;p&gt;If you haven't set up your S3 buckets, don't change this from the default -- you'll get URLs that don't work.&lt;/p&gt;', 'default': u'identity', 'label': l'URL format', 'key': u'bucket_name_transform', 'type': 'select', 'options': [{'key': u'identity', 'label': l'S3 Default: https://{bucket}.s3.{region}.amazonaws.com/{file}'}, {'key': u'https', 'label': l'HTTPS: https://{bucket}/{file}'}, {'key': u'http', 'label': l'HTTP: http://{bucket}/{file}'}]}]</em><a class="headerlink" href="#core.s3.S3Uploader.SETTINGS" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.s3.S3Uploader.SITEWIDE">
<code class="descname">SITEWIDE</code><em class="property"> = True</em><a class="headerlink" href="#core.s3.S3Uploader.SITEWIDE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.s3.S3Uploader.URL_TEMPLATES_BY_TEMPLATE">
<code class="descname">URL_TEMPLATES_BY_TEMPLATE</code><em class="property"> = {u'http': u'http://%(bucket)s/%(key)s', u'https': u'https://%(bucket)s/%(key)s', u'identity': u'https://%(bucket)s.s3.%(region)s/%(key)s'}</em><a class="headerlink" href="#core.s3.S3Uploader.URL_TEMPLATES_BY_TEMPLATE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.s3.S3Uploader.URL_TEMPLATE_DEFAULT">
<code class="descname">URL_TEMPLATE_DEFAULT</code><em class="property"> = u'identity'</em><a class="headerlink" href="#core.s3.S3Uploader.URL_TEMPLATE_DEFAULT" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.s3.S3Uploader.URL_TEMPLATE_HTTP">
<code class="descname">URL_TEMPLATE_HTTP</code><em class="property"> = u'http'</em><a class="headerlink" href="#core.s3.S3Uploader.URL_TEMPLATE_HTTP" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.s3.S3Uploader.URL_TEMPLATE_HTTPS">
<code class="descname">URL_TEMPLATE_HTTPS</code><em class="property"> = u'https'</em><a class="headerlink" href="#core.s3.S3Uploader.URL_TEMPLATE_HTTPS" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.s3.S3Uploader.URL_TEMPLATE_KEY">
<code class="descname">URL_TEMPLATE_KEY</code><em class="property"> = u'bucket_name_transform'</em><a class="headerlink" href="#core.s3.S3Uploader.URL_TEMPLATE_KEY" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="core.s3.S3Uploader.book_url">
<code class="descname">book_url</code><span class="sig-paren">(</span><em>identifier</em>, <em>extension='.epub'</em>, <em>open_access=True</em>, <em>data_source=None</em>, <em>title=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/s3.html#S3Uploader.book_url"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.s3.S3Uploader.book_url" title="Permalink to this definition">¶</a></dt>
<dd><p>The path to the hosted EPUB file for the given identifier.</p>
</dd></dl>

<dl class="method">
<dt id="core.s3.S3Uploader.content_root">
<code class="descname">content_root</code><span class="sig-paren">(</span><em>bucket</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/s3.html#S3Uploader.content_root"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.s3.S3Uploader.content_root" title="Permalink to this definition">¶</a></dt>
<dd><p>The root URL to the S3 location of hosted content of
the given type.</p>
</dd></dl>

<dl class="method">
<dt id="core.s3.S3Uploader.cover_image_root">
<code class="descname">cover_image_root</code><span class="sig-paren">(</span><em>bucket</em>, <em>data_source</em>, <em>scaled_size=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/s3.html#S3Uploader.cover_image_root"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.s3.S3Uploader.cover_image_root" title="Permalink to this definition">¶</a></dt>
<dd><p>The root URL to the S3 location of cover images for
the given data source.</p>
</dd></dl>

<dl class="method">
<dt id="core.s3.S3Uploader.cover_image_url">
<code class="descname">cover_image_url</code><span class="sig-paren">(</span><em>data_source</em>, <em>identifier</em>, <em>filename</em>, <em>scaled_size=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/s3.html#S3Uploader.cover_image_url"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.s3.S3Uploader.cover_image_url" title="Permalink to this definition">¶</a></dt>
<dd><p>The path to the hosted cover image for the given identifier.</p>
</dd></dl>

<dl class="method">
<dt id="core.s3.S3Uploader.final_mirror_url">
<code class="descname">final_mirror_url</code><span class="sig-paren">(</span><em>bucket</em>, <em>key</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/s3.html#S3Uploader.final_mirror_url"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.s3.S3Uploader.final_mirror_url" title="Permalink to this definition">¶</a></dt>
<dd><p>Determine the URL to pass into Representation.set_as_mirrored,
assuming that it was successfully uploaded to the given
<cite>bucket</cite> as <cite>key</cite>.</p>
<p>Depending on ExternalIntegration configuration this may
be any of the following:</p>
<p><a class="reference external" href="https:/">https:/</a>/{bucket}.s3.{region}.amazonaws.com/{key}
<a class="reference external" href="http:/">http:/</a>/{bucket}/{key}
<a class="reference external" href="https:/">https:/</a>/{bucket}/{key}</p>
</dd></dl>

<dl class="method">
<dt id="core.s3.S3Uploader.get_bucket">
<code class="descname">get_bucket</code><span class="sig-paren">(</span><em>bucket_key</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/s3.html#S3Uploader.get_bucket"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.s3.S3Uploader.get_bucket" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets the bucket for a particular use based on the given key</p>
</dd></dl>

<dl class="classmethod">
<dt id="core.s3.S3Uploader.key_join">
<em class="property">classmethod </em><code class="descname">key_join</code><span class="sig-paren">(</span><em>key</em>, <em>encode=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/s3.html#S3Uploader.key_join"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.s3.S3Uploader.key_join" title="Permalink to this definition">¶</a></dt>
<dd><p>Quote the path portions of an S3 key while leaving the path
characters themselves alone.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>key</strong> – Either a key, or a list of parts to be
assembled into a key.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">A bytestring that can be used as an S3 key.</td>
</tr>
</tbody>
</table>
<p>TODO PYTHON3 This is rewritten to return a Unicode string.</p>
</dd></dl>

<dl class="method">
<dt id="core.s3.S3Uploader.marc_file_root">
<code class="descname">marc_file_root</code><span class="sig-paren">(</span><em>bucket</em>, <em>library</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/s3.html#S3Uploader.marc_file_root"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.s3.S3Uploader.marc_file_root" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="core.s3.S3Uploader.marc_file_url">
<code class="descname">marc_file_url</code><span class="sig-paren">(</span><em>library</em>, <em>lane</em>, <em>end_time</em>, <em>start_time=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/s3.html#S3Uploader.marc_file_url"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.s3.S3Uploader.marc_file_url" title="Permalink to this definition">¶</a></dt>
<dd><p>The path to the hosted MARC file for the given library, lane,
and date range.</p>
</dd></dl>

<dl class="method">
<dt id="core.s3.S3Uploader.mirror_one">
<code class="descname">mirror_one</code><span class="sig-paren">(</span><em>representation</em>, <em>mirror_to</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/s3.html#S3Uploader.mirror_one"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.s3.S3Uploader.mirror_one" title="Permalink to this definition">¶</a></dt>
<dd><p>Mirror a single representation to the given URL.</p>
</dd></dl>

<dl class="method">
<dt id="core.s3.S3Uploader.multipart_upload">
<code class="descname">multipart_upload</code><span class="sig-paren">(</span><em>**kwds</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/s3.html#S3Uploader.multipart_upload"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.s3.S3Uploader.multipart_upload" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="core.s3.S3Uploader.sign_url">
<code class="descname">sign_url</code><span class="sig-paren">(</span><em>url</em>, <em>expiration=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/s3.html#S3Uploader.sign_url"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.s3.S3Uploader.sign_url" title="Permalink to this definition">¶</a></dt>
<dd><p>Signs a URL and make it expirable</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>url</strong> (<em>string</em>) – URL</li>
<li><strong>expiration</strong> (<em>int</em>) – (Optional) Time in seconds for the presigned URL to remain valid.
If it’s empty, S3_PRESIGNED_URL_EXPIRATION configuration setting is used</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">Signed expirable link</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">string</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="core.s3.S3Uploader.split_url">
<code class="descname">split_url</code><span class="sig-paren">(</span><em>url</em>, <em>unquote=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/s3.html#S3Uploader.split_url"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.s3.S3Uploader.split_url" title="Permalink to this definition">¶</a></dt>
<dd><p>Splits the URL into the components: bucket and file path</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>url</strong> (<em>string</em>) – URL</li>
<li><strong>unquote</strong> (<em>bool</em>) – Boolean value indicating whether it’s required to unquote URL elements</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">Tuple (bucket, file path)</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">Tuple[string, string]</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="core.s3.S3Uploader.url">
<code class="descname">url</code><span class="sig-paren">(</span><em>bucket</em>, <em>path</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/s3.html#S3Uploader.url"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.s3.S3Uploader.url" title="Permalink to this definition">¶</a></dt>
<dd><p>The URL to a resource on S3 identified by bucket and path.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-core.scripts">
<span id="core-scripts-module"></span><h2>core.scripts module<a class="headerlink" href="#module-core.scripts" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="core.scripts.AddClassificationScript">
<em class="property">class </em><code class="descclassname">core.scripts.</code><code class="descname">AddClassificationScript</code><span class="sig-paren">(</span><em>_db=None</em>, <em>cmd_args=None</em>, <em>stdin=&lt;open file '&lt;stdin&gt;'</em>, <em>mode 'r'&gt;</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#AddClassificationScript"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.scripts.AddClassificationScript" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.scripts.IdentifierInputScript" title="core.scripts.IdentifierInputScript"><code class="xref py py-class docutils literal notranslate"><span class="pre">core.scripts.IdentifierInputScript</span></code></a></p>
<dl class="classmethod">
<dt id="core.scripts.AddClassificationScript.arg_parser">
<em class="property">classmethod </em><code class="descname">arg_parser</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#AddClassificationScript.arg_parser"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.scripts.AddClassificationScript.arg_parser" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="core.scripts.AddClassificationScript.do_run">
<code class="descname">do_run</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#AddClassificationScript.do_run"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.scripts.AddClassificationScript.do_run" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.scripts.AddClassificationScript.name">
<code class="descname">name</code><em class="property"> = 'Add a classification to an identifier'</em><a class="headerlink" href="#core.scripts.AddClassificationScript.name" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="core.scripts.CheckContributorNamesInDB">
<em class="property">class </em><code class="descclassname">core.scripts.</code><code class="descname">CheckContributorNamesInDB</code><span class="sig-paren">(</span><em>_db=None</em>, <em>cmd_args=None</em>, <em>stdin=&lt;open file '&lt;stdin&gt;'</em>, <em>mode 'r'&gt;</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#CheckContributorNamesInDB"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.scripts.CheckContributorNamesInDB" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.scripts.IdentifierInputScript" title="core.scripts.IdentifierInputScript"><code class="xref py py-class docutils literal notranslate"><span class="pre">core.scripts.IdentifierInputScript</span></code></a></p>
<p>Checks that contributor sort_names are display_names in
“last name, comma, other names” format.</p>
<p>Read contributors edition by edition, so that can, if necessary,
restrict db query by passed-in identifiers, and so can find associated
license pools to register author complaints to.</p>
<p>NOTE:  There’s also CheckContributorNamesOnWeb in metadata,
it’s a child of this script.  Use it to check our knowledge against
viaf, with the newer better sort_name selection and formatting.</p>
<p>TODO: make sure don’t start at beginning again when interrupt while batch job is running.</p>
<dl class="attribute">
<dt id="core.scripts.CheckContributorNamesInDB.COMPLAINT_SOURCE">
<code class="descname">COMPLAINT_SOURCE</code><em class="property"> = 'CheckContributorNamesInDB'</em><a class="headerlink" href="#core.scripts.CheckContributorNamesInDB.COMPLAINT_SOURCE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.scripts.CheckContributorNamesInDB.COMPLAINT_TYPE">
<code class="descname">COMPLAINT_TYPE</code><em class="property"> = 'http://librarysimplified.org/terms/problem/wrong-author'</em><a class="headerlink" href="#core.scripts.CheckContributorNamesInDB.COMPLAINT_TYPE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="core.scripts.CheckContributorNamesInDB.do_run">
<code class="descname">do_run</code><span class="sig-paren">(</span><em>batch_size=10</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#CheckContributorNamesInDB.do_run"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.scripts.CheckContributorNamesInDB.do_run" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="classmethod">
<dt id="core.scripts.CheckContributorNamesInDB.make_query">
<em class="property">classmethod </em><code class="descname">make_query</code><span class="sig-paren">(</span><em>_db</em>, <em>identifier_type</em>, <em>identifiers</em>, <em>log=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#CheckContributorNamesInDB.make_query"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.scripts.CheckContributorNamesInDB.make_query" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="core.scripts.CheckContributorNamesInDB.process_contribution_local">
<code class="descname">process_contribution_local</code><span class="sig-paren">(</span><em>_db</em>, <em>contribution</em>, <em>log=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#CheckContributorNamesInDB.process_contribution_local"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.scripts.CheckContributorNamesInDB.process_contribution_local" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="core.scripts.CheckContributorNamesInDB.process_local_mismatch">
<code class="descname">process_local_mismatch</code><span class="sig-paren">(</span><em>_db</em>, <em>contribution</em>, <em>computed_sort_name</em>, <em>error_message_detail</em>, <em>log=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#CheckContributorNamesInDB.process_local_mismatch"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.scripts.CheckContributorNamesInDB.process_local_mismatch" title="Permalink to this definition">¶</a></dt>
<dd><p>Determines if a problem is to be investigated further or recorded as a Complaint,
to be solved by a human.  In this class, it’s always a complaint.  In the overridden
method in the child class in metadata_wrangler code, we sometimes go do a web query.</p>
</dd></dl>

<dl class="classmethod">
<dt id="core.scripts.CheckContributorNamesInDB.register_problem">
<em class="property">classmethod </em><code class="descname">register_problem</code><span class="sig-paren">(</span><em>source</em>, <em>contribution</em>, <em>computed_sort_name</em>, <em>error_message_detail</em>, <em>log=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#CheckContributorNamesInDB.register_problem"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.scripts.CheckContributorNamesInDB.register_problem" title="Permalink to this definition">¶</a></dt>
<dd><p>Make a Complaint in the database, so a human can take a look at this Contributor’s name
and resolve whatever the complex issue that got us here.</p>
</dd></dl>

<dl class="classmethod">
<dt id="core.scripts.CheckContributorNamesInDB.set_contributor_sort_name">
<em class="property">classmethod </em><code class="descname">set_contributor_sort_name</code><span class="sig-paren">(</span><em>sort_name</em>, <em>contribution</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#CheckContributorNamesInDB.set_contributor_sort_name"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.scripts.CheckContributorNamesInDB.set_contributor_sort_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the contributor.sort_name and associated edition.author_name to the passed-in value.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="core.scripts.CollectionInputScript">
<em class="property">class </em><code class="descclassname">core.scripts.</code><code class="descname">CollectionInputScript</code><span class="sig-paren">(</span><em>_db=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#CollectionInputScript"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.scripts.CollectionInputScript" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.scripts.Script" title="core.scripts.Script"><code class="xref py py-class docutils literal notranslate"><span class="pre">core.scripts.Script</span></code></a></p>
<p>A script that takes collection names as command line inputs.</p>
<dl class="classmethod">
<dt id="core.scripts.CollectionInputScript.arg_parser">
<em class="property">classmethod </em><code class="descname">arg_parser</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#CollectionInputScript.arg_parser"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.scripts.CollectionInputScript.arg_parser" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="classmethod">
<dt id="core.scripts.CollectionInputScript.look_up_collections">
<em class="property">classmethod </em><code class="descname">look_up_collections</code><span class="sig-paren">(</span><em>_db</em>, <em>parsed</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#CollectionInputScript.look_up_collections"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.scripts.CollectionInputScript.look_up_collections" title="Permalink to this definition">¶</a></dt>
<dd><p>Turn collection names as specified on the command line into
real database Collection objects.</p>
</dd></dl>

<dl class="classmethod">
<dt id="core.scripts.CollectionInputScript.parse_command_line">
<em class="property">classmethod </em><code class="descname">parse_command_line</code><span class="sig-paren">(</span><em>_db=None</em>, <em>cmd_args=None</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#CollectionInputScript.parse_command_line"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.scripts.CollectionInputScript.parse_command_line" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="core.scripts.CollectionType">
<em class="property">class </em><code class="descclassname">core.scripts.</code><code class="descname">CollectionType</code><a class="reference internal" href="_modules/core/scripts.html#CollectionType"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.scripts.CollectionType" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">enum.Enum</span></code></p>
<dl class="attribute">
<dt id="core.scripts.CollectionType.OPEN_ACCESS">
<code class="descname">OPEN_ACCESS</code><em class="property"> = 'OPEN_ACCESS'</em><a class="headerlink" href="#core.scripts.CollectionType.OPEN_ACCESS" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.scripts.CollectionType.PROTECTED_ACCESS">
<code class="descname">PROTECTED_ACCESS</code><em class="property"> = 'PROTECTED_ACCESS'</em><a class="headerlink" href="#core.scripts.CollectionType.PROTECTED_ACCESS" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="core.scripts.ConfigurationSettingScript">
<em class="property">class </em><code class="descclassname">core.scripts.</code><code class="descname">ConfigurationSettingScript</code><span class="sig-paren">(</span><em>_db=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#ConfigurationSettingScript"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.scripts.ConfigurationSettingScript" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.scripts.Script" title="core.scripts.Script"><code class="xref py py-class docutils literal notranslate"><span class="pre">core.scripts.Script</span></code></a></p>
<dl class="classmethod">
<dt id="core.scripts.ConfigurationSettingScript.add_setting_argument">
<em class="property">classmethod </em><code class="descname">add_setting_argument</code><span class="sig-paren">(</span><em>parser</em>, <em>help</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#ConfigurationSettingScript.add_setting_argument"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.scripts.ConfigurationSettingScript.add_setting_argument" title="Permalink to this definition">¶</a></dt>
<dd><p>Modify an ArgumentParser to indicate that the script takes
command-line settings.</p>
</dd></dl>

<dl class="method">
<dt id="core.scripts.ConfigurationSettingScript.apply_settings">
<code class="descname">apply_settings</code><span class="sig-paren">(</span><em>settings</em>, <em>obj</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#ConfigurationSettingScript.apply_settings"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.scripts.ConfigurationSettingScript.apply_settings" title="Permalink to this definition">¶</a></dt>
<dd><p>Treat <cite>settings</cite> as a list of command-line argument settings,
and apply each one to <cite>obj</cite>.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="core.scripts.ConfigureCollectionScript">
<em class="property">class </em><code class="descclassname">core.scripts.</code><code class="descname">ConfigureCollectionScript</code><span class="sig-paren">(</span><em>_db=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#ConfigureCollectionScript"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.scripts.ConfigureCollectionScript" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.scripts.ConfigurationSettingScript" title="core.scripts.ConfigurationSettingScript"><code class="xref py py-class docutils literal notranslate"><span class="pre">core.scripts.ConfigurationSettingScript</span></code></a></p>
<p>Create a collection or change its settings.</p>
<dl class="classmethod">
<dt id="core.scripts.ConfigureCollectionScript.arg_parser">
<em class="property">classmethod </em><code class="descname">arg_parser</code><span class="sig-paren">(</span><em>_db</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#ConfigureCollectionScript.arg_parser"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.scripts.ConfigureCollectionScript.arg_parser" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="core.scripts.ConfigureCollectionScript.do_run">
<code class="descname">do_run</code><span class="sig-paren">(</span><em>_db=None</em>, <em>cmd_args=None</em>, <em>output=&lt;open file '&lt;stdout&gt;'</em>, <em>mode 'w'&gt;</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#ConfigureCollectionScript.do_run"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.scripts.ConfigureCollectionScript.do_run" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.scripts.ConfigureCollectionScript.name">
<code class="descname">name</code><em class="property"> = &quot;Change a collection's settings&quot;</em><a class="headerlink" href="#core.scripts.ConfigureCollectionScript.name" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="classmethod">
<dt id="core.scripts.ConfigureCollectionScript.parse_command_line">
<em class="property">classmethod </em><code class="descname">parse_command_line</code><span class="sig-paren">(</span><em>_db=None</em>, <em>cmd_args=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#ConfigureCollectionScript.parse_command_line"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.scripts.ConfigureCollectionScript.parse_command_line" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="core.scripts.ConfigureIntegrationScript">
<em class="property">class </em><code class="descclassname">core.scripts.</code><code class="descname">ConfigureIntegrationScript</code><span class="sig-paren">(</span><em>_db=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#ConfigureIntegrationScript"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.scripts.ConfigureIntegrationScript" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.scripts.ConfigurationSettingScript" title="core.scripts.ConfigurationSettingScript"><code class="xref py py-class docutils literal notranslate"><span class="pre">core.scripts.ConfigurationSettingScript</span></code></a></p>
<p>Create a integration or change its settings.</p>
<dl class="classmethod">
<dt id="core.scripts.ConfigureIntegrationScript.arg_parser">
<em class="property">classmethod </em><code class="descname">arg_parser</code><span class="sig-paren">(</span><em>_db</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#ConfigureIntegrationScript.arg_parser"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.scripts.ConfigureIntegrationScript.arg_parser" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="core.scripts.ConfigureIntegrationScript.do_run">
<code class="descname">do_run</code><span class="sig-paren">(</span><em>_db=None</em>, <em>cmd_args=None</em>, <em>output=&lt;open file '&lt;stdout&gt;'</em>, <em>mode 'w'&gt;</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#ConfigureIntegrationScript.do_run"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.scripts.ConfigureIntegrationScript.do_run" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.scripts.ConfigureIntegrationScript.name">
<code class="descname">name</code><em class="property"> = &quot;Create a site-wide integration or change an integration's settings&quot;</em><a class="headerlink" href="#core.scripts.ConfigureIntegrationScript.name" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="classmethod">
<dt id="core.scripts.ConfigureIntegrationScript.parse_command_line">
<em class="property">classmethod </em><code class="descname">parse_command_line</code><span class="sig-paren">(</span><em>_db=None</em>, <em>cmd_args=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#ConfigureIntegrationScript.parse_command_line"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.scripts.ConfigureIntegrationScript.parse_command_line" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="core.scripts.ConfigureLaneScript">
<em class="property">class </em><code class="descclassname">core.scripts.</code><code class="descname">ConfigureLaneScript</code><span class="sig-paren">(</span><em>_db=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#ConfigureLaneScript"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.scripts.ConfigureLaneScript" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.scripts.ConfigurationSettingScript" title="core.scripts.ConfigurationSettingScript"><code class="xref py py-class docutils literal notranslate"><span class="pre">core.scripts.ConfigurationSettingScript</span></code></a></p>
<p>Create a lane or change its settings.</p>
<dl class="classmethod">
<dt id="core.scripts.ConfigureLaneScript.arg_parser">
<em class="property">classmethod </em><code class="descname">arg_parser</code><span class="sig-paren">(</span><em>_db</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#ConfigureLaneScript.arg_parser"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.scripts.ConfigureLaneScript.arg_parser" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="core.scripts.ConfigureLaneScript.do_run">
<code class="descname">do_run</code><span class="sig-paren">(</span><em>_db=None</em>, <em>cmd_args=None</em>, <em>output=&lt;open file '&lt;stdout&gt;'</em>, <em>mode 'w'&gt;</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#ConfigureLaneScript.do_run"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.scripts.ConfigureLaneScript.do_run" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.scripts.ConfigureLaneScript.name">
<code class="descname">name</code><em class="property"> = &quot;Change a lane's settings&quot;</em><a class="headerlink" href="#core.scripts.ConfigureLaneScript.name" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="classmethod">
<dt id="core.scripts.ConfigureLaneScript.parse_command_line">
<em class="property">classmethod </em><code class="descname">parse_command_line</code><span class="sig-paren">(</span><em>_db=None</em>, <em>cmd_args=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#ConfigureLaneScript.parse_command_line"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.scripts.ConfigureLaneScript.parse_command_line" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="core.scripts.ConfigureLibraryScript">
<em class="property">class </em><code class="descclassname">core.scripts.</code><code class="descname">ConfigureLibraryScript</code><span class="sig-paren">(</span><em>_db=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#ConfigureLibraryScript"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.scripts.ConfigureLibraryScript" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.scripts.ConfigurationSettingScript" title="core.scripts.ConfigurationSettingScript"><code class="xref py py-class docutils literal notranslate"><span class="pre">core.scripts.ConfigurationSettingScript</span></code></a></p>
<p>Create a library or change its settings.</p>
<dl class="classmethod">
<dt id="core.scripts.ConfigureLibraryScript.arg_parser">
<em class="property">classmethod </em><code class="descname">arg_parser</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#ConfigureLibraryScript.arg_parser"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.scripts.ConfigureLibraryScript.arg_parser" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="core.scripts.ConfigureLibraryScript.do_run">
<code class="descname">do_run</code><span class="sig-paren">(</span><em>_db=None</em>, <em>cmd_args=None</em>, <em>output=&lt;open file '&lt;stdout&gt;'</em>, <em>mode 'w'&gt;</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#ConfigureLibraryScript.do_run"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.scripts.ConfigureLibraryScript.do_run" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.scripts.ConfigureLibraryScript.name">
<code class="descname">name</code><em class="property"> = &quot;Change a library's settings&quot;</em><a class="headerlink" href="#core.scripts.ConfigureLibraryScript.name" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="core.scripts.ConfigureSiteScript">
<em class="property">class </em><code class="descclassname">core.scripts.</code><code class="descname">ConfigureSiteScript</code><span class="sig-paren">(</span><em>_db=None</em>, <em>config=&lt;class 'core.config.Configuration'&gt;</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#ConfigureSiteScript"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.scripts.ConfigureSiteScript" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.scripts.ConfigurationSettingScript" title="core.scripts.ConfigurationSettingScript"><code class="xref py py-class docutils literal notranslate"><span class="pre">core.scripts.ConfigurationSettingScript</span></code></a></p>
<p>View or update site-wide configuration.</p>
<dl class="classmethod">
<dt id="core.scripts.ConfigureSiteScript.arg_parser">
<em class="property">classmethod </em><code class="descname">arg_parser</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#ConfigureSiteScript.arg_parser"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.scripts.ConfigureSiteScript.arg_parser" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="core.scripts.ConfigureSiteScript.do_run">
<code class="descname">do_run</code><span class="sig-paren">(</span><em>_db=None</em>, <em>cmd_args=None</em>, <em>output=&lt;open file '&lt;stdout&gt;'</em>, <em>mode 'w'&gt;</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#ConfigureSiteScript.do_run"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.scripts.ConfigureSiteScript.do_run" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="core.scripts.CustomListManagementScript">
<em class="property">class </em><code class="descclassname">core.scripts.</code><code class="descname">CustomListManagementScript</code><span class="sig-paren">(</span><em>manager_class</em>, <em>data_source_name</em>, <em>list_identifier</em>, <em>list_name</em>, <em>primary_language</em>, <em>description</em>, <em>**manager_kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#CustomListManagementScript"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.scripts.CustomListManagementScript" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.scripts.Script" title="core.scripts.Script"><code class="xref py py-class docutils literal notranslate"><span class="pre">core.scripts.Script</span></code></a></p>
<p>Maintain a CustomList whose membership is determined by a
MembershipManager.</p>
<dl class="method">
<dt id="core.scripts.CustomListManagementScript.run">
<code class="descname">run</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#CustomListManagementScript.run"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.scripts.CustomListManagementScript.run" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="core.scripts.CustomListSweeperScript">
<em class="property">class </em><code class="descclassname">core.scripts.</code><code class="descname">CustomListSweeperScript</code><span class="sig-paren">(</span><em>_db=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#CustomListSweeperScript"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.scripts.CustomListSweeperScript" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.scripts.LibraryInputScript" title="core.scripts.LibraryInputScript"><code class="xref py py-class docutils literal notranslate"><span class="pre">core.scripts.LibraryInputScript</span></code></a></p>
<p>Do something to each custom list in a library.</p>
<dl class="method">
<dt id="core.scripts.CustomListSweeperScript.process_custom_list">
<code class="descname">process_custom_list</code><span class="sig-paren">(</span><em>custom_list</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#CustomListSweeperScript.process_custom_list"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.scripts.CustomListSweeperScript.process_custom_list" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="core.scripts.CustomListSweeperScript.process_library">
<code class="descname">process_library</code><span class="sig-paren">(</span><em>library</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#CustomListSweeperScript.process_library"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.scripts.CustomListSweeperScript.process_library" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="core.scripts.DatabaseMigrationInitializationScript">
<em class="property">class </em><code class="descclassname">core.scripts.</code><code class="descname">DatabaseMigrationInitializationScript</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#DatabaseMigrationInitializationScript"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.scripts.DatabaseMigrationInitializationScript" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.scripts.DatabaseMigrationScript" title="core.scripts.DatabaseMigrationScript"><code class="xref py py-class docutils literal notranslate"><span class="pre">core.scripts.DatabaseMigrationScript</span></code></a></p>
<p>Creates a timestamp to kickoff the regular use of
DatabaseMigrationScript to manage migrations.</p>
<dl class="classmethod">
<dt id="core.scripts.DatabaseMigrationInitializationScript.arg_parser">
<em class="property">classmethod </em><code class="descname">arg_parser</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#DatabaseMigrationInitializationScript.arg_parser"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.scripts.DatabaseMigrationInitializationScript.arg_parser" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="core.scripts.DatabaseMigrationInitializationScript.run">
<code class="descname">run</code><span class="sig-paren">(</span><em>cmd_args=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#DatabaseMigrationInitializationScript.run"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.scripts.DatabaseMigrationInitializationScript.run" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="core.scripts.DatabaseMigrationScript">
<em class="property">class </em><code class="descclassname">core.scripts.</code><code class="descname">DatabaseMigrationScript</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#DatabaseMigrationScript"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.scripts.DatabaseMigrationScript" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.scripts.Script" title="core.scripts.Script"><code class="xref py py-class docutils literal notranslate"><span class="pre">core.scripts.Script</span></code></a></p>
<p>Runs new migrations.</p>
<p>This script needs to execute without ever loading an ORM object,
because the database might be in a state that’s not compatible
with the current ORM version.</p>
<p>This is not a TimestampScript because it keeps separate Timestamps
for the Python and the SQL migrations, and because Timestamps
are ORM objects, which this script can’t touch.</p>
<dl class="attribute">
<dt id="core.scripts.DatabaseMigrationScript.MIGRATION_WITH_COUNTER">
<code class="descname">MIGRATION_WITH_COUNTER</code><em class="property"> = &lt;_sre.SRE_Pattern object&gt;</em><a class="headerlink" href="#core.scripts.DatabaseMigrationScript.MIGRATION_WITH_COUNTER" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.scripts.DatabaseMigrationScript.PY_TIMESTAMP_SERVICE_NAME">
<code class="descname">PY_TIMESTAMP_SERVICE_NAME</code><em class="property"> = 'Database Migration - Python'</em><a class="headerlink" href="#core.scripts.DatabaseMigrationScript.PY_TIMESTAMP_SERVICE_NAME" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.scripts.DatabaseMigrationScript.SERVICE_NAME">
<code class="descname">SERVICE_NAME</code><em class="property"> = 'Database Migration'</em><a class="headerlink" href="#core.scripts.DatabaseMigrationScript.SERVICE_NAME" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.scripts.DatabaseMigrationScript.TRANSACTIONLESS_COMMANDS">
<code class="descname">TRANSACTIONLESS_COMMANDS</code><em class="property"> = ['alter type']</em><a class="headerlink" href="#core.scripts.DatabaseMigrationScript.TRANSACTIONLESS_COMMANDS" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="class">
<dt id="core.scripts.DatabaseMigrationScript.TimestampInfo">
<em class="property">class </em><code class="descname">TimestampInfo</code><span class="sig-paren">(</span><em>service</em>, <em>finish</em>, <em>counter=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#DatabaseMigrationScript.TimestampInfo"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.scripts.DatabaseMigrationScript.TimestampInfo" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Act like a ORM Timestamp object, but with no database connection.</p>
<dl class="classmethod">
<dt id="core.scripts.DatabaseMigrationScript.TimestampInfo.find">
<em class="property">classmethod </em><code class="descname">find</code><span class="sig-paren">(</span><em>script</em>, <em>service</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#DatabaseMigrationScript.TimestampInfo.find"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.scripts.DatabaseMigrationScript.TimestampInfo.find" title="Permalink to this definition">¶</a></dt>
<dd><p>Find or create an existing timestamp representing the last
migration script that was run.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">A TimestampInfo object or None</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="core.scripts.DatabaseMigrationScript.TimestampInfo.save">
<code class="descname">save</code><span class="sig-paren">(</span><em>_db</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#DatabaseMigrationScript.TimestampInfo.save"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.scripts.DatabaseMigrationScript.TimestampInfo.save" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="core.scripts.DatabaseMigrationScript.TimestampInfo.update">
<code class="descname">update</code><span class="sig-paren">(</span><em>_db</em>, <em>finish</em>, <em>counter</em>, <em>migration_name=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#DatabaseMigrationScript.TimestampInfo.update"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.scripts.DatabaseMigrationScript.TimestampInfo.update" title="Permalink to this definition">¶</a></dt>
<dd><p>Saves a TimestampInfo object to the database.</p>
</dd></dl>

</dd></dl>

<dl class="classmethod">
<dt id="core.scripts.DatabaseMigrationScript.arg_parser">
<em class="property">classmethod </em><code class="descname">arg_parser</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#DatabaseMigrationScript.arg_parser"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.scripts.DatabaseMigrationScript.arg_parser" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.scripts.DatabaseMigrationScript.directories_by_priority">
<code class="descname">directories_by_priority</code><a class="headerlink" href="#core.scripts.DatabaseMigrationScript.directories_by_priority" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a list containing the migration directory path for core
and its container server, organized in priority order (core first)</p>
</dd></dl>

<dl class="method">
<dt id="core.scripts.DatabaseMigrationScript.fetch_migration_files">
<code class="descname">fetch_migration_files</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#DatabaseMigrationScript.fetch_migration_files"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.scripts.DatabaseMigrationScript.fetch_migration_files" title="Permalink to this definition">¶</a></dt>
<dd><p>Pulls migration files from the expected locations</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">a tuple with a list of migration filenames and a dictionary of
those files separated by their absolute directory location.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="core.scripts.DatabaseMigrationScript.get_new_migrations">
<code class="descname">get_new_migrations</code><span class="sig-paren">(</span><em>timestamp</em>, <em>migrations</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#DatabaseMigrationScript.get_new_migrations"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.scripts.DatabaseMigrationScript.get_new_migrations" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a list of migration filenames, representing migrations
created since the timestamp</p>
</dd></dl>

<dl class="method">
<dt id="core.scripts.DatabaseMigrationScript.load_configuration">
<code class="descname">load_configuration</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#DatabaseMigrationScript.load_configuration"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.scripts.DatabaseMigrationScript.load_configuration" title="Permalink to this definition">¶</a></dt>
<dd><p>Load configuration without accessing the database.</p>
</dd></dl>

<dl class="classmethod">
<dt id="core.scripts.DatabaseMigrationScript.migratable_files">
<em class="property">classmethod </em><code class="descname">migratable_files</code><span class="sig-paren">(</span><em>filelist</em>, <em>extensions</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#DatabaseMigrationScript.migratable_files"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.scripts.DatabaseMigrationScript.migratable_files" title="Permalink to this definition">¶</a></dt>
<dd><p>Filter a list of files for migratable file extensions</p>
</dd></dl>

<dl class="attribute">
<dt id="core.scripts.DatabaseMigrationScript.name">
<code class="descname">name</code><a class="headerlink" href="#core.scripts.DatabaseMigrationScript.name" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the appropriate target Timestamp service name for the
timestamp, depending on the script parameters.</p>
</dd></dl>

<dl class="attribute">
<dt id="core.scripts.DatabaseMigrationScript.overall_timestamp">
<code class="descname">overall_timestamp</code><a class="headerlink" href="#core.scripts.DatabaseMigrationScript.overall_timestamp" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a TimestampInfo object corresponding to the the overall or
general “Database Migration” service.</p>
<p>If there is no Timestamp or the Timestamp doesn’t have a timestamp
attribute, it returns None.</p>
</dd></dl>

<dl class="attribute">
<dt id="core.scripts.DatabaseMigrationScript.python_timestamp">
<code class="descname">python_timestamp</code><a class="headerlink" href="#core.scripts.DatabaseMigrationScript.python_timestamp" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a TimestampInfo object corresponding to the python migration-
specific “Database Migration - Python” Timestamp.</p>
<p>If there is no Timestamp or the Timestamp hasn’t been initialized with
a timestamp attribute, it returns None.</p>
</dd></dl>

<dl class="method">
<dt id="core.scripts.DatabaseMigrationScript.run">
<code class="descname">run</code><span class="sig-paren">(</span><em>test_db=None</em>, <em>test=False</em>, <em>cmd_args=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#DatabaseMigrationScript.run"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.scripts.DatabaseMigrationScript.run" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="core.scripts.DatabaseMigrationScript.run_migrations">
<code class="descname">run_migrations</code><span class="sig-paren">(</span><em>migrations</em>, <em>migrations_by_dir</em>, <em>timestamp</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#DatabaseMigrationScript.run_migrations"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.scripts.DatabaseMigrationScript.run_migrations" title="Permalink to this definition">¶</a></dt>
<dd><p>Run each migration, first by timestamp and then by directory
priority.</p>
</dd></dl>

<dl class="classmethod">
<dt id="core.scripts.DatabaseMigrationScript.sort_migrations">
<em class="property">classmethod </em><code class="descname">sort_migrations</code><span class="sig-paren">(</span><em>migrations</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#DatabaseMigrationScript.sort_migrations"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.scripts.DatabaseMigrationScript.sort_migrations" title="Permalink to this definition">¶</a></dt>
<dd><p>All Python migrations sort after all SQL migrations, since a Python
migration requires an up-to-date database schema.</p>
<p>Migrations with a counter digit sort after migrations without
one.</p>
</dd></dl>

<dl class="method">
<dt id="core.scripts.DatabaseMigrationScript.update_timestamps">
<code class="descname">update_timestamps</code><span class="sig-paren">(</span><em>migration_file</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#DatabaseMigrationScript.update_timestamps"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.scripts.DatabaseMigrationScript.update_timestamps" title="Permalink to this definition">¶</a></dt>
<dd><p>Updates this service’s timestamp to match a given migration</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="core.scripts.Explain">
<em class="property">class </em><code class="descclassname">core.scripts.</code><code class="descname">Explain</code><span class="sig-paren">(</span><em>_db=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#Explain"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.scripts.Explain" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.scripts.IdentifierInputScript" title="core.scripts.IdentifierInputScript"><code class="xref py py-class docutils literal notranslate"><span class="pre">core.scripts.IdentifierInputScript</span></code></a></p>
<p>Explain everything known about a given work.</p>
<dl class="attribute">
<dt id="core.scripts.Explain.METADATA_URL_TEMPLATE">
<code class="descname">METADATA_URL_TEMPLATE</code><em class="property"> = 'http://metadata.librarysimplified.org/lookup?urn=%s'</em><a class="headerlink" href="#core.scripts.Explain.METADATA_URL_TEMPLATE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.scripts.Explain.TIME_FORMAT">
<code class="descname">TIME_FORMAT</code><em class="property"> = '%Y-%m-%d %H:%M'</em><a class="headerlink" href="#core.scripts.Explain.TIME_FORMAT" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="core.scripts.Explain.do_run">
<code class="descname">do_run</code><span class="sig-paren">(</span><em>cmd_args=None</em>, <em>stdin=&lt;open file '&lt;stdin&gt;'</em>, <em>mode 'r'&gt;</em>, <em>stdout=&lt;open file '&lt;stdout&gt;'</em>, <em>mode 'w'&gt;</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#Explain.do_run"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.scripts.Explain.do_run" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="core.scripts.Explain.explain">
<code class="descname">explain</code><span class="sig-paren">(</span><em>_db</em>, <em>edition</em>, <em>presentation_calculation_policy=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#Explain.explain"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.scripts.Explain.explain" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="core.scripts.Explain.explain_contribution">
<code class="descname">explain_contribution</code><span class="sig-paren">(</span><em>contribution</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#Explain.explain_contribution"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.scripts.Explain.explain_contribution" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="core.scripts.Explain.explain_coverage_record">
<code class="descname">explain_coverage_record</code><span class="sig-paren">(</span><em>cr</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#Explain.explain_coverage_record"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.scripts.Explain.explain_coverage_record" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="core.scripts.Explain.explain_identifier">
<code class="descname">explain_identifier</code><span class="sig-paren">(</span><em>identifier</em>, <em>primary</em>, <em>seen</em>, <em>strength</em>, <em>level</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#Explain.explain_identifier"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.scripts.Explain.explain_identifier" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="core.scripts.Explain.explain_license_pool">
<code class="descname">explain_license_pool</code><span class="sig-paren">(</span><em>pool</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#Explain.explain_license_pool"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.scripts.Explain.explain_license_pool" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="core.scripts.Explain.explain_work">
<code class="descname">explain_work</code><span class="sig-paren">(</span><em>work</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#Explain.explain_work"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.scripts.Explain.explain_work" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="core.scripts.Explain.explain_work_coverage_record">
<code class="descname">explain_work_coverage_record</code><span class="sig-paren">(</span><em>cr</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#Explain.explain_work_coverage_record"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.scripts.Explain.explain_work_coverage_record" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.scripts.Explain.name">
<code class="descname">name</code><em class="property"> = 'Explain everything known about a given work'</em><a class="headerlink" href="#core.scripts.Explain.name" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="core.scripts.Explain.write">
<code class="descname">write</code><span class="sig-paren">(</span><em>s</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#Explain.write"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.scripts.Explain.write" title="Permalink to this definition">¶</a></dt>
<dd><p>Write a string to self.stdout.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="core.scripts.IdentifierInputScript">
<em class="property">class </em><code class="descclassname">core.scripts.</code><code class="descname">IdentifierInputScript</code><span class="sig-paren">(</span><em>_db=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#IdentifierInputScript"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.scripts.IdentifierInputScript" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.scripts.InputScript" title="core.scripts.InputScript"><code class="xref py py-class docutils literal notranslate"><span class="pre">core.scripts.InputScript</span></code></a></p>
<p>A script that takes identifiers as command line inputs.</p>
<dl class="attribute">
<dt id="core.scripts.IdentifierInputScript.DATABASE_ID">
<code class="descname">DATABASE_ID</code><em class="property"> = 'Database ID'</em><a class="headerlink" href="#core.scripts.IdentifierInputScript.DATABASE_ID" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="classmethod">
<dt id="core.scripts.IdentifierInputScript.arg_parser">
<em class="property">classmethod </em><code class="descname">arg_parser</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#IdentifierInputScript.arg_parser"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.scripts.IdentifierInputScript.arg_parser" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="classmethod">
<dt id="core.scripts.IdentifierInputScript.look_up_identifiers">
<em class="property">classmethod </em><code class="descname">look_up_identifiers</code><span class="sig-paren">(</span><em>_db</em>, <em>parsed</em>, <em>stdin_identifier_strings</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#IdentifierInputScript.look_up_identifiers"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.scripts.IdentifierInputScript.look_up_identifiers" title="Permalink to this definition">¶</a></dt>
<dd><p>Turn identifiers as specified on the command line into
real database Identifier objects.</p>
</dd></dl>

<dl class="classmethod">
<dt id="core.scripts.IdentifierInputScript.parse_command_line">
<em class="property">classmethod </em><code class="descname">parse_command_line</code><span class="sig-paren">(</span><em>_db=None</em>, <em>cmd_args=None</em>, <em>stdin=&lt;open file '&lt;stdin&gt;'</em>, <em>mode 'r'&gt;</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#IdentifierInputScript.parse_command_line"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.scripts.IdentifierInputScript.parse_command_line" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="classmethod">
<dt id="core.scripts.IdentifierInputScript.parse_identifier_list">
<em class="property">classmethod </em><code class="descname">parse_identifier_list</code><span class="sig-paren">(</span><em>_db</em>, <em>identifier_type</em>, <em>data_source</em>, <em>arguments</em>, <em>autocreate=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#IdentifierInputScript.parse_identifier_list"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.scripts.IdentifierInputScript.parse_identifier_list" title="Permalink to this definition">¶</a></dt>
<dd><p>Turn a list of identifiers into a list of Identifier objects.</p>
<p>The list of arguments is probably derived from a command-line
parser such as the one defined in
IdentifierInputScript.arg_parser().</p>
<p>This makes it easy to identify specific identifiers on the
command line. Examples:</p>
<p>1 2</p>
<p>a b c</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="core.scripts.InputScript">
<em class="property">class </em><code class="descclassname">core.scripts.</code><code class="descname">InputScript</code><span class="sig-paren">(</span><em>_db=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#InputScript"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.scripts.InputScript" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.scripts.Script" title="core.scripts.Script"><code class="xref py py-class docutils literal notranslate"><span class="pre">core.scripts.Script</span></code></a></p>
<dl class="classmethod">
<dt id="core.scripts.InputScript.read_stdin_lines">
<em class="property">classmethod </em><code class="descname">read_stdin_lines</code><span class="sig-paren">(</span><em>stdin</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#InputScript.read_stdin_lines"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.scripts.InputScript.read_stdin_lines" title="Permalink to this definition">¶</a></dt>
<dd><p>Read lines from a (possibly mocked, possibly empty) standard input.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="core.scripts.LaneSweeperScript">
<em class="property">class </em><code class="descclassname">core.scripts.</code><code class="descname">LaneSweeperScript</code><span class="sig-paren">(</span><em>_db=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#LaneSweeperScript"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.scripts.LaneSweeperScript" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.scripts.LibraryInputScript" title="core.scripts.LibraryInputScript"><code class="xref py py-class docutils literal notranslate"><span class="pre">core.scripts.LibraryInputScript</span></code></a></p>
<p>Do something to each lane in a library.</p>
<dl class="method">
<dt id="core.scripts.LaneSweeperScript.process_lane">
<code class="descname">process_lane</code><span class="sig-paren">(</span><em>lane</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#LaneSweeperScript.process_lane"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.scripts.LaneSweeperScript.process_lane" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="core.scripts.LaneSweeperScript.process_library">
<code class="descname">process_library</code><span class="sig-paren">(</span><em>library</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#LaneSweeperScript.process_library"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.scripts.LaneSweeperScript.process_library" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="core.scripts.LaneSweeperScript.should_process_lane">
<code class="descname">should_process_lane</code><span class="sig-paren">(</span><em>lane</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#LaneSweeperScript.should_process_lane"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.scripts.LaneSweeperScript.should_process_lane" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="core.scripts.LibraryInputScript">
<em class="property">class </em><code class="descclassname">core.scripts.</code><code class="descname">LibraryInputScript</code><span class="sig-paren">(</span><em>_db=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#LibraryInputScript"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.scripts.LibraryInputScript" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.scripts.InputScript" title="core.scripts.InputScript"><code class="xref py py-class docutils literal notranslate"><span class="pre">core.scripts.InputScript</span></code></a></p>
<p>A script that operates on one or more Libraries.</p>
<dl class="classmethod">
<dt id="core.scripts.LibraryInputScript.arg_parser">
<em class="property">classmethod </em><code class="descname">arg_parser</code><span class="sig-paren">(</span><em>_db</em>, <em>multiple_libraries=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#LibraryInputScript.arg_parser"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.scripts.LibraryInputScript.arg_parser" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="core.scripts.LibraryInputScript.do_run">
<code class="descname">do_run</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#LibraryInputScript.do_run"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.scripts.LibraryInputScript.do_run" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="classmethod">
<dt id="core.scripts.LibraryInputScript.look_up_libraries">
<em class="property">classmethod </em><code class="descname">look_up_libraries</code><span class="sig-paren">(</span><em>_db</em>, <em>parsed</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#LibraryInputScript.look_up_libraries"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.scripts.LibraryInputScript.look_up_libraries" title="Permalink to this definition">¶</a></dt>
<dd><p>Turn library names as specified on the command line into real
Library objects.</p>
</dd></dl>

<dl class="classmethod">
<dt id="core.scripts.LibraryInputScript.parse_command_line">
<em class="property">classmethod </em><code class="descname">parse_command_line</code><span class="sig-paren">(</span><em>_db=None</em>, <em>cmd_args=None</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#LibraryInputScript.parse_command_line"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.scripts.LibraryInputScript.parse_command_line" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="classmethod">
<dt id="core.scripts.LibraryInputScript.parse_library_list">
<em class="property">classmethod </em><code class="descname">parse_library_list</code><span class="sig-paren">(</span><em>_db</em>, <em>arguments</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#LibraryInputScript.parse_library_list"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.scripts.LibraryInputScript.parse_library_list" title="Permalink to this definition">¶</a></dt>
<dd><p>Turn a list of library short names into a list of Library objects.</p>
<p>The list of arguments is probably derived from a command-line
parser such as the one defined in
LibraryInputScript.arg_parser().</p>
</dd></dl>

<dl class="method">
<dt id="core.scripts.LibraryInputScript.process_libraries">
<code class="descname">process_libraries</code><span class="sig-paren">(</span><em>libraries</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#LibraryInputScript.process_libraries"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.scripts.LibraryInputScript.process_libraries" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="core.scripts.LibraryInputScript.process_library">
<code class="descname">process_library</code><span class="sig-paren">(</span><em>library</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#LibraryInputScript.process_library"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.scripts.LibraryInputScript.process_library" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="core.scripts.ListCollectionMetadataIdentifiersScript">
<em class="property">class </em><code class="descclassname">core.scripts.</code><code class="descname">ListCollectionMetadataIdentifiersScript</code><span class="sig-paren">(</span><em>_db=None</em>, <em>output=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#ListCollectionMetadataIdentifiersScript"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.scripts.ListCollectionMetadataIdentifiersScript" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.scripts.CollectionInputScript" title="core.scripts.CollectionInputScript"><code class="xref py py-class docutils literal notranslate"><span class="pre">core.scripts.CollectionInputScript</span></code></a></p>
<p>List the metadata identifiers for Collections in the database.</p>
<p>This script is helpful for accounting for and tracking collections on
the metadata wrangler.</p>
<dl class="method">
<dt id="core.scripts.ListCollectionMetadataIdentifiersScript.do_run">
<code class="descname">do_run</code><span class="sig-paren">(</span><em>collections=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#ListCollectionMetadataIdentifiersScript.do_run"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.scripts.ListCollectionMetadataIdentifiersScript.do_run" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="core.scripts.ListCollectionMetadataIdentifiersScript.run">
<code class="descname">run</code><span class="sig-paren">(</span><em>cmd_args=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#ListCollectionMetadataIdentifiersScript.run"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.scripts.ListCollectionMetadataIdentifiersScript.run" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="core.scripts.MirrorResourcesScript">
<em class="property">class </em><code class="descclassname">core.scripts.</code><code class="descname">MirrorResourcesScript</code><span class="sig-paren">(</span><em>_db=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#MirrorResourcesScript"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.scripts.MirrorResourcesScript" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.scripts.CollectionInputScript" title="core.scripts.CollectionInputScript"><code class="xref py py-class docutils literal notranslate"><span class="pre">core.scripts.CollectionInputScript</span></code></a></p>
<p>Make sure that all mirrorable resources in a collection have
in fact been mirrored.</p>
<dl class="attribute">
<dt id="core.scripts.MirrorResourcesScript.MIRROR_UTILITY">
<code class="descname">MIRROR_UTILITY</code><em class="property"> = &lt;core.metadata_layer.MetaToModelUtility object&gt;</em><a class="headerlink" href="#core.scripts.MirrorResourcesScript.MIRROR_UTILITY" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="core.scripts.MirrorResourcesScript.collections_with_uploader">
<code class="descname">collections_with_uploader</code><span class="sig-paren">(</span><em>collections</em>, <em>collection_type=&lt;CollectionType.OPEN_ACCESS: 'OPEN_ACCESS'&gt;</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#MirrorResourcesScript.collections_with_uploader"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.scripts.MirrorResourcesScript.collections_with_uploader" title="Permalink to this definition">¶</a></dt>
<dd><p>Filter out collections that have no MirrorUploader.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Yield:</th><td class="field-body">2-tuples (Collection, ReplacementPolicy). The
ReplacementPolicy is the appropriate one for this script
to use for that Collection.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="classmethod">
<dt id="core.scripts.MirrorResourcesScript.derive_rights_status">
<em class="property">classmethod </em><code class="descname">derive_rights_status</code><span class="sig-paren">(</span><em>license_pool</em>, <em>resource</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#MirrorResourcesScript.derive_rights_status"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.scripts.MirrorResourcesScript.derive_rights_status" title="Permalink to this definition">¶</a></dt>
<dd><p>Make a best guess about the rights status for the given
resource.</p>
<p>This relies on the information having been available at one point,
but having been stored in the database at a slight remove.</p>
</dd></dl>

<dl class="method">
<dt id="core.scripts.MirrorResourcesScript.do_run">
<code class="descname">do_run</code><span class="sig-paren">(</span><em>cmd_args=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#MirrorResourcesScript.do_run"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.scripts.MirrorResourcesScript.do_run" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="core.scripts.MirrorResourcesScript.process_collection">
<code class="descname">process_collection</code><span class="sig-paren">(</span><em>collection</em>, <em>policy</em>, <em>unmirrored=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#MirrorResourcesScript.process_collection"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.scripts.MirrorResourcesScript.process_collection" title="Permalink to this definition">¶</a></dt>
<dd><p>Make sure every mirrorable resource in this collection has
been mirrored.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>unmirrored</strong> – A replacement for Hyperlink.unmirrored,
for use in tests.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="core.scripts.MirrorResourcesScript.process_item">
<code class="descname">process_item</code><span class="sig-paren">(</span><em>collection</em>, <em>link_obj</em>, <em>policy</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#MirrorResourcesScript.process_item"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.scripts.MirrorResourcesScript.process_item" title="Permalink to this definition">¶</a></dt>
<dd><p>Determine the URL that needs to be mirrored and (for books)
the rationale that lets us mirror that URL. Then mirror it.</p>
</dd></dl>

<dl class="classmethod">
<dt id="core.scripts.MirrorResourcesScript.replacement_policy">
<em class="property">classmethod </em><code class="descname">replacement_policy</code><span class="sig-paren">(</span><em>mirrors</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#MirrorResourcesScript.replacement_policy"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.scripts.MirrorResourcesScript.replacement_policy" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a ReplacementPolicy for this script that uses the
given mirrors.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="core.scripts.MockStdin">
<em class="property">class </em><code class="descclassname">core.scripts.</code><code class="descname">MockStdin</code><span class="sig-paren">(</span><em>*lines</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#MockStdin"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.scripts.MockStdin" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Mock a list of identifiers passed in on standard input.</p>
<dl class="method">
<dt id="core.scripts.MockStdin.readlines">
<code class="descname">readlines</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#MockStdin.readlines"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.scripts.MockStdin.readlines" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="core.scripts.OPDSImportScript">
<em class="property">class </em><code class="descclassname">core.scripts.</code><code class="descname">OPDSImportScript</code><span class="sig-paren">(</span><em>_db=None</em>, <em>importer_class=None</em>, <em>monitor_class=None</em>, <em>protocol=None</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#OPDSImportScript"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.scripts.OPDSImportScript" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.scripts.CollectionInputScript" title="core.scripts.CollectionInputScript"><code class="xref py py-class docutils literal notranslate"><span class="pre">core.scripts.CollectionInputScript</span></code></a></p>
<p>Import all books from the OPDS feed associated with a collection.</p>
<dl class="attribute">
<dt id="core.scripts.OPDSImportScript.IMPORTER_CLASS">
<code class="descname">IMPORTER_CLASS</code><a class="headerlink" href="#core.scripts.OPDSImportScript.IMPORTER_CLASS" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <a class="reference internal" href="#core.opds_import.OPDSImporter" title="core.opds_import.OPDSImporter"><code class="xref py py-class docutils literal notranslate"><span class="pre">core.opds_import.OPDSImporter</span></code></a></p>
</dd></dl>

<dl class="attribute">
<dt id="core.scripts.OPDSImportScript.MONITOR_CLASS">
<code class="descname">MONITOR_CLASS</code><a class="headerlink" href="#core.scripts.OPDSImportScript.MONITOR_CLASS" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <a class="reference internal" href="#core.opds_import.OPDSImportMonitor" title="core.opds_import.OPDSImportMonitor"><code class="xref py py-class docutils literal notranslate"><span class="pre">core.opds_import.OPDSImportMonitor</span></code></a></p>
</dd></dl>

<dl class="attribute">
<dt id="core.scripts.OPDSImportScript.PROTOCOL">
<code class="descname">PROTOCOL</code><em class="property"> = u'OPDS Import'</em><a class="headerlink" href="#core.scripts.OPDSImportScript.PROTOCOL" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="classmethod">
<dt id="core.scripts.OPDSImportScript.arg_parser">
<em class="property">classmethod </em><code class="descname">arg_parser</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#OPDSImportScript.arg_parser"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.scripts.OPDSImportScript.arg_parser" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="core.scripts.OPDSImportScript.do_run">
<code class="descname">do_run</code><span class="sig-paren">(</span><em>cmd_args=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#OPDSImportScript.do_run"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.scripts.OPDSImportScript.do_run" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.scripts.OPDSImportScript.name">
<code class="descname">name</code><em class="property"> = 'Import all books from the OPDS feed associated with a collection.'</em><a class="headerlink" href="#core.scripts.OPDSImportScript.name" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="core.scripts.OPDSImportScript.run_monitor">
<code class="descname">run_monitor</code><span class="sig-paren">(</span><em>collection</em>, <em>force=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#OPDSImportScript.run_monitor"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.scripts.OPDSImportScript.run_monitor" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="core.scripts.PatronInputScript">
<em class="property">class </em><code class="descclassname">core.scripts.</code><code class="descname">PatronInputScript</code><span class="sig-paren">(</span><em>_db=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#PatronInputScript"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.scripts.PatronInputScript" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.scripts.LibraryInputScript" title="core.scripts.LibraryInputScript"><code class="xref py py-class docutils literal notranslate"><span class="pre">core.scripts.LibraryInputScript</span></code></a></p>
<p>A script that operates on one or more Patrons.</p>
<dl class="classmethod">
<dt id="core.scripts.PatronInputScript.arg_parser">
<em class="property">classmethod </em><code class="descname">arg_parser</code><span class="sig-paren">(</span><em>_db</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#PatronInputScript.arg_parser"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.scripts.PatronInputScript.arg_parser" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="core.scripts.PatronInputScript.do_run">
<code class="descname">do_run</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#PatronInputScript.do_run"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.scripts.PatronInputScript.do_run" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="classmethod">
<dt id="core.scripts.PatronInputScript.look_up_patrons">
<em class="property">classmethod </em><code class="descname">look_up_patrons</code><span class="sig-paren">(</span><em>_db</em>, <em>parsed</em>, <em>stdin_patron_strings</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#PatronInputScript.look_up_patrons"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.scripts.PatronInputScript.look_up_patrons" title="Permalink to this definition">¶</a></dt>
<dd><p>Turn patron identifiers as specified on the command line into real
Patron objects.</p>
</dd></dl>

<dl class="classmethod">
<dt id="core.scripts.PatronInputScript.parse_command_line">
<em class="property">classmethod </em><code class="descname">parse_command_line</code><span class="sig-paren">(</span><em>_db=None</em>, <em>cmd_args=None</em>, <em>stdin=&lt;open file '&lt;stdin&gt;'</em>, <em>mode 'r'&gt;</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#PatronInputScript.parse_command_line"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.scripts.PatronInputScript.parse_command_line" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="classmethod">
<dt id="core.scripts.PatronInputScript.parse_patron_list">
<em class="property">classmethod </em><code class="descname">parse_patron_list</code><span class="sig-paren">(</span><em>_db</em>, <em>library</em>, <em>arguments</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#PatronInputScript.parse_patron_list"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.scripts.PatronInputScript.parse_patron_list" title="Permalink to this definition">¶</a></dt>
<dd><p>Turn a list of patron identifiers into a list of Patron objects.</p>
<p>The list of arguments is probably derived from a command-line
parser such as the one defined in
PatronInputScript.arg_parser().</p>
</dd></dl>

<dl class="method">
<dt id="core.scripts.PatronInputScript.process_patron">
<code class="descname">process_patron</code><span class="sig-paren">(</span><em>patron</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#PatronInputScript.process_patron"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.scripts.PatronInputScript.process_patron" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="core.scripts.PatronInputScript.process_patrons">
<code class="descname">process_patrons</code><span class="sig-paren">(</span><em>patrons</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#PatronInputScript.process_patrons"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.scripts.PatronInputScript.process_patrons" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="core.scripts.RebuildSearchIndexScript">
<em class="property">class </em><code class="descclassname">core.scripts.</code><code class="descname">RebuildSearchIndexScript</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#RebuildSearchIndexScript"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.scripts.RebuildSearchIndexScript" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.scripts.RunWorkCoverageProviderScript" title="core.scripts.RunWorkCoverageProviderScript"><code class="xref py py-class docutils literal notranslate"><span class="pre">core.scripts.RunWorkCoverageProviderScript</span></code></a>, <a class="reference internal" href="#core.scripts.RemovesSearchCoverage" title="core.scripts.RemovesSearchCoverage"><code class="xref py py-class docutils literal notranslate"><span class="pre">core.scripts.RemovesSearchCoverage</span></code></a></p>
<p>Completely delete the search index and recreate it.</p>
<dl class="method">
<dt id="core.scripts.RebuildSearchIndexScript.do_run">
<code class="descname">do_run</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#RebuildSearchIndexScript.do_run"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.scripts.RebuildSearchIndexScript.do_run" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="core.scripts.ReclassifyWorksForUncheckedSubjectsScript">
<em class="property">class </em><code class="descclassname">core.scripts.</code><code class="descname">ReclassifyWorksForUncheckedSubjectsScript</code><span class="sig-paren">(</span><em>_db=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#ReclassifyWorksForUncheckedSubjectsScript"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.scripts.ReclassifyWorksForUncheckedSubjectsScript" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.scripts.WorkClassificationScript" title="core.scripts.WorkClassificationScript"><code class="xref py py-class docutils literal notranslate"><span class="pre">core.scripts.WorkClassificationScript</span></code></a></p>
<p>Reclassify all Works whose current classifications appear to
depend on Subjects in the ‘unchecked’ state.</p>
<p>This generally means that some migration script reset those
Subjects because the rules for processing them changed.</p>
<dl class="attribute">
<dt id="core.scripts.ReclassifyWorksForUncheckedSubjectsScript.batch_size">
<code class="descname">batch_size</code><em class="property"> = 100</em><a class="headerlink" href="#core.scripts.ReclassifyWorksForUncheckedSubjectsScript.batch_size" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.scripts.ReclassifyWorksForUncheckedSubjectsScript.name">
<code class="descname">name</code><em class="property"> = 'Reclassify works that use unchecked subjects.'</em><a class="headerlink" href="#core.scripts.ReclassifyWorksForUncheckedSubjectsScript.name" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.scripts.ReclassifyWorksForUncheckedSubjectsScript.policy">
<code class="descname">policy</code><em class="property"> = &lt;core.model.PresentationCalculationPolicy object&gt;</em><a class="headerlink" href="#core.scripts.ReclassifyWorksForUncheckedSubjectsScript.policy" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="core.scripts.RemovesSearchCoverage">
<em class="property">class </em><code class="descclassname">core.scripts.</code><code class="descname">RemovesSearchCoverage</code><a class="reference internal" href="_modules/core/scripts.html#RemovesSearchCoverage"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.scripts.RemovesSearchCoverage" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Mix-in class for a script that might remove all coverage records
for the search engine.</p>
<dl class="method">
<dt id="core.scripts.RemovesSearchCoverage.remove_search_coverage_records">
<code class="descname">remove_search_coverage_records</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#RemovesSearchCoverage.remove_search_coverage_records"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.scripts.RemovesSearchCoverage.remove_search_coverage_records" title="Permalink to this definition">¶</a></dt>
<dd><p>Delete all search coverage records from the database.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">The number of records deleted.</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="core.scripts.RunCollectionCoverageProviderScript">
<em class="property">class </em><code class="descclassname">core.scripts.</code><code class="descname">RunCollectionCoverageProviderScript</code><span class="sig-paren">(</span><em>provider_class</em>, <em>_db=None</em>, <em>providers=None</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#RunCollectionCoverageProviderScript"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.scripts.RunCollectionCoverageProviderScript" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.scripts.RunCoverageProvidersScript" title="core.scripts.RunCoverageProvidersScript"><code class="xref py py-class docutils literal notranslate"><span class="pre">core.scripts.RunCoverageProvidersScript</span></code></a></p>
<p>Run the same CoverageProvider code for all Collections that
get their licenses from the appropriate place.</p>
<dl class="method">
<dt id="core.scripts.RunCollectionCoverageProviderScript.get_providers">
<code class="descname">get_providers</code><span class="sig-paren">(</span><em>_db</em>, <em>provider_class</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#RunCollectionCoverageProviderScript.get_providers"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.scripts.RunCollectionCoverageProviderScript.get_providers" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="core.scripts.RunCollectionMonitorScript">
<em class="property">class </em><code class="descclassname">core.scripts.</code><code class="descname">RunCollectionMonitorScript</code><span class="sig-paren">(</span><em>monitor_class</em>, <em>_db=None</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#RunCollectionMonitorScript"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.scripts.RunCollectionMonitorScript" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.scripts.RunMultipleMonitorsScript" title="core.scripts.RunMultipleMonitorsScript"><code class="xref py py-class docutils literal notranslate"><span class="pre">core.scripts.RunMultipleMonitorsScript</span></code></a></p>
<p>Run a CollectionMonitor on every Collection that comes through a
certain protocol.</p>
<dl class="method">
<dt id="core.scripts.RunCollectionMonitorScript.monitors">
<code class="descname">monitors</code><span class="sig-paren">(</span><em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#RunCollectionMonitorScript.monitors"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.scripts.RunCollectionMonitorScript.monitors" title="Permalink to this definition">¶</a></dt>
<dd><p>Find all the Monitors that need to be run.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">A list of Monitor objects.</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="core.scripts.RunCoverageProviderScript">
<em class="property">class </em><code class="descclassname">core.scripts.</code><code class="descname">RunCoverageProviderScript</code><span class="sig-paren">(</span><em>provider</em>, <em>_db=None</em>, <em>cmd_args=None</em>, <em>*provider_args</em>, <em>**provider_kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#RunCoverageProviderScript"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.scripts.RunCoverageProviderScript" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.scripts.IdentifierInputScript" title="core.scripts.IdentifierInputScript"><code class="xref py py-class docutils literal notranslate"><span class="pre">core.scripts.IdentifierInputScript</span></code></a></p>
<p>Run a single coverage provider.</p>
<dl class="classmethod">
<dt id="core.scripts.RunCoverageProviderScript.arg_parser">
<em class="property">classmethod </em><code class="descname">arg_parser</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#RunCoverageProviderScript.arg_parser"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.scripts.RunCoverageProviderScript.arg_parser" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="core.scripts.RunCoverageProviderScript.do_run">
<code class="descname">do_run</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#RunCoverageProviderScript.do_run"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.scripts.RunCoverageProviderScript.do_run" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="core.scripts.RunCoverageProviderScript.extract_additional_command_line_arguments">
<code class="descname">extract_additional_command_line_arguments</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#RunCoverageProviderScript.extract_additional_command_line_arguments"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.scripts.RunCoverageProviderScript.extract_additional_command_line_arguments" title="Permalink to this definition">¶</a></dt>
<dd><p>A hook method for subclasses.</p>
<p>Turns command-line arguments into additional keyword arguments
to the CoverageProvider constructor.</p>
<p>By default, pass in a value used only by CoverageProvider
(as opposed to WorkCoverageProvider).</p>
</dd></dl>

<dl class="classmethod">
<dt id="core.scripts.RunCoverageProviderScript.parse_command_line">
<em class="property">classmethod </em><code class="descname">parse_command_line</code><span class="sig-paren">(</span><em>_db</em>, <em>cmd_args=None</em>, <em>stdin=&lt;open file '&lt;stdin&gt;'</em>, <em>mode 'r'&gt;</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#RunCoverageProviderScript.parse_command_line"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.scripts.RunCoverageProviderScript.parse_command_line" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="core.scripts.RunCoverageProvidersScript">
<em class="property">class </em><code class="descclassname">core.scripts.</code><code class="descname">RunCoverageProvidersScript</code><span class="sig-paren">(</span><em>providers</em>, <em>_db=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#RunCoverageProvidersScript"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.scripts.RunCoverageProvidersScript" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.scripts.Script" title="core.scripts.Script"><code class="xref py py-class docutils literal notranslate"><span class="pre">core.scripts.Script</span></code></a></p>
<p>Alternate between multiple coverage providers.</p>
<dl class="method">
<dt id="core.scripts.RunCoverageProvidersScript.do_run">
<code class="descname">do_run</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#RunCoverageProvidersScript.do_run"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.scripts.RunCoverageProvidersScript.do_run" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="core.scripts.RunMonitorScript">
<em class="property">class </em><code class="descclassname">core.scripts.</code><code class="descname">RunMonitorScript</code><span class="sig-paren">(</span><em>monitor</em>, <em>_db=None</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#RunMonitorScript"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.scripts.RunMonitorScript" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.scripts.Script" title="core.scripts.Script"><code class="xref py py-class docutils literal notranslate"><span class="pre">core.scripts.Script</span></code></a></p>
<dl class="method">
<dt id="core.scripts.RunMonitorScript.do_run">
<code class="descname">do_run</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#RunMonitorScript.do_run"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.scripts.RunMonitorScript.do_run" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="core.scripts.RunMultipleMonitorsScript">
<em class="property">class </em><code class="descclassname">core.scripts.</code><code class="descname">RunMultipleMonitorsScript</code><span class="sig-paren">(</span><em>_db=None</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#RunMultipleMonitorsScript"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.scripts.RunMultipleMonitorsScript" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.scripts.Script" title="core.scripts.Script"><code class="xref py py-class docutils literal notranslate"><span class="pre">core.scripts.Script</span></code></a></p>
<p>Run a number of monitors in sequence.</p>
<p>Currently the Monitors are run one at a time. It should be
possible to take a command-line argument that runs all the
Monitors in batches, each in its own thread. Unfortunately, it’s
tough to know in a given situation that this won’t overload the
system.</p>
<dl class="method">
<dt id="core.scripts.RunMultipleMonitorsScript.do_run">
<code class="descname">do_run</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#RunMultipleMonitorsScript.do_run"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.scripts.RunMultipleMonitorsScript.do_run" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="core.scripts.RunMultipleMonitorsScript.monitors">
<code class="descname">monitors</code><span class="sig-paren">(</span><em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#RunMultipleMonitorsScript.monitors"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.scripts.RunMultipleMonitorsScript.monitors" title="Permalink to this definition">¶</a></dt>
<dd><p>Find all the Monitors that need to be run.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">A list of Monitor objects.</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="core.scripts.RunReaperMonitorsScript">
<em class="property">class </em><code class="descclassname">core.scripts.</code><code class="descname">RunReaperMonitorsScript</code><span class="sig-paren">(</span><em>_db=None</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#RunReaperMonitorsScript"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.scripts.RunReaperMonitorsScript" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.scripts.RunMultipleMonitorsScript" title="core.scripts.RunMultipleMonitorsScript"><code class="xref py py-class docutils literal notranslate"><span class="pre">core.scripts.RunMultipleMonitorsScript</span></code></a></p>
<p>Run all the monitors found in ReaperMonitor.REGISTRY</p>
<dl class="method">
<dt id="core.scripts.RunReaperMonitorsScript.monitors">
<code class="descname">monitors</code><span class="sig-paren">(</span><em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#RunReaperMonitorsScript.monitors"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.scripts.RunReaperMonitorsScript.monitors" title="Permalink to this definition">¶</a></dt>
<dd><p>Find all the Monitors that need to be run.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">A list of Monitor objects.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="core.scripts.RunReaperMonitorsScript.name">
<code class="descname">name</code><em class="property"> = 'Run all reaper monitors'</em><a class="headerlink" href="#core.scripts.RunReaperMonitorsScript.name" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="core.scripts.RunThreadedCollectionCoverageProviderScript">
<em class="property">class </em><code class="descclassname">core.scripts.</code><code class="descname">RunThreadedCollectionCoverageProviderScript</code><span class="sig-paren">(</span><em>provider_class</em>, <em>worker_size=None</em>, <em>_db=None</em>, <em>**provider_kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#RunThreadedCollectionCoverageProviderScript"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.scripts.RunThreadedCollectionCoverageProviderScript" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.scripts.Script" title="core.scripts.Script"><code class="xref py py-class docutils literal notranslate"><span class="pre">core.scripts.Script</span></code></a></p>
<p>Run coverage providers in multiple threads.</p>
<dl class="attribute">
<dt id="core.scripts.RunThreadedCollectionCoverageProviderScript.DEFAULT_WORKER_SIZE">
<code class="descname">DEFAULT_WORKER_SIZE</code><em class="property"> = 5</em><a class="headerlink" href="#core.scripts.RunThreadedCollectionCoverageProviderScript.DEFAULT_WORKER_SIZE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="core.scripts.RunThreadedCollectionCoverageProviderScript.get_query_and_batch_sizes">
<code class="descname">get_query_and_batch_sizes</code><span class="sig-paren">(</span><em>provider</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#RunThreadedCollectionCoverageProviderScript.get_query_and_batch_sizes"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.scripts.RunThreadedCollectionCoverageProviderScript.get_query_and_batch_sizes" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="core.scripts.RunThreadedCollectionCoverageProviderScript.run">
<code class="descname">run</code><span class="sig-paren">(</span><em>pool=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#RunThreadedCollectionCoverageProviderScript.run"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.scripts.RunThreadedCollectionCoverageProviderScript.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Runs a CollectionCoverageProvider with multiple threads and
updates the timestamp accordingly.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>pool</strong> – A DatabasePool (or other) object for use in testing
environments.</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="core.scripts.RunWorkCoverageProviderScript">
<em class="property">class </em><code class="descclassname">core.scripts.</code><code class="descname">RunWorkCoverageProviderScript</code><span class="sig-paren">(</span><em>provider_class</em>, <em>_db=None</em>, <em>providers=None</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#RunWorkCoverageProviderScript"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.scripts.RunWorkCoverageProviderScript" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.scripts.RunCollectionCoverageProviderScript" title="core.scripts.RunCollectionCoverageProviderScript"><code class="xref py py-class docutils literal notranslate"><span class="pre">core.scripts.RunCollectionCoverageProviderScript</span></code></a></p>
<p>Run a WorkCoverageProvider on every relevant Work in the system.</p>
<dl class="method">
<dt id="core.scripts.RunWorkCoverageProviderScript.get_providers">
<code class="descname">get_providers</code><span class="sig-paren">(</span><em>_db</em>, <em>provider_class</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#RunWorkCoverageProviderScript.get_providers"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.scripts.RunWorkCoverageProviderScript.get_providers" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="core.scripts.Script">
<em class="property">class </em><code class="descclassname">core.scripts.</code><code class="descname">Script</code><span class="sig-paren">(</span><em>_db=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#Script"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.scripts.Script" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<dl class="classmethod">
<dt id="core.scripts.Script.arg_parser">
<em class="property">classmethod </em><code class="descname">arg_parser</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#Script.arg_parser"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.scripts.Script.arg_parser" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.scripts.Script.data_directory">
<code class="descname">data_directory</code><a class="headerlink" href="#core.scripts.Script.data_directory" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="core.scripts.Script.load_configuration">
<code class="descname">load_configuration</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#Script.load_configuration"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.scripts.Script.load_configuration" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.scripts.Script.log">
<code class="descname">log</code><a class="headerlink" href="#core.scripts.Script.log" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="classmethod">
<dt id="core.scripts.Script.parse_command_line">
<em class="property">classmethod </em><code class="descname">parse_command_line</code><span class="sig-paren">(</span><em>_db=None</em>, <em>cmd_args=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#Script.parse_command_line"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.scripts.Script.parse_command_line" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="classmethod">
<dt id="core.scripts.Script.parse_time">
<em class="property">classmethod </em><code class="descname">parse_time</code><span class="sig-paren">(</span><em>time_string</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#Script.parse_time"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.scripts.Script.parse_time" title="Permalink to this definition">¶</a></dt>
<dd><p>Try to pass the given string as a time.</p>
</dd></dl>

<dl class="method">
<dt id="core.scripts.Script.run">
<code class="descname">run</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#Script.run"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.scripts.Script.run" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.scripts.Script.script_name">
<code class="descname">script_name</code><a class="headerlink" href="#core.scripts.Script.script_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Find or guess the name of the script.</p>
<p>This is either the .name of the Script object or the name of
the class.</p>
</dd></dl>

<dl class="method">
<dt id="core.scripts.Script.update_timestamp">
<code class="descname">update_timestamp</code><span class="sig-paren">(</span><em>timestamp_data</em>, <em>start_time</em>, <em>exception</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#Script.update_timestamp"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.scripts.Script.update_timestamp" title="Permalink to this definition">¶</a></dt>
<dd><p>By default scripts have no timestamp of their own.</p>
<p>Most scripts either work through Monitors or CoverageProviders,
which have their own logic for creating timestamps, or they
are designed to be run interactively from the command-line, so
facts about when they last ran are not relevant.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>start_time</strong> – The time the script started running.</li>
<li><strong>exception</strong> – A stack trace for the exception, if any,
that stopped the script from running.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="core.scripts.SearchIndexCoverageRemover">
<em class="property">class </em><code class="descclassname">core.scripts.</code><code class="descname">SearchIndexCoverageRemover</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#SearchIndexCoverageRemover"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.scripts.SearchIndexCoverageRemover" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.scripts.TimestampScript" title="core.scripts.TimestampScript"><code class="xref py py-class docutils literal notranslate"><span class="pre">core.scripts.TimestampScript</span></code></a>, <a class="reference internal" href="#core.scripts.RemovesSearchCoverage" title="core.scripts.RemovesSearchCoverage"><code class="xref py py-class docutils literal notranslate"><span class="pre">core.scripts.RemovesSearchCoverage</span></code></a></p>
<p>Script that removes search index coverage for all works.</p>
<p>This guarantees the SearchIndexCoverageProvider will add
fresh coverage for every Work the next time it runs.</p>
<dl class="method">
<dt id="core.scripts.SearchIndexCoverageRemover.do_run">
<code class="descname">do_run</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#SearchIndexCoverageRemover.do_run"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.scripts.SearchIndexCoverageRemover.do_run" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="core.scripts.ShowCollectionsScript">
<em class="property">class </em><code class="descclassname">core.scripts.</code><code class="descname">ShowCollectionsScript</code><span class="sig-paren">(</span><em>_db=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#ShowCollectionsScript"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.scripts.ShowCollectionsScript" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.scripts.Script" title="core.scripts.Script"><code class="xref py py-class docutils literal notranslate"><span class="pre">core.scripts.Script</span></code></a></p>
<p>Show information about the collections on a server.</p>
<dl class="classmethod">
<dt id="core.scripts.ShowCollectionsScript.arg_parser">
<em class="property">classmethod </em><code class="descname">arg_parser</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#ShowCollectionsScript.arg_parser"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.scripts.ShowCollectionsScript.arg_parser" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="core.scripts.ShowCollectionsScript.do_run">
<code class="descname">do_run</code><span class="sig-paren">(</span><em>_db=None</em>, <em>cmd_args=None</em>, <em>output=&lt;open file '&lt;stdout&gt;'</em>, <em>mode 'w'&gt;</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#ShowCollectionsScript.do_run"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.scripts.ShowCollectionsScript.do_run" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.scripts.ShowCollectionsScript.name">
<code class="descname">name</code><em class="property"> = 'List the collections on this server.'</em><a class="headerlink" href="#core.scripts.ShowCollectionsScript.name" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="core.scripts.ShowIntegrationsScript">
<em class="property">class </em><code class="descclassname">core.scripts.</code><code class="descname">ShowIntegrationsScript</code><span class="sig-paren">(</span><em>_db=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#ShowIntegrationsScript"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.scripts.ShowIntegrationsScript" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.scripts.Script" title="core.scripts.Script"><code class="xref py py-class docutils literal notranslate"><span class="pre">core.scripts.Script</span></code></a></p>
<p>Show information about the external integrations on a server.</p>
<dl class="classmethod">
<dt id="core.scripts.ShowIntegrationsScript.arg_parser">
<em class="property">classmethod </em><code class="descname">arg_parser</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#ShowIntegrationsScript.arg_parser"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.scripts.ShowIntegrationsScript.arg_parser" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="core.scripts.ShowIntegrationsScript.do_run">
<code class="descname">do_run</code><span class="sig-paren">(</span><em>_db=None</em>, <em>cmd_args=None</em>, <em>output=&lt;open file '&lt;stdout&gt;'</em>, <em>mode 'w'&gt;</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#ShowIntegrationsScript.do_run"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.scripts.ShowIntegrationsScript.do_run" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.scripts.ShowIntegrationsScript.name">
<code class="descname">name</code><em class="property"> = 'List the external integrations on this server.'</em><a class="headerlink" href="#core.scripts.ShowIntegrationsScript.name" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="core.scripts.ShowLanesScript">
<em class="property">class </em><code class="descclassname">core.scripts.</code><code class="descname">ShowLanesScript</code><span class="sig-paren">(</span><em>_db=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#ShowLanesScript"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.scripts.ShowLanesScript" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.scripts.Script" title="core.scripts.Script"><code class="xref py py-class docutils literal notranslate"><span class="pre">core.scripts.Script</span></code></a></p>
<p>Show information about the lanes on a server.</p>
<dl class="classmethod">
<dt id="core.scripts.ShowLanesScript.arg_parser">
<em class="property">classmethod </em><code class="descname">arg_parser</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#ShowLanesScript.arg_parser"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.scripts.ShowLanesScript.arg_parser" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="core.scripts.ShowLanesScript.do_run">
<code class="descname">do_run</code><span class="sig-paren">(</span><em>_db=None</em>, <em>cmd_args=None</em>, <em>output=&lt;open file '&lt;stdout&gt;'</em>, <em>mode 'w'&gt;</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#ShowLanesScript.do_run"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.scripts.ShowLanesScript.do_run" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.scripts.ShowLanesScript.name">
<code class="descname">name</code><em class="property"> = 'List the lanes on this server.'</em><a class="headerlink" href="#core.scripts.ShowLanesScript.name" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="core.scripts.ShowLibrariesScript">
<em class="property">class </em><code class="descclassname">core.scripts.</code><code class="descname">ShowLibrariesScript</code><span class="sig-paren">(</span><em>_db=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#ShowLibrariesScript"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.scripts.ShowLibrariesScript" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.scripts.Script" title="core.scripts.Script"><code class="xref py py-class docutils literal notranslate"><span class="pre">core.scripts.Script</span></code></a></p>
<p>Show information about the libraries on a server.</p>
<dl class="classmethod">
<dt id="core.scripts.ShowLibrariesScript.arg_parser">
<em class="property">classmethod </em><code class="descname">arg_parser</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#ShowLibrariesScript.arg_parser"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.scripts.ShowLibrariesScript.arg_parser" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="core.scripts.ShowLibrariesScript.do_run">
<code class="descname">do_run</code><span class="sig-paren">(</span><em>_db=None</em>, <em>cmd_args=None</em>, <em>output=&lt;open file '&lt;stdout&gt;'</em>, <em>mode 'w'&gt;</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#ShowLibrariesScript.do_run"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.scripts.ShowLibrariesScript.do_run" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.scripts.ShowLibrariesScript.name">
<code class="descname">name</code><em class="property"> = 'List the libraries on this server.'</em><a class="headerlink" href="#core.scripts.ShowLibrariesScript.name" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="core.scripts.SubjectInputScript">
<em class="property">class </em><code class="descclassname">core.scripts.</code><code class="descname">SubjectInputScript</code><span class="sig-paren">(</span><em>_db=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#SubjectInputScript"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.scripts.SubjectInputScript" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.scripts.Script" title="core.scripts.Script"><code class="xref py py-class docutils literal notranslate"><span class="pre">core.scripts.Script</span></code></a></p>
<p>A script whose command line filters the set of Subjects.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">a 2-tuple (subject type, subject filter) that can be
passed into the SubjectSweepMonitor constructor.</td>
</tr>
</tbody>
</table>
<dl class="classmethod">
<dt id="core.scripts.SubjectInputScript.arg_parser">
<em class="property">classmethod </em><code class="descname">arg_parser</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#SubjectInputScript.arg_parser"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.scripts.SubjectInputScript.arg_parser" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="core.scripts.TimestampScript">
<em class="property">class </em><code class="descclassname">core.scripts.</code><code class="descname">TimestampScript</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#TimestampScript"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.scripts.TimestampScript" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.scripts.Script" title="core.scripts.Script"><code class="xref py py-class docutils literal notranslate"><span class="pre">core.scripts.Script</span></code></a></p>
<p>A script that automatically records a timestamp whenever it runs.</p>
<dl class="method">
<dt id="core.scripts.TimestampScript.update_timestamp">
<code class="descname">update_timestamp</code><span class="sig-paren">(</span><em>timestamp_data</em>, <em>start</em>, <em>exception</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#TimestampScript.update_timestamp"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.scripts.TimestampScript.update_timestamp" title="Permalink to this definition">¶</a></dt>
<dd><p>Update the appropriate Timestamp for this script.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>timestamp_data</strong> – A TimestampData representing what the script
itself thinks its timestamp should look like. Data will be filled in
where it is missing, but it will not be modified if present.</li>
<li><strong>start</strong> – The time at which this script believes the
service started running. The script itself may change this
value for its own purposes.</li>
<li><strong>exception</strong> – The exception with which this script
believes the service stopped running. The script itself may
change this value for its own purposes.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="core.scripts.UpdateCustomListSizeScript">
<em class="property">class </em><code class="descclassname">core.scripts.</code><code class="descname">UpdateCustomListSizeScript</code><span class="sig-paren">(</span><em>_db=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#UpdateCustomListSizeScript"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.scripts.UpdateCustomListSizeScript" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.scripts.CustomListSweeperScript" title="core.scripts.CustomListSweeperScript"><code class="xref py py-class docutils literal notranslate"><span class="pre">core.scripts.CustomListSweeperScript</span></code></a></p>
<dl class="method">
<dt id="core.scripts.UpdateCustomListSizeScript.process_custom_list">
<code class="descname">process_custom_list</code><span class="sig-paren">(</span><em>custom_list</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#UpdateCustomListSizeScript.process_custom_list"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.scripts.UpdateCustomListSizeScript.process_custom_list" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="core.scripts.UpdateLaneSizeScript">
<em class="property">class </em><code class="descclassname">core.scripts.</code><code class="descname">UpdateLaneSizeScript</code><span class="sig-paren">(</span><em>_db=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#UpdateLaneSizeScript"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.scripts.UpdateLaneSizeScript" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.scripts.LaneSweeperScript" title="core.scripts.LaneSweeperScript"><code class="xref py py-class docutils literal notranslate"><span class="pre">core.scripts.LaneSweeperScript</span></code></a></p>
<dl class="method">
<dt id="core.scripts.UpdateLaneSizeScript.process_lane">
<code class="descname">process_lane</code><span class="sig-paren">(</span><em>lane</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#UpdateLaneSizeScript.process_lane"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.scripts.UpdateLaneSizeScript.process_lane" title="Permalink to this definition">¶</a></dt>
<dd><p>Update the estimated size of a Lane.</p>
</dd></dl>

<dl class="method">
<dt id="core.scripts.UpdateLaneSizeScript.should_process_lane">
<code class="descname">should_process_lane</code><span class="sig-paren">(</span><em>lane</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#UpdateLaneSizeScript.should_process_lane"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.scripts.UpdateLaneSizeScript.should_process_lane" title="Permalink to this definition">¶</a></dt>
<dd><p>We don’t want to process generic WorkLists – there’s nowhere
to store the data.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="core.scripts.WhereAreMyBooksScript">
<em class="property">class </em><code class="descclassname">core.scripts.</code><code class="descname">WhereAreMyBooksScript</code><span class="sig-paren">(</span><em>_db=None</em>, <em>output=None</em>, <em>search=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#WhereAreMyBooksScript"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.scripts.WhereAreMyBooksScript" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.scripts.CollectionInputScript" title="core.scripts.CollectionInputScript"><code class="xref py py-class docutils literal notranslate"><span class="pre">core.scripts.CollectionInputScript</span></code></a></p>
<p>Try to figure out why Works aren’t showing up.</p>
<p>This is a common problem on a new installation or when a new collection
is being configured.</p>
<dl class="method">
<dt id="core.scripts.WhereAreMyBooksScript.check_library">
<code class="descname">check_library</code><span class="sig-paren">(</span><em>library</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#WhereAreMyBooksScript.check_library"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.scripts.WhereAreMyBooksScript.check_library" title="Permalink to this definition">¶</a></dt>
<dd><p>Make sure a library is properly set up to show works.</p>
</dd></dl>

<dl class="method">
<dt id="core.scripts.WhereAreMyBooksScript.delete_cached_feeds">
<code class="descname">delete_cached_feeds</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#WhereAreMyBooksScript.delete_cached_feeds"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.scripts.WhereAreMyBooksScript.delete_cached_feeds" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="core.scripts.WhereAreMyBooksScript.explain_collection">
<code class="descname">explain_collection</code><span class="sig-paren">(</span><em>collection</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#WhereAreMyBooksScript.explain_collection"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.scripts.WhereAreMyBooksScript.explain_collection" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="core.scripts.WhereAreMyBooksScript.out">
<code class="descname">out</code><span class="sig-paren">(</span><em>s</em>, <em>*args</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#WhereAreMyBooksScript.out"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.scripts.WhereAreMyBooksScript.out" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="core.scripts.WhereAreMyBooksScript.run">
<code class="descname">run</code><span class="sig-paren">(</span><em>cmd_args=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#WhereAreMyBooksScript.run"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.scripts.WhereAreMyBooksScript.run" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="core.scripts.WorkClassificationScript">
<em class="property">class </em><code class="descclassname">core.scripts.</code><code class="descname">WorkClassificationScript</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#WorkClassificationScript"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.scripts.WorkClassificationScript" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.scripts.WorkPresentationScript" title="core.scripts.WorkPresentationScript"><code class="xref py py-class docutils literal notranslate"><span class="pre">core.scripts.WorkPresentationScript</span></code></a></p>
<p>Recalculate the classification–and nothing else–for Work objects.</p>
<dl class="attribute">
<dt id="core.scripts.WorkClassificationScript.name">
<code class="descname">name</code><em class="property"> = 'Recalculate the classification for works that need it.'</em><a class="headerlink" href="#core.scripts.WorkClassificationScript.name" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.scripts.WorkClassificationScript.policy">
<code class="descname">policy</code><em class="property"> = &lt;core.model.PresentationCalculationPolicy object&gt;</em><a class="headerlink" href="#core.scripts.WorkClassificationScript.policy" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="core.scripts.WorkConsolidationScript">
<em class="property">class </em><code class="descclassname">core.scripts.</code><code class="descname">WorkConsolidationScript</code><span class="sig-paren">(</span><em>force=False</em>, <em>batch_size=10</em>, <em>_db=None</em>, <em>cmd_args=None</em>, <em>stdin=&lt;open file '&lt;stdin&gt;'</em>, <em>mode 'r'&gt;</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#WorkConsolidationScript"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.scripts.WorkConsolidationScript" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.scripts.WorkProcessingScript" title="core.scripts.WorkProcessingScript"><code class="xref py py-class docutils literal notranslate"><span class="pre">core.scripts.WorkProcessingScript</span></code></a></p>
<p>Given an Identifier, make sure all the LicensePools for that
Identifier are in Works that follow these rules:</p>
<p>a) For a given permanent work ID, there may be at most one Work
containing open-access LicensePools.</p>
<ol class="loweralpha simple" start="2">
<li>Each non-open-access LicensePool has its own individual Work.</li>
</ol>
<dl class="method">
<dt id="core.scripts.WorkConsolidationScript.do_run">
<code class="descname">do_run</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#WorkConsolidationScript.do_run"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.scripts.WorkConsolidationScript.do_run" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="core.scripts.WorkConsolidationScript.make_query">
<code class="descname">make_query</code><span class="sig-paren">(</span><em>_db</em>, <em>identifier_type</em>, <em>identifiers</em>, <em>data_source</em>, <em>log=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#WorkConsolidationScript.make_query"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.scripts.WorkConsolidationScript.make_query" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.scripts.WorkConsolidationScript.name">
<code class="descname">name</code><em class="property"> = 'Work consolidation script'</em><a class="headerlink" href="#core.scripts.WorkConsolidationScript.name" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="core.scripts.WorkConsolidationScript.process_work">
<code class="descname">process_work</code><span class="sig-paren">(</span><em>work</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#WorkConsolidationScript.process_work"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.scripts.WorkConsolidationScript.process_work" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="core.scripts.WorkOPDSScript">
<em class="property">class </em><code class="descclassname">core.scripts.</code><code class="descname">WorkOPDSScript</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#WorkOPDSScript"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.scripts.WorkOPDSScript" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.scripts.WorkPresentationScript" title="core.scripts.WorkPresentationScript"><code class="xref py py-class docutils literal notranslate"><span class="pre">core.scripts.WorkPresentationScript</span></code></a></p>
<p>Recalculate the OPDS entries, MARC record, and search index entries
for Work objects.</p>
<p>This is intended to verify that a problem has already been resolved and just
needs to be propagated to these three ‘caches’.</p>
<dl class="attribute">
<dt id="core.scripts.WorkOPDSScript.name">
<code class="descname">name</code><em class="property"> = 'Recalculate OPDS entries, MARC record, and search index entries for works that need it.'</em><a class="headerlink" href="#core.scripts.WorkOPDSScript.name" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.scripts.WorkOPDSScript.policy">
<code class="descname">policy</code><em class="property"> = &lt;core.model.PresentationCalculationPolicy object&gt;</em><a class="headerlink" href="#core.scripts.WorkOPDSScript.policy" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="core.scripts.WorkPresentationScript">
<em class="property">class </em><code class="descclassname">core.scripts.</code><code class="descname">WorkPresentationScript</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#WorkPresentationScript"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.scripts.WorkPresentationScript" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.scripts.TimestampScript" title="core.scripts.TimestampScript"><code class="xref py py-class docutils literal notranslate"><span class="pre">core.scripts.TimestampScript</span></code></a>, <a class="reference internal" href="#core.scripts.WorkProcessingScript" title="core.scripts.WorkProcessingScript"><code class="xref py py-class docutils literal notranslate"><span class="pre">core.scripts.WorkProcessingScript</span></code></a></p>
<p>Calculate the presentation for Work objects.</p>
<dl class="attribute">
<dt id="core.scripts.WorkPresentationScript.name">
<code class="descname">name</code><em class="property"> = 'Recalculate the presentation for works that need it.'</em><a class="headerlink" href="#core.scripts.WorkPresentationScript.name" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.scripts.WorkPresentationScript.policy">
<code class="descname">policy</code><em class="property"> = &lt;core.model.PresentationCalculationPolicy object&gt;</em><a class="headerlink" href="#core.scripts.WorkPresentationScript.policy" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="core.scripts.WorkPresentationScript.process_work">
<code class="descname">process_work</code><span class="sig-paren">(</span><em>work</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#WorkPresentationScript.process_work"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.scripts.WorkPresentationScript.process_work" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="core.scripts.WorkProcessingScript">
<em class="property">class </em><code class="descclassname">core.scripts.</code><code class="descname">WorkProcessingScript</code><span class="sig-paren">(</span><em>force=False</em>, <em>batch_size=10</em>, <em>_db=None</em>, <em>cmd_args=None</em>, <em>stdin=&lt;open file '&lt;stdin&gt;'</em>, <em>mode 'r'&gt;</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#WorkProcessingScript"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.scripts.WorkProcessingScript" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.scripts.IdentifierInputScript" title="core.scripts.IdentifierInputScript"><code class="xref py py-class docutils literal notranslate"><span class="pre">core.scripts.IdentifierInputScript</span></code></a></p>
<dl class="method">
<dt id="core.scripts.WorkProcessingScript.do_run">
<code class="descname">do_run</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#WorkProcessingScript.do_run"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.scripts.WorkProcessingScript.do_run" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="classmethod">
<dt id="core.scripts.WorkProcessingScript.make_query">
<em class="property">classmethod </em><code class="descname">make_query</code><span class="sig-paren">(</span><em>_db</em>, <em>identifier_type</em>, <em>identifiers</em>, <em>data_source</em>, <em>log=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#WorkProcessingScript.make_query"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.scripts.WorkProcessingScript.make_query" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.scripts.WorkProcessingScript.name">
<code class="descname">name</code><em class="property"> = 'Work processing script'</em><a class="headerlink" href="#core.scripts.WorkProcessingScript.name" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="core.scripts.WorkProcessingScript.process_work">
<code class="descname">process_work</code><span class="sig-paren">(</span><em>work</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/scripts.html#WorkProcessingScript.process_work"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.scripts.WorkProcessingScript.process_work" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>
<div class="section" id="module-core.selftest">
<span id="core-selftest-module"></span><h2>core.selftest module<a class="headerlink" href="#module-core.selftest" title="Permalink to this headline">¶</a></h2>
<p>Define the interfaces used by ExternalIntegration self-tests.</p>
<dl class="class">
<dt id="core.selftest.HasSelfTests">
<em class="property">class </em><code class="descclassname">core.selftest.</code><code class="descname">HasSelfTests</code><a class="reference internal" href="_modules/core/selftest.html#HasSelfTests"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.selftest.HasSelfTests" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>An object capable of verifying its own setup by running a
series of self-tests.</p>
<dl class="attribute">
<dt id="core.selftest.HasSelfTests.SELF_TEST_RESULTS_SETTING">
<code class="descname">SELF_TEST_RESULTS_SETTING</code><em class="property"> = 'self_test_results'</em><a class="headerlink" href="#core.selftest.HasSelfTests.SELF_TEST_RESULTS_SETTING" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="core.selftest.HasSelfTests.external_integration">
<code class="descname">external_integration</code><span class="sig-paren">(</span><em>_db</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/selftest.html#HasSelfTests.external_integration"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.selftest.HasSelfTests.external_integration" title="Permalink to this definition">¶</a></dt>
<dd><p>Locate the ExternalIntegration associated with this object.
The status of the self-tests will be stored as a ConfigurationSetting
on this ExternalIntegration.</p>
<p>By default, there is no way to get from an object to its
ExternalIntegration, and self-test status will not be stored.</p>
</dd></dl>

<dl class="classmethod">
<dt id="core.selftest.HasSelfTests.prior_test_results">
<em class="property">classmethod </em><code class="descname">prior_test_results</code><span class="sig-paren">(</span><em>_db</em>, <em>constructor_method=None</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/selftest.html#HasSelfTests.prior_test_results"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.selftest.HasSelfTests.prior_test_results" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve the last set of test results from the database.</p>
<p>The arguments here are the same as the arguments to run_self_tests.</p>
</dd></dl>

<dl class="classmethod">
<dt id="core.selftest.HasSelfTests.run_self_tests">
<em class="property">classmethod </em><code class="descname">run_self_tests</code><span class="sig-paren">(</span><em>_db</em>, <em>constructor_method=None</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/selftest.html#HasSelfTests.run_self_tests"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.selftest.HasSelfTests.run_self_tests" title="Permalink to this definition">¶</a></dt>
<dd><p>Instantiate this class and call _run_self_tests on it.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>_db</strong> – A database connection. Will be passed into <cite>_run_self_tests</cite>.
This connection may need to be used again
in args, if the constructor needs it.</li>
<li><strong>constructor_method</strong> – Method to use to instantiate the
class, if different from the default constructor.</li>
<li><strong>args</strong> – Positional arguments to pass into the constructor.</li>
<li><strong>kwargs</strong> – Keyword arguments to pass into the constructor.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">A 2-tuple (results_dict, results_list) <cite>results_dict</cite>
is a JSON-serializable dictionary describing the results of
the self-test. <cite>results_list</cite> is a list of SelfTestResult
objects.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="core.selftest.HasSelfTests.run_test">
<code class="descname">run_test</code><span class="sig-paren">(</span><em>name</em>, <em>method</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/selftest.html#HasSelfTests.run_test"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.selftest.HasSelfTests.run_test" title="Permalink to this definition">¶</a></dt>
<dd><p>Run a test method, record any exception that happens, and keep
track of how long the test takes to run.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>name</strong> – The name of the test to be run.</li>
<li><strong>method</strong> – A method to call to run the test.</li>
<li><strong>args</strong> – Positional arguments to <cite>method</cite>.</li>
<li><strong>kwargs</strong> – Keyword arguments to <cite>method</cite>.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">A filled-in SelfTestResult.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="classmethod">
<dt id="core.selftest.HasSelfTests.test_failure">
<em class="property">classmethod </em><code class="descname">test_failure</code><span class="sig-paren">(</span><em>name</em>, <em>message</em>, <em>debug_message=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/selftest.html#HasSelfTests.test_failure"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.selftest.HasSelfTests.test_failure" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a SelfTestResult for a known failure.</p>
<p>This is useful when you can’t even get the data necessary to
run a test method.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="core.selftest.SelfTestResult">
<em class="property">class </em><code class="descclassname">core.selftest.</code><code class="descname">SelfTestResult</code><span class="sig-paren">(</span><em>name</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/selftest.html#SelfTestResult"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.selftest.SelfTestResult" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>The result of running a single self-test.</p>
<p>HasSelfTest.run_self_tests() returns a list of these</p>
<dl class="attribute">
<dt id="core.selftest.SelfTestResult.debug_message">
<code class="descname">debug_message</code><a class="headerlink" href="#core.selftest.SelfTestResult.debug_message" title="Permalink to this definition">¶</a></dt>
<dd><p>The debug message associated with the Exception, if any.</p>
</dd></dl>

<dl class="attribute">
<dt id="core.selftest.SelfTestResult.duration">
<code class="descname">duration</code><a class="headerlink" href="#core.selftest.SelfTestResult.duration" title="Permalink to this definition">¶</a></dt>
<dd><p>How long the test took to run.</p>
</dd></dl>

<dl class="attribute">
<dt id="core.selftest.SelfTestResult.to_dict">
<code class="descname">to_dict</code><a class="headerlink" href="#core.selftest.SelfTestResult.to_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert this SelfTestResult to a dictionary for use in
JSON serialization.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-core.testing">
<span id="core-testing-module"></span><h2>core.testing module<a class="headerlink" href="#module-core.testing" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="core.testing.AlwaysSuccessfulBibliographicCoverageProvider">
<em class="property">class </em><code class="descclassname">core.testing.</code><code class="descname">AlwaysSuccessfulBibliographicCoverageProvider</code><span class="sig-paren">(</span><em>collection</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/testing.html#AlwaysSuccessfulBibliographicCoverageProvider"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.testing.AlwaysSuccessfulBibliographicCoverageProvider" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.testing.MockCoverageProvider" title="core.testing.MockCoverageProvider"><code class="xref py py-class docutils literal notranslate"><span class="pre">core.testing.MockCoverageProvider</span></code></a>, <a class="reference internal" href="#core.coverage.BibliographicCoverageProvider" title="core.coverage.BibliographicCoverageProvider"><code class="xref py py-class docutils literal notranslate"><span class="pre">core.coverage.BibliographicCoverageProvider</span></code></a></p>
<p>A BibliographicCoverageProvider that does nothing and is always
successful.</p>
<p>Note that this only works if you’ve put a working Edition and
LicensePool in place beforehand. Otherwise the process will fail
during handle_success().</p>
<dl class="attribute">
<dt id="core.testing.AlwaysSuccessfulBibliographicCoverageProvider.SERVICE_NAME">
<code class="descname">SERVICE_NAME</code><em class="property"> = 'Always successful (bibliographic)'</em><a class="headerlink" href="#core.testing.AlwaysSuccessfulBibliographicCoverageProvider.SERVICE_NAME" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="core.testing.AlwaysSuccessfulBibliographicCoverageProvider.process_item">
<code class="descname">process_item</code><span class="sig-paren">(</span><em>identifier</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/testing.html#AlwaysSuccessfulBibliographicCoverageProvider.process_item"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.testing.AlwaysSuccessfulBibliographicCoverageProvider.process_item" title="Permalink to this definition">¶</a></dt>
<dd><p>Do the work necessary to give coverage to one specific item.</p>
<p>Since this is where the actual work happens, this is not
implemented in IdentifierCoverageProvider or
WorkCoverageProvider, and must be handled in a subclass.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="core.testing.AlwaysSuccessfulCollectionCoverageProvider">
<em class="property">class </em><code class="descclassname">core.testing.</code><code class="descname">AlwaysSuccessfulCollectionCoverageProvider</code><span class="sig-paren">(</span><em>collection</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/testing.html#AlwaysSuccessfulCollectionCoverageProvider"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.testing.AlwaysSuccessfulCollectionCoverageProvider" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.testing.MockCoverageProvider" title="core.testing.MockCoverageProvider"><code class="xref py py-class docutils literal notranslate"><span class="pre">core.testing.MockCoverageProvider</span></code></a>, <a class="reference internal" href="#core.coverage.CollectionCoverageProvider" title="core.coverage.CollectionCoverageProvider"><code class="xref py py-class docutils literal notranslate"><span class="pre">core.coverage.CollectionCoverageProvider</span></code></a></p>
<p>A CollectionCoverageProvider that does nothing and always succeeds.</p>
<dl class="attribute">
<dt id="core.testing.AlwaysSuccessfulCollectionCoverageProvider.SERVICE_NAME">
<code class="descname">SERVICE_NAME</code><em class="property"> = 'Always successful (collection)'</em><a class="headerlink" href="#core.testing.AlwaysSuccessfulCollectionCoverageProvider.SERVICE_NAME" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="core.testing.AlwaysSuccessfulCollectionCoverageProvider.process_item">
<code class="descname">process_item</code><span class="sig-paren">(</span><em>item</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/testing.html#AlwaysSuccessfulCollectionCoverageProvider.process_item"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.testing.AlwaysSuccessfulCollectionCoverageProvider.process_item" title="Permalink to this definition">¶</a></dt>
<dd><p>Do the work necessary to give coverage to one specific item.</p>
<p>Since this is where the actual work happens, this is not
implemented in IdentifierCoverageProvider or
WorkCoverageProvider, and must be handled in a subclass.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="core.testing.AlwaysSuccessfulCoverageProvider">
<em class="property">class </em><code class="descclassname">core.testing.</code><code class="descname">AlwaysSuccessfulCoverageProvider</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/testing.html#AlwaysSuccessfulCoverageProvider"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.testing.AlwaysSuccessfulCoverageProvider" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.testing.InstrumentedCoverageProvider" title="core.testing.InstrumentedCoverageProvider"><code class="xref py py-class docutils literal notranslate"><span class="pre">core.testing.InstrumentedCoverageProvider</span></code></a></p>
<p>A CoverageProvider that does nothing and always succeeds.</p>
<dl class="attribute">
<dt id="core.testing.AlwaysSuccessfulCoverageProvider.SERVICE_NAME">
<code class="descname">SERVICE_NAME</code><em class="property"> = 'Always successful'</em><a class="headerlink" href="#core.testing.AlwaysSuccessfulCoverageProvider.SERVICE_NAME" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="core.testing.AlwaysSuccessfulWorkCoverageProvider">
<em class="property">class </em><code class="descclassname">core.testing.</code><code class="descname">AlwaysSuccessfulWorkCoverageProvider</code><span class="sig-paren">(</span><em>_db</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/testing.html#AlwaysSuccessfulWorkCoverageProvider"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.testing.AlwaysSuccessfulWorkCoverageProvider" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.testing.InstrumentedWorkCoverageProvider" title="core.testing.InstrumentedWorkCoverageProvider"><code class="xref py py-class docutils literal notranslate"><span class="pre">core.testing.InstrumentedWorkCoverageProvider</span></code></a></p>
<p>A WorkCoverageProvider that does nothing and always succeeds.</p>
<dl class="attribute">
<dt id="core.testing.AlwaysSuccessfulWorkCoverageProvider.SERVICE_NAME">
<code class="descname">SERVICE_NAME</code><em class="property"> = 'Always successful (works)'</em><a class="headerlink" href="#core.testing.AlwaysSuccessfulWorkCoverageProvider.SERVICE_NAME" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="core.testing.BrokenBibliographicCoverageProvider">
<em class="property">class </em><code class="descclassname">core.testing.</code><code class="descname">BrokenBibliographicCoverageProvider</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/testing.html#BrokenBibliographicCoverageProvider"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.testing.BrokenBibliographicCoverageProvider" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.testing.BrokenCoverageProvider" title="core.testing.BrokenCoverageProvider"><code class="xref py py-class docutils literal notranslate"><span class="pre">core.testing.BrokenCoverageProvider</span></code></a>, <a class="reference internal" href="#core.coverage.BibliographicCoverageProvider" title="core.coverage.BibliographicCoverageProvider"><code class="xref py py-class docutils literal notranslate"><span class="pre">core.coverage.BibliographicCoverageProvider</span></code></a></p>
<dl class="attribute">
<dt id="core.testing.BrokenBibliographicCoverageProvider.SERVICE_NAME">
<code class="descname">SERVICE_NAME</code><em class="property"> = 'Broken (bibliographic)'</em><a class="headerlink" href="#core.testing.BrokenBibliographicCoverageProvider.SERVICE_NAME" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="core.testing.BrokenCoverageProvider">
<em class="property">class </em><code class="descclassname">core.testing.</code><code class="descname">BrokenCoverageProvider</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/testing.html#BrokenCoverageProvider"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.testing.BrokenCoverageProvider" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.testing.InstrumentedCoverageProvider" title="core.testing.InstrumentedCoverageProvider"><code class="xref py py-class docutils literal notranslate"><span class="pre">core.testing.InstrumentedCoverageProvider</span></code></a></p>
<dl class="attribute">
<dt id="core.testing.BrokenCoverageProvider.SERVICE_NAME">
<code class="descname">SERVICE_NAME</code><em class="property"> = 'Broken'</em><a class="headerlink" href="#core.testing.BrokenCoverageProvider.SERVICE_NAME" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="core.testing.BrokenCoverageProvider.process_item">
<code class="descname">process_item</code><span class="sig-paren">(</span><em>item</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/testing.html#BrokenCoverageProvider.process_item"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.testing.BrokenCoverageProvider.process_item" title="Permalink to this definition">¶</a></dt>
<dd><p>Do the work necessary to give coverage to one specific item.</p>
<p>Since this is where the actual work happens, this is not
implemented in IdentifierCoverageProvider or
WorkCoverageProvider, and must be handled in a subclass.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="core.testing.DatabaseTest">
<em class="property">class </em><code class="descclassname">core.testing.</code><code class="descname">DatabaseTest</code><a class="reference internal" href="_modules/core/testing.html#DatabaseTest"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.testing.DatabaseTest" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<dl class="attribute">
<dt id="core.testing.DatabaseTest.connection">
<code class="descname">connection</code><em class="property"> = None</em><a class="headerlink" href="#core.testing.DatabaseTest.connection" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.testing.DatabaseTest.engine">
<code class="descname">engine</code><em class="property"> = None</em><a class="headerlink" href="#core.testing.DatabaseTest.engine" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="classmethod">
<dt id="core.testing.DatabaseTest.get_database_connection">
<em class="property">classmethod </em><code class="descname">get_database_connection</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/testing.html#DatabaseTest.get_database_connection"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.testing.DatabaseTest.get_database_connection" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="classmethod">
<dt id="core.testing.DatabaseTest.make_default_library">
<em class="property">classmethod </em><code class="descname">make_default_library</code><span class="sig-paren">(</span><em>_db</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/testing.html#DatabaseTest.make_default_library"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.testing.DatabaseTest.make_default_library" title="Permalink to this definition">¶</a></dt>
<dd><p>Ensure that the default library exists in the given database.</p>
<p>This can be called by code intended for use in testing but not actually
within a DatabaseTest subclass.</p>
</dd></dl>

<dl class="classmethod">
<dt id="core.testing.DatabaseTest.print_database_class">
<em class="property">classmethod </em><code class="descname">print_database_class</code><span class="sig-paren">(</span><em>db_connection</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/testing.html#DatabaseTest.print_database_class"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.testing.DatabaseTest.print_database_class" title="Permalink to this definition">¶</a></dt>
<dd><p>Prints to the console the entire contents of the database, as the unit test sees it.
Exists because unit tests don’t persist db information, they create a memory
representation of the db state, and then roll the unit test-derived transactions back.
So we cannot see what’s going on by going into postgres and running selects.
This is the in-test alternative to going into postgres.</p>
<p>Can be called from model and metadata classes as well as tests.</p>
<p>NOTE: The purpose of this method is for debugging.
Be careful of leaving it in code and potentially outputting
vast tracts of data into your output stream on production.</p>
<p>Call like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">set_trace</span><span class="p">()</span>
<span class="kn">from</span> <span class="nn">testing</span> <span class="kn">import</span> <span class="p">(</span><span class="n">l</span><span class="o">=</span>
    <span class="n">DatabaseTest</span><span class="p">,</span>
<span class="p">)</span>
<span class="n">_db</span> <span class="o">=</span> <span class="n">Session</span><span class="o">.</span><span class="n">object_session</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
<span class="n">DatabaseTest</span><span class="o">.</span><span class="n">print_database_class</span><span class="p">(</span><span class="n">_db</span><span class="p">)</span>

<span class="n">TODO</span><span class="p">:</span> <span class="n">remove</span> <span class="n">before</span> <span class="n">prod</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="core.testing.DatabaseTest.print_database_instance">
<code class="descname">print_database_instance</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/testing.html#DatabaseTest.print_database_instance"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.testing.DatabaseTest.print_database_instance" title="Permalink to this definition">¶</a></dt>
<dd><p>Calls the class method that examines the current state of the database model
(whether it’s been committed or not).</p>
<p>NOTE: If you set_trace, and hit “continue”, you’ll start seeing console output right
away, without waiting for the whole test to run and the standard output section to display.
You can also use nosetest –nocapture.</p>
<p>I use:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">test_name</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="p">[</span><span class="n">code</span><span class="o">...</span><span class="p">]</span>
    <span class="n">set_trace</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">print_database_instance</span><span class="p">()</span>  <span class="c1"># TODO: remove before prod</span>
    <span class="p">[</span><span class="n">code</span><span class="o">...</span><span class="p">]</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="core.testing.DatabaseTest.sample_cover_path">
<code class="descname">sample_cover_path</code><span class="sig-paren">(</span><em>name</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/testing.html#DatabaseTest.sample_cover_path"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.testing.DatabaseTest.sample_cover_path" title="Permalink to this definition">¶</a></dt>
<dd><p>The path to the sample cover with the given filename.</p>
</dd></dl>

<dl class="method">
<dt id="core.testing.DatabaseTest.sample_cover_representation">
<code class="descname">sample_cover_representation</code><span class="sig-paren">(</span><em>name</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/testing.html#DatabaseTest.sample_cover_representation"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.testing.DatabaseTest.sample_cover_representation" title="Permalink to this definition">¶</a></dt>
<dd><p>A Representation of the sample cover with the given filename.</p>
</dd></dl>

<dl class="method">
<dt id="core.testing.DatabaseTest.setup">
<code class="descname">setup</code><span class="sig-paren">(</span><em>mock_search=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/testing.html#DatabaseTest.setup"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.testing.DatabaseTest.setup" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="classmethod">
<dt id="core.testing.DatabaseTest.setup_class">
<em class="property">classmethod </em><code class="descname">setup_class</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/testing.html#DatabaseTest.setup_class"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.testing.DatabaseTest.setup_class" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="core.testing.DatabaseTest.shortDescription">
<code class="descname">shortDescription</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/testing.html#DatabaseTest.shortDescription"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.testing.DatabaseTest.shortDescription" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="core.testing.DatabaseTest.teardown">
<code class="descname">teardown</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/testing.html#DatabaseTest.teardown"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.testing.DatabaseTest.teardown" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="classmethod">
<dt id="core.testing.DatabaseTest.teardown_class">
<em class="property">classmethod </em><code class="descname">teardown_class</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/testing.html#DatabaseTest.teardown_class"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.testing.DatabaseTest.teardown_class" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="core.testing.DatabaseTest.time_eq">
<code class="descname">time_eq</code><span class="sig-paren">(</span><em>a</em>, <em>b</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/testing.html#DatabaseTest.time_eq"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.testing.DatabaseTest.time_eq" title="Permalink to this definition">¶</a></dt>
<dd><p>Assert that two times are <em>approximately</em> the same – within 2 seconds.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="core.testing.DummyCanonicalizeLookupResponse">
<em class="property">class </em><code class="descclassname">core.testing.</code><code class="descname">DummyCanonicalizeLookupResponse</code><a class="reference internal" href="_modules/core/testing.html#DummyCanonicalizeLookupResponse"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.testing.DummyCanonicalizeLookupResponse" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<dl class="classmethod">
<dt id="core.testing.DummyCanonicalizeLookupResponse.failure">
<em class="property">classmethod </em><code class="descname">failure</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/testing.html#DummyCanonicalizeLookupResponse.failure"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.testing.DummyCanonicalizeLookupResponse.failure" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="classmethod">
<dt id="core.testing.DummyCanonicalizeLookupResponse.success">
<em class="property">classmethod </em><code class="descname">success</code><span class="sig-paren">(</span><em>result</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/testing.html#DummyCanonicalizeLookupResponse.success"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.testing.DummyCanonicalizeLookupResponse.success" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="core.testing.DummyHTTPClient">
<em class="property">class </em><code class="descclassname">core.testing.</code><code class="descname">DummyHTTPClient</code><a class="reference internal" href="_modules/core/testing.html#DummyHTTPClient"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.testing.DummyHTTPClient" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<dl class="method">
<dt id="core.testing.DummyHTTPClient.do_get">
<code class="descname">do_get</code><span class="sig-paren">(</span><em>url</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/testing.html#DummyHTTPClient.do_get"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.testing.DummyHTTPClient.do_get" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="core.testing.DummyHTTPClient.do_post">
<code class="descname">do_post</code><span class="sig-paren">(</span><em>url</em>, <em>data</em>, <em>*wargs</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/testing.html#DummyHTTPClient.do_post"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.testing.DummyHTTPClient.do_post" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="core.testing.DummyHTTPClient.queue_requests_response">
<code class="descname">queue_requests_response</code><span class="sig-paren">(</span><em>response_code</em>, <em>media_type='text/html'</em>, <em>other_headers=None</em>, <em>content=''</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/testing.html#DummyHTTPClient.queue_requests_response"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.testing.DummyHTTPClient.queue_requests_response" title="Permalink to this definition">¶</a></dt>
<dd><p>Queue a response of the type produced by HTTP.get_with_timeout.</p>
</dd></dl>

<dl class="method">
<dt id="core.testing.DummyHTTPClient.queue_response">
<code class="descname">queue_response</code><span class="sig-paren">(</span><em>response_code</em>, <em>media_type='text/html'</em>, <em>other_headers=None</em>, <em>content=''</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/testing.html#DummyHTTPClient.queue_response"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.testing.DummyHTTPClient.queue_response" title="Permalink to this definition">¶</a></dt>
<dd><p>Queue a response of the type produced by
Representation.simple_http_get.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="core.testing.DummyMetadataClient">
<em class="property">class </em><code class="descclassname">core.testing.</code><code class="descname">DummyMetadataClient</code><a class="reference internal" href="_modules/core/testing.html#DummyMetadataClient"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.testing.DummyMetadataClient" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<dl class="method">
<dt id="core.testing.DummyMetadataClient.canonicalize_author_name">
<code class="descname">canonicalize_author_name</code><span class="sig-paren">(</span><em>primary_identifier</em>, <em>display_author</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/testing.html#DummyMetadataClient.canonicalize_author_name"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.testing.DummyMetadataClient.canonicalize_author_name" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="core.testing.EndToEndSearchTest">
<em class="property">class </em><code class="descclassname">core.testing.</code><code class="descname">EndToEndSearchTest</code><a class="reference internal" href="_modules/core/testing.html#EndToEndSearchTest"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.testing.EndToEndSearchTest" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.testing.ExternalSearchTest" title="core.testing.ExternalSearchTest"><code class="xref py py-class docutils literal notranslate"><span class="pre">core.testing.ExternalSearchTest</span></code></a></p>
<p>Subclasses of this class set up real works in a real
search index and run searches against it.</p>
<dl class="method">
<dt id="core.testing.EndToEndSearchTest.populate_works">
<code class="descname">populate_works</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/testing.html#EndToEndSearchTest.populate_works"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.testing.EndToEndSearchTest.populate_works" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="core.testing.EndToEndSearchTest.setup">
<code class="descname">setup</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/testing.html#EndToEndSearchTest.setup"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.testing.EndToEndSearchTest.setup" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="core.testing.ExternalSearchTest">
<em class="property">class </em><code class="descclassname">core.testing.</code><code class="descname">ExternalSearchTest</code><a class="reference internal" href="_modules/core/testing.html#ExternalSearchTest"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.testing.ExternalSearchTest" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.testing.DatabaseTest" title="core.testing.DatabaseTest"><code class="xref py py-class docutils literal notranslate"><span class="pre">core.testing.DatabaseTest</span></code></a></p>
<p>These tests require elasticsearch to be running locally. If it’s not, or there’s
an error creating the index, the tests will pass without doing anything.</p>
<p>Tests for elasticsearch are useful for ensuring that we haven’t accidentally broken
a type of search by changing analyzers or queries, but search needs to be tested manually
to ensure that it works well overall, with a realistic index.</p>
<dl class="attribute">
<dt id="core.testing.ExternalSearchTest.SIMPLIFIED_TEST_ELASTICSEARCH">
<code class="descname">SIMPLIFIED_TEST_ELASTICSEARCH</code><em class="property"> = u'http://localhost:9200'</em><a class="headerlink" href="#core.testing.ExternalSearchTest.SIMPLIFIED_TEST_ELASTICSEARCH" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="core.testing.ExternalSearchTest.default_work">
<code class="descname">default_work</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/testing.html#ExternalSearchTest.default_work"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.testing.ExternalSearchTest.default_work" title="Permalink to this definition">¶</a></dt>
<dd><p>Convenience method to create a work with a license pool
in the default collection.</p>
</dd></dl>

<dl class="attribute">
<dt id="core.testing.ExternalSearchTest.integration">
<code class="descname">integration</code><em class="property"> = 'elasticsearch'</em><a class="headerlink" href="#core.testing.ExternalSearchTest.integration" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="core.testing.ExternalSearchTest.setup">
<code class="descname">setup</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/testing.html#ExternalSearchTest.setup"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.testing.ExternalSearchTest.setup" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="core.testing.ExternalSearchTest.setup_index">
<code class="descname">setup_index</code><span class="sig-paren">(</span><em>new_index</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/testing.html#ExternalSearchTest.setup_index"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.testing.ExternalSearchTest.setup_index" title="Permalink to this definition">¶</a></dt>
<dd><p>Create an index and register it to be destroyed during teardown.</p>
</dd></dl>

<dl class="method">
<dt id="core.testing.ExternalSearchTest.teardown">
<code class="descname">teardown</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/testing.html#ExternalSearchTest.teardown"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.testing.ExternalSearchTest.teardown" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="core.testing.InstrumentedCoverageProvider">
<em class="property">class </em><code class="descclassname">core.testing.</code><code class="descname">InstrumentedCoverageProvider</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/testing.html#InstrumentedCoverageProvider"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.testing.InstrumentedCoverageProvider" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.testing.MockCoverageProvider" title="core.testing.MockCoverageProvider"><code class="xref py py-class docutils literal notranslate"><span class="pre">core.testing.MockCoverageProvider</span></code></a>, <a class="reference internal" href="#core.coverage.IdentifierCoverageProvider" title="core.coverage.IdentifierCoverageProvider"><code class="xref py py-class docutils literal notranslate"><span class="pre">core.coverage.IdentifierCoverageProvider</span></code></a></p>
<p>A CoverageProvider that keeps track of every item it tried
to cover.</p>
<dl class="method">
<dt id="core.testing.InstrumentedCoverageProvider.process_item">
<code class="descname">process_item</code><span class="sig-paren">(</span><em>item</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/testing.html#InstrumentedCoverageProvider.process_item"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.testing.InstrumentedCoverageProvider.process_item" title="Permalink to this definition">¶</a></dt>
<dd><p>Do the work necessary to give coverage to one specific item.</p>
<p>Since this is where the actual work happens, this is not
implemented in IdentifierCoverageProvider or
WorkCoverageProvider, and must be handled in a subclass.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="core.testing.InstrumentedWorkCoverageProvider">
<em class="property">class </em><code class="descclassname">core.testing.</code><code class="descname">InstrumentedWorkCoverageProvider</code><span class="sig-paren">(</span><em>_db</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/testing.html#InstrumentedWorkCoverageProvider"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.testing.InstrumentedWorkCoverageProvider" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.testing.MockCoverageProvider" title="core.testing.MockCoverageProvider"><code class="xref py py-class docutils literal notranslate"><span class="pre">core.testing.MockCoverageProvider</span></code></a>, <a class="reference internal" href="#core.coverage.WorkCoverageProvider" title="core.coverage.WorkCoverageProvider"><code class="xref py py-class docutils literal notranslate"><span class="pre">core.coverage.WorkCoverageProvider</span></code></a></p>
<p>A WorkCoverageProvider that keeps track of every item it tried
to cover.</p>
<dl class="method">
<dt id="core.testing.InstrumentedWorkCoverageProvider.process_item">
<code class="descname">process_item</code><span class="sig-paren">(</span><em>item</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/testing.html#InstrumentedWorkCoverageProvider.process_item"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.testing.InstrumentedWorkCoverageProvider.process_item" title="Permalink to this definition">¶</a></dt>
<dd><p>Do the work necessary to give coverage to one specific item.</p>
<p>Since this is where the actual work happens, this is not
implemented in IdentifierCoverageProvider or
WorkCoverageProvider, and must be handled in a subclass.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="core.testing.LogCaptureHandler">
<em class="property">class </em><code class="descclassname">core.testing.</code><code class="descname">LogCaptureHandler</code><span class="sig-paren">(</span><em>logger</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/testing.html#LogCaptureHandler"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.testing.LogCaptureHandler" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">logging.Handler</span></code></p>
<p>A <cite>logging.Handler</cite> context manager that captures the messages
of emitted log records in the context of the specified <cite>logger</cite>.</p>
<dl class="attribute">
<dt id="core.testing.LogCaptureHandler.LEVEL_NAMES">
<code class="descname">LEVEL_NAMES</code><em class="property"> = ['critical', 'error', 'warning', 'info', 'debug', 'notset']</em><a class="headerlink" href="#core.testing.LogCaptureHandler.LEVEL_NAMES" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="core.testing.LogCaptureHandler.emit">
<code class="descname">emit</code><span class="sig-paren">(</span><em>record</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/testing.html#LogCaptureHandler.emit"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.testing.LogCaptureHandler.emit" title="Permalink to this definition">¶</a></dt>
<dd><p>Do whatever it takes to actually log the specified logging record.</p>
<p>This version is intended to be implemented by subclasses and so
raises a NotImplementedError.</p>
</dd></dl>

<dl class="attribute">
<dt id="core.testing.LogCaptureHandler.level">
<code class="descname">level</code><em class="property"> = 'NOTSET'</em><a class="headerlink" href="#core.testing.LogCaptureHandler.level" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="core.testing.LogCaptureHandler.reset">
<code class="descname">reset</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/testing.html#LogCaptureHandler.reset"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.testing.LogCaptureHandler.reset" title="Permalink to this definition">¶</a></dt>
<dd><p>Empty the message accumulators.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="core.testing.MockCoverageProvider">
<em class="property">class </em><code class="descclassname">core.testing.</code><code class="descname">MockCoverageProvider</code><a class="reference internal" href="_modules/core/testing.html#MockCoverageProvider"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.testing.MockCoverageProvider" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Mixin class for mock CoverageProviders that defines common constants.</p>
<dl class="attribute">
<dt id="core.testing.MockCoverageProvider.DATA_SOURCE_NAME">
<code class="descname">DATA_SOURCE_NAME</code><em class="property"> = u'Gutenberg'</em><a class="headerlink" href="#core.testing.MockCoverageProvider.DATA_SOURCE_NAME" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.testing.MockCoverageProvider.INPUT_IDENTIFIER_TYPES">
<code class="descname">INPUT_IDENTIFIER_TYPES</code><em class="property"> = None</em><a class="headerlink" href="#core.testing.MockCoverageProvider.INPUT_IDENTIFIER_TYPES" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.testing.MockCoverageProvider.PROTOCOL">
<code class="descname">PROTOCOL</code><em class="property"> = u'OPDS Import'</em><a class="headerlink" href="#core.testing.MockCoverageProvider.PROTOCOL" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.testing.MockCoverageProvider.SERVICE_NAME">
<code class="descname">SERVICE_NAME</code><em class="property"> = 'Generic mock CoverageProvider'</em><a class="headerlink" href="#core.testing.MockCoverageProvider.SERVICE_NAME" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="core.testing.MockRequestsRequest">
<em class="property">class </em><code class="descclassname">core.testing.</code><code class="descname">MockRequestsRequest</code><span class="sig-paren">(</span><em>url</em>, <em>method='GET'</em>, <em>headers=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/testing.html#MockRequestsRequest"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.testing.MockRequestsRequest" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>A mock object that simulates an HTTP request from the
<cite>requests</cite> library.</p>
</dd></dl>

<dl class="class">
<dt id="core.testing.MockRequestsResponse">
<em class="property">class </em><code class="descclassname">core.testing.</code><code class="descname">MockRequestsResponse</code><span class="sig-paren">(</span><em>status_code</em>, <em>headers={}</em>, <em>content=None</em>, <em>url=None</em>, <em>request=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/testing.html#MockRequestsResponse"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.testing.MockRequestsResponse" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>A mock object that simulates an HTTP response from the
<cite>requests</cite> library.</p>
<dl class="method">
<dt id="core.testing.MockRequestsResponse.json">
<code class="descname">json</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/testing.html#MockRequestsResponse.json"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.testing.MockRequestsResponse.json" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="core.testing.MockRequestsResponse.raise_for_status">
<code class="descname">raise_for_status</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/testing.html#MockRequestsResponse.raise_for_status"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.testing.MockRequestsResponse.raise_for_status" title="Permalink to this definition">¶</a></dt>
<dd><p>Null implementation of raise_for_status, a method
implemented by real requests Response objects.</p>
</dd></dl>

<dl class="attribute">
<dt id="core.testing.MockRequestsResponse.text">
<code class="descname">text</code><a class="headerlink" href="#core.testing.MockRequestsResponse.text" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="core.testing.NeverSuccessfulBibliographicCoverageProvider">
<em class="property">class </em><code class="descclassname">core.testing.</code><code class="descname">NeverSuccessfulBibliographicCoverageProvider</code><span class="sig-paren">(</span><em>collection</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/testing.html#NeverSuccessfulBibliographicCoverageProvider"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.testing.NeverSuccessfulBibliographicCoverageProvider" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.testing.MockCoverageProvider" title="core.testing.MockCoverageProvider"><code class="xref py py-class docutils literal notranslate"><span class="pre">core.testing.MockCoverageProvider</span></code></a>, <a class="reference internal" href="#core.coverage.BibliographicCoverageProvider" title="core.coverage.BibliographicCoverageProvider"><code class="xref py py-class docutils literal notranslate"><span class="pre">core.coverage.BibliographicCoverageProvider</span></code></a></p>
<p>Simulates a BibliographicCoverageProvider that’s never successful.</p>
<dl class="attribute">
<dt id="core.testing.NeverSuccessfulBibliographicCoverageProvider.SERVICE_NAME">
<code class="descname">SERVICE_NAME</code><em class="property"> = 'Never successful (bibliographic)'</em><a class="headerlink" href="#core.testing.NeverSuccessfulBibliographicCoverageProvider.SERVICE_NAME" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="core.testing.NeverSuccessfulBibliographicCoverageProvider.process_item">
<code class="descname">process_item</code><span class="sig-paren">(</span><em>identifier</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/testing.html#NeverSuccessfulBibliographicCoverageProvider.process_item"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.testing.NeverSuccessfulBibliographicCoverageProvider.process_item" title="Permalink to this definition">¶</a></dt>
<dd><p>Do the work necessary to give coverage to one specific item.</p>
<p>Since this is where the actual work happens, this is not
implemented in IdentifierCoverageProvider or
WorkCoverageProvider, and must be handled in a subclass.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="core.testing.NeverSuccessfulCoverageProvider">
<em class="property">class </em><code class="descclassname">core.testing.</code><code class="descname">NeverSuccessfulCoverageProvider</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/testing.html#NeverSuccessfulCoverageProvider"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.testing.NeverSuccessfulCoverageProvider" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.testing.InstrumentedCoverageProvider" title="core.testing.InstrumentedCoverageProvider"><code class="xref py py-class docutils literal notranslate"><span class="pre">core.testing.InstrumentedCoverageProvider</span></code></a></p>
<p>A CoverageProvider that does nothing and always fails.</p>
<dl class="attribute">
<dt id="core.testing.NeverSuccessfulCoverageProvider.SERVICE_NAME">
<code class="descname">SERVICE_NAME</code><em class="property"> = 'Never successful'</em><a class="headerlink" href="#core.testing.NeverSuccessfulCoverageProvider.SERVICE_NAME" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="core.testing.NeverSuccessfulCoverageProvider.process_item">
<code class="descname">process_item</code><span class="sig-paren">(</span><em>item</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/testing.html#NeverSuccessfulCoverageProvider.process_item"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.testing.NeverSuccessfulCoverageProvider.process_item" title="Permalink to this definition">¶</a></dt>
<dd><p>Do the work necessary to give coverage to one specific item.</p>
<p>Since this is where the actual work happens, this is not
implemented in IdentifierCoverageProvider or
WorkCoverageProvider, and must be handled in a subclass.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="core.testing.NeverSuccessfulWorkCoverageProvider">
<em class="property">class </em><code class="descclassname">core.testing.</code><code class="descname">NeverSuccessfulWorkCoverageProvider</code><span class="sig-paren">(</span><em>_db</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/testing.html#NeverSuccessfulWorkCoverageProvider"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.testing.NeverSuccessfulWorkCoverageProvider" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.testing.InstrumentedWorkCoverageProvider" title="core.testing.InstrumentedWorkCoverageProvider"><code class="xref py py-class docutils literal notranslate"><span class="pre">core.testing.InstrumentedWorkCoverageProvider</span></code></a></p>
<dl class="attribute">
<dt id="core.testing.NeverSuccessfulWorkCoverageProvider.SERVICE_NAME">
<code class="descname">SERVICE_NAME</code><em class="property"> = 'Never successful (works)'</em><a class="headerlink" href="#core.testing.NeverSuccessfulWorkCoverageProvider.SERVICE_NAME" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="core.testing.NeverSuccessfulWorkCoverageProvider.process_item">
<code class="descname">process_item</code><span class="sig-paren">(</span><em>item</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/testing.html#NeverSuccessfulWorkCoverageProvider.process_item"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.testing.NeverSuccessfulWorkCoverageProvider.process_item" title="Permalink to this definition">¶</a></dt>
<dd><p>Do the work necessary to give coverage to one specific item.</p>
<p>Since this is where the actual work happens, this is not
implemented in IdentifierCoverageProvider or
WorkCoverageProvider, and must be handled in a subclass.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="core.testing.SearchClientForTesting">
<em class="property">class </em><code class="descclassname">core.testing.</code><code class="descname">SearchClientForTesting</code><span class="sig-paren">(</span><em>_db</em>, <em>url=None</em>, <em>works_index=None</em>, <em>test_search_term=None</em>, <em>in_testing=False</em>, <em>mapping=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/testing.html#SearchClientForTesting"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.testing.SearchClientForTesting" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.external_search.ExternalSearchIndex" title="core.external_search.ExternalSearchIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">core.external_search.ExternalSearchIndex</span></code></a></p>
<p>When creating an index, limit it to a single shard and disable
replicas.</p>
<p>This makes search results more predictable.</p>
<dl class="method">
<dt id="core.testing.SearchClientForTesting.setup_index">
<code class="descname">setup_index</code><span class="sig-paren">(</span><em>new_index=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/testing.html#SearchClientForTesting.setup_index"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.testing.SearchClientForTesting.setup_index" title="Permalink to this definition">¶</a></dt>
<dd><p>Create the search index with appropriate mapping.</p>
<p>This will destroy the search index, and all works will need
to be indexed again. In production, don’t use this on an
existing index. Use it to create a new index, then change the
alias to point to the new index.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="core.testing.TaskIgnoringCoverageProvider">
<em class="property">class </em><code class="descclassname">core.testing.</code><code class="descname">TaskIgnoringCoverageProvider</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/testing.html#TaskIgnoringCoverageProvider"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.testing.TaskIgnoringCoverageProvider" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.testing.InstrumentedCoverageProvider" title="core.testing.InstrumentedCoverageProvider"><code class="xref py py-class docutils literal notranslate"><span class="pre">core.testing.InstrumentedCoverageProvider</span></code></a></p>
<p>A coverage provider that ignores all work given to it.</p>
<dl class="attribute">
<dt id="core.testing.TaskIgnoringCoverageProvider.SERVICE_NAME">
<code class="descname">SERVICE_NAME</code><em class="property"> = 'I ignore all work.'</em><a class="headerlink" href="#core.testing.TaskIgnoringCoverageProvider.SERVICE_NAME" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="core.testing.TaskIgnoringCoverageProvider.process_batch">
<code class="descname">process_batch</code><span class="sig-paren">(</span><em>batch</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/testing.html#TaskIgnoringCoverageProvider.process_batch"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.testing.TaskIgnoringCoverageProvider.process_batch" title="Permalink to this definition">¶</a></dt>
<dd><p>Do what it takes to give coverage records to a batch of
items.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">A mixed list of coverage records and CoverageFailures.</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="core.testing.TransientFailureCoverageProvider">
<em class="property">class </em><code class="descclassname">core.testing.</code><code class="descname">TransientFailureCoverageProvider</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/testing.html#TransientFailureCoverageProvider"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.testing.TransientFailureCoverageProvider" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.testing.InstrumentedCoverageProvider" title="core.testing.InstrumentedCoverageProvider"><code class="xref py py-class docutils literal notranslate"><span class="pre">core.testing.InstrumentedCoverageProvider</span></code></a></p>
<dl class="attribute">
<dt id="core.testing.TransientFailureCoverageProvider.SERVICE_NAME">
<code class="descname">SERVICE_NAME</code><em class="property"> = 'Never successful (transient)'</em><a class="headerlink" href="#core.testing.TransientFailureCoverageProvider.SERVICE_NAME" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="core.testing.TransientFailureCoverageProvider.process_item">
<code class="descname">process_item</code><span class="sig-paren">(</span><em>item</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/testing.html#TransientFailureCoverageProvider.process_item"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.testing.TransientFailureCoverageProvider.process_item" title="Permalink to this definition">¶</a></dt>
<dd><p>Do the work necessary to give coverage to one specific item.</p>
<p>Since this is where the actual work happens, this is not
implemented in IdentifierCoverageProvider or
WorkCoverageProvider, and must be handled in a subclass.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="core.testing.TransientFailureWorkCoverageProvider">
<em class="property">class </em><code class="descclassname">core.testing.</code><code class="descname">TransientFailureWorkCoverageProvider</code><span class="sig-paren">(</span><em>_db</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/testing.html#TransientFailureWorkCoverageProvider"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.testing.TransientFailureWorkCoverageProvider" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.testing.InstrumentedWorkCoverageProvider" title="core.testing.InstrumentedWorkCoverageProvider"><code class="xref py py-class docutils literal notranslate"><span class="pre">core.testing.InstrumentedWorkCoverageProvider</span></code></a></p>
<dl class="attribute">
<dt id="core.testing.TransientFailureWorkCoverageProvider.SERVICE_NAME">
<code class="descname">SERVICE_NAME</code><em class="property"> = 'Never successful (transient, works)'</em><a class="headerlink" href="#core.testing.TransientFailureWorkCoverageProvider.SERVICE_NAME" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="core.testing.TransientFailureWorkCoverageProvider.process_item">
<code class="descname">process_item</code><span class="sig-paren">(</span><em>item</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/testing.html#TransientFailureWorkCoverageProvider.process_item"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.testing.TransientFailureWorkCoverageProvider.process_item" title="Permalink to this definition">¶</a></dt>
<dd><p>Do the work necessary to give coverage to one specific item.</p>
<p>Since this is where the actual work happens, this is not
implemented in IdentifierCoverageProvider or
WorkCoverageProvider, and must be handled in a subclass.</p>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="core.testing.package_setup">
<code class="descclassname">core.testing.</code><code class="descname">package_setup</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/testing.html#package_setup"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.testing.package_setup" title="Permalink to this definition">¶</a></dt>
<dd><p>Make sure the application starts in a pristine state.</p>
</dd></dl>

<dl class="function">
<dt id="core.testing.package_teardown">
<code class="descclassname">core.testing.</code><code class="descname">package_teardown</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/testing.html#package_teardown"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.testing.package_teardown" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="module-core.user_profile">
<span id="core-user-profile-module"></span><h2>core.user_profile module<a class="headerlink" href="#module-core.user_profile" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="core.user_profile.MockProfileStorage">
<em class="property">class </em><code class="descclassname">core.user_profile.</code><code class="descname">MockProfileStorage</code><span class="sig-paren">(</span><em>read_only_settings=None</em>, <em>writable_settings=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/user_profile.html#MockProfileStorage"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.user_profile.MockProfileStorage" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#core.user_profile.ProfileStorage" title="core.user_profile.ProfileStorage"><code class="xref py py-class docutils literal notranslate"><span class="pre">core.user_profile.ProfileStorage</span></code></a></p>
<p>A profile storage object for use in tests.</p>
<p>Keeps information in in-memory dictionaries rather than in a database.</p>
<dl class="attribute">
<dt id="core.user_profile.MockProfileStorage.profile_document">
<code class="descname">profile_document</code><a class="headerlink" href="#core.user_profile.MockProfileStorage.profile_document" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="core.user_profile.MockProfileStorage.update">
<code class="descname">update</code><span class="sig-paren">(</span><em>new_values</em>, <em>profile_document</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/user_profile.html#MockProfileStorage.update"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.user_profile.MockProfileStorage.update" title="Permalink to this definition">¶</a></dt>
<dd><p>(Try to) change the user’s profile so it looks like the provided
Profile document.</p>
</dd></dl>

<dl class="attribute">
<dt id="core.user_profile.MockProfileStorage.writable_setting_names">
<code class="descname">writable_setting_names</code><a class="headerlink" href="#core.user_profile.MockProfileStorage.writable_setting_names" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the subset of fields that are considered writable.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="core.user_profile.ProfileController">
<em class="property">class </em><code class="descclassname">core.user_profile.</code><code class="descname">ProfileController</code><span class="sig-paren">(</span><em>storage</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/user_profile.html#ProfileController"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.user_profile.ProfileController" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Implement the User Profile Management Protocol.</p>
<p><a class="reference external" href="https://github.com/NYPL-Simplified/Simplified/wiki/User-Profile-Management-Protocol">https://github.com/NYPL-Simplified/Simplified/wiki/User-Profile-Management-Protocol</a></p>
<dl class="attribute">
<dt id="core.user_profile.ProfileController.LINK_RELATION">
<code class="descname">LINK_RELATION</code><em class="property"> = 'http://librarysimplified.org/terms/rel/user-profile'</em><a class="headerlink" href="#core.user_profile.ProfileController.LINK_RELATION" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.user_profile.ProfileController.MEDIA_TYPE">
<code class="descname">MEDIA_TYPE</code><em class="property"> = 'vnd.librarysimplified/user-profile+json'</em><a class="headerlink" href="#core.user_profile.ProfileController.MEDIA_TYPE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="core.user_profile.ProfileController.get">
<code class="descname">get</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/user_profile.html#ProfileController.get"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.user_profile.ProfileController.get" title="Permalink to this definition">¶</a></dt>
<dd><p>Turn the storage object into a Profile document and send out its
JSON-based representation.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>return</strong> – A ProblemDetail if there is a problem; otherwise,
a 3-tuple (entity-body, response code, headers)</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="core.user_profile.ProfileController.put">
<code class="descname">put</code><span class="sig-paren">(</span><em>headers</em>, <em>body</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/user_profile.html#ProfileController.put"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.user_profile.ProfileController.put" title="Permalink to this definition">¶</a></dt>
<dd><p>Update the profile storage object with new settings
from a Profile document sent with a PUT request.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>return</strong> – A ProblemDetail if there is a problem; otherwise,
a 3-tuple (response code, media type, entity-body)</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="core.user_profile.ProfileStorage">
<em class="property">class </em><code class="descclassname">core.user_profile.</code><code class="descname">ProfileStorage</code><a class="reference internal" href="_modules/core/user_profile.html#ProfileStorage"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.user_profile.ProfileStorage" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>An abstract class defining a specific user’s profile.</p>
<p>Subclasses should get profile information from somewhere specific,
e.g. a database row.</p>
<p>An instance of this class is responsible for one specific user’s profile,
not the set of all profiles.</p>
<dl class="attribute">
<dt id="core.user_profile.ProfileStorage.AUTHORIZATION_EXPIRES">
<code class="descname">AUTHORIZATION_EXPIRES</code><em class="property"> = 'simplified:authorization_expires'</em><a class="headerlink" href="#core.user_profile.ProfileStorage.AUTHORIZATION_EXPIRES" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.user_profile.ProfileStorage.AUTHORIZATION_IDENTIFIER">
<code class="descname">AUTHORIZATION_IDENTIFIER</code><em class="property"> = 'simplified:authorization_identifier'</em><a class="headerlink" href="#core.user_profile.ProfileStorage.AUTHORIZATION_IDENTIFIER" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.user_profile.ProfileStorage.FINES">
<code class="descname">FINES</code><em class="property"> = 'simplified:fines'</em><a class="headerlink" href="#core.user_profile.ProfileStorage.FINES" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.user_profile.ProfileStorage.NS">
<code class="descname">NS</code><em class="property"> = 'simplified:'</em><a class="headerlink" href="#core.user_profile.ProfileStorage.NS" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.user_profile.ProfileStorage.SETTINGS_KEY">
<code class="descname">SETTINGS_KEY</code><em class="property"> = 'settings'</em><a class="headerlink" href="#core.user_profile.ProfileStorage.SETTINGS_KEY" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.user_profile.ProfileStorage.SYNCHRONIZE_ANNOTATIONS">
<code class="descname">SYNCHRONIZE_ANNOTATIONS</code><em class="property"> = 'simplified:synchronize_annotations'</em><a class="headerlink" href="#core.user_profile.ProfileStorage.SYNCHRONIZE_ANNOTATIONS" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="core.user_profile.ProfileStorage.profile_document">
<code class="descname">profile_document</code><a class="headerlink" href="#core.user_profile.ProfileStorage.profile_document" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a Profile document representing the current state of
the user’s profile.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">A dictionary that can be serialized as JSON.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="core.user_profile.ProfileStorage.update">
<code class="descname">update</code><span class="sig-paren">(</span><em>new_values</em>, <em>profile_document</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/core/user_profile.html#ProfileStorage.update"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.user_profile.ProfileStorage.update" title="Permalink to this definition">¶</a></dt>
<dd><p>(Try to) change the user’s profile so it looks like the provided
Profile document.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>new_values</strong> – A dictionary of settings that the
client wants to change.</li>
<li><strong>profile_document</strong> – The full Profile document as provided
by the client. Should not be necessary, but provided in
case it’s useful.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><p class="first last"><strong>Exception</strong> – If there’s a problem making the user’s profile
look like the provided Profile document.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="core.user_profile.ProfileStorage.writable_setting_names">
<code class="descname">writable_setting_names</code><a class="headerlink" href="#core.user_profile.ProfileStorage.writable_setting_names" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the subset of settings that are considered writable.</p>
<p>An attempt to modify a setting that’s not in this list will fail
before update() is called.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">An iterable.</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-core">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-core" title="Permalink to this headline">¶</a></h2>
</div>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">Library Simplified Circulation Manager</a></h1>








<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="modules.html">circulation</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="api.html">api package</a></li>
<li class="toctree-l2"><a class="reference internal" href="app.html">app module</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">core package</a></li>
<li class="toctree-l2"><a class="reference internal" href="scripts.html">scripts module</a></li>
</ul>
</li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
  <li><a href="modules.html">circulation</a><ul>
      <li>Previous: <a href="app.html" title="previous chapter">app module</a></li>
      <li>Next: <a href="core.classifier.html" title="next chapter">core.classifier package</a></li>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2019, The New York Public Library, Astor, Lenox, and Tilden Foundations.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.8.5</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="_sources/core.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>