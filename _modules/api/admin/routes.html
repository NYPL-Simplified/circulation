
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>api.admin.routes &#8212; Library Simplified Circulation Manager  documentation</title>
    <link rel="stylesheet" href="../../../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../../_static/language_data.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
   
  <link rel="stylesheet" href="../../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <h1>Source code for api.admin.routes</h1><div class="highlight"><pre>
<span></span><span class="kn">from</span> <span class="nn">nose.tools</span> <span class="k">import</span> <span class="n">set_trace</span>
<span class="kn">from</span> <span class="nn">functools</span> <span class="k">import</span> <span class="n">wraps</span>
<span class="kn">import</span> <span class="nn">flask</span>
<span class="kn">from</span> <span class="nn">flask</span> <span class="k">import</span> <span class="p">(</span>
    <span class="n">Response</span><span class="p">,</span>
    <span class="n">redirect</span><span class="p">,</span>
    <span class="n">make_response</span>
<span class="p">)</span>
<span class="kn">import</span> <span class="nn">os</span>

<span class="kn">from</span> <span class="nn">api.app</span> <span class="k">import</span> <span class="n">app</span>
<span class="kn">from</span> <span class="nn">api.config</span> <span class="k">import</span> <span class="n">Configuration</span>

<span class="kn">from</span> <span class="nn">core.util.problem_detail</span> <span class="k">import</span> <span class="n">ProblemDetail</span>
<span class="kn">from</span> <span class="nn">core.app_server</span> <span class="k">import</span> <span class="n">returns_problem_detail</span>
<span class="kn">from</span> <span class="nn">core.model</span> <span class="k">import</span> <span class="p">(</span>
    <span class="n">ConfigurationSetting</span><span class="p">,</span>
    <span class="n">Library</span><span class="p">,</span>
<span class="p">)</span>

<span class="kn">from</span> <span class="nn">controller</span> <span class="k">import</span> <span class="n">setup_admin_controllers</span>
<span class="kn">from</span> <span class="nn">templates</span> <span class="k">import</span> <span class="p">(</span>
    <span class="n">admin_sign_in_again</span> <span class="k">as</span> <span class="n">sign_in_again_template</span><span class="p">,</span>
<span class="p">)</span>
<span class="kn">from</span> <span class="nn">api.routes</span> <span class="k">import</span> <span class="p">(</span>
    <span class="n">has_library</span><span class="p">,</span>
    <span class="n">library_route</span><span class="p">,</span>
    <span class="n">allows_library</span>
<span class="p">)</span>

<span class="kn">import</span> <span class="nn">urllib</span>
<span class="kn">from</span> <span class="nn">datetime</span> <span class="k">import</span> <span class="n">timedelta</span>
<span class="kn">from</span> <span class="nn">core.local_analytics_provider</span> <span class="k">import</span> <span class="n">LocalAnalyticsProvider</span>

<span class="c1"># An admin&#39;s session will expire after this amount of time and</span>
<span class="c1"># the admin will have to log in again.</span>
<span class="n">app</span><span class="o">.</span><span class="n">permanent_session_lifetime</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">hours</span><span class="o">=</span><span class="mi">9</span><span class="p">)</span>

<div class="viewcode-block" id="setup_admin"><a class="viewcode-back" href="../../../api.admin.html#api.admin.routes.setup_admin">[docs]</a><span class="nd">@app</span><span class="o">.</span><span class="n">before_first_request</span>
<span class="k">def</span> <span class="nf">setup_admin</span><span class="p">(</span><span class="n">_db</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="k">if</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">app</span><span class="p">,</span> <span class="s1">&#39;manager&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">setup_admin_controllers</span><span class="p">(</span><span class="n">app</span><span class="o">.</span><span class="n">manager</span><span class="p">)</span>
    <span class="n">_db</span> <span class="o">=</span> <span class="n">_db</span> <span class="ow">or</span> <span class="n">app</span><span class="o">.</span><span class="n">_db</span>
    <span class="c1"># The secret key is used for signing cookies for admin login</span>
    <span class="n">app</span><span class="o">.</span><span class="n">secret_key</span> <span class="o">=</span> <span class="n">ConfigurationSetting</span><span class="o">.</span><span class="n">sitewide_secret</span><span class="p">(</span>
        <span class="n">_db</span><span class="p">,</span> <span class="n">Configuration</span><span class="o">.</span><span class="n">SECRET_KEY</span>
    <span class="p">)</span>
    <span class="c1"># Create a default Local Analytics service if one does not</span>
    <span class="c1"># already exist.</span>
    <span class="n">local_analytics</span> <span class="o">=</span> <span class="n">LocalAnalyticsProvider</span><span class="o">.</span><span class="n">initialize</span><span class="p">(</span><span class="n">_db</span><span class="p">)</span></div>

<div class="viewcode-block" id="allows_admin_auth_setup"><a class="viewcode-back" href="../../../api.admin.html#api.admin.routes.allows_admin_auth_setup">[docs]</a><span class="k">def</span> <span class="nf">allows_admin_auth_setup</span><span class="p">(</span><span class="n">f</span><span class="p">):</span>
    <span class="nd">@wraps</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">decorated</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">setting_up</span> <span class="o">=</span> <span class="p">(</span><span class="n">app</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">admin_sign_in_controller</span><span class="o">.</span><span class="n">admin_auth_providers</span> <span class="o">==</span> <span class="p">[])</span>
        <span class="k">return</span> <span class="n">f</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="n">setting_up</span><span class="o">=</span><span class="n">setting_up</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">decorated</span></div>

<div class="viewcode-block" id="requires_admin"><a class="viewcode-back" href="../../../api.admin.html#api.admin.routes.requires_admin">[docs]</a><span class="k">def</span> <span class="nf">requires_admin</span><span class="p">(</span><span class="n">f</span><span class="p">):</span>
    <span class="nd">@wraps</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">decorated</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="k">if</span> <span class="s1">&#39;setting_up&#39;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
            <span class="c1"># If the function also requires a CSRF token,</span>
            <span class="c1"># setting_up needs to stay in the arguments for</span>
            <span class="c1"># the next decorator. Otherwise, it should be</span>
            <span class="c1"># removed before the route function.</span>
            <span class="k">if</span> <span class="n">f</span><span class="o">.</span><span class="n">func_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;requires_csrf_token&quot;</span><span class="p">):</span>
                <span class="n">setting_up</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;setting_up&#39;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">setting_up</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">&#39;setting_up&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">setting_up</span> <span class="o">=</span> <span class="kc">False</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">setting_up</span><span class="p">:</span>
            <span class="n">admin</span> <span class="o">=</span> <span class="n">app</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">admin_sign_in_controller</span><span class="o">.</span><span class="n">authenticated_admin_from_request</span><span class="p">()</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">admin</span><span class="p">,</span> <span class="n">ProblemDetail</span><span class="p">):</span>
                <span class="k">return</span> <span class="n">app</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">admin_sign_in_controller</span><span class="o">.</span><span class="n">error_response</span><span class="p">(</span><span class="n">admin</span><span class="p">)</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">admin</span><span class="p">,</span> <span class="n">Response</span><span class="p">):</span>
                <span class="k">return</span> <span class="n">admin</span>

        <span class="k">return</span> <span class="n">f</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">decorated</span></div>

<div class="viewcode-block" id="requires_csrf_token"><a class="viewcode-back" href="../../../api.admin.html#api.admin.routes.requires_csrf_token">[docs]</a><span class="k">def</span> <span class="nf">requires_csrf_token</span><span class="p">(</span><span class="n">f</span><span class="p">):</span>
    <span class="n">f</span><span class="o">.</span><span class="n">func_dict</span><span class="p">[</span><span class="s2">&quot;requires_csrf_token&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="nd">@wraps</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">decorated</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="k">if</span> <span class="s1">&#39;setting_up&#39;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
            <span class="n">setting_up</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">&#39;setting_up&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">setting_up</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">setting_up</span> <span class="ow">and</span> <span class="n">flask</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">method</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;POST&quot;</span><span class="p">,</span> <span class="s2">&quot;PUT&quot;</span><span class="p">,</span> <span class="s2">&quot;DELETE&quot;</span><span class="p">]:</span>
            <span class="n">token</span> <span class="o">=</span> <span class="n">app</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">admin_sign_in_controller</span><span class="o">.</span><span class="n">check_csrf_token</span><span class="p">()</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">ProblemDetail</span><span class="p">):</span>
                <span class="k">return</span> <span class="n">token</span>
        <span class="k">return</span> <span class="n">f</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">decorated</span></div>

<div class="viewcode-block" id="returns_json_or_response_or_problem_detail"><a class="viewcode-back" href="../../../api.admin.html#api.admin.routes.returns_json_or_response_or_problem_detail">[docs]</a><span class="k">def</span> <span class="nf">returns_json_or_response_or_problem_detail</span><span class="p">(</span><span class="n">f</span><span class="p">):</span>
    <span class="nd">@wraps</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">decorated</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">v</span> <span class="o">=</span> <span class="n">f</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">ProblemDetail</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">v</span><span class="o">.</span><span class="n">response</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">Response</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">v</span>
        <span class="k">return</span> <span class="n">flask</span><span class="o">.</span><span class="n">jsonify</span><span class="p">(</span><span class="o">**</span><span class="n">v</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">decorated</span></div>

<div class="viewcode-block" id="google_auth_callback"><a class="viewcode-back" href="../../../api.admin.html#api.admin.routes.google_auth_callback">[docs]</a><span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/admin/GoogleAuth/callback&#39;</span><span class="p">)</span>
<span class="nd">@returns_problem_detail</span>
<span class="k">def</span> <span class="nf">google_auth_callback</span><span class="p">():</span>
    <span class="k">return</span> <span class="n">app</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">admin_sign_in_controller</span><span class="o">.</span><span class="n">redirect_after_google_sign_in</span><span class="p">()</span></div>

<div class="viewcode-block" id="password_auth"><a class="viewcode-back" href="../../../api.admin.html#api.admin.routes.password_auth">[docs]</a><span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s2">&quot;/admin/sign_in_with_password&quot;</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;POST&quot;</span><span class="p">])</span>
<span class="nd">@returns_problem_detail</span>
<span class="k">def</span> <span class="nf">password_auth</span><span class="p">():</span>
    <span class="k">return</span> <span class="n">app</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">admin_sign_in_controller</span><span class="o">.</span><span class="n">password_sign_in</span><span class="p">()</span></div>

<div class="viewcode-block" id="admin_sign_in"><a class="viewcode-back" href="../../../api.admin.html#api.admin.routes.admin_sign_in">[docs]</a><span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/admin/sign_in&#39;</span><span class="p">)</span>
<span class="nd">@returns_problem_detail</span>
<span class="k">def</span> <span class="nf">admin_sign_in</span><span class="p">():</span>
    <span class="k">return</span> <span class="n">app</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">admin_sign_in_controller</span><span class="o">.</span><span class="n">sign_in</span><span class="p">()</span></div>

<div class="viewcode-block" id="admin_sign_out"><a class="viewcode-back" href="../../../api.admin.html#api.admin.routes.admin_sign_out">[docs]</a><span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/admin/sign_out&#39;</span><span class="p">)</span>
<span class="nd">@returns_problem_detail</span>
<span class="nd">@requires_admin</span>
<span class="k">def</span> <span class="nf">admin_sign_out</span><span class="p">():</span>
    <span class="k">return</span> <span class="n">app</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">admin_sign_in_controller</span><span class="o">.</span><span class="n">sign_out</span><span class="p">()</span></div>

<div class="viewcode-block" id="admin_change_password"><a class="viewcode-back" href="../../../api.admin.html#api.admin.routes.admin_change_password">[docs]</a><span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/admin/change_password&#39;</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;POST&quot;</span><span class="p">])</span>
<span class="nd">@returns_problem_detail</span>
<span class="nd">@requires_admin</span>
<span class="k">def</span> <span class="nf">admin_change_password</span><span class="p">():</span>
    <span class="k">return</span> <span class="n">app</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">admin_sign_in_controller</span><span class="o">.</span><span class="n">change_password</span><span class="p">()</span></div>

<div class="viewcode-block" id="work_details"><a class="viewcode-back" href="../../../api.admin.html#api.admin.routes.work_details">[docs]</a><span class="nd">@library_route</span><span class="p">(</span><span class="s1">&#39;/admin/works/&lt;identifier_type&gt;/&lt;path:identifier&gt;&#39;</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;GET&#39;</span><span class="p">])</span>
<span class="nd">@has_library</span>
<span class="nd">@returns_problem_detail</span>
<span class="nd">@requires_admin</span>
<span class="k">def</span> <span class="nf">work_details</span><span class="p">(</span><span class="n">identifier_type</span><span class="p">,</span> <span class="n">identifier</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">app</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">admin_work_controller</span><span class="o">.</span><span class="n">details</span><span class="p">(</span><span class="n">identifier_type</span><span class="p">,</span> <span class="n">identifier</span><span class="p">)</span></div>

<div class="viewcode-block" id="work_classifications"><a class="viewcode-back" href="../../../api.admin.html#api.admin.routes.work_classifications">[docs]</a><span class="nd">@library_route</span><span class="p">(</span><span class="s1">&#39;/admin/works/&lt;identifier_type&gt;/&lt;path:identifier&gt;/classifications&#39;</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;GET&#39;</span><span class="p">])</span>
<span class="nd">@has_library</span>
<span class="nd">@returns_json_or_response_or_problem_detail</span>
<span class="nd">@requires_admin</span>
<span class="k">def</span> <span class="nf">work_classifications</span><span class="p">(</span><span class="n">identifier_type</span><span class="p">,</span> <span class="n">identifier</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">app</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">admin_work_controller</span><span class="o">.</span><span class="n">classifications</span><span class="p">(</span><span class="n">identifier_type</span><span class="p">,</span> <span class="n">identifier</span><span class="p">)</span></div>

<div class="viewcode-block" id="work_preview_book_cover"><a class="viewcode-back" href="../../../api.admin.html#api.admin.routes.work_preview_book_cover">[docs]</a><span class="nd">@library_route</span><span class="p">(</span><span class="s1">&#39;/admin/works/&lt;identifier_type&gt;/&lt;path:identifier&gt;/preview_book_cover&#39;</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;POST&#39;</span><span class="p">])</span>
<span class="nd">@has_library</span>
<span class="nd">@returns_problem_detail</span>
<span class="nd">@requires_admin</span>
<span class="k">def</span> <span class="nf">work_preview_book_cover</span><span class="p">(</span><span class="n">identifier_type</span><span class="p">,</span> <span class="n">identifier</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">app</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">admin_work_controller</span><span class="o">.</span><span class="n">preview_book_cover</span><span class="p">(</span><span class="n">identifier_type</span><span class="p">,</span> <span class="n">identifier</span><span class="p">)</span></div>

<div class="viewcode-block" id="work_change_book_cover"><a class="viewcode-back" href="../../../api.admin.html#api.admin.routes.work_change_book_cover">[docs]</a><span class="nd">@library_route</span><span class="p">(</span><span class="s1">&#39;/admin/works/&lt;identifier_type&gt;/&lt;path:identifier&gt;/change_book_cover&#39;</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;POST&#39;</span><span class="p">])</span>
<span class="nd">@has_library</span>
<span class="nd">@returns_problem_detail</span>
<span class="nd">@requires_admin</span>
<span class="k">def</span> <span class="nf">work_change_book_cover</span><span class="p">(</span><span class="n">identifier_type</span><span class="p">,</span> <span class="n">identifier</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">app</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">admin_work_controller</span><span class="o">.</span><span class="n">change_book_cover</span><span class="p">(</span><span class="n">identifier_type</span><span class="p">,</span> <span class="n">identifier</span><span class="p">)</span></div>

<div class="viewcode-block" id="work_complaints"><a class="viewcode-back" href="../../../api.admin.html#api.admin.routes.work_complaints">[docs]</a><span class="nd">@library_route</span><span class="p">(</span><span class="s1">&#39;/admin/works/&lt;identifier_type&gt;/&lt;path:identifier&gt;/complaints&#39;</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;GET&#39;</span><span class="p">])</span>
<span class="nd">@has_library</span>
<span class="nd">@returns_json_or_response_or_problem_detail</span>
<span class="nd">@requires_admin</span>
<span class="k">def</span> <span class="nf">work_complaints</span><span class="p">(</span><span class="n">identifier_type</span><span class="p">,</span> <span class="n">identifier</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">app</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">admin_work_controller</span><span class="o">.</span><span class="n">complaints</span><span class="p">(</span><span class="n">identifier_type</span><span class="p">,</span> <span class="n">identifier</span><span class="p">)</span></div>

<div class="viewcode-block" id="work_custom_lists"><a class="viewcode-back" href="../../../api.admin.html#api.admin.routes.work_custom_lists">[docs]</a><span class="nd">@library_route</span><span class="p">(</span><span class="s1">&#39;/admin/works/&lt;identifier_type&gt;/&lt;path:identifier&gt;/lists&#39;</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;GET&#39;</span><span class="p">,</span> <span class="s1">&#39;POST&#39;</span><span class="p">])</span>
<span class="nd">@has_library</span>
<span class="nd">@returns_json_or_response_or_problem_detail</span>
<span class="nd">@requires_admin</span>
<span class="nd">@requires_csrf_token</span>
<span class="k">def</span> <span class="nf">work_custom_lists</span><span class="p">(</span><span class="n">identifier_type</span><span class="p">,</span> <span class="n">identifier</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">app</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">admin_work_controller</span><span class="o">.</span><span class="n">custom_lists</span><span class="p">(</span><span class="n">identifier_type</span><span class="p">,</span> <span class="n">identifier</span><span class="p">)</span></div>

<div class="viewcode-block" id="edit"><a class="viewcode-back" href="../../../api.admin.html#api.admin.routes.edit">[docs]</a><span class="nd">@library_route</span><span class="p">(</span><span class="s1">&#39;/admin/works/&lt;identifier_type&gt;/&lt;path:identifier&gt;/edit&#39;</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;POST&#39;</span><span class="p">])</span>
<span class="nd">@has_library</span>
<span class="nd">@returns_problem_detail</span>
<span class="nd">@requires_admin</span>
<span class="nd">@requires_csrf_token</span>
<span class="k">def</span> <span class="nf">edit</span><span class="p">(</span><span class="n">identifier_type</span><span class="p">,</span> <span class="n">identifier</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">app</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">admin_work_controller</span><span class="o">.</span><span class="n">edit</span><span class="p">(</span><span class="n">identifier_type</span><span class="p">,</span> <span class="n">identifier</span><span class="p">)</span></div>

<div class="viewcode-block" id="suppress"><a class="viewcode-back" href="../../../api.admin.html#api.admin.routes.suppress">[docs]</a><span class="nd">@library_route</span><span class="p">(</span><span class="s1">&#39;/admin/works/&lt;identifier_type&gt;/&lt;path:identifier&gt;/suppress&#39;</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;POST&#39;</span><span class="p">])</span>
<span class="nd">@has_library</span>
<span class="nd">@returns_problem_detail</span>
<span class="nd">@requires_admin</span>
<span class="nd">@requires_csrf_token</span>
<span class="k">def</span> <span class="nf">suppress</span><span class="p">(</span><span class="n">identifier_type</span><span class="p">,</span> <span class="n">identifier</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">app</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">admin_work_controller</span><span class="o">.</span><span class="n">suppress</span><span class="p">(</span><span class="n">identifier_type</span><span class="p">,</span> <span class="n">identifier</span><span class="p">)</span></div>

<div class="viewcode-block" id="unsuppress"><a class="viewcode-back" href="../../../api.admin.html#api.admin.routes.unsuppress">[docs]</a><span class="nd">@library_route</span><span class="p">(</span><span class="s1">&#39;/admin/works/&lt;identifier_type&gt;/&lt;path:identifier&gt;/unsuppress&#39;</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;POST&#39;</span><span class="p">])</span>
<span class="nd">@has_library</span>
<span class="nd">@returns_problem_detail</span>
<span class="nd">@requires_admin</span>
<span class="nd">@requires_csrf_token</span>
<span class="k">def</span> <span class="nf">unsuppress</span><span class="p">(</span><span class="n">identifier_type</span><span class="p">,</span> <span class="n">identifier</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">app</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">admin_work_controller</span><span class="o">.</span><span class="n">unsuppress</span><span class="p">(</span><span class="n">identifier_type</span><span class="p">,</span> <span class="n">identifier</span><span class="p">)</span></div>

<div class="viewcode-block" id="refresh"><a class="viewcode-back" href="../../../api.admin.html#api.admin.routes.refresh">[docs]</a><span class="nd">@library_route</span><span class="p">(</span><span class="s1">&#39;/works/&lt;identifier_type&gt;/&lt;path:identifier&gt;/refresh&#39;</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;POST&#39;</span><span class="p">])</span>
<span class="nd">@has_library</span>
<span class="nd">@returns_problem_detail</span>
<span class="nd">@requires_admin</span>
<span class="nd">@requires_csrf_token</span>
<span class="k">def</span> <span class="nf">refresh</span><span class="p">(</span><span class="n">identifier_type</span><span class="p">,</span> <span class="n">identifier</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">app</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">admin_work_controller</span><span class="o">.</span><span class="n">refresh_metadata</span><span class="p">(</span><span class="n">identifier_type</span><span class="p">,</span> <span class="n">identifier</span><span class="p">)</span></div>

<div class="viewcode-block" id="resolve_complaints"><a class="viewcode-back" href="../../../api.admin.html#api.admin.routes.resolve_complaints">[docs]</a><span class="nd">@library_route</span><span class="p">(</span><span class="s1">&#39;/admin/works/&lt;identifier_type&gt;/&lt;path:identifier&gt;/resolve_complaints&#39;</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;POST&#39;</span><span class="p">])</span>
<span class="nd">@has_library</span>
<span class="nd">@returns_problem_detail</span>
<span class="nd">@requires_admin</span>
<span class="nd">@requires_csrf_token</span>
<span class="k">def</span> <span class="nf">resolve_complaints</span><span class="p">(</span><span class="n">identifier_type</span><span class="p">,</span> <span class="n">identifier</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">app</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">admin_work_controller</span><span class="o">.</span><span class="n">resolve_complaints</span><span class="p">(</span><span class="n">identifier_type</span><span class="p">,</span> <span class="n">identifier</span><span class="p">)</span></div>

<div class="viewcode-block" id="edit_classifications"><a class="viewcode-back" href="../../../api.admin.html#api.admin.routes.edit_classifications">[docs]</a><span class="nd">@library_route</span><span class="p">(</span><span class="s1">&#39;/admin/works/&lt;identifier_type&gt;/&lt;path:identifier&gt;/edit_classifications&#39;</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;POST&#39;</span><span class="p">])</span>
<span class="nd">@has_library</span>
<span class="nd">@returns_problem_detail</span>
<span class="nd">@requires_admin</span>
<span class="nd">@requires_csrf_token</span>
<span class="k">def</span> <span class="nf">edit_classifications</span><span class="p">(</span><span class="n">identifier_type</span><span class="p">,</span> <span class="n">identifier</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">app</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">admin_work_controller</span><span class="o">.</span><span class="n">edit_classifications</span><span class="p">(</span><span class="n">identifier_type</span><span class="p">,</span> <span class="n">identifier</span><span class="p">)</span></div>

<div class="viewcode-block" id="roles"><a class="viewcode-back" href="../../../api.admin.html#api.admin.routes.roles">[docs]</a><span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/admin/roles&#39;</span><span class="p">)</span>
<span class="nd">@returns_json_or_response_or_problem_detail</span>
<span class="k">def</span> <span class="nf">roles</span><span class="p">():</span>
    <span class="k">return</span> <span class="n">app</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">admin_work_controller</span><span class="o">.</span><span class="n">roles</span><span class="p">()</span></div>

<div class="viewcode-block" id="languages"><a class="viewcode-back" href="../../../api.admin.html#api.admin.routes.languages">[docs]</a><span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/admin/languages&#39;</span><span class="p">)</span>
<span class="nd">@returns_json_or_response_or_problem_detail</span>
<span class="k">def</span> <span class="nf">languages</span><span class="p">():</span>
    <span class="k">return</span> <span class="n">app</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">admin_work_controller</span><span class="o">.</span><span class="n">languages</span><span class="p">()</span></div>

<div class="viewcode-block" id="media"><a class="viewcode-back" href="../../../api.admin.html#api.admin.routes.media">[docs]</a><span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/admin/media&#39;</span><span class="p">)</span>
<span class="nd">@returns_json_or_response_or_problem_detail</span>
<span class="k">def</span> <span class="nf">media</span><span class="p">():</span>
    <span class="k">return</span> <span class="n">app</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">admin_work_controller</span><span class="o">.</span><span class="n">media</span><span class="p">()</span></div>

<div class="viewcode-block" id="rights_status"><a class="viewcode-back" href="../../../api.admin.html#api.admin.routes.rights_status">[docs]</a><span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/admin/rights_status&#39;</span><span class="p">)</span>
<span class="nd">@returns_json_or_response_or_problem_detail</span>
<span class="k">def</span> <span class="nf">rights_status</span><span class="p">():</span>
    <span class="k">return</span> <span class="n">app</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">admin_work_controller</span><span class="o">.</span><span class="n">rights_status</span><span class="p">()</span></div>

<div class="viewcode-block" id="complaints"><a class="viewcode-back" href="../../../api.admin.html#api.admin.routes.complaints">[docs]</a><span class="nd">@library_route</span><span class="p">(</span><span class="s1">&#39;/admin/complaints&#39;</span><span class="p">)</span>
<span class="nd">@has_library</span>
<span class="nd">@returns_problem_detail</span>
<span class="nd">@requires_admin</span>
<span class="k">def</span> <span class="nf">complaints</span><span class="p">():</span>
    <span class="k">return</span> <span class="n">app</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">admin_feed_controller</span><span class="o">.</span><span class="n">complaints</span><span class="p">()</span></div>

<div class="viewcode-block" id="suppressed"><a class="viewcode-back" href="../../../api.admin.html#api.admin.routes.suppressed">[docs]</a><span class="nd">@library_route</span><span class="p">(</span><span class="s1">&#39;/admin/suppressed&#39;</span><span class="p">)</span>
<span class="nd">@has_library</span>
<span class="nd">@returns_problem_detail</span>
<span class="nd">@requires_admin</span>
<span class="k">def</span> <span class="nf">suppressed</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;Returns a feed of suppressed works.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">app</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">admin_feed_controller</span><span class="o">.</span><span class="n">suppressed</span><span class="p">()</span></div>

<div class="viewcode-block" id="genres"><a class="viewcode-back" href="../../../api.admin.html#api.admin.routes.genres">[docs]</a><span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/admin/genres&#39;</span><span class="p">)</span>
<span class="nd">@returns_json_or_response_or_problem_detail</span>
<span class="nd">@requires_admin</span>
<span class="k">def</span> <span class="nf">genres</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;Returns a JSON representation of complete genre tree.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">app</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">admin_feed_controller</span><span class="o">.</span><span class="n">genres</span><span class="p">()</span></div>

<div class="viewcode-block" id="bulk_circulation_events"><a class="viewcode-back" href="../../../api.admin.html#api.admin.routes.bulk_circulation_events">[docs]</a><span class="nd">@library_route</span><span class="p">(</span><span class="s1">&#39;/admin/bulk_circulation_events&#39;</span><span class="p">)</span>
<span class="nd">@returns_problem_detail</span>
<span class="nd">@allows_library</span>
<span class="nd">@requires_admin</span>
<span class="k">def</span> <span class="nf">bulk_circulation_events</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;Returns a CSV representation of all circulation events with optional</span>
<span class="sd">    start and end times.&quot;&quot;&quot;</span>
    <span class="n">data</span><span class="p">,</span> <span class="n">date</span><span class="p">,</span> <span class="n">date_end</span><span class="p">,</span> <span class="n">library</span> <span class="o">=</span> <span class="n">app</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">admin_dashboard_controller</span><span class="o">.</span><span class="n">bulk_circulation_events</span><span class="p">()</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">ProblemDetail</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">data</span>

    <span class="n">response</span> <span class="o">=</span> <span class="n">make_response</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>

    <span class="c1"># If gathering events per library, include the library name in the file</span>
    <span class="c1"># for convenience. The start and end dates will always be included.</span>
    <span class="n">filename</span> <span class="o">=</span> <span class="n">library</span> <span class="o">+</span> <span class="s2">&quot;-&quot;</span> <span class="k">if</span> <span class="n">library</span> <span class="k">else</span> <span class="s2">&quot;&quot;</span>
    <span class="n">filename</span> <span class="o">+=</span> <span class="n">date</span> <span class="o">+</span> <span class="s2">&quot;-to-&quot;</span> <span class="o">+</span> <span class="n">date_end</span> <span class="k">if</span> <span class="n">date_end</span> <span class="ow">and</span> <span class="n">date</span> <span class="o">!=</span> <span class="n">date_end</span> <span class="k">else</span> <span class="n">date</span>
    <span class="n">response</span><span class="o">.</span><span class="n">headers</span><span class="p">[</span><span class="s1">&#39;Content-Disposition&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;attachment; filename=circulation_events_&quot;</span> <span class="o">+</span> <span class="n">filename</span> <span class="o">+</span> <span class="s2">&quot;.csv&quot;</span>
    <span class="n">response</span><span class="o">.</span><span class="n">headers</span><span class="p">[</span><span class="s2">&quot;Content-type&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;text/csv&quot;</span>
    <span class="k">return</span> <span class="n">response</span></div>

<div class="viewcode-block" id="circulation_events"><a class="viewcode-back" href="../../../api.admin.html#api.admin.routes.circulation_events">[docs]</a><span class="nd">@library_route</span><span class="p">(</span><span class="s1">&#39;/admin/circulation_events&#39;</span><span class="p">)</span>
<span class="nd">@has_library</span>
<span class="nd">@returns_json_or_response_or_problem_detail</span>
<span class="nd">@requires_admin</span>
<span class="k">def</span> <span class="nf">circulation_events</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;Returns a JSON representation of the most recent circulation events.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">app</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">admin_dashboard_controller</span><span class="o">.</span><span class="n">circulation_events</span><span class="p">()</span></div>

<div class="viewcode-block" id="stats"><a class="viewcode-back" href="../../../api.admin.html#api.admin.routes.stats">[docs]</a><span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/admin/stats&#39;</span><span class="p">)</span>
<span class="nd">@returns_json_or_response_or_problem_detail</span>
<span class="nd">@requires_admin</span>
<span class="k">def</span> <span class="nf">stats</span><span class="p">():</span>
    <span class="k">return</span> <span class="n">app</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">admin_dashboard_controller</span><span class="o">.</span><span class="n">stats</span><span class="p">()</span></div>

<div class="viewcode-block" id="libraries"><a class="viewcode-back" href="../../../api.admin.html#api.admin.routes.libraries">[docs]</a><span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/admin/libraries&#39;</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;GET&#39;</span><span class="p">,</span> <span class="s1">&#39;POST&#39;</span><span class="p">])</span>
<span class="nd">@returns_json_or_response_or_problem_detail</span>
<span class="nd">@requires_admin</span>
<span class="nd">@requires_csrf_token</span>
<span class="k">def</span> <span class="nf">libraries</span><span class="p">():</span>
    <span class="k">if</span> <span class="n">flask</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">method</span> <span class="o">==</span> <span class="s1">&#39;GET&#39;</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">app</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">admin_library_settings_controller</span><span class="o">.</span><span class="n">process_get</span><span class="p">()</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">app</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">admin_library_settings_controller</span><span class="o">.</span><span class="n">process_post</span><span class="p">()</span></div>

<div class="viewcode-block" id="library"><a class="viewcode-back" href="../../../api.admin.html#api.admin.routes.library">[docs]</a><span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s2">&quot;/admin/library/&lt;library_uuid&gt;&quot;</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;DELETE&quot;</span><span class="p">])</span>
<span class="nd">@returns_json_or_response_or_problem_detail</span>
<span class="nd">@requires_admin</span>
<span class="nd">@requires_csrf_token</span>
<span class="k">def</span> <span class="nf">library</span><span class="p">(</span><span class="n">library_uuid</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">app</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">admin_library_settings_controller</span><span class="o">.</span><span class="n">process_delete</span><span class="p">(</span><span class="n">library_uuid</span><span class="p">)</span></div>

<div class="viewcode-block" id="collections"><a class="viewcode-back" href="../../../api.admin.html#api.admin.routes.collections">[docs]</a><span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s2">&quot;/admin/collections&quot;</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;GET&#39;</span><span class="p">,</span> <span class="s1">&#39;POST&#39;</span><span class="p">])</span>
<span class="nd">@returns_json_or_response_or_problem_detail</span>
<span class="nd">@requires_admin</span>
<span class="nd">@requires_csrf_token</span>
<span class="k">def</span> <span class="nf">collections</span><span class="p">():</span>
    <span class="k">return</span> <span class="n">app</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">admin_collection_settings_controller</span><span class="o">.</span><span class="n">process_collections</span><span class="p">()</span></div>

<div class="viewcode-block" id="collection_self_tests"><a class="viewcode-back" href="../../../api.admin.html#api.admin.routes.collection_self_tests">[docs]</a><span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s2">&quot;/admin/collection_self_tests/&lt;identifier&gt;&quot;</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;GET&quot;</span><span class="p">,</span> <span class="s2">&quot;POST&quot;</span><span class="p">])</span>
<span class="nd">@returns_json_or_response_or_problem_detail</span>
<span class="nd">@requires_admin</span>
<span class="nd">@requires_csrf_token</span>
<span class="k">def</span> <span class="nf">collection_self_tests</span><span class="p">(</span><span class="n">identifier</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">app</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">admin_collection_self_tests_controller</span><span class="o">.</span><span class="n">process_collection_self_tests</span><span class="p">(</span><span class="n">identifier</span><span class="p">)</span></div>

<div class="viewcode-block" id="collection"><a class="viewcode-back" href="../../../api.admin.html#api.admin.routes.collection">[docs]</a><span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s2">&quot;/admin/collection/&lt;collection_id&gt;&quot;</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;DELETE&quot;</span><span class="p">])</span>
<span class="nd">@returns_json_or_response_or_problem_detail</span>
<span class="nd">@requires_admin</span>
<span class="nd">@requires_csrf_token</span>
<span class="k">def</span> <span class="nf">collection</span><span class="p">(</span><span class="n">collection_id</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">app</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">admin_collection_settings_controller</span><span class="o">.</span><span class="n">process_delete</span><span class="p">(</span><span class="n">collection_id</span><span class="p">)</span></div>

<div class="viewcode-block" id="collection_library_registrations"><a class="viewcode-back" href="../../../api.admin.html#api.admin.routes.collection_library_registrations">[docs]</a><span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s2">&quot;/admin/collection_library_registrations&quot;</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;GET&#39;</span><span class="p">,</span> <span class="s1">&#39;POST&#39;</span><span class="p">])</span>
<span class="nd">@returns_json_or_response_or_problem_detail</span>
<span class="nd">@requires_admin</span>
<span class="nd">@requires_csrf_token</span>
<span class="k">def</span> <span class="nf">collection_library_registrations</span><span class="p">():</span>
    <span class="k">return</span> <span class="n">app</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">admin_collection_library_registrations_controller</span><span class="o">.</span><span class="n">process_collection_library_registrations</span><span class="p">()</span></div>

<div class="viewcode-block" id="admin_auth_services"><a class="viewcode-back" href="../../../api.admin.html#api.admin.routes.admin_auth_services">[docs]</a><span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s2">&quot;/admin/admin_auth_services&quot;</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;GET&#39;</span><span class="p">,</span> <span class="s1">&#39;POST&#39;</span><span class="p">])</span>
<span class="nd">@returns_json_or_response_or_problem_detail</span>
<span class="nd">@requires_admin</span>
<span class="nd">@requires_csrf_token</span>
<span class="k">def</span> <span class="nf">admin_auth_services</span><span class="p">():</span>
    <span class="k">return</span> <span class="n">app</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">admin_auth_services_controller</span><span class="o">.</span><span class="n">process_admin_auth_services</span><span class="p">()</span></div>

<div class="viewcode-block" id="admin_auth_service"><a class="viewcode-back" href="../../../api.admin.html#api.admin.routes.admin_auth_service">[docs]</a><span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s2">&quot;/admin/admin_auth_service/&lt;protocol&gt;&quot;</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;DELETE&quot;</span><span class="p">])</span>
<span class="nd">@returns_json_or_response_or_problem_detail</span>
<span class="nd">@requires_admin</span>
<span class="nd">@requires_csrf_token</span>
<span class="k">def</span> <span class="nf">admin_auth_service</span><span class="p">(</span><span class="n">protocol</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">app</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">admin_auth_services_controller</span><span class="o">.</span><span class="n">process_delete</span><span class="p">(</span><span class="n">protocol</span><span class="p">)</span></div>

<div class="viewcode-block" id="individual_admins"><a class="viewcode-back" href="../../../api.admin.html#api.admin.routes.individual_admins">[docs]</a><span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s2">&quot;/admin/individual_admins&quot;</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;GET&#39;</span><span class="p">,</span> <span class="s1">&#39;POST&#39;</span><span class="p">])</span>
<span class="nd">@returns_json_or_response_or_problem_detail</span>
<span class="nd">@allows_admin_auth_setup</span>
<span class="nd">@requires_admin</span>
<span class="nd">@requires_csrf_token</span>
<span class="k">def</span> <span class="nf">individual_admins</span><span class="p">():</span>
    <span class="k">if</span> <span class="n">flask</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">method</span> <span class="o">==</span> <span class="s1">&#39;GET&#39;</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">app</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">admin_individual_admin_settings_controller</span><span class="o">.</span><span class="n">process_get</span><span class="p">()</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">app</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">admin_individual_admin_settings_controller</span><span class="o">.</span><span class="n">process_post</span><span class="p">()</span></div>

<div class="viewcode-block" id="individual_admin"><a class="viewcode-back" href="../../../api.admin.html#api.admin.routes.individual_admin">[docs]</a><span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s2">&quot;/admin/individual_admin/&lt;email&gt;&quot;</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;DELETE&quot;</span><span class="p">])</span>
<span class="nd">@returns_json_or_response_or_problem_detail</span>
<span class="nd">@requires_admin</span>
<span class="nd">@requires_csrf_token</span>
<span class="k">def</span> <span class="nf">individual_admin</span><span class="p">(</span><span class="n">email</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">app</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">admin_individual_admin_settings_controller</span><span class="o">.</span><span class="n">process_delete</span><span class="p">(</span><span class="n">email</span><span class="p">)</span></div>

<div class="viewcode-block" id="patron_auth_services"><a class="viewcode-back" href="../../../api.admin.html#api.admin.routes.patron_auth_services">[docs]</a><span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s2">&quot;/admin/patron_auth_services&quot;</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;GET&#39;</span><span class="p">,</span> <span class="s1">&#39;POST&#39;</span><span class="p">])</span>
<span class="nd">@returns_json_or_response_or_problem_detail</span>
<span class="nd">@requires_admin</span>
<span class="nd">@requires_csrf_token</span>
<span class="k">def</span> <span class="nf">patron_auth_services</span><span class="p">():</span>
    <span class="k">return</span> <span class="n">app</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">admin_patron_auth_services_controller</span><span class="o">.</span><span class="n">process_patron_auth_services</span><span class="p">()</span></div>

<div class="viewcode-block" id="patron_auth_service"><a class="viewcode-back" href="../../../api.admin.html#api.admin.routes.patron_auth_service">[docs]</a><span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s2">&quot;/admin/patron_auth_service/&lt;service_id&gt;&quot;</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;DELETE&quot;</span><span class="p">])</span>
<span class="nd">@returns_json_or_response_or_problem_detail</span>
<span class="nd">@requires_admin</span>
<span class="nd">@requires_csrf_token</span>
<span class="k">def</span> <span class="nf">patron_auth_service</span><span class="p">(</span><span class="n">service_id</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">app</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">admin_patron_auth_services_controller</span><span class="o">.</span><span class="n">process_delete</span><span class="p">(</span><span class="n">service_id</span><span class="p">)</span></div>

<div class="viewcode-block" id="patron_auth_self_tests"><a class="viewcode-back" href="../../../api.admin.html#api.admin.routes.patron_auth_self_tests">[docs]</a><span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s2">&quot;/admin/patron_auth_service_self_tests/&lt;identifier&gt;&quot;</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;GET&quot;</span><span class="p">,</span> <span class="s2">&quot;POST&quot;</span><span class="p">])</span>
<span class="nd">@returns_json_or_response_or_problem_detail</span>
<span class="nd">@requires_admin</span>
<span class="nd">@requires_csrf_token</span>
<span class="k">def</span> <span class="nf">patron_auth_self_tests</span><span class="p">(</span><span class="n">identifier</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">app</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">admin_patron_auth_service_self_tests_controller</span><span class="o">.</span><span class="n">process_patron_auth_service_self_tests</span><span class="p">(</span><span class="n">identifier</span><span class="p">)</span></div>

<div class="viewcode-block" id="lookup_patron"><a class="viewcode-back" href="../../../api.admin.html#api.admin.routes.lookup_patron">[docs]</a><span class="nd">@library_route</span><span class="p">(</span><span class="s2">&quot;/admin/manage_patrons&quot;</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;POST&#39;</span><span class="p">])</span>
<span class="nd">@has_library</span>
<span class="nd">@returns_json_or_response_or_problem_detail</span>
<span class="nd">@requires_admin</span>
<span class="nd">@requires_csrf_token</span>
<span class="k">def</span> <span class="nf">lookup_patron</span><span class="p">():</span>
    <span class="k">return</span> <span class="n">app</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">admin_patron_controller</span><span class="o">.</span><span class="n">lookup_patron</span><span class="p">()</span></div>

<div class="viewcode-block" id="reset_adobe_id"><a class="viewcode-back" href="../../../api.admin.html#api.admin.routes.reset_adobe_id">[docs]</a><span class="nd">@library_route</span><span class="p">(</span><span class="s2">&quot;/admin/manage_patrons/reset_adobe_id&quot;</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;POST&#39;</span><span class="p">])</span>
<span class="nd">@has_library</span>
<span class="nd">@returns_json_or_response_or_problem_detail</span>
<span class="nd">@requires_admin</span>
<span class="nd">@requires_csrf_token</span>
<span class="k">def</span> <span class="nf">reset_adobe_id</span><span class="p">():</span>
    <span class="k">return</span> <span class="n">app</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">admin_patron_controller</span><span class="o">.</span><span class="n">reset_adobe_id</span><span class="p">()</span></div>

<div class="viewcode-block" id="metadata_services"><a class="viewcode-back" href="../../../api.admin.html#api.admin.routes.metadata_services">[docs]</a><span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s2">&quot;/admin/metadata_services&quot;</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;GET&#39;</span><span class="p">,</span> <span class="s1">&#39;POST&#39;</span><span class="p">])</span>
<span class="nd">@returns_json_or_response_or_problem_detail</span>
<span class="nd">@requires_admin</span>
<span class="nd">@requires_csrf_token</span>
<span class="k">def</span> <span class="nf">metadata_services</span><span class="p">():</span>
    <span class="k">return</span> <span class="n">app</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">admin_metadata_services_controller</span><span class="o">.</span><span class="n">process_metadata_services</span><span class="p">()</span></div>

<div class="viewcode-block" id="metadata_service"><a class="viewcode-back" href="../../../api.admin.html#api.admin.routes.metadata_service">[docs]</a><span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s2">&quot;/admin/metadata_service/&lt;service_id&gt;&quot;</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;DELETE&quot;</span><span class="p">])</span>
<span class="nd">@returns_json_or_response_or_problem_detail</span>
<span class="nd">@requires_admin</span>
<span class="nd">@requires_csrf_token</span>
<span class="k">def</span> <span class="nf">metadata_service</span><span class="p">(</span><span class="n">service_id</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">app</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">admin_metadata_services_controller</span><span class="o">.</span><span class="n">process_delete</span><span class="p">(</span><span class="n">service_id</span><span class="p">)</span></div>

<div class="viewcode-block" id="analytics_services"><a class="viewcode-back" href="../../../api.admin.html#api.admin.routes.analytics_services">[docs]</a><span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s2">&quot;/admin/analytics_services&quot;</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;GET&#39;</span><span class="p">,</span> <span class="s1">&#39;POST&#39;</span><span class="p">])</span>
<span class="nd">@returns_json_or_response_or_problem_detail</span>
<span class="nd">@requires_admin</span>
<span class="nd">@requires_csrf_token</span>
<span class="k">def</span> <span class="nf">analytics_services</span><span class="p">():</span>
    <span class="k">return</span> <span class="n">app</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">admin_analytics_services_controller</span><span class="o">.</span><span class="n">process_analytics_services</span><span class="p">()</span></div>

<div class="viewcode-block" id="analytics_service"><a class="viewcode-back" href="../../../api.admin.html#api.admin.routes.analytics_service">[docs]</a><span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s2">&quot;/admin/analytics_service/&lt;service_id&gt;&quot;</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;DELETE&quot;</span><span class="p">])</span>
<span class="nd">@returns_json_or_response_or_problem_detail</span>
<span class="nd">@requires_admin</span>
<span class="nd">@requires_csrf_token</span>
<span class="k">def</span> <span class="nf">analytics_service</span><span class="p">(</span><span class="n">service_id</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">app</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">admin_analytics_services_controller</span><span class="o">.</span><span class="n">process_delete</span><span class="p">(</span><span class="n">service_id</span><span class="p">)</span></div>

<div class="viewcode-block" id="cdn_services"><a class="viewcode-back" href="../../../api.admin.html#api.admin.routes.cdn_services">[docs]</a><span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s2">&quot;/admin/cdn_services&quot;</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;GET&quot;</span><span class="p">,</span> <span class="s2">&quot;POST&quot;</span><span class="p">])</span>
<span class="nd">@returns_json_or_response_or_problem_detail</span>
<span class="nd">@requires_admin</span>
<span class="nd">@requires_csrf_token</span>
<span class="k">def</span> <span class="nf">cdn_services</span><span class="p">():</span>
    <span class="k">return</span> <span class="n">app</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">admin_cdn_services_controller</span><span class="o">.</span><span class="n">process_cdn_services</span><span class="p">()</span></div>

<div class="viewcode-block" id="search_service_self_tests"><a class="viewcode-back" href="../../../api.admin.html#api.admin.routes.search_service_self_tests">[docs]</a><span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s2">&quot;/admin/search_service_self_tests/&lt;identifier&gt;&quot;</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;GET&quot;</span><span class="p">,</span> <span class="s2">&quot;POST&quot;</span><span class="p">])</span>
<span class="nd">@returns_json_or_response_or_problem_detail</span>
<span class="nd">@requires_admin</span>
<span class="nd">@requires_csrf_token</span>
<span class="k">def</span> <span class="nf">search_service_self_tests</span><span class="p">(</span><span class="n">identifier</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">app</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">admin_search_service_self_tests_controller</span><span class="o">.</span><span class="n">process_search_service_self_tests</span><span class="p">(</span><span class="n">identifier</span><span class="p">)</span></div>

<div class="viewcode-block" id="cdn_service"><a class="viewcode-back" href="../../../api.admin.html#api.admin.routes.cdn_service">[docs]</a><span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s2">&quot;/admin/cdn_service/&lt;service_id&gt;&quot;</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;DELETE&quot;</span><span class="p">])</span>
<span class="nd">@returns_json_or_response_or_problem_detail</span>
<span class="nd">@requires_admin</span>
<span class="nd">@requires_csrf_token</span>
<span class="k">def</span> <span class="nf">cdn_service</span><span class="p">(</span><span class="n">service_id</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">app</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">admin_cdn_services_controller</span><span class="o">.</span><span class="n">process_delete</span><span class="p">(</span><span class="n">service_id</span><span class="p">)</span></div>

<div class="viewcode-block" id="search_services"><a class="viewcode-back" href="../../../api.admin.html#api.admin.routes.search_services">[docs]</a><span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s2">&quot;/admin/search_services&quot;</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;GET&quot;</span><span class="p">,</span> <span class="s2">&quot;POST&quot;</span><span class="p">])</span>
<span class="nd">@returns_json_or_response_or_problem_detail</span>
<span class="nd">@requires_admin</span>
<span class="nd">@requires_csrf_token</span>
<span class="k">def</span> <span class="nf">search_services</span><span class="p">():</span>
    <span class="k">return</span> <span class="n">app</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">admin_search_services_controller</span><span class="o">.</span><span class="n">process_services</span><span class="p">()</span></div>

<div class="viewcode-block" id="search_service"><a class="viewcode-back" href="../../../api.admin.html#api.admin.routes.search_service">[docs]</a><span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s2">&quot;/admin/search_service/&lt;service_id&gt;&quot;</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;DELETE&quot;</span><span class="p">])</span>
<span class="nd">@returns_json_or_response_or_problem_detail</span>
<span class="nd">@requires_admin</span>
<span class="nd">@requires_csrf_token</span>
<span class="k">def</span> <span class="nf">search_service</span><span class="p">(</span><span class="n">service_id</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">app</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">admin_search_services_controller</span><span class="o">.</span><span class="n">process_delete</span><span class="p">(</span><span class="n">service_id</span><span class="p">)</span></div>

<div class="viewcode-block" id="storage_services"><a class="viewcode-back" href="../../../api.admin.html#api.admin.routes.storage_services">[docs]</a><span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s2">&quot;/admin/storage_services&quot;</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;GET&quot;</span><span class="p">,</span> <span class="s2">&quot;POST&quot;</span><span class="p">])</span>
<span class="nd">@returns_json_or_response_or_problem_detail</span>
<span class="nd">@requires_admin</span>
<span class="nd">@requires_csrf_token</span>
<span class="k">def</span> <span class="nf">storage_services</span><span class="p">():</span>
    <span class="k">return</span> <span class="n">app</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">admin_storage_services_controller</span><span class="o">.</span><span class="n">process_services</span><span class="p">()</span></div>

<div class="viewcode-block" id="storage_service"><a class="viewcode-back" href="../../../api.admin.html#api.admin.routes.storage_service">[docs]</a><span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s2">&quot;/admin/storage_service/&lt;service_id&gt;&quot;</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;DELETE&quot;</span><span class="p">])</span>
<span class="nd">@returns_json_or_response_or_problem_detail</span>
<span class="nd">@requires_admin</span>
<span class="nd">@requires_csrf_token</span>
<span class="k">def</span> <span class="nf">storage_service</span><span class="p">(</span><span class="n">service_id</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">app</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">admin_storage_services_controller</span><span class="o">.</span><span class="n">process_delete</span><span class="p">(</span><span class="n">service_id</span><span class="p">)</span></div>

<div class="viewcode-block" id="catalog_services"><a class="viewcode-back" href="../../../api.admin.html#api.admin.routes.catalog_services">[docs]</a><span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s2">&quot;/admin/catalog_services&quot;</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;GET&#39;</span><span class="p">,</span> <span class="s1">&#39;POST&#39;</span><span class="p">])</span>
<span class="nd">@returns_json_or_response_or_problem_detail</span>
<span class="nd">@requires_admin</span>
<span class="nd">@requires_csrf_token</span>
<span class="k">def</span> <span class="nf">catalog_services</span><span class="p">():</span>
    <span class="k">return</span> <span class="n">app</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">admin_catalog_services_controller</span><span class="o">.</span><span class="n">process_catalog_services</span><span class="p">()</span></div>

<div class="viewcode-block" id="catalog_service"><a class="viewcode-back" href="../../../api.admin.html#api.admin.routes.catalog_service">[docs]</a><span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s2">&quot;/admin/catalog_service/&lt;service_id&gt;&quot;</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;DELETE&quot;</span><span class="p">])</span>
<span class="nd">@returns_json_or_response_or_problem_detail</span>
<span class="nd">@requires_admin</span>
<span class="nd">@requires_csrf_token</span>
<span class="k">def</span> <span class="nf">catalog_service</span><span class="p">(</span><span class="n">service_id</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">app</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">admin_catalog_services_controller</span><span class="o">.</span><span class="n">process_delete</span><span class="p">(</span><span class="n">service_id</span><span class="p">)</span></div>

<div class="viewcode-block" id="discovery_services"><a class="viewcode-back" href="../../../api.admin.html#api.admin.routes.discovery_services">[docs]</a><span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s2">&quot;/admin/discovery_services&quot;</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;GET&quot;</span><span class="p">,</span> <span class="s2">&quot;POST&quot;</span><span class="p">])</span>
<span class="nd">@returns_json_or_response_or_problem_detail</span>
<span class="nd">@requires_admin</span>
<span class="nd">@requires_csrf_token</span>
<span class="k">def</span> <span class="nf">discovery_services</span><span class="p">():</span>
    <span class="k">return</span> <span class="n">app</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">admin_discovery_services_controller</span><span class="o">.</span><span class="n">process_discovery_services</span><span class="p">()</span></div>

<div class="viewcode-block" id="discovery_service"><a class="viewcode-back" href="../../../api.admin.html#api.admin.routes.discovery_service">[docs]</a><span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s2">&quot;/admin/discovery_service/&lt;service_id&gt;&quot;</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;DELETE&quot;</span><span class="p">])</span>
<span class="nd">@returns_json_or_response_or_problem_detail</span>
<span class="nd">@requires_admin</span>
<span class="nd">@requires_csrf_token</span>
<span class="k">def</span> <span class="nf">discovery_service</span><span class="p">(</span><span class="n">service_id</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">app</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">admin_discovery_services_controller</span><span class="o">.</span><span class="n">process_delete</span><span class="p">(</span><span class="n">service_id</span><span class="p">)</span></div>

<div class="viewcode-block" id="sitewide_settings"><a class="viewcode-back" href="../../../api.admin.html#api.admin.routes.sitewide_settings">[docs]</a><span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s2">&quot;/admin/sitewide_settings&quot;</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;GET&#39;</span><span class="p">,</span> <span class="s1">&#39;POST&#39;</span><span class="p">])</span>
<span class="nd">@returns_json_or_response_or_problem_detail</span>
<span class="nd">@requires_admin</span>
<span class="nd">@requires_csrf_token</span>
<span class="k">def</span> <span class="nf">sitewide_settings</span><span class="p">():</span>
    <span class="k">if</span> <span class="n">flask</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">method</span> <span class="o">==</span> <span class="s1">&#39;GET&#39;</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">app</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">admin_sitewide_configuration_settings_controller</span><span class="o">.</span><span class="n">process_get</span><span class="p">()</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">app</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">admin_sitewide_configuration_settings_controller</span><span class="o">.</span><span class="n">process_post</span><span class="p">()</span></div>

<div class="viewcode-block" id="sitewide_setting"><a class="viewcode-back" href="../../../api.admin.html#api.admin.routes.sitewide_setting">[docs]</a><span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s2">&quot;/admin/sitewide_setting/&lt;key&gt;&quot;</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;DELETE&quot;</span><span class="p">])</span>
<span class="nd">@returns_json_or_response_or_problem_detail</span>
<span class="nd">@requires_admin</span>
<span class="nd">@requires_csrf_token</span>
<span class="k">def</span> <span class="nf">sitewide_setting</span><span class="p">(</span><span class="n">key</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">app</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">admin_sitewide_configuration_settings_controller</span><span class="o">.</span><span class="n">process_delete</span><span class="p">(</span><span class="n">key</span><span class="p">)</span></div>

<div class="viewcode-block" id="logging_services"><a class="viewcode-back" href="../../../api.admin.html#api.admin.routes.logging_services">[docs]</a><span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s2">&quot;/admin/logging_services&quot;</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;GET&#39;</span><span class="p">,</span> <span class="s1">&#39;POST&#39;</span><span class="p">])</span>
<span class="nd">@returns_json_or_response_or_problem_detail</span>
<span class="nd">@requires_admin</span>
<span class="nd">@requires_csrf_token</span>
<span class="k">def</span> <span class="nf">logging_services</span><span class="p">():</span>
    <span class="k">return</span> <span class="n">app</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">admin_logging_services_controller</span><span class="o">.</span><span class="n">process_services</span><span class="p">()</span></div>

<div class="viewcode-block" id="logging_service"><a class="viewcode-back" href="../../../api.admin.html#api.admin.routes.logging_service">[docs]</a><span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s2">&quot;/admin/logging_service/&lt;key&gt;&quot;</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;DELETE&quot;</span><span class="p">])</span>
<span class="nd">@returns_json_or_response_or_problem_detail</span>
<span class="nd">@requires_admin</span>
<span class="nd">@requires_csrf_token</span>
<span class="k">def</span> <span class="nf">logging_service</span><span class="p">(</span><span class="n">key</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">app</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">admin_logging_services_controller</span><span class="o">.</span><span class="n">process_delete</span><span class="p">(</span><span class="n">key</span><span class="p">)</span></div>

<div class="viewcode-block" id="discovery_service_library_registrations"><a class="viewcode-back" href="../../../api.admin.html#api.admin.routes.discovery_service_library_registrations">[docs]</a><span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s2">&quot;/admin/discovery_service_library_registrations&quot;</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;GET&#39;</span><span class="p">,</span> <span class="s1">&#39;POST&#39;</span><span class="p">])</span>
<span class="nd">@returns_json_or_response_or_problem_detail</span>
<span class="nd">@requires_admin</span>
<span class="nd">@requires_csrf_token</span>
<span class="k">def</span> <span class="nf">discovery_service_library_registrations</span><span class="p">():</span>
    <span class="k">return</span> <span class="n">app</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">admin_discovery_service_library_registrations_controller</span><span class="o">.</span><span class="n">process_discovery_service_library_registrations</span><span class="p">()</span></div>

<div class="viewcode-block" id="custom_lists"><a class="viewcode-back" href="../../../api.admin.html#api.admin.routes.custom_lists">[docs]</a><span class="nd">@library_route</span><span class="p">(</span><span class="s2">&quot;/admin/custom_lists&quot;</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;GET&quot;</span><span class="p">,</span> <span class="s2">&quot;POST&quot;</span><span class="p">])</span>
<span class="nd">@has_library</span>
<span class="nd">@returns_json_or_response_or_problem_detail</span>
<span class="nd">@requires_admin</span>
<span class="nd">@requires_csrf_token</span>
<span class="k">def</span> <span class="nf">custom_lists</span><span class="p">():</span>
    <span class="k">return</span> <span class="n">app</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">admin_custom_lists_controller</span><span class="o">.</span><span class="n">custom_lists</span><span class="p">()</span></div>

<div class="viewcode-block" id="custom_list"><a class="viewcode-back" href="../../../api.admin.html#api.admin.routes.custom_list">[docs]</a><span class="nd">@library_route</span><span class="p">(</span><span class="s2">&quot;/admin/custom_list/&lt;list_id&gt;&quot;</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;GET&quot;</span><span class="p">,</span> <span class="s2">&quot;POST&quot;</span><span class="p">,</span> <span class="s2">&quot;DELETE&quot;</span><span class="p">])</span>
<span class="nd">@has_library</span>
<span class="nd">@returns_json_or_response_or_problem_detail</span>
<span class="nd">@requires_admin</span>
<span class="nd">@requires_csrf_token</span>
<span class="k">def</span> <span class="nf">custom_list</span><span class="p">(</span><span class="n">list_id</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">app</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">admin_custom_lists_controller</span><span class="o">.</span><span class="n">custom_list</span><span class="p">(</span><span class="n">list_id</span><span class="p">)</span></div>

<div class="viewcode-block" id="lanes"><a class="viewcode-back" href="../../../api.admin.html#api.admin.routes.lanes">[docs]</a><span class="nd">@library_route</span><span class="p">(</span><span class="s2">&quot;/admin/lanes&quot;</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;GET&quot;</span><span class="p">,</span> <span class="s2">&quot;POST&quot;</span><span class="p">])</span>
<span class="nd">@has_library</span>
<span class="nd">@returns_json_or_response_or_problem_detail</span>
<span class="nd">@requires_admin</span>
<span class="nd">@requires_csrf_token</span>
<span class="k">def</span> <span class="nf">lanes</span><span class="p">():</span>
    <span class="k">return</span> <span class="n">app</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">admin_lanes_controller</span><span class="o">.</span><span class="n">lanes</span><span class="p">()</span></div>

<div class="viewcode-block" id="lane"><a class="viewcode-back" href="../../../api.admin.html#api.admin.routes.lane">[docs]</a><span class="nd">@library_route</span><span class="p">(</span><span class="s2">&quot;/admin/lane/&lt;lane_identifier&gt;&quot;</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;DELETE&quot;</span><span class="p">])</span>
<span class="nd">@has_library</span>
<span class="nd">@returns_json_or_response_or_problem_detail</span>
<span class="nd">@requires_admin</span>
<span class="nd">@requires_csrf_token</span>
<span class="k">def</span> <span class="nf">lane</span><span class="p">(</span><span class="n">lane_identifier</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">app</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">admin_lanes_controller</span><span class="o">.</span><span class="n">lane</span><span class="p">(</span><span class="n">lane_identifier</span><span class="p">)</span></div>

<div class="viewcode-block" id="lane_show"><a class="viewcode-back" href="../../../api.admin.html#api.admin.routes.lane_show">[docs]</a><span class="nd">@library_route</span><span class="p">(</span><span class="s2">&quot;/admin/lane/&lt;lane_identifier&gt;/show&quot;</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;POST&quot;</span><span class="p">])</span>
<span class="nd">@has_library</span>
<span class="nd">@returns_json_or_response_or_problem_detail</span>
<span class="nd">@requires_admin</span>
<span class="nd">@requires_csrf_token</span>
<span class="k">def</span> <span class="nf">lane_show</span><span class="p">(</span><span class="n">lane_identifier</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">app</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">admin_lanes_controller</span><span class="o">.</span><span class="n">show_lane</span><span class="p">(</span><span class="n">lane_identifier</span><span class="p">)</span></div>

<div class="viewcode-block" id="lane_hide"><a class="viewcode-back" href="../../../api.admin.html#api.admin.routes.lane_hide">[docs]</a><span class="nd">@library_route</span><span class="p">(</span><span class="s2">&quot;/admin/lane/&lt;lane_identifier&gt;/hide&quot;</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;POST&quot;</span><span class="p">])</span>
<span class="nd">@has_library</span>
<span class="nd">@returns_json_or_response_or_problem_detail</span>
<span class="nd">@requires_admin</span>
<span class="nd">@requires_csrf_token</span>
<span class="k">def</span> <span class="nf">lane_hide</span><span class="p">(</span><span class="n">lane_identifier</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">app</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">admin_lanes_controller</span><span class="o">.</span><span class="n">hide_lane</span><span class="p">(</span><span class="n">lane_identifier</span><span class="p">)</span></div>

<div class="viewcode-block" id="reset_lanes"><a class="viewcode-back" href="../../../api.admin.html#api.admin.routes.reset_lanes">[docs]</a><span class="nd">@library_route</span><span class="p">(</span><span class="s2">&quot;/admin/lanes/reset&quot;</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;POST&quot;</span><span class="p">])</span>
<span class="nd">@has_library</span>
<span class="nd">@returns_json_or_response_or_problem_detail</span>
<span class="nd">@requires_admin</span>
<span class="nd">@requires_csrf_token</span>
<span class="k">def</span> <span class="nf">reset_lanes</span><span class="p">():</span>
    <span class="k">return</span> <span class="n">app</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">admin_lanes_controller</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span></div>

<div class="viewcode-block" id="change_lane_order"><a class="viewcode-back" href="../../../api.admin.html#api.admin.routes.change_lane_order">[docs]</a><span class="nd">@library_route</span><span class="p">(</span><span class="s2">&quot;/admin/lanes/change_order&quot;</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;POST&quot;</span><span class="p">])</span>
<span class="nd">@has_library</span>
<span class="nd">@returns_json_or_response_or_problem_detail</span>
<span class="nd">@requires_admin</span>
<span class="nd">@requires_csrf_token</span>
<span class="k">def</span> <span class="nf">change_lane_order</span><span class="p">():</span>
    <span class="k">return</span> <span class="n">app</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">admin_lanes_controller</span><span class="o">.</span><span class="n">change_order</span><span class="p">()</span></div>

<div class="viewcode-block" id="diagnostics"><a class="viewcode-back" href="../../../api.admin.html#api.admin.routes.diagnostics">[docs]</a><span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s2">&quot;/admin/diagnostics&quot;</span><span class="p">)</span>
<span class="nd">@requires_admin</span>
<span class="nd">@returns_json_or_response_or_problem_detail</span>
<span class="k">def</span> <span class="nf">diagnostics</span><span class="p">():</span>
    <span class="k">return</span> <span class="n">app</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">timestamps_controller</span><span class="o">.</span><span class="n">diagnostics</span><span class="p">()</span></div>

<div class="viewcode-block" id="admin_sign_in_again"><a class="viewcode-back" href="../../../api.admin.html#api.admin.routes.admin_sign_in_again">[docs]</a><span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/admin/sign_in_again&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">admin_sign_in_again</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;Allows an  admin with expired credentials to sign back in</span>
<span class="sd">    from a new browser tab so they won&#39;t lose changes.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">admin</span> <span class="o">=</span> <span class="n">app</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">admin_sign_in_controller</span><span class="o">.</span><span class="n">authenticated_admin_from_request</span><span class="p">()</span>
    <span class="n">csrf_token</span> <span class="o">=</span> <span class="n">app</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">admin_sign_in_controller</span><span class="o">.</span><span class="n">get_csrf_token</span><span class="p">()</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">admin</span><span class="p">,</span> <span class="n">ProblemDetail</span><span class="p">)</span> <span class="ow">or</span> <span class="n">csrf_token</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">csrf_token</span><span class="p">,</span> <span class="n">ProblemDetail</span><span class="p">):</span>
        <span class="n">redirect_url</span> <span class="o">=</span> <span class="n">flask</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">url</span>
        <span class="k">return</span> <span class="n">redirect</span><span class="p">(</span><span class="n">app</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">url_for</span><span class="p">(</span><span class="s1">&#39;admin_sign_in&#39;</span><span class="p">,</span> <span class="n">redirect</span><span class="o">=</span><span class="n">redirect_url</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">flask</span><span class="o">.</span><span class="n">render_template_string</span><span class="p">(</span><span class="n">sign_in_again_template</span><span class="p">)</span></div>

<div class="viewcode-block" id="admin_view"><a class="viewcode-back" href="../../../api.admin.html#api.admin.routes.admin_view">[docs]</a><span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/admin/web/&#39;</span><span class="p">,</span> <span class="n">strict_slashes</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/admin/web/collection/&lt;path:collection&gt;/book/&lt;path:book&gt;&#39;</span><span class="p">)</span>
<span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/admin/web/collection/&lt;path:collection&gt;&#39;</span><span class="p">)</span>
<span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/admin/web/book/&lt;path:book&gt;&#39;</span><span class="p">)</span>
<span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/admin/web/&lt;path:etc&gt;&#39;</span><span class="p">)</span> <span class="c1"># catchall for single-page URLs</span>
<span class="k">def</span> <span class="nf">admin_view</span><span class="p">(</span><span class="n">collection</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">book</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">etc</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">app</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">admin_view_controller</span><span class="p">(</span><span class="n">collection</span><span class="p">,</span> <span class="n">book</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="n">etc</span><span class="p">)</span></div>

<div class="viewcode-block" id="admin_base"><a class="viewcode-back" href="../../../api.admin.html#api.admin.routes.admin_base">[docs]</a><span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/admin/&#39;</span><span class="p">,</span> <span class="n">strict_slashes</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">admin_base</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">redirect</span><span class="p">(</span><span class="n">app</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">url_for</span><span class="p">(</span><span class="s1">&#39;admin_view&#39;</span><span class="p">))</span></div>

<div class="viewcode-block" id="admin_js"><a class="viewcode-back" href="../../../api.admin.html#api.admin.routes.admin_js">[docs]</a><span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/admin/static/circulation-web.js&#39;</span><span class="p">)</span>
<span class="nd">@returns_problem_detail</span>
<span class="k">def</span> <span class="nf">admin_js</span><span class="p">():</span>
    <span class="n">directory</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="vm">__file__</span><span class="p">)),</span> <span class="s2">&quot;node_modules&quot;</span><span class="p">,</span> <span class="s2">&quot;simplified-circulation-web&quot;</span><span class="p">,</span> <span class="s2">&quot;dist&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">app</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">static_files</span><span class="o">.</span><span class="n">static_file</span><span class="p">(</span><span class="n">directory</span><span class="p">,</span> <span class="s2">&quot;circulation-web.js&quot;</span><span class="p">)</span></div>

<div class="viewcode-block" id="admin_css"><a class="viewcode-back" href="../../../api.admin.html#api.admin.routes.admin_css">[docs]</a><span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/admin/static/circulation-web.css&#39;</span><span class="p">)</span>
<span class="nd">@returns_problem_detail</span>
<span class="k">def</span> <span class="nf">admin_css</span><span class="p">():</span>
    <span class="n">directory</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="vm">__file__</span><span class="p">)),</span> <span class="s2">&quot;node_modules&quot;</span><span class="p">,</span> <span class="s2">&quot;simplified-circulation-web&quot;</span><span class="p">,</span> <span class="s2">&quot;dist&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">app</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">static_files</span><span class="o">.</span><span class="n">static_file</span><span class="p">(</span><span class="n">directory</span><span class="p">,</span> <span class="s2">&quot;circulation-web.css&quot;</span><span class="p">)</span></div>
</pre></div>

          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../../../index.html">Library Simplified Circulation Manager</a></h1>








<h3>Navigation</h3>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../modules.html">circulation</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../../index.html">Documentation overview</a><ul>
  <li><a href="../../index.html">Module code</a><ul>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2019, The New York Public Library, Astor, Lenox, and Tilden Foundations.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.8.5</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
    </div>

    

    
  </body>
</html>