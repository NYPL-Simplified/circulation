
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>core.classifier.ddc &#8212; Library Simplified Circulation Manager  documentation</title>
    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/alabaster.css" />
    <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
    <script src="../../../_static/jquery.js"></script>
    <script src="../../../_static/underscore.js"></script>
    <script src="../../../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../../../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
   
  <link rel="stylesheet" href="../../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <h1>Source code for core.classifier.ddc</h1><div class="highlight"><pre>
<span></span><span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">from</span> <span class="nn">.</span> <span class="kn">import</span> <span class="o">*</span>

<span class="n">base_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="vm">__file__</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">resource_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">base_dir</span><span class="p">,</span> <span class="s2">&quot;..&quot;</span><span class="p">,</span> <span class="s2">&quot;resources&quot;</span><span class="p">)</span>

<div class="viewcode-block" id="DeweyDecimalClassifier"><a class="viewcode-back" href="../../../core.classifier.html#core.classifier.ddc.DeweyDecimalClassifier">[docs]</a><span class="k">class</span> <span class="nc">DeweyDecimalClassifier</span><span class="p">(</span><span class="n">Classifier</span><span class="p">):</span>

    <span class="n">NAMES</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span>
        <span class="nb">open</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">resource_dir</span><span class="p">,</span> <span class="s2">&quot;dewey_1000.json&quot;</span><span class="p">)))</span>

    <span class="c1"># Add some other values commonly found in MARC records.</span>
    <span class="n">NAMES</span><span class="p">[</span><span class="s2">&quot;B&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;Biography&quot;</span>
    <span class="n">NAMES</span><span class="p">[</span><span class="s2">&quot;E&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;Juvenile Fiction&quot;</span>
    <span class="n">NAMES</span><span class="p">[</span><span class="s2">&quot;F&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;Fiction&quot;</span>
    <span class="n">NAMES</span><span class="p">[</span><span class="s2">&quot;FIC&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;Fiction&quot;</span>
    <span class="n">NAMES</span><span class="p">[</span><span class="s2">&quot;J&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;Juvenile Nonfiction&quot;</span>
    <span class="n">NAMES</span><span class="p">[</span><span class="s2">&quot;Y&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;Young Adult&quot;</span>

    <span class="n">FICTION</span> <span class="o">=</span> <span class="nb">set</span><span class="p">([</span><span class="mi">813</span><span class="p">,</span> <span class="mi">823</span><span class="p">,</span> <span class="mi">833</span><span class="p">,</span> <span class="mi">843</span><span class="p">,</span> <span class="mi">853</span><span class="p">,</span> <span class="mi">863</span><span class="p">,</span> <span class="mi">873</span><span class="p">,</span> <span class="mi">883</span><span class="p">,</span> <span class="s2">&quot;FIC&quot;</span><span class="p">,</span> <span class="s2">&quot;E&quot;</span><span class="p">,</span> <span class="s2">&quot;F&quot;</span><span class="p">])</span>
    <span class="n">NONFICTION</span> <span class="o">=</span> <span class="nb">set</span><span class="p">([</span><span class="s2">&quot;J&quot;</span><span class="p">,</span> <span class="s2">&quot;B&quot;</span><span class="p">])</span>

    <span class="c1"># 791.4572 and 791.4372 is for recordings. 741.59 is for comic</span>
    <span class="c1">#  adaptations? This is a good sign that a identifier should</span>
    <span class="c1">#  not be considered, actually.</span>
    <span class="c1"># 428.6 - Primers, Readers, i.e. collections of stories</span>
    <span class="c1"># 700 - Arts - full of distinctions</span>
    <span class="c1"># 700.8996073 - African American arts</span>
    <span class="c1"># 700.9 - Art history</span>
    <span class="c1"># 700.71 Arts education</span>
    <span class="c1"># 398.7 Jokes and jests</span>

    <span class="n">GENRES</span> <span class="o">=</span> <span class="p">{</span>
        <span class="n">African_History</span> <span class="p">:</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">960</span><span class="p">,</span> <span class="mi">970</span><span class="p">)),</span>
        <span class="n">Architecture</span> <span class="p">:</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">710</span><span class="p">,</span> <span class="mi">720</span><span class="p">))</span> <span class="o">+</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">720</span><span class="p">,</span> <span class="mi">730</span><span class="p">)),</span>
        <span class="n">Art</span> <span class="p">:</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">700</span><span class="p">,</span> <span class="mi">710</span><span class="p">))</span> <span class="o">+</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">730</span><span class="p">,</span> <span class="mi">770</span><span class="p">))</span> <span class="o">+</span> <span class="p">[</span><span class="mi">774</span><span class="p">,</span> <span class="mi">776</span><span class="p">],</span>
        <span class="n">Art_Criticism_Theory</span> <span class="p">:</span> <span class="p">[</span><span class="mi">701</span><span class="p">],</span>
        <span class="n">Asian_History</span> <span class="p">:</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">950</span><span class="p">,</span> <span class="mi">960</span><span class="p">))</span> <span class="o">+</span> <span class="p">[</span><span class="mi">995</span><span class="p">,</span> <span class="mi">996</span><span class="p">,</span> <span class="mi">997</span><span class="p">],</span>
        <span class="n">Biography_Memoir</span> <span class="p">:</span> <span class="p">[</span><span class="s2">&quot;B&quot;</span><span class="p">,</span> <span class="mi">920</span><span class="p">],</span>
        <span class="n">Economics</span> <span class="p">:</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">330</span><span class="p">,</span> <span class="mi">340</span><span class="p">)),</span>
        <span class="n">Christianity</span> <span class="p">:</span> <span class="p">[</span><span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">220</span><span class="p">,</span> <span class="mi">230</span><span class="p">))</span> <span class="o">+</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">230</span><span class="p">,</span> <span class="mi">290</span><span class="p">))],</span>
        <span class="n">Cooking</span> <span class="p">:</span> <span class="p">[</span><span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">640</span><span class="p">,</span> <span class="mi">642</span><span class="p">))],</span>
        <span class="n">Performing_Arts</span> <span class="p">:</span> <span class="p">[</span><span class="mi">790</span><span class="p">,</span> <span class="mi">791</span><span class="p">,</span> <span class="mi">792</span><span class="p">],</span>
        <span class="n">Entertainment</span> <span class="p">:</span> <span class="mi">790</span><span class="p">,</span>
        <span class="n">Games</span> <span class="p">:</span> <span class="p">[</span><span class="mi">793</span><span class="p">,</span> <span class="mi">794</span><span class="p">,</span> <span class="mi">795</span><span class="p">],</span>
        <span class="n">Drama</span> <span class="p">:</span> <span class="p">[</span><span class="mi">812</span><span class="p">,</span> <span class="mi">822</span><span class="p">,</span> <span class="mi">832</span><span class="p">,</span> <span class="mi">842</span><span class="p">,</span> <span class="mi">852</span><span class="p">,</span> <span class="mi">862</span><span class="p">,</span> <span class="mi">872</span><span class="p">,</span> <span class="mi">882</span><span class="p">],</span>
        <span class="n">Education</span> <span class="p">:</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">370</span><span class="p">,</span><span class="mi">380</span><span class="p">))</span> <span class="o">+</span> <span class="p">[</span><span class="mi">707</span><span class="p">],</span>
        <span class="n">European_History</span> <span class="p">:</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">940</span><span class="p">,</span> <span class="mi">950</span><span class="p">)),</span>
        <span class="n">Folklore</span> <span class="p">:</span> <span class="p">[</span><span class="mi">398</span><span class="p">],</span>
        <span class="n">History</span> <span class="p">:</span> <span class="p">[</span><span class="mi">900</span><span class="p">],</span>
        <span class="n">Islam</span> <span class="p">:</span> <span class="p">[</span><span class="mi">297</span><span class="p">],</span>
        <span class="n">Judaism</span> <span class="p">:</span> <span class="p">[</span><span class="mi">296</span><span class="p">],</span>
        <span class="n">Latin_American_History</span> <span class="p">:</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">981</span><span class="p">,</span> <span class="mi">990</span><span class="p">)),</span>
        <span class="n">Law</span> <span class="p">:</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">340</span><span class="p">,</span> <span class="mi">350</span><span class="p">))</span> <span class="o">+</span> <span class="p">[</span><span class="mi">364</span><span class="p">],</span>
        <span class="n">Management_Leadership</span> <span class="p">:</span> <span class="p">[</span><span class="mi">658</span><span class="p">],</span>
        <span class="n">Mathematics</span> <span class="p">:</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">510</span><span class="p">,</span> <span class="mi">520</span><span class="p">)),</span>
        <span class="n">Medical</span> <span class="p">:</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">610</span><span class="p">,</span> <span class="mi">620</span><span class="p">)),</span>
        <span class="n">Military_History</span> <span class="p">:</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">355</span><span class="p">,</span> <span class="mi">360</span><span class="p">)),</span>
        <span class="n">Music</span> <span class="p">:</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">780</span><span class="p">,</span> <span class="mi">789</span><span class="p">)),</span>
        <span class="n">Periodicals</span> <span class="p">:</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">50</span><span class="p">,</span> <span class="mi">60</span><span class="p">))</span> <span class="o">+</span> <span class="p">[</span><span class="mi">105</span><span class="p">,</span> <span class="mi">405</span><span class="p">,</span> <span class="mi">505</span><span class="p">,</span> <span class="mi">605</span><span class="p">,</span> <span class="mi">705</span><span class="p">,</span> <span class="mi">805</span><span class="p">,</span> <span class="mi">905</span><span class="p">],</span>
        <span class="n">Philosophy</span> <span class="p">:</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">160</span><span class="p">,</span> <span class="mi">200</span><span class="p">)),</span>
        <span class="n">Photography</span> <span class="p">:</span> <span class="p">[</span><span class="mi">771</span><span class="p">,</span> <span class="mi">772</span><span class="p">,</span> <span class="mi">773</span><span class="p">,</span> <span class="mi">775</span><span class="p">,</span> <span class="mi">778</span><span class="p">,</span> <span class="mi">779</span><span class="p">],</span>
        <span class="n">Poetry</span> <span class="p">:</span> <span class="p">[</span><span class="mi">811</span><span class="p">,</span> <span class="mi">821</span><span class="p">,</span> <span class="mi">831</span><span class="p">,</span> <span class="mi">841</span><span class="p">,</span> <span class="mi">851</span><span class="p">,</span> <span class="mi">861</span><span class="p">,</span> <span class="mi">871</span><span class="p">,</span> <span class="mi">874</span><span class="p">,</span> <span class="mi">881</span><span class="p">,</span> <span class="mi">884</span><span class="p">],</span>
        <span class="n">Political_Science</span> <span class="p">:</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">320</span><span class="p">,</span> <span class="mi">330</span><span class="p">))</span> <span class="o">+</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">351</span><span class="p">,</span> <span class="mi">355</span><span class="p">)),</span>
        <span class="n">Psychology</span> <span class="p">:</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">150</span><span class="p">,</span> <span class="mi">160</span><span class="p">)),</span>
        <span class="n">Foreign_Language_Study</span> <span class="p">:</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">430</span><span class="p">,</span><span class="mi">500</span><span class="p">)),</span>
        <span class="n">Reference_Study_Aids</span> <span class="p">:</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">))</span> <span class="o">+</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">30</span><span class="p">,</span> <span class="mi">40</span><span class="p">))</span> <span class="o">+</span> <span class="p">[</span><span class="mi">103</span><span class="p">,</span> <span class="mi">203</span><span class="p">,</span> <span class="mi">303</span><span class="p">,</span> <span class="mi">403</span><span class="p">,</span> <span class="mi">503</span><span class="p">,</span> <span class="mi">603</span><span class="p">,</span> <span class="mi">703</span><span class="p">,</span> <span class="mi">803</span><span class="p">,</span> <span class="mi">903</span><span class="p">]</span> <span class="o">+</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">410</span><span class="p">,</span> <span class="mi">430</span><span class="p">)),</span>
        <span class="n">Religion_Spirituality</span> <span class="p">:</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span> <span class="mi">220</span><span class="p">))</span> <span class="o">+</span> <span class="p">[</span><span class="mi">290</span><span class="p">,</span> <span class="mi">292</span><span class="p">,</span> <span class="mi">293</span><span class="p">,</span> <span class="mi">294</span><span class="p">,</span> <span class="mi">295</span><span class="p">,</span> <span class="mi">299</span><span class="p">],</span>
        <span class="n">Science</span> <span class="p">:</span> <span class="p">([</span><span class="mi">500</span><span class="p">,</span> <span class="mi">501</span><span class="p">,</span> <span class="mi">502</span><span class="p">]</span> <span class="o">+</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">506</span><span class="p">,</span> <span class="mi">510</span><span class="p">))</span> <span class="o">+</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">520</span><span class="p">,</span> <span class="mi">530</span><span class="p">))</span>
                   <span class="o">+</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">530</span><span class="p">,</span> <span class="mi">540</span><span class="p">))</span> <span class="o">+</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">540</span><span class="p">,</span> <span class="mi">550</span><span class="p">))</span> <span class="o">+</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">550</span><span class="p">,</span> <span class="mi">560</span><span class="p">))</span>
                   <span class="o">+</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">560</span><span class="p">,</span> <span class="mi">570</span><span class="p">))</span> <span class="o">+</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">570</span><span class="p">,</span> <span class="mi">580</span><span class="p">))</span> <span class="o">+</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">580</span><span class="p">,</span> <span class="mi">590</span><span class="p">))</span>
                   <span class="o">+</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">590</span><span class="p">,</span> <span class="mi">600</span><span class="p">))),</span>
        <span class="n">Social_Sciences</span> <span class="p">:</span> <span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">300</span><span class="p">,</span> <span class="mi">310</span><span class="p">))</span> <span class="o">+</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">360</span><span class="p">,</span> <span class="mi">364</span><span class="p">))</span> <span class="o">+</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">390</span><span class="p">,</span><span class="mi">397</span><span class="p">))</span> <span class="o">+</span> <span class="p">[</span><span class="mi">399</span><span class="p">]),</span>
        <span class="n">Sports</span> <span class="p">:</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">796</span><span class="p">,</span> <span class="mi">800</span><span class="p">)),</span>
        <span class="n">Technology</span> <span class="p">:</span> <span class="p">(</span>
            <span class="p">[</span><span class="mi">600</span><span class="p">,</span> <span class="mi">601</span><span class="p">,</span> <span class="mi">602</span><span class="p">,</span> <span class="mi">604</span><span class="p">]</span> <span class="o">+</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">606</span><span class="p">,</span> <span class="mi">610</span><span class="p">))</span> <span class="o">+</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">610</span><span class="p">,</span> <span class="mi">640</span><span class="p">))</span>
            <span class="o">+</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">660</span><span class="p">,</span> <span class="mi">670</span><span class="p">))</span> <span class="o">+</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">670</span><span class="p">,</span> <span class="mi">680</span><span class="p">))</span> <span class="o">+</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">681</span><span class="p">,</span> <span class="mi">690</span><span class="p">))</span> <span class="o">+</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">690</span><span class="p">,</span> <span class="mi">700</span><span class="p">))),</span>
        <span class="n">Travel</span> <span class="p">:</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">910</span><span class="p">,</span> <span class="mi">920</span><span class="p">)),</span>
        <span class="n">United_States_History</span> <span class="p">:</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">973</span><span class="p">,</span><span class="mi">980</span><span class="p">)),</span>
        <span class="n">World_History</span> <span class="p">:</span> <span class="p">[</span><span class="mi">909</span><span class="p">],</span>
    <span class="p">}</span>

<div class="viewcode-block" id="DeweyDecimalClassifier.name_for"><a class="viewcode-back" href="../../../core.classifier.html#core.classifier.ddc.DeweyDecimalClassifier.name_for">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">name_for</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">identifier</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">NAMES</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">identifier</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span></div>

<div class="viewcode-block" id="DeweyDecimalClassifier.scrub_identifier"><a class="viewcode-back" href="../../../core.classifier.html#core.classifier.ddc.DeweyDecimalClassifier.scrub_identifier">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">scrub_identifier</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">identifier</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">identifier</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">identifier</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">identifier</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
            <span class="n">identifier</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">identifier</span><span class="p">)</span><span class="o">.</span><span class="n">zfill</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>

        <span class="n">identifier</span> <span class="o">=</span> <span class="n">identifier</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">identifier</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;[&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="n">identifier</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s1">&#39;]&#39;</span><span class="p">):</span>
            <span class="c1"># This is just bad data.</span>
            <span class="n">identifier</span> <span class="o">=</span> <span class="n">identifier</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>

        <span class="k">if</span> <span class="n">identifier</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;C&#39;</span><span class="p">)</span> <span class="ow">or</span> <span class="n">identifier</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;A&#39;</span><span class="p">):</span>
            <span class="c1"># A work from our Canadian neighbors or our Australian</span>
            <span class="c1"># friends.</span>
            <span class="n">identifier</span> <span class="o">=</span> <span class="n">identifier</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>
        <span class="k">elif</span> <span class="n">identifier</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;NZ&quot;</span><span class="p">):</span>
            <span class="c1"># A work from the good people of New Zealand.</span>
            <span class="n">identifier</span> <span class="o">=</span> <span class="n">identifier</span><span class="p">[</span><span class="mi">2</span><span class="p">:]</span>

        <span class="c1"># Trim everything after the first period. We don&#39;t know how to</span>
        <span class="c1"># deal with it.</span>
        <span class="k">if</span> <span class="s1">&#39;.&#39;</span> <span class="ow">in</span> <span class="n">identifier</span><span class="p">:</span>
            <span class="n">identifier</span> <span class="o">=</span> <span class="n">identifier</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">identifier</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">identifier</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
            <span class="k">pass</span>

        <span class="c1"># For our purposes, Dewey Decimal numbers are identifiers</span>
        <span class="c1"># without names.</span>
        <span class="k">return</span> <span class="n">identifier</span><span class="p">,</span> <span class="kc">None</span></div>

<div class="viewcode-block" id="DeweyDecimalClassifier.is_fiction"><a class="viewcode-back" href="../../../core.classifier.html#core.classifier.ddc.DeweyDecimalClassifier.is_fiction">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">is_fiction</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">identifier</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Is the given DDC classification likely to contain fiction?&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">identifier</span> <span class="o">==</span> <span class="s1">&#39;Y&#39;</span><span class="p">:</span>
            <span class="c1"># Inconsistently used for young adult fiction and</span>
            <span class="c1"># young adult nonfiction.</span>
            <span class="k">return</span> <span class="kc">None</span>

        <span class="k">if</span> <span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">identifier</span><span class="p">,</span> <span class="p">(</span><span class="nb">bytes</span><span class="p">,</span> <span class="nb">str</span><span class="p">))</span> <span class="ow">and</span> <span class="p">(</span>
                <span class="n">identifier</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;Y&#39;</span><span class="p">)</span> <span class="ow">or</span> <span class="n">identifier</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;J&#39;</span><span class="p">))):</span>
            <span class="c1"># Young adult/children&#39;s literature--not necessarily fiction</span>
            <span class="n">identifier</span> <span class="o">=</span> <span class="n">identifier</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">identifier</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">identifier</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
                <span class="k">pass</span>

        <span class="k">if</span> <span class="n">identifier</span> <span class="ow">in</span> <span class="bp">cls</span><span class="o">.</span><span class="n">FICTION</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">if</span> <span class="n">identifier</span> <span class="ow">in</span> <span class="bp">cls</span><span class="o">.</span><span class="n">NONFICTION</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>

        <span class="c1"># TODO: Make NONFICTION more comprehensive and return None if</span>
        <span class="c1"># not in there, instead of always returning False. Or maybe</span>
        <span class="c1"># returning False is fine here, who knows.</span>
        <span class="k">return</span> <span class="kc">False</span></div>

<div class="viewcode-block" id="DeweyDecimalClassifier.audience"><a class="viewcode-back" href="../../../core.classifier.html#core.classifier.ddc.DeweyDecimalClassifier.audience">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">audience</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">identifier</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">identifier</span> <span class="o">==</span> <span class="s1">&#39;E&#39;</span><span class="p">:</span>
            <span class="c1"># Juvenile fiction</span>
            <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">AUDIENCE_CHILDREN</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">identifier</span><span class="p">,</span> <span class="p">(</span><span class="nb">bytes</span><span class="p">,</span> <span class="nb">str</span><span class="p">))</span> <span class="ow">and</span> <span class="n">identifier</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;J&#39;</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">AUDIENCE_CHILDREN</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">identifier</span><span class="p">,</span> <span class="p">(</span><span class="nb">bytes</span><span class="p">,</span> <span class="nb">str</span><span class="p">))</span> <span class="ow">and</span> <span class="n">identifier</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;Y&#39;</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">AUDIENCE_YOUNG_ADULT</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">identifier</span><span class="p">,</span> <span class="p">(</span><span class="nb">bytes</span><span class="p">,</span> <span class="nb">str</span><span class="p">))</span> <span class="ow">and</span> <span class="n">identifier</span><span class="o">==</span><span class="s1">&#39;FIC&#39;</span><span class="p">:</span>
            <span class="c1"># FIC is used for all types of fiction.</span>
            <span class="k">return</span> <span class="kc">None</span>

        <span class="c1"># Everything else is _supposedly_ for adults, but we don&#39;t</span>
        <span class="c1"># trust that assumption.</span>
        <span class="k">return</span> <span class="kc">None</span></div>

<div class="viewcode-block" id="DeweyDecimalClassifier.genre"><a class="viewcode-back" href="../../../core.classifier.html#core.classifier.ddc.DeweyDecimalClassifier.genre">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">genre</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">identifier</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">fiction</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">audience</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">genre</span><span class="p">,</span> <span class="n">identifiers</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="bp">cls</span><span class="o">.</span><span class="n">GENRES</span><span class="o">.</span><span class="n">items</span><span class="p">()):</span>
            <span class="k">if</span> <span class="n">identifier</span> <span class="o">==</span> <span class="n">identifiers</span> <span class="ow">or</span> <span class="p">(</span>
                    <span class="nb">isinstance</span><span class="p">(</span><span class="n">identifiers</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span>
                    <span class="ow">and</span> <span class="n">identifier</span> <span class="ow">in</span> <span class="n">identifiers</span><span class="p">):</span>
                <span class="k">return</span> <span class="n">genre</span>
        <span class="k">return</span> <span class="kc">None</span></div></div>

<span class="n">Classifier</span><span class="o">.</span><span class="n">classifiers</span><span class="p">[</span><span class="n">Classifier</span><span class="o">.</span><span class="n">DDC</span><span class="p">]</span> <span class="o">=</span> <span class="n">DeweyDecimalClassifier</span>
</pre></div>

          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../../../index.html">Library Simplified Circulation Manager</a></h1>








<h3>Navigation</h3>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../modules.html">circulation</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../../index.html">Documentation overview</a><ul>
  <li><a href="../../index.html">Module code</a><ul>
  <li><a href="../classifier.html">core.classifier</a><ul>
  </ul></li>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2022, The New York Public Library, Astor, Lenox, and Tilden Foundations.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 5.0.0b1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
    </div>

    

    
  </body>
</html>