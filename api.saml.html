
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>api.saml package &#8212; Library Simplified Circulation Manager  documentation</title>
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/language_data.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="api.saml.configuration package" href="api.saml.configuration.html" />
    <link rel="prev" title="api.proquest package" href="api.proquest.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="api-saml-package">
<h1>api.saml package<a class="headerlink" href="#api-saml-package" title="Permalink to this headline">¶</a></h1>
<div class="section" id="subpackages">
<h2>Subpackages<a class="headerlink" href="#subpackages" title="Permalink to this headline">¶</a></h2>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="api.saml.configuration.html">api.saml.configuration package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="api.saml.configuration.html#submodules">Submodules</a></li>
<li class="toctree-l2"><a class="reference internal" href="api.saml.configuration.html#module-api.saml.configuration.model">api.saml.configuration.model module</a></li>
<li class="toctree-l2"><a class="reference internal" href="api.saml.configuration.html#module-api.saml.configuration.validator">api.saml.configuration.validator module</a></li>
<li class="toctree-l2"><a class="reference internal" href="api.saml.configuration.html#module-api.saml.configuration">Module contents</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="api.saml.metadata.html">api.saml.metadata package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="api.saml.metadata.html#subpackages">Subpackages</a><ul>
<li class="toctree-l3"><a class="reference internal" href="api.saml.metadata.federations.html">api.saml.metadata.federations package</a><ul>
<li class="toctree-l4"><a class="reference internal" href="api.saml.metadata.federations.html#submodules">Submodules</a></li>
<li class="toctree-l4"><a class="reference internal" href="api.saml.metadata.federations.html#module-api.saml.metadata.federations.incommon">api.saml.metadata.federations.incommon module</a></li>
<li class="toctree-l4"><a class="reference internal" href="api.saml.metadata.federations.html#module-api.saml.metadata.federations.loader">api.saml.metadata.federations.loader module</a></li>
<li class="toctree-l4"><a class="reference internal" href="api.saml.metadata.federations.html#module-api.saml.metadata.federations.model">api.saml.metadata.federations.model module</a></li>
<li class="toctree-l4"><a class="reference internal" href="api.saml.metadata.federations.html#module-api.saml.metadata.federations.validator">api.saml.metadata.federations.validator module</a></li>
<li class="toctree-l4"><a class="reference internal" href="api.saml.metadata.federations.html#module-api.saml.metadata.federations">Module contents</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="api.saml.metadata.html#submodules">Submodules</a></li>
<li class="toctree-l2"><a class="reference internal" href="api.saml.metadata.html#module-api.saml.metadata.filter">api.saml.metadata.filter module</a></li>
<li class="toctree-l2"><a class="reference internal" href="api.saml.metadata.html#module-api.saml.metadata.model">api.saml.metadata.model module</a></li>
<li class="toctree-l2"><a class="reference internal" href="api.saml.metadata.html#module-api.saml.metadata.monitor">api.saml.metadata.monitor module</a></li>
<li class="toctree-l2"><a class="reference internal" href="api.saml.metadata.html#module-api.saml.metadata.parser">api.saml.metadata.parser module</a></li>
<li class="toctree-l2"><a class="reference internal" href="api.saml.metadata.html#module-api.saml.metadata">Module contents</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div class="section" id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-api.saml.auth">
<span id="api-saml-auth-module"></span><h2>api.saml.auth module<a class="headerlink" href="#module-api.saml.auth" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="api.saml.auth.SAMLAuthenticationManager">
<em class="property">class </em><code class="descclassname">api.saml.auth.</code><code class="descname">SAMLAuthenticationManager</code><span class="sig-paren">(</span><em>configuration</em>, <em>subject_parser</em>, <em>subject_filter</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/api/saml/auth.html#SAMLAuthenticationManager"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#api.saml.auth.SAMLAuthenticationManager" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Implements SAML authentication process.</p>
<dl class="attribute">
<dt id="api.saml.auth.SAMLAuthenticationManager.configuration">
<code class="descname">configuration</code><a class="headerlink" href="#api.saml.auth.SAMLAuthenticationManager.configuration" title="Permalink to this definition">¶</a></dt>
<dd><p>Return configuration object.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">Configuration object</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference internal" href="api.saml.configuration.html#api.saml.configuration.model.SAMLOneLoginConfiguration" title="api.saml.configuration.model.SAMLOneLoginConfiguration">SAMLOneLoginConfiguration</a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="api.saml.auth.SAMLAuthenticationManager.finish_authentication">
<code class="descname">finish_authentication</code><span class="sig-paren">(</span><em>db</em>, <em>idp_entity_id</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/api/saml/auth.html#SAMLAuthenticationManager.finish_authentication"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#api.saml.auth.SAMLAuthenticationManager.finish_authentication" title="Permalink to this definition">¶</a></dt>
<dd><p>Finish the SAML authentication workflow by validating AuthnResponse and extracting a SAML assertion from it.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>db</strong> (<em>sqlalchemy.orm.session.Session</em>) – Database session</li>
<li><strong>idp_entity_id</strong> (<em>string</em>) – IdP’s entityID</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">Subject object containing name ID and attributes in the case of a successful authentication
or ProblemDetail object otherwise</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">Union[<a class="reference internal" href="api.saml.metadata.html#api.saml.metadata.model.SAMLSubject" title="api.saml.metadata.model.SAMLSubject">api.saml.metadata.model.SAMLSubject</a>, <a class="reference internal" href="core.util.html#core.util.problem_detail.ProblemDetail" title="core.util.problem_detail.ProblemDetail">core.util.problem_detail.ProblemDetail</a>]</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="api.saml.auth.SAMLAuthenticationManager.start_authentication">
<code class="descname">start_authentication</code><span class="sig-paren">(</span><em>db</em>, <em>idp_entity_id</em>, <em>return_to_url</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/api/saml/auth.html#SAMLAuthenticationManager.start_authentication"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#api.saml.auth.SAMLAuthenticationManager.start_authentication" title="Permalink to this definition">¶</a></dt>
<dd><p>Start the SAML authentication workflow by sending a AuthnRequest to the IdP.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>db</strong> (<em>sqlalchemy.orm.session.Session</em>) – Database session</li>
<li><strong>idp_entity_id</strong> (<em>string</em>) – IdP’s entityID</li>
<li><strong>return_to_url</strong> (<em>string</em>) – URL which will the user agent will be redirected to after authentication</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">Redirection URL</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">string</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="api.saml.auth.SAMLAuthenticationManagerFactory">
<em class="property">class </em><code class="descclassname">api.saml.auth.</code><code class="descname">SAMLAuthenticationManagerFactory</code><a class="reference internal" href="_modules/api/saml/auth.html#SAMLAuthenticationManagerFactory"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#api.saml.auth.SAMLAuthenticationManagerFactory" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Responsible for creating SAMLAuthenticationManager instances</p>
<dl class="method">
<dt id="api.saml.auth.SAMLAuthenticationManagerFactory.create">
<code class="descname">create</code><span class="sig-paren">(</span><em>configuration</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/api/saml/auth.html#SAMLAuthenticationManagerFactory.create"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#api.saml.auth.SAMLAuthenticationManagerFactory.create" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a new instance of SAMLAuthenticationManager class</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>configuration</strong> (<a class="reference internal" href="api.saml.configuration.html#api.saml.configuration.model.SAMLConfiguration" title="api.saml.configuration.model.SAMLConfiguration"><em>api.saml.configuration.model.SAMLConfiguration</em></a>) – SAML authentication provider’s configuration</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">SAML authentication manager</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference internal" href="#api.saml.auth.SAMLAuthenticationManager" title="api.saml.auth.SAMLAuthenticationManager">SAMLAuthenticationManager</a></td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-api.saml.controller">
<span id="api-saml-controller-module"></span><h2>api.saml.controller module<a class="headerlink" href="#module-api.saml.controller" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="api.saml.controller.SAMLController">
<em class="property">class </em><code class="descclassname">api.saml.controller.</code><code class="descname">SAMLController</code><span class="sig-paren">(</span><em>circulation_manager</em>, <em>authenticator</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/api/saml/controller.html#SAMLController"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#api.saml.controller.SAMLController" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Controller used for handing SAML 2.0 authentication requests</p>
<dl class="attribute">
<dt id="api.saml.controller.SAMLController.ACCESS_TOKEN">
<code class="descname">ACCESS_TOKEN</code><em class="property"> = 'access_token'</em><a class="headerlink" href="#api.saml.controller.SAMLController.ACCESS_TOKEN" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="api.saml.controller.SAMLController.ERROR">
<code class="descname">ERROR</code><em class="property"> = 'error'</em><a class="headerlink" href="#api.saml.controller.SAMLController.ERROR" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="api.saml.controller.SAMLController.IDP_ENTITY_ID">
<code class="descname">IDP_ENTITY_ID</code><em class="property"> = 'idp_entity_id'</em><a class="headerlink" href="#api.saml.controller.SAMLController.IDP_ENTITY_ID" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="api.saml.controller.SAMLController.LIBRARY_SHORT_NAME">
<code class="descname">LIBRARY_SHORT_NAME</code><em class="property"> = 'library_short_name'</em><a class="headerlink" href="#api.saml.controller.SAMLController.LIBRARY_SHORT_NAME" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="api.saml.controller.SAMLController.PATRON_INFO">
<code class="descname">PATRON_INFO</code><em class="property"> = 'patron_info'</em><a class="headerlink" href="#api.saml.controller.SAMLController.PATRON_INFO" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="api.saml.controller.SAMLController.PROVIDER_NAME">
<code class="descname">PROVIDER_NAME</code><em class="property"> = 'provider'</em><a class="headerlink" href="#api.saml.controller.SAMLController.PROVIDER_NAME" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="api.saml.controller.SAMLController.REDIRECT_URI">
<code class="descname">REDIRECT_URI</code><em class="property"> = 'redirect_uri'</em><a class="headerlink" href="#api.saml.controller.SAMLController.REDIRECT_URI" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="api.saml.controller.SAMLController.RELAY_STATE">
<code class="descname">RELAY_STATE</code><em class="property"> = 'RelayState'</em><a class="headerlink" href="#api.saml.controller.SAMLController.RELAY_STATE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="api.saml.controller.SAMLController.saml_authentication_callback">
<code class="descname">saml_authentication_callback</code><span class="sig-paren">(</span><em>request</em>, <em>db</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/api/saml/controller.html#SAMLController.saml_authentication_callback"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#api.saml.controller.SAMLController.saml_authentication_callback" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a Patron object and a bearer token for a patron who has just
authenticated with one of our SAML IdPs</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>request</strong> (<em>Request</em>) – Flask request</li>
<li><strong>db</strong> (<em>sqlalchemy.orm.session.Session</em>) – Database session</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">Redirection response or a ProblemDetail if the response is not correct</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">Union[<a class="reference internal" href="core.util.html#core.util.flask_util.Response" title="core.util.flask_util.Response">Response</a>, <a class="reference internal" href="core.util.html#core.util.problem_detail.ProblemDetail" title="core.util.problem_detail.ProblemDetail">ProblemDetail</a>]</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="api.saml.controller.SAMLController.saml_authentication_redirect">
<code class="descname">saml_authentication_redirect</code><span class="sig-paren">(</span><em>params</em>, <em>db</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/api/saml/controller.html#SAMLController.saml_authentication_redirect"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#api.saml.controller.SAMLController.saml_authentication_redirect" title="Permalink to this definition">¶</a></dt>
<dd><p>Redirects an unauthenticated patron to the authentication URL of the
appropriate SAML IdP.
Over on that other site, the patron will authenticate and be
redirected back to the circulation manager, ending up in
saml_authentication_callback.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>params</strong> (<em>Dict</em>) – Query parameters</li>
<li><strong>db</strong> (<em>sqlalchemy.orm.session.Session</em>) – Database session</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">Redirection response</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><a class="reference internal" href="core.util.html#core.util.flask_util.Response" title="core.util.flask_util.Response">Response</a></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-api.saml.provider">
<span id="api-saml-provider-module"></span><h2>api.saml.provider module<a class="headerlink" href="#module-api.saml.provider" title="Permalink to this headline">¶</a></h2>
<dl class="attribute">
<dt id="api.saml.provider.AuthenticationProvider">
<code class="descclassname">api.saml.provider.</code><code class="descname">AuthenticationProvider</code><a class="headerlink" href="#api.saml.provider.AuthenticationProvider" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <a class="reference internal" href="#api.saml.provider.SAMLWebSSOAuthenticationProvider" title="api.saml.provider.SAMLWebSSOAuthenticationProvider"><code class="xref py py-class docutils literal notranslate"><span class="pre">api.saml.provider.SAMLWebSSOAuthenticationProvider</span></code></a></p>
</dd></dl>

<dl class="class">
<dt id="api.saml.provider.SAMLWebSSOAuthenticationProvider">
<em class="property">class </em><code class="descclassname">api.saml.provider.</code><code class="descname">SAMLWebSSOAuthenticationProvider</code><span class="sig-paren">(</span><em>library</em>, <em>integration</em>, <em>analytics=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/api/saml/provider.html#SAMLWebSSOAuthenticationProvider"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#api.saml.provider.SAMLWebSSOAuthenticationProvider" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="api.html#api.authenticator.BaseSAMLAuthenticationProvider" title="api.authenticator.BaseSAMLAuthenticationProvider"><code class="xref py py-class docutils literal notranslate"><span class="pre">api.authenticator.BaseSAMLAuthenticationProvider</span></code></a>, <a class="reference internal" href="core.model.html#core.model.configuration.HasExternalIntegration" title="core.model.configuration.HasExternalIntegration"><code class="xref py py-class docutils literal notranslate"><span class="pre">core.model.configuration.HasExternalIntegration</span></code></a></p>
<p>SAML authentication provider implementing Web Browser SSO profile using the following bindings:
- HTTP-Redirect Binding for requests
- HTTP-POST Binding for responses</p>
<dl class="attribute">
<dt id="api.saml.provider.SAMLWebSSOAuthenticationProvider.DESCRIPTION">
<code class="descname">DESCRIPTION</code><em class="property"> = l'SAML 2.0 authentication provider implementing the Web SSO profile using the following bindings:          HTTP-Redirect for requests and HTTP-POST for responses.'</em><a class="headerlink" href="#api.saml.provider.SAMLWebSSOAuthenticationProvider.DESCRIPTION" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="api.saml.provider.SAMLWebSSOAuthenticationProvider.NAME">
<code class="descname">NAME</code><em class="property"> = 'SAML 2.0 Web SSO'</em><a class="headerlink" href="#api.saml.provider.SAMLWebSSOAuthenticationProvider.NAME" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="api.saml.provider.SAMLWebSSOAuthenticationProvider.authenticate">
<code class="descname">authenticate</code><span class="sig-paren">(</span><em>db</em>, <em>header</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/api/saml/provider.html#SAMLWebSSOAuthenticationProvider.authenticate"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#api.saml.provider.SAMLWebSSOAuthenticationProvider.authenticate" title="Permalink to this definition">¶</a></dt>
<dd><p>Authenticate a patron based on a WWW-Authenticate header
(or equivalent).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">A Patron if one can be authenticated; a ProblemDetail if an
error occurs; None if the credentials are missing or wrong.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="api.saml.provider.SAMLWebSSOAuthenticationProvider.authenticated_patron">
<code class="descname">authenticated_patron</code><span class="sig-paren">(</span><em>db</em>, <em>token</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/api/saml/provider.html#SAMLWebSSOAuthenticationProvider.authenticated_patron"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#api.saml.provider.SAMLWebSSOAuthenticationProvider.authenticated_patron" title="Permalink to this definition">¶</a></dt>
<dd><p>Go from a token to an authenticated Patron.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>db</strong> (<em>sqlalchemy.orm.session.Session</em>) – Database session</li>
<li><strong>token</strong> (<em>Dict</em>) – The provider token extracted from the Authorization
header. This is _not_ the bearer token found in
the Authorization header; it’s the provider-specific token
embedded in that token.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">A Patron, if one can be authenticated. None, if the
credentials do not authenticate any particular patron. A
ProblemDetail if an error occurs.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">Union[<a class="reference internal" href="core.model.html#core.model.patron.Patron" title="core.model.patron.Patron">Patron</a>, <a class="reference internal" href="core.util.html#core.util.problem_detail.ProblemDetail" title="core.util.problem_detail.ProblemDetail">ProblemDetail</a>]</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="api.saml.provider.SAMLWebSSOAuthenticationProvider.get_authentication_manager">
<code class="descname">get_authentication_manager</code><span class="sig-paren">(</span><em>configuration</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/api/saml/provider.html#SAMLWebSSOAuthenticationProvider.get_authentication_manager"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#api.saml.provider.SAMLWebSSOAuthenticationProvider.get_authentication_manager" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns SAML authentication manager used by this provider</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>configuration</strong> (<a class="reference internal" href="api.saml.configuration.html#api.saml.configuration.model.SAMLConfiguration" title="api.saml.configuration.model.SAMLConfiguration"><em>api.saml.configuration.model.SAMLConfiguration</em></a>) – SAMLConfiguration object</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">SAML authentication manager used by this provider</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference internal" href="#api.saml.auth.SAMLAuthenticationManager" title="api.saml.auth.SAMLAuthenticationManager">SAMLAuthenticationManager</a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="api.saml.provider.SAMLWebSSOAuthenticationProvider.get_configuration">
<code class="descname">get_configuration</code><span class="sig-paren">(</span><em>db</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/api/saml/provider.html#SAMLWebSSOAuthenticationProvider.get_configuration"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#api.saml.provider.SAMLWebSSOAuthenticationProvider.get_configuration" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a SAMLConfiguration object.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>db</strong> (<em>sqlalchemy.orm.session.Session</em>) – Database session</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">SAMLConfiguration object</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference internal" href="api.saml.configuration.html#api.saml.configuration.model.SAMLConfiguration" title="api.saml.configuration.model.SAMLConfiguration">api.saml.configuration.model.SAMLConfiguration</a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="api.saml.provider.SAMLWebSSOAuthenticationProvider.remote_patron_lookup">
<code class="descname">remote_patron_lookup</code><span class="sig-paren">(</span><em>subject</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/api/saml/provider.html#SAMLWebSSOAuthenticationProvider.remote_patron_lookup"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#api.saml.provider.SAMLWebSSOAuthenticationProvider.remote_patron_lookup" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a PatronData object based on Subject object containing SAML Subject and AttributeStatement</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>subject</strong> (<em>api.saml.metadata.Subject</em>) – Subject object containing SAML Subject and AttributeStatement</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">PatronData object containing information about the authenticated SAML subject or
ProblemDetail object in the case of any errors</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">Union[<a class="reference internal" href="api.html#api.authenticator.PatronData" title="api.authenticator.PatronData">PatronData</a>, <a class="reference internal" href="core.util.html#core.util.problem_detail.ProblemDetail" title="core.util.problem_detail.ProblemDetail">ProblemDetail</a>]</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="api.saml.provider.SAMLWebSSOAuthenticationProvider.saml_callback">
<code class="descname">saml_callback</code><span class="sig-paren">(</span><em>db</em>, <em>subject</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/api/saml/provider.html#SAMLWebSSOAuthenticationProvider.saml_callback"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#api.saml.provider.SAMLWebSSOAuthenticationProvider.saml_callback" title="Permalink to this definition">¶</a></dt>
<dd><p>Verifies the SAML subject, generates a Bearer token in the case of successful authentication and returns it</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>db</strong> (<em>sqlalchemy.orm.session.Session</em>) – Database session</li>
<li><strong>subject</strong> (<em>api.saml.metadata.Subject</em>) – Subject object containing SAML Subject and AttributeStatement</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">A ProblemDetail if there’s a problem. Otherwise, a
3-tuple (Credential, Patron, PatronData). The Credential
contains the access token provided by the SAML provider. The
Patron object represents the authenticated Patron, and the
PatronData object includes information about the patron
obtained from the OAuth provider which cannot be stored in the
circulation manager’s database, but which should be passed on
to the client.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">Union[Tuple[<a class="reference internal" href="core.model.html#core.model.credential.Credential" title="core.model.credential.Credential">Credential</a>, <a class="reference internal" href="core.model.html#core.model.patron.Patron" title="core.model.patron.Patron">Patron</a>, <a class="reference internal" href="api.html#api.authenticator.PatronData" title="api.authenticator.PatronData">PatronData</a>], <a class="reference internal" href="core.util.html#core.util.problem_detail.ProblemDetail" title="core.util.problem_detail.ProblemDetail">ProblemDetail</a>]</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="api.saml.provider.validator_factory">
<code class="descclassname">api.saml.provider.</code><code class="descname">validator_factory</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/api/saml/provider.html#validator_factory"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#api.saml.provider.validator_factory" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="module-api.saml">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-api.saml" title="Permalink to this headline">¶</a></h2>
</div>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">Library Simplified Circulation Manager</a></h1>








<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="modules.html">circulation</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="api.html">api package</a></li>
<li class="toctree-l2"><a class="reference internal" href="app.html">app module</a></li>
<li class="toctree-l2"><a class="reference internal" href="core.html">core package</a></li>
<li class="toctree-l2"><a class="reference internal" href="scripts.html">scripts module</a></li>
</ul>
</li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
  <li><a href="modules.html">circulation</a><ul>
  <li><a href="api.html">api package</a><ul>
      <li>Previous: <a href="api.proquest.html" title="previous chapter">api.proquest package</a></li>
      <li>Next: <a href="api.saml.configuration.html" title="next chapter">api.saml.configuration package</a></li>
  </ul></li>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2022, The New York Public Library, Astor, Lenox, and Tilden Foundations.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.8.5</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="_sources/api.saml.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>